(function (exports) {
'use strict';

var commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};





function createCommonjsModule(fn, module) {
	return module = { exports: {} }, fn(module, module.exports), module.exports;
}

var tingle_min = createCommonjsModule(function (module, exports) {
!function(t,o){"function"==typeof undefined&&undefined.amd?undefined(o):module.exports=o();}(commonjsGlobal,function(){function t(t){var o={onClose:null,onOpen:null,beforeOpen:null,beforeClose:null,stickyFooter:!1,footer:!1,cssClass:[],closeLabel:"Close",closeMethods:["overlay","button","escape"]};this.opts=r({},o,t),this.init();}function o(){this.modalBoxFooter&&(this.modalBoxFooter.style.width=this.modalBox.clientWidth+"px",this.modalBoxFooter.style.left=this.modalBox.offsetLeft+"px");}function e(){this.modal=document.createElement("div"),this.modal.classList.add("tingle-modal"),0!==this.opts.closeMethods.length&&this.opts.closeMethods.indexOf("overlay")!==-1||this.modal.classList.add("tingle-modal--noOverlayClose"),this.modal.style.display="none",this.opts.cssClass.forEach(function(t){"string"==typeof t&&this.modal.classList.add(t);},this),this.opts.closeMethods.indexOf("button")!==-1&&(this.modalCloseBtn=document.createElement("button"),this.modalCloseBtn.classList.add("tingle-modal__close"),this.modalCloseBtnIcon=document.createElement("span"),this.modalCloseBtnIcon.classList.add("tingle-modal__closeIcon"),this.modalCloseBtnIcon.innerHTML="Ã—",this.modalCloseBtnLabel=document.createElement("span"),this.modalCloseBtnLabel.classList.add("tingle-modal__closeLabel"),this.modalCloseBtnLabel.innerHTML=this.opts.closeLabel,this.modalCloseBtn.appendChild(this.modalCloseBtnIcon),this.modalCloseBtn.appendChild(this.modalCloseBtnLabel)),this.modalBox=document.createElement("div"),this.modalBox.classList.add("tingle-modal-box"),this.modalBoxContent=document.createElement("div"),this.modalBoxContent.classList.add("tingle-modal-box__content"),this.modalBox.appendChild(this.modalBoxContent),this.opts.closeMethods.indexOf("button")!==-1&&this.modal.appendChild(this.modalCloseBtn),this.modal.appendChild(this.modalBox);}function s(){this.modalBoxFooter=document.createElement("div"),this.modalBoxFooter.classList.add("tingle-modal-box__footer"),this.modalBox.appendChild(this.modalBoxFooter);}function i(){this._events={clickCloseBtn:this.close.bind(this),clickOverlay:l.bind(this),resize:this.checkOverflow.bind(this),keyboardNav:n.bind(this)},this.opts.closeMethods.indexOf("button")!==-1&&this.modalCloseBtn.addEventListener("click",this._events.clickCloseBtn),this.modal.addEventListener("mousedown",this._events.clickOverlay),window.addEventListener("resize",this._events.resize),document.addEventListener("keydown",this._events.keyboardNav);}function n(t){this.opts.closeMethods.indexOf("escape")!==-1&&27===t.which&&this.isOpen()&&this.close();}function l(t){this.opts.closeMethods.indexOf("overlay")!==-1&&!d(t.target,"tingle-modal")&&t.clientX<this.modal.clientWidth&&this.close();}function d(t,o){for(;(t=t.parentElement)&&!t.classList.contains(o););return t}function a(){this.opts.closeMethods.indexOf("button")!==-1&&this.modalCloseBtn.removeEventListener("click",this._events.clickCloseBtn),this.modal.removeEventListener("mousedown",this._events.clickOverlay),window.removeEventListener("resize",this._events.resize),document.removeEventListener("keydown",this._events.keyboardNav);}function r(){for(var t=1;t<arguments.length;t++)for(var o in arguments[t])arguments[t].hasOwnProperty(o)&&(arguments[0][o]=arguments[t][o]);return arguments[0]}function h(){var t,o=document.createElement("tingle-test-transition"),e={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in e)if(void 0!==o.style[t])return e[t]}var c=h();return t.prototype.init=function(){this.modal||(e.call(this),i.call(this),document.body.insertBefore(this.modal,document.body.firstChild),this.opts.footer&&this.addFooter());},t.prototype.destroy=function(){null!==this.modal&&(a.call(this),this.modal.parentNode.removeChild(this.modal),this.modal=null);},t.prototype.open=function(){var t=this;"function"==typeof t.opts.beforeOpen&&t.opts.beforeOpen(),this.modal.style.removeProperty?this.modal.style.removeProperty("display"):this.modal.style.removeAttribute("display"),document.body.classList.add("tingle-enabled"),this.setStickyFooter(this.opts.stickyFooter),this.modal.classList.add("tingle-modal--visible"),c?this.modal.addEventListener(c,function o(){"function"==typeof t.opts.onOpen&&t.opts.onOpen.call(t),t.modal.removeEventListener(c,o,!1);},!1):"function"==typeof t.opts.onOpen&&t.opts.onOpen.call(t),this.checkOverflow();},t.prototype.isOpen=function(){return!!this.modal.classList.contains("tingle-modal--visible")},t.prototype.close=function(){if("function"==typeof this.opts.beforeClose){var t=this.opts.beforeClose.call(this);if(!t)return}document.body.classList.remove("tingle-enabled"),this.modal.classList.remove("tingle-modal--visible");var o=this;c?this.modal.addEventListener(c,function t(){o.modal.removeEventListener(c,t,!1),o.modal.style.display="none","function"==typeof o.opts.onClose&&o.opts.onClose.call(this);},!1):(o.modal.style.display="none","function"==typeof o.opts.onClose&&o.opts.onClose.call(this));},t.prototype.setContent=function(t){"string"==typeof t?this.modalBoxContent.innerHTML=t:(this.modalBoxContent.innerHTML="",this.modalBoxContent.appendChild(t));},t.prototype.getContent=function(){return this.modalBoxContent},t.prototype.addFooter=function(){s.call(this);},t.prototype.setFooterContent=function(t){this.modalBoxFooter.innerHTML=t;},t.prototype.getFooterContent=function(){return this.modalBoxFooter},t.prototype.setStickyFooter=function(t){this.isOverflow()||(t=!1),t?this.modalBox.contains(this.modalBoxFooter)&&(this.modalBox.removeChild(this.modalBoxFooter),this.modal.appendChild(this.modalBoxFooter),this.modalBoxFooter.classList.add("tingle-modal-box__footer--sticky"),o.call(this),this.modalBoxContent.style["padding-bottom"]=this.modalBoxFooter.clientHeight+20+"px"):this.modalBoxFooter&&(this.modalBox.contains(this.modalBoxFooter)||(this.modal.removeChild(this.modalBoxFooter),this.modalBox.appendChild(this.modalBoxFooter),this.modalBoxFooter.style.width="auto",this.modalBoxFooter.style.left="",this.modalBoxContent.style["padding-bottom"]="",this.modalBoxFooter.classList.remove("tingle-modal-box__footer--sticky")));},t.prototype.addFooterBtn=function(t,o,e){var s=document.createElement("button");return s.innerHTML=t,s.addEventListener("click",e),"string"==typeof o&&o.length&&o.split(" ").forEach(function(t){s.classList.add(t);}),this.modalBoxFooter.appendChild(s),s},t.prototype.resize=function(){console.warn("Resize is deprecated and will be removed in version 1.0");},t.prototype.isOverflow=function(){var t=window.innerHeight,o=this.modalBox.clientHeight;return o>=t},t.prototype.checkOverflow=function(){this.modal.classList.contains("tingle-modal--visible")&&(this.isOverflow()?this.modal.classList.add("tingle-modal--overflow"):this.modal.classList.remove("tingle-modal--overflow"),!this.isOverflow()&&this.opts.stickyFooter?this.setStickyFooter(!1):this.isOverflow()&&this.opts.stickyFooter&&(o.call(this),this.setStickyFooter(!0)));},{modal:t}});
});

var alertify = createCommonjsModule(function (module) {
/**
 * alertifyjs 1.11.0 http://alertifyjs.com
 * AlertifyJS is a javascript framework for developing pretty browser dialogs and notifications.
 * Copyright 2017 Mohammad Younes <Mohammad@alertifyjs.com> (http://alertifyjs.com) 
 * Licensed under GPL 3 <https://opensource.org/licenses/gpl-3.0>*/
( function ( window ) {
    'use strict';
    
    /**
     * Keys enum
     * @type {Object}
     */
    var keys = {
        ENTER: 13,
        ESC: 27,
        F1: 112,
        F12: 123,
        LEFT: 37,
        RIGHT: 39
    };
    /**
     * Default options 
     * @type {Object}
     */
    var defaults = {
        autoReset:true,
        basic:false,
        closable:true,
        closableByDimmer:true,
        frameless:false,
        maintainFocus:true, //global default not per instance, applies to all dialogs
        maximizable:true,
        modal:true,
        movable:true,
        moveBounded:false,
        overflow:true,
        padding: true,
        pinnable:true,
        pinned:true,
        preventBodyShift:false, //global default not per instance, applies to all dialogs
        resizable:true,
        startMaximized:false,
        transition:'pulse',
        notifier:{
            delay:5,
            position:'bottom-right',
            closeButton:false
        },
        glossary:{
            title:'AlertifyJS',
            ok: 'OK',
            cancel: 'Cancel',
            acccpt: 'Accept',
            deny: 'Deny',
            confirm: 'Confirm',
            decline: 'Decline',
            close: 'Close',
            maximize: 'Maximize',
            restore: 'Restore',
        },
        theme:{
            input:'ajs-input',
            ok:'ajs-ok',
            cancel:'ajs-cancel',
        }
    };
    
    //holds open dialogs instances
    var openDialogs = [];

    /**
     * [Helper]  Adds the specified class(es) to the element.
     *
     * @element {node}      The element
     * @className {string}  One or more space-separated classes to be added to the class attribute of the element.
     * 
     * @return {undefined}
     */
    function addClass(element,classNames){
        element.className += ' ' + classNames;
    }
    
    /**
     * [Helper]  Removes the specified class(es) from the element.
     *
     * @element {node}      The element
     * @className {string}  One or more space-separated classes to be removed from the class attribute of the element.
     * 
     * @return {undefined}
     */
    function removeClass(element, classNames) {
        var original = element.className.split(' ');
        var toBeRemoved = classNames.split(' ');
        for (var x = 0; x < toBeRemoved.length; x += 1) {
            var index = original.indexOf(toBeRemoved[x]);
            if (index > -1){
                original.splice(index,1);
            }
        }
        element.className = original.join(' ');
    }

    /**
     * [Helper]  Checks if the document is RTL
     *
     * @return {Boolean} True if the document is RTL, false otherwise.
     */
    function isRightToLeft(){
        return window.getComputedStyle(document.body).direction === 'rtl';
    }
    /**
     * [Helper]  Get the document current scrollTop
     *
     * @return {Number} current document scrollTop value
     */
    function getScrollTop(){
        return ((document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop);
    }

    /**
     * [Helper]  Get the document current scrollLeft
     *
     * @return {Number} current document scrollLeft value
     */
    function getScrollLeft(){
        return ((document.documentElement && document.documentElement.scrollLeft) || document.body.scrollLeft);
    }

    /**
    * Helper: clear contents
    *
    */
    function clearContents(element){
        while (element.lastChild) {
            element.removeChild(element.lastChild);
        }
    }
    /**
     * Extends a given prototype by merging properties from base into sub.
     *
     * @sub {Object} sub The prototype being overwritten.
     * @base {Object} base The prototype being written.
     *
     * @return {Object} The extended prototype.
     */
    function copy(src) {
        if(null === src){
            return src;
        }
        var cpy;
        if(Array.isArray(src)){
            cpy = [];
            for(var x=0;x<src.length;x+=1){
                cpy.push(copy(src[x]));
            }
            return cpy;
        }
      
        if(src instanceof Date){
            return new Date(src.getTime());
        }
      
        if(src instanceof RegExp){
            cpy = new RegExp(src.source);
            cpy.global = src.global;
            cpy.ignoreCase = src.ignoreCase;
            cpy.multiline = src.multiline;
            cpy.lastIndex = src.lastIndex;
            return cpy;
        }
        
        if(typeof src === 'object'){
            cpy = {};
            // copy dialog pototype over definition.
            for (var prop in src) {
                if (src.hasOwnProperty(prop)) {
                    cpy[prop] = copy(src[prop]);
                }
            }
            return cpy;
        }
        return src;
    }
    /**
      * Helper: destruct the dialog
      *
      */
    function destruct(instance, initialize){
        //delete the dom and it's references.
        var root = instance.elements.root;
        root.parentNode.removeChild(root);
        delete instance.elements;
        //copy back initial settings.
        instance.settings = copy(instance.__settings);
        //re-reference init function.
        instance.__init = initialize;
        //delete __internal variable to allow re-initialization.
        delete instance.__internal;
    }

    /**
     * Use a closure to return proper event listener method. Try to use
     * `addEventListener` by default but fallback to `attachEvent` for
     * unsupported browser. The closure simply ensures that the test doesn't
     * happen every time the method is called.
     *
     * @param    {Node}     el    Node element
     * @param    {String}   event Event type
     * @param    {Function} fn    Callback of event
     * @return   {Function}
     */
    var on = (function () {
        if (document.addEventListener) {
            return function (el, event, fn, useCapture) {
                el.addEventListener(event, fn, useCapture === true);
            };
        } else if (document.attachEvent) {
            return function (el, event, fn) {
                el.attachEvent('on' + event, fn);
            };
        }
    }());

    /**
     * Use a closure to return proper event listener method. Try to use
     * `removeEventListener` by default but fallback to `detachEvent` for
     * unsupported browser. The closure simply ensures that the test doesn't
     * happen every time the method is called.
     *
     * @param    {Node}     el    Node element
     * @param    {String}   event Event type
     * @param    {Function} fn    Callback of event
     * @return   {Function}
     */
    var off = (function () {
        if (document.removeEventListener) {
            return function (el, event, fn, useCapture) {
                el.removeEventListener(event, fn, useCapture === true);
            };
        } else if (document.detachEvent) {
            return function (el, event, fn) {
                el.detachEvent('on' + event, fn);
            };
        }
    }());

    /**
     * Prevent default event from firing
     *
     * @param  {Event} event Event object
     * @return {undefined}

    function prevent ( event ) {
        if ( event ) {
            if ( event.preventDefault ) {
                event.preventDefault();
            } else {
                event.returnValue = false;
            }
        }
    }
    */
    var transition = (function () {
        var t, type;
        var supported = false;
        var transitions = {
            'animation'        : 'animationend',
            'OAnimation'       : 'oAnimationEnd oanimationend',
            'msAnimation'      : 'MSAnimationEnd',
            'MozAnimation'     : 'animationend',
            'WebkitAnimation'  : 'webkitAnimationEnd'
        };

        for (t in transitions) {
            if (document.documentElement.style[t] !== undefined) {
                type = transitions[t];
                supported = true;
                break;
            }
        }

        return {
            type: type,
            supported: supported
        };
    }());

    /**
    * Creates event handler delegate that sends the instance as last argument.
    * 
    * @return {Function}    a function wrapper which sends the instance as last argument.
    */
    function delegate(context, method) {
        return function () {
            if (arguments.length > 0) {
                var args = [];
                for (var x = 0; x < arguments.length; x += 1) {
                    args.push(arguments[x]);
                }
                args.push(context);
                return method.apply(context, args);
            }
            return method.apply(context, [null, context]);
        };
    }
    /**
    * Helper for creating a dialog close event.
    * 
    * @return {object}
    */
    function createCloseEvent(index, button) {
        return {
            index: index,
            button: button,
            cancel: false
        };
    }
    /**
    * Helper for dispatching events.
    *
    * @param  {string} evenType The type of the event to disptach.
    * @param  {object} instance The dialog instance disptaching the event.
    *
    * @return   {any}   The result of the invoked function.
    */
    function dispatchEvent(eventType, instance) {
        if ( typeof instance.get(eventType) === 'function' ) {
            return instance.get(eventType).call(instance);
        }
    }


    /**
     * Super class for all dialogs
     *
     * @return {Object}		base dialog prototype
     */
    var dialog = (function () {
        var //holds the list of used keys.
            usedKeys = [],
            //dummy variable, used to trigger dom reflow.
            reflow = null,
            //condition for detecting safari
            isSafari = window.navigator.userAgent.indexOf('Safari') > -1 && window.navigator.userAgent.indexOf('Chrome') < 0,
            //dialog building blocks
            templates = {
                dimmer:'<div class="ajs-dimmer"></div>',
                /*tab index required to fire click event before body focus*/
                modal: '<div class="ajs-modal" tabindex="0"></div>',
                dialog: '<div class="ajs-dialog" tabindex="0"></div>',
                reset: '<button class="ajs-reset"></button>',
                commands: '<div class="ajs-commands"><button class="ajs-pin"></button><button class="ajs-maximize"></button><button class="ajs-close"></button></div>',
                header: '<div class="ajs-header"></div>',
                body: '<div class="ajs-body"></div>',
                content: '<div class="ajs-content"></div>',
                footer: '<div class="ajs-footer"></div>',
                buttons: { primary: '<div class="ajs-primary ajs-buttons"></div>', auxiliary: '<div class="ajs-auxiliary ajs-buttons"></div>' },
                button: '<button class="ajs-button"></button>',
                resizeHandle: '<div class="ajs-handle"></div>',
            },
            //common class names
            classes = {
                animationIn: 'ajs-in',
                animationOut: 'ajs-out',
                base: 'alertify',
                basic:'ajs-basic',
                capture: 'ajs-capture',
                closable:'ajs-closable',
                fixed: 'ajs-fixed',
                frameless:'ajs-frameless',
                hidden: 'ajs-hidden',
                maximize: 'ajs-maximize',
                maximized: 'ajs-maximized',
                maximizable:'ajs-maximizable',
                modeless: 'ajs-modeless',
                movable: 'ajs-movable',
                noSelection: 'ajs-no-selection',
                noOverflow: 'ajs-no-overflow',
                noPadding:'ajs-no-padding',
                pin:'ajs-pin',
                pinnable:'ajs-pinnable',
                prefix: 'ajs-',
                resizable: 'ajs-resizable',
                restore: 'ajs-restore',
                shake:'ajs-shake',
                unpinned:'ajs-unpinned',
            };

        /**
         * Helper: initializes the dialog instance
         * 
         * @return	{Number}	The total count of currently open modals.
         */
        function initialize(instance){
            
            if(!instance.__internal){

                //no need to expose init after this.
                delete instance.__init;
              
                //keep a copy of initial dialog settings
                if(!instance.__settings){
                    instance.__settings = copy(instance.settings);
                }
                //in case the script was included before body.
                //after first dialog gets initialized, it won't be null anymore!
                if(null === reflow){
                    // set tabindex attribute on body element this allows script to give it
                    // focus after the dialog is closed
                    document.body.setAttribute( 'tabindex', '0' );
                }

                //get dialog buttons/focus setup
                var setup;
                if(typeof instance.setup === 'function'){
                    setup = instance.setup();
                    setup.options = setup.options  || {};
                    setup.focus = setup.focus  || {};
                }else{
                    setup = {
                        buttons:[],
                        focus:{
                            element:null,
                            select:false
                        },
                        options:{
                        }
                    };
                }
                
                //initialize hooks object.
                if(typeof instance.hooks !== 'object'){
                    instance.hooks = {};
                }

                //copy buttons defintion
                var buttonsDefinition = [];
                if(Array.isArray(setup.buttons)){
                    for(var b=0;b<setup.buttons.length;b+=1){
                        var ref  = setup.buttons[b],
                            cpy = {};
                        for (var i in ref) {
                            if (ref.hasOwnProperty(i)) {
                                cpy[i] = ref[i];
                            }
                        }
                        buttonsDefinition.push(cpy);
                    }
                }

                var internal = instance.__internal = {
                    /**
                     * Flag holding the open state of the dialog
                     * 
                     * @type {Boolean}
                     */
                    isOpen:false,
                    /**
                     * Active element is the element that will receive focus after
                     * closing the dialog. It defaults as the body tag, but gets updated
                     * to the last focused element before the dialog was opened.
                     *
                     * @type {Node}
                     */
                    activeElement:document.body,
                    timerIn:undefined,
                    timerOut:undefined,
                    buttons: buttonsDefinition,
                    focus: setup.focus,
                    options: {
                        title: undefined,
                        modal: undefined,
                        basic:undefined,
                        frameless:undefined,
                        pinned: undefined,
                        movable: undefined,
                        moveBounded:undefined,
                        resizable: undefined,
                        autoReset: undefined,
                        closable: undefined,
                        closableByDimmer: undefined,
                        maximizable: undefined,
                        startMaximized: undefined,
                        pinnable: undefined,
                        transition: undefined,
                        padding:undefined,
                        overflow:undefined,
                        onshow:undefined,
                        onclosing:undefined,
                        onclose:undefined,
                        onfocus:undefined,
                        onmove:undefined,
                        onmoved:undefined,
                        onresize:undefined,
                        onresized:undefined,
                        onmaximize:undefined,
                        onmaximized:undefined,
                        onrestore:undefined,
                        onrestored:undefined
                    },
                    resetHandler:undefined,
                    beginMoveHandler:undefined,
                    beginResizeHandler:undefined,
                    bringToFrontHandler:undefined,
                    modalClickHandler:undefined,
                    buttonsClickHandler:undefined,
                    commandsClickHandler:undefined,
                    transitionInHandler:undefined,
                    transitionOutHandler:undefined,
                    destroy:undefined
                };

                var elements = {};
                //root node
                elements.root = document.createElement('div');
                
                elements.root.className = classes.base + ' ' + classes.hidden + ' ';

                elements.root.innerHTML = templates.dimmer + templates.modal;
                
                //dimmer
                elements.dimmer = elements.root.firstChild;

                //dialog
                elements.modal = elements.root.lastChild;
                elements.modal.innerHTML = templates.dialog;
                elements.dialog = elements.modal.firstChild;
                elements.dialog.innerHTML = templates.reset + templates.commands + templates.header + templates.body + templates.footer + templates.resizeHandle + templates.reset;

                //reset links
                elements.reset = [];
                elements.reset.push(elements.dialog.firstChild);
                elements.reset.push(elements.dialog.lastChild);
                
                //commands
                elements.commands = {};
                elements.commands.container = elements.reset[0].nextSibling;
                elements.commands.pin = elements.commands.container.firstChild;
                elements.commands.maximize = elements.commands.pin.nextSibling;
                elements.commands.close = elements.commands.maximize.nextSibling;
                
                //header
                elements.header = elements.commands.container.nextSibling;

                //body
                elements.body = elements.header.nextSibling;
                elements.body.innerHTML = templates.content;
                elements.content = elements.body.firstChild;

                //footer
                elements.footer = elements.body.nextSibling;
                elements.footer.innerHTML = templates.buttons.auxiliary + templates.buttons.primary;
                
                //resize handle
                elements.resizeHandle = elements.footer.nextSibling;

                //buttons
                elements.buttons = {};
                elements.buttons.auxiliary = elements.footer.firstChild;
                elements.buttons.primary = elements.buttons.auxiliary.nextSibling;
                elements.buttons.primary.innerHTML = templates.button;
                elements.buttonTemplate = elements.buttons.primary.firstChild;
                //remove button template
                elements.buttons.primary.removeChild(elements.buttonTemplate);
                               
                for(var x=0; x < instance.__internal.buttons.length; x+=1) {
                    var button = instance.__internal.buttons[x];
                    
                    // add to the list of used keys.
                    if(usedKeys.indexOf(button.key) < 0){
                        usedKeys.push(button.key);
                    }

                    button.element = elements.buttonTemplate.cloneNode();
                    button.element.innerHTML = button.text;
                    if(typeof button.className === 'string' &&  button.className !== ''){
                        addClass(button.element, button.className);
                    }
                    for(var key in button.attrs){
                        if(key !== 'className' && button.attrs.hasOwnProperty(key)){
                            button.element.setAttribute(key, button.attrs[key]);
                        }
                    }
                    if(button.scope === 'auxiliary'){
                        elements.buttons.auxiliary.appendChild(button.element);
                    }else{
                        elements.buttons.primary.appendChild(button.element);
                    }
                }
                //make elements pubic
                instance.elements = elements;
                
                //save event handlers delegates
                internal.resetHandler = delegate(instance, onReset);
                internal.beginMoveHandler = delegate(instance, beginMove);
                internal.beginResizeHandler = delegate(instance, beginResize);
                internal.bringToFrontHandler = delegate(instance, bringToFront);
                internal.modalClickHandler = delegate(instance, modalClickHandler);
                internal.buttonsClickHandler = delegate(instance, buttonsClickHandler);
                internal.commandsClickHandler = delegate(instance, commandsClickHandler);
                internal.transitionInHandler = delegate(instance, handleTransitionInEvent);
                internal.transitionOutHandler = delegate(instance, handleTransitionOutEvent);

                //settings
                for(var opKey in internal.options){
                    if(setup.options[opKey] !== undefined){
                        // if found in user options
                        instance.set(opKey, setup.options[opKey]);
                    }else if(alertify.defaults.hasOwnProperty(opKey)) {
                        // else if found in defaults options
                        instance.set(opKey, alertify.defaults[opKey]);
                    }else if(opKey === 'title' ) {
                        // else if title key, use alertify.defaults.glossary
                        instance.set(opKey, alertify.defaults.glossary[opKey]);
                    }
                }

                // allow dom customization
                if(typeof instance.build === 'function'){
                    instance.build();
                }
            }
            
            //add to the end of the DOM tree.
            document.body.appendChild(instance.elements.root);
        }

        /**
         * Helper: maintains scroll position
         *
         */
        var scrollX, scrollY;
        function saveScrollPosition(){
            scrollX = getScrollLeft();
            scrollY = getScrollTop();
        }
        function restoreScrollPosition(){
            window.scrollTo(scrollX, scrollY);
        }

        /**
         * Helper: adds/removes no-overflow class from body
         *
         */
        function ensureNoOverflow(){
            var requiresNoOverflow = 0;
            for(var x=0;x<openDialogs.length;x+=1){
                var instance = openDialogs[x];
                if(instance.isModal() || instance.isMaximized()){
                    requiresNoOverflow+=1;
                }
            }
            if(requiresNoOverflow === 0 && document.body.className.indexOf(classes.noOverflow) >= 0){
                //last open modal or last maximized one
                removeClass(document.body, classes.noOverflow);
                preventBodyShift(false);
            }else if(requiresNoOverflow > 0 && document.body.className.indexOf(classes.noOverflow) < 0){
                //first open modal or first maximized one
                preventBodyShift(true);
                addClass(document.body, classes.noOverflow);
            }
        }
        var top = '', topScroll = 0;
        /**
         * Helper: prevents body shift.
         *
         */
        function preventBodyShift(add){
            if(alertify.defaults.preventBodyShift && document.documentElement.scrollHeight > document.documentElement.clientHeight){
                if(add ){//&& openDialogs[openDialogs.length-1].elements.dialog.clientHeight <= document.documentElement.clientHeight){
                    topScroll = scrollY;
                    top = window.getComputedStyle(document.body).top;
                    addClass(document.body, classes.fixed);
                    document.body.style.top = -scrollY + 'px';
                } else {
                    scrollY = topScroll;
                    document.body.style.top = top;
                    removeClass(document.body, classes.fixed);
                    restoreScrollPosition();
                }
            }
        }
		
        /**
         * Sets the name of the transition used to show/hide the dialog
         * 
         * @param {Object} instance The dilog instance.
         *
         */
        function updateTransition(instance, value, oldValue){
            if(typeof oldValue === 'string'){
                removeClass(instance.elements.root,classes.prefix +  oldValue);
            }
            addClass(instance.elements.root, classes.prefix + value);
            reflow = instance.elements.root.offsetWidth;
        }
		
        /**
         * Toggles the dialog display mode
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */
        function updateDisplayMode(instance){
            if(instance.get('modal')){

                //make modal
                removeClass(instance.elements.root, classes.modeless);

                //only if open
                if(instance.isOpen()){
                    unbindModelessEvents(instance);

                    //in case a pinned modless dialog was made modal while open.
                    updateAbsPositionFix(instance);

                    ensureNoOverflow();
                }
            }else{
                //make modelss
                addClass(instance.elements.root, classes.modeless);

                //only if open
                if(instance.isOpen()){
                    bindModelessEvents(instance);

                    //in case pin/unpin was called while a modal is open
                    updateAbsPositionFix(instance);

                    ensureNoOverflow();
                }
            }
        }

        /**
         * Toggles the dialog basic view mode 
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */
        function updateBasicMode(instance){
            if (instance.get('basic')) {
                // add class
                addClass(instance.elements.root, classes.basic);
            } else {
                // remove class
                removeClass(instance.elements.root, classes.basic);
            }
        }

        /**
         * Toggles the dialog frameless view mode 
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */
        function updateFramelessMode(instance){
            if (instance.get('frameless')) {
                // add class
                addClass(instance.elements.root, classes.frameless);
            } else {
                // remove class
                removeClass(instance.elements.root, classes.frameless);
            }
        }
		
        /**
         * Helper: Brings the modeless dialog to front, attached to modeless dialogs.
         *
         * @param {Event} event Focus event
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */
        function bringToFront(event, instance){
            
            // Do not bring to front if preceeded by an open modal
            var index = openDialogs.indexOf(instance);
            for(var x=index+1;x<openDialogs.length;x+=1){
                if(openDialogs[x].isModal()){
                    return;
                }
            }
			
            // Bring to front by making it the last child.
            if(document.body.lastChild !== instance.elements.root){
                document.body.appendChild(instance.elements.root);
                //also make sure its at the end of the list
                openDialogs.splice(openDialogs.indexOf(instance),1);
                openDialogs.push(instance);
                setFocus(instance);
            }
			
            return false;
        }
		
        /**
         * Helper: reflects dialogs options updates
         *
         * @param {Object} instance The dilog instance.
         * @param {String} option The updated option name.
         *
         * @return	{undefined}	
         */
        function optionUpdated(instance, option, oldValue, newValue){
            switch(option){
            case 'title':
                instance.setHeader(newValue);
                break;
            case 'modal':
                updateDisplayMode(instance);
                break;
            case 'basic':
                updateBasicMode(instance);
                break;
            case 'frameless':
                updateFramelessMode(instance);
                break;
            case 'pinned':
                updatePinned(instance);
                break;
            case 'closable':
                updateClosable(instance);
                break;
            case 'maximizable':
                updateMaximizable(instance);
                break;
            case 'pinnable':
                updatePinnable(instance);
                break;
            case 'movable':
                updateMovable(instance);
                break;
            case 'resizable':
                updateResizable(instance);
                break;
            case 'transition':
                updateTransition(instance,newValue, oldValue);
                break;
            case 'padding':
                if(newValue){
                    removeClass(instance.elements.root, classes.noPadding);
                }else if(instance.elements.root.className.indexOf(classes.noPadding) < 0){
                    addClass(instance.elements.root, classes.noPadding);
                }
                break;
            case 'overflow':
                if(newValue){
                    removeClass(instance.elements.root, classes.noOverflow);
                }else if(instance.elements.root.className.indexOf(classes.noOverflow) < 0){
                    addClass(instance.elements.root, classes.noOverflow);
                }
                break;
            case 'transition':
                updateTransition(instance,newValue, oldValue);
                break;
            }

            // internal on option updated event
            if(typeof instance.hooks.onupdate === 'function'){
                instance.hooks.onupdate.call(instance, option, oldValue, newValue);
            }
        }
		
        /**
         * Helper: reflects dialogs options updates
         *
         * @param {Object} instance The dilog instance.
         * @param {Object} obj The object to set/get a value on/from.
         * @param {Function} callback The callback function to call if the key was found.
         * @param {String|Object} key A string specifying a propery name or a collection of key value pairs.
         * @param {Object} value Optional, the value associated with the key (in case it was a string).
         * @param {String} option The updated option name.
         *
         * @return	{Object} result object 
         *	The result objects has an 'op' property, indicating of this is a SET or GET operation.
         *		GET: 
         *		- found: a flag indicating if the key was found or not.
         *		- value: the property value.
         *		SET:
         *		- items: a list of key value pairs of the properties being set.
         *				each contains:
         *					- found: a flag indicating if the key was found or not.
         *					- key: the property key.
         *					- value: the property value.
         */
        function update(instance, obj, callback, key, value){
            var result = {op:undefined, items: [] };
            if(typeof value === 'undefined' && typeof key === 'string') {
                //get
                result.op = 'get';
                if(obj.hasOwnProperty(key)){
                    result.found = true;
                    result.value = obj[key];
                }else{
                    result.found = false;
                    result.value = undefined;
                }
            }
            else
            {
                var old;
                //set
                result.op = 'set';
                if(typeof key === 'object'){
                    //set multiple
                    var args = key;
                    for (var prop in args) {
                        if (obj.hasOwnProperty(prop)) {
                            if(obj[prop] !== args[prop]){
                                old = obj[prop];
                                obj[prop] = args[prop];
                                callback.call(instance,prop, old, args[prop]);
                            }
                            result.items.push({ 'key': prop, 'value': args[prop], 'found':true});
                        }else{
                            result.items.push({ 'key': prop, 'value': args[prop], 'found':false});
                        }
                    }
                } else if (typeof key === 'string'){
                    //set single
                    if (obj.hasOwnProperty(key)) {
                        if(obj[key] !== value){
                            old  = obj[key];
                            obj[key] = value;
                            callback.call(instance,key, old, value);
                        }
                        result.items.push({'key': key, 'value': value , 'found':true});

                    }else{
                        result.items.push({'key': key, 'value': value , 'found':false});
                    }
                } else {
                    //invalid params
                    throw new Error('args must be a string or object');
                }
            }
            return result;
        }


        /**
         * Triggers a close event.
         *
         * @param {Object} instance	The dilog instance.
         * 
         * @return {undefined}
         */
        function triggerClose(instance) {
            var found;
            triggerCallback(instance, function (button) {
                return found = (button.invokeOnClose === true);
            });
            //none of the buttons registered as onclose callback
            //close the dialog
            if (!found && instance.isOpen()) {
                instance.close();
            }
        }

        /**
         * Dialogs commands event handler, attached to the dialog commands element.
         *
         * @param {Event} event	DOM event object.
         * @param {Object} instance	The dilog instance.
         * 
         * @return {undefined}
         */
        function commandsClickHandler(event, instance) {
            var target = event.srcElement || event.target;
            switch (target) {
            case instance.elements.commands.pin:
                if (!instance.isPinned()) {
                    pin(instance);
                } else {
                    unpin(instance);
                }
                break;
            case instance.elements.commands.maximize:
                if (!instance.isMaximized()) {
                    maximize(instance);
                } else {
                    restore(instance);
                }
                break;
            case instance.elements.commands.close:
                triggerClose(instance);
                break;
            }
            return false;
        }

        /**
         * Helper: pins the modeless dialog.
         *
         * @param {Object} instance	The dialog instance.
         * 
         * @return {undefined}
         */
        function pin(instance) {
            //pin the dialog
            instance.set('pinned', true);
        }

        /**
         * Helper: unpins the modeless dialog.
         *
         * @param {Object} instance	The dilog instance.
         * 
         * @return {undefined}
         */
        function unpin(instance) {
            //unpin the dialog 
            instance.set('pinned', false);
        }


        /**
         * Helper: enlarges the dialog to fill the entire screen.
         *
         * @param {Object} instance	The dilog instance.
         * 
         * @return {undefined}
         */
        function maximize(instance) {
            // allow custom `onmaximize` method
            dispatchEvent('onmaximize', instance);
            //maximize the dialog 
            addClass(instance.elements.root, classes.maximized);
            if (instance.isOpen()) {
                ensureNoOverflow();
            }
            // allow custom `onmaximized` method
            dispatchEvent('onmaximized', instance);
        }

        /**
         * Helper: returns the dialog to its former size.
         *
         * @param {Object} instance	The dilog instance.
         * 
         * @return {undefined}
         */
        function restore(instance) {
            // allow custom `onrestore` method
            dispatchEvent('onrestore', instance);
            //maximize the dialog 
            removeClass(instance.elements.root, classes.maximized);
            if (instance.isOpen()) {
                ensureNoOverflow();
            }
            // allow custom `onrestored` method
            dispatchEvent('onrestored', instance);
        }

        /**
         * Show or hide the maximize box.
         *
         * @param {Object} instance The dilog instance.
         * @param {Boolean} on True to add the behavior, removes it otherwise.
         *
         * @return {undefined}
         */
        function updatePinnable(instance) {
            if (instance.get('pinnable')) {
                // add class
                addClass(instance.elements.root, classes.pinnable);
            } else {
                // remove class
                removeClass(instance.elements.root, classes.pinnable);
            }
        }

        /**
         * Helper: Fixes the absolutly positioned modal div position.
         *
         * @param {Object} instance The dialog instance.
         *
         * @return {undefined}
         */
        function addAbsPositionFix(instance) {
            var scrollLeft = getScrollLeft();
            instance.elements.modal.style.marginTop = getScrollTop() + 'px';
            instance.elements.modal.style.marginLeft = scrollLeft + 'px';
            instance.elements.modal.style.marginRight = (-scrollLeft) + 'px';
        }

        /**
         * Helper: Removes the absolutly positioned modal div position fix.
         *
         * @param {Object} instance The dialog instance.
         *
         * @return {undefined}
         */
        function removeAbsPositionFix(instance) {
            var marginTop = parseInt(instance.elements.modal.style.marginTop, 10);
            var marginLeft = parseInt(instance.elements.modal.style.marginLeft, 10);
            instance.elements.modal.style.marginTop = '';
            instance.elements.modal.style.marginLeft = '';
            instance.elements.modal.style.marginRight = '';

            if (instance.isOpen()) {
                var top = 0,
                    left = 0;
                if (instance.elements.dialog.style.top !== '') {
                    top = parseInt(instance.elements.dialog.style.top, 10);
                }
                instance.elements.dialog.style.top = (top + (marginTop - getScrollTop())) + 'px';

                if (instance.elements.dialog.style.left !== '') {
                    left = parseInt(instance.elements.dialog.style.left, 10);
                }
                instance.elements.dialog.style.left = (left + (marginLeft - getScrollLeft())) + 'px';
            }
        }
        /**
         * Helper: Adds/Removes the absolutly positioned modal div position fix based on its pinned setting.
         *
         * @param {Object} instance The dialog instance.
         *
         * @return {undefined}
         */
        function updateAbsPositionFix(instance) {
            // if modeless and unpinned add fix
            if (!instance.get('modal') && !instance.get('pinned')) {
                addAbsPositionFix(instance);
            } else {
                removeAbsPositionFix(instance);
            }
        }
        /**
         * Toggles the dialog position lock | modeless only.
         *
         * @param {Object} instance The dilog instance.
         * @param {Boolean} on True to make it modal, false otherwise.
         *
         * @return {undefined}
         */
        function updatePinned(instance) {
            if (instance.get('pinned')) {
                removeClass(instance.elements.root, classes.unpinned);
                if (instance.isOpen()) {
                    removeAbsPositionFix(instance);
                }
            } else {
                addClass(instance.elements.root, classes.unpinned);
                if (instance.isOpen() && !instance.isModal()) {
                    addAbsPositionFix(instance);
                }
            }
        }

        /**
         * Show or hide the maximize box.
         *
         * @param {Object} instance The dilog instance.
         * @param {Boolean} on True to add the behavior, removes it otherwise.
         *
         * @return {undefined}
         */
        function updateMaximizable(instance) {
            if (instance.get('maximizable')) {
                // add class
                addClass(instance.elements.root, classes.maximizable);
            } else {
                // remove class
                removeClass(instance.elements.root, classes.maximizable);
            }
        }

        /**
         * Show or hide the close box.
         *
         * @param {Object} instance The dilog instance.
         * @param {Boolean} on True to add the behavior, removes it otherwise.
         *
         * @return {undefined}
         */
        function updateClosable(instance) {
            if (instance.get('closable')) {
                // add class
                addClass(instance.elements.root, classes.closable);
                bindClosableEvents(instance);
            } else {
                // remove class
                removeClass(instance.elements.root, classes.closable);
                unbindClosableEvents(instance);
            }
        }

        // flag to cancel click event if already handled by end resize event (the mousedown, mousemove, mouseup sequence fires a click event.).
        var cancelClick = false;

        /**
         * Helper: closes the modal dialog when clicking the modal
         *
         * @param {Event} event	DOM event object.
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */
        function modalClickHandler(event, instance) {
            var target = event.srcElement || event.target;
            if (!cancelClick && target === instance.elements.modal && instance.get('closableByDimmer') === true) {
                triggerClose(instance);
            }
            cancelClick = false;
            return false;
        }

        // flag to cancel keyup event if already handled by click event (pressing Enter on a focusted button).
        var cancelKeyup = false;
        /** 
         * Helper: triggers a button callback
         *
         * @param {Object}		The dilog instance.
         * @param {Function}	Callback to check which button triggered the event.
         *
         * @return {undefined}
         */
        function triggerCallback(instance, check) {
            for (var idx = 0; idx < instance.__internal.buttons.length; idx += 1) {
                var button = instance.__internal.buttons[idx];
                if (!button.element.disabled && check(button)) {
                    var closeEvent = createCloseEvent(idx, button);
                    if (typeof instance.callback === 'function') {
                        instance.callback.apply(instance, [closeEvent]);
                    }
                    //close the dialog only if not canceled.
                    if (closeEvent.cancel === false) {
                        instance.close();
                    }
                    break;
                }
            }
        }

        /**
         * Clicks event handler, attached to the dialog footer.
         *
         * @param {Event}		DOM event object.
         * @param {Object}		The dilog instance.
         * 
         * @return {undefined}
         */
        function buttonsClickHandler(event, instance) {
            var target = event.srcElement || event.target;
            triggerCallback(instance, function (button) {
                // if this button caused the click, cancel keyup event
                return button.element === target && (cancelKeyup = true);
            });
        }

        /**
         * Keyup event handler, attached to the document.body
         *
         * @param {Event}		DOM event object.
         * @param {Object}		The dilog instance.
         * 
         * @return {undefined}
         */
        function keyupHandler(event) {
            //hitting enter while button has focus will trigger keyup too.
            //ignore if handled by clickHandler
            if (cancelKeyup) {
                cancelKeyup = false;
                return;
            }
            var instance = openDialogs[openDialogs.length - 1];
            var keyCode = event.keyCode;
            if (instance.__internal.buttons.length === 0 && keyCode === keys.ESC && instance.get('closable') === true) {
                triggerClose(instance);
                return false;
            }else if (usedKeys.indexOf(keyCode) > -1) {
                triggerCallback(instance, function (button) {
                    return button.key === keyCode;
                });
                return false;
            }
        }
        /**
        * Keydown event handler, attached to the document.body
        *
        * @param {Event}		DOM event object.
        * @param {Object}		The dilog instance.
        * 
        * @return {undefined}
        */
        function keydownHandler(event) {
            var instance = openDialogs[openDialogs.length - 1];
            var keyCode = event.keyCode;
            if (keyCode === keys.LEFT || keyCode === keys.RIGHT) {
                var buttons = instance.__internal.buttons;
                for (var x = 0; x < buttons.length; x += 1) {
                    if (document.activeElement === buttons[x].element) {
                        switch (keyCode) {
                        case keys.LEFT:
                            buttons[(x || buttons.length) - 1].element.focus();
                            return;
                        case keys.RIGHT:
                            buttons[(x + 1) % buttons.length].element.focus();
                            return;
                        }
                    }
                }
            }else if (keyCode < keys.F12 + 1 && keyCode > keys.F1 - 1 && usedKeys.indexOf(keyCode) > -1) {
                event.preventDefault();
                event.stopPropagation();
                triggerCallback(instance, function (button) {
                    return button.key === keyCode;
                });
                return false;
            }
        }


        /**
         * Sets focus to proper dialog element
         *
         * @param {Object} instance The dilog instance.
         * @param {Node} [resetTarget=undefined] DOM element to reset focus to.
         *
         * @return {undefined}
         */
        function setFocus(instance, resetTarget) {
            // reset target has already been determined.
            if (resetTarget) {
                resetTarget.focus();
            } else {
                // current instance focus settings
                var focus = instance.__internal.focus;
                // the focus element.
                var element = focus.element;

                switch (typeof focus.element) {
                // a number means a button index
                case 'number':
                    if (instance.__internal.buttons.length > focus.element) {
                        //in basic view, skip focusing the buttons.
                        if (instance.get('basic') === true) {
                            element = instance.elements.reset[0];
                        } else {
                            element = instance.__internal.buttons[focus.element].element;
                        }
                    }
                    break;
                // a string means querySelector to select from dialog body contents.
                case 'string':
                    element = instance.elements.body.querySelector(focus.element);
                    break;
                // a function should return the focus element.
                case 'function':
                    element = focus.element.call(instance);
                    break;
                }
                
                // if no focus element, default to first reset element.
                if ((typeof element === 'undefined' || element === null) && instance.__internal.buttons.length === 0) {
                    element = instance.elements.reset[0];
                }
                // focus
                if (element && element.focus) {
                    element.focus();
                    // if selectable
                    if (focus.select && element.select) {
                        element.select();
                    }
                }
            }
        }

        /**
         * Focus event handler, attached to document.body and dialogs own reset links.
         * handles the focus for modal dialogs only.
         *
         * @param {Event} event DOM focus event object.
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */
        function onReset(event, instance) {

            // should work on last modal if triggered from document.body 
            if (!instance) {
                for (var x = openDialogs.length - 1; x > -1; x -= 1) {
                    if (openDialogs[x].isModal()) {
                        instance = openDialogs[x];
                        break;
                    }
                }
            }
            // if modal
            if (instance && instance.isModal()) {
                // determine reset target to enable forward/backward tab cycle.
                var resetTarget, target = event.srcElement || event.target;
                var lastResetElement = target === instance.elements.reset[1] || (instance.__internal.buttons.length === 0 && target === document.body);

                // if last reset link, then go to maximize or close
                if (lastResetElement) {
                    if (instance.get('maximizable')) {
                        resetTarget = instance.elements.commands.maximize;
                    } else if (instance.get('closable')) {
                        resetTarget = instance.elements.commands.close;
                    }
                }
                // if no reset target found, try finding the best button
                if (resetTarget === undefined) {
                    if (typeof instance.__internal.focus.element === 'number') {
                        // button focus element, go to first available button
                        if (target === instance.elements.reset[0]) {
                            resetTarget = instance.elements.buttons.auxiliary.firstChild || instance.elements.buttons.primary.firstChild;
                        } else if (lastResetElement) {
                            //restart the cycle by going to first reset link
                            resetTarget = instance.elements.reset[0];
                        }
                    } else {
                        // will reach here when tapping backwards, so go to last child
                        // The focus element SHOULD NOT be a button (logically!).
                        if (target === instance.elements.reset[0]) {
                            resetTarget = instance.elements.buttons.primary.lastChild || instance.elements.buttons.auxiliary.lastChild;
                        }
                    }
                }
                // focus
                setFocus(instance, resetTarget);
            }
        }
        /**
         * Transition in transitionend event handler. 
         *
         * @param {Event}		TransitionEnd event object.
         * @param {Object}		The dilog instance.
         *
         * @return {undefined}
         */
        function handleTransitionInEvent(event, instance) {
            // clear the timer
            clearTimeout(instance.__internal.timerIn);

            // once transition is complete, set focus
            setFocus(instance);

            //restore scroll to prevent document jump
            restoreScrollPosition();

            // allow handling key up after transition ended.
            cancelKeyup = false;

            // allow custom `onfocus` method
            dispatchEvent('onfocus', instance);

            // unbind the event
            off(instance.elements.dialog, transition.type, instance.__internal.transitionInHandler);

            removeClass(instance.elements.root, classes.animationIn);
        }

        /**
         * Transition out transitionend event handler. 
         *
         * @param {Event}		TransitionEnd event object.
         * @param {Object}		The dilog instance.
         *
         * @return {undefined}
         */
        function handleTransitionOutEvent(event, instance) {
            // clear the timer
            clearTimeout(instance.__internal.timerOut);
            // unbind the event
            off(instance.elements.dialog, transition.type, instance.__internal.transitionOutHandler);

            // reset move updates
            resetMove(instance);
            // reset resize updates
            resetResize(instance);

            // restore if maximized
            if (instance.isMaximized() && !instance.get('startMaximized')) {
                restore(instance);
            }

            // return focus to the last active element
            if (alertify.defaults.maintainFocus && instance.__internal.activeElement) {
                instance.__internal.activeElement.focus();
                instance.__internal.activeElement = null;
            }
            
            //destory the instance
            if (typeof instance.__internal.destroy === 'function') {
                instance.__internal.destroy.apply(instance);
            }
        }
        /* Controls moving a dialog around */
        //holde the current moving instance
        var movable = null,
            //holds the current X offset when move starts
            offsetX = 0,
            //holds the current Y offset when move starts
            offsetY = 0,
            xProp = 'pageX',
            yProp = 'pageY',
            bounds = null,
            refreshTop = false,
            moveDelegate = null;

        /**
         * Helper: sets the element top/left coordinates
         *
         * @param {Event} event	DOM event object.
         * @param {Node} element The element being moved.
         * 
         * @return {undefined}
         */
        function moveElement(event, element) {
            var left = (event[xProp] - offsetX),
                top  = (event[yProp] - offsetY);

            if(refreshTop){
                top -= document.body.scrollTop;
            }
           
            element.style.left = left + 'px';
            element.style.top = top + 'px';
           
        }
        /**
         * Helper: sets the element top/left coordinates within screen bounds
         *
         * @param {Event} event	DOM event object.
         * @param {Node} element The element being moved.
         * 
         * @return {undefined}
         */
        function moveElementBounded(event, element) {
            var left = (event[xProp] - offsetX),
                top  = (event[yProp] - offsetY);

            if(refreshTop){
                top -= document.body.scrollTop;
            }
            
            element.style.left = Math.min(bounds.maxLeft, Math.max(bounds.minLeft, left)) + 'px';
            if(refreshTop){
                element.style.top = Math.min(bounds.maxTop, Math.max(bounds.minTop, top)) + 'px';
            }else{
                element.style.top = Math.max(bounds.minTop, top) + 'px';
            }
        }
            

        /**
         * Triggers the start of a move event, attached to the header element mouse down event.
         * Adds no-selection class to the body, disabling selection while moving.
         *
         * @param {Event} event	DOM event object.
         * @param {Object} instance The dilog instance.
         * 
         * @return {Boolean} false
         */
        function beginMove(event, instance) {
            if (resizable === null && !instance.isMaximized() && instance.get('movable')) {
                var eventSrc, left=0, top=0;
                if (event.type === 'touchstart') {
                    event.preventDefault();
                    eventSrc = event.targetTouches[0];
                    xProp = 'clientX';
                    yProp = 'clientY';
                } else if (event.button === 0) {
                    eventSrc = event;
                }

                if (eventSrc) {

                    var element = instance.elements.dialog;
                    addClass(element, classes.capture);

                    if (element.style.left) {
                        left = parseInt(element.style.left, 10);
                    }

                    if (element.style.top) {
                        top = parseInt(element.style.top, 10);
                    }
                    
                    offsetX = eventSrc[xProp] - left;
                    offsetY = eventSrc[yProp] - top;

                    if(instance.isModal()){
                        offsetY += instance.elements.modal.scrollTop;
                    }else if(instance.isPinned()){
                        offsetY -= document.body.scrollTop;
                    }
                    
                    if(instance.get('moveBounded')){
                        var current = element,
                            offsetLeft = -left,
                            offsetTop = -top;
                        
                        //calc offset
                        do {
                            offsetLeft += current.offsetLeft;
                            offsetTop += current.offsetTop;
                        } while (current = current.offsetParent);
                        
                        bounds = {
                            maxLeft : offsetLeft,
                            minLeft : -offsetLeft,
                            maxTop  : document.documentElement.clientHeight - element.clientHeight - offsetTop,
                            minTop  : -offsetTop
                        };
                        moveDelegate = moveElementBounded;
                    }else{
                        bounds = null;
                        moveDelegate = moveElement;
                    }
                    
                    // allow custom `onmove` method
                    dispatchEvent('onmove', instance);

                    refreshTop = !instance.isModal() && instance.isPinned();
                    movable = instance;
                    moveDelegate(eventSrc, element);
                    addClass(document.body, classes.noSelection);
                    return false;
                }
            }
        }

        /**
         * The actual move handler,  attached to document.body mousemove event.
         *
         * @param {Event} event	DOM event object.
         * 
         * @return {undefined}
         */
        function move(event) {
            if (movable) {
                var eventSrc;
                if (event.type === 'touchmove') {
                    event.preventDefault();
                    eventSrc = event.targetTouches[0];
                } else if (event.button === 0) {
                    eventSrc = event;
                }
                if (eventSrc) {
                    moveDelegate(eventSrc, movable.elements.dialog);
                }
            }
        }

        /**
         * Triggers the end of a move event,  attached to document.body mouseup event.
         * Removes no-selection class from document.body, allowing selection.
         *
         * @return {undefined}
         */
        function endMove() {
            if (movable) {
                var instance = movable;
                movable = bounds = null;
                removeClass(document.body, classes.noSelection);
                removeClass(instance.elements.dialog, classes.capture);
                // allow custom `onmoved` method
                dispatchEvent('onmoved', instance);
            }
        }

        /**
         * Resets any changes made by moving the element to its original state,
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */
        function resetMove(instance) {
            movable = null;
            var element = instance.elements.dialog;
            element.style.left = element.style.top = '';
        }

        /**
         * Updates the dialog move behavior.
         *
         * @param {Object} instance The dilog instance.
         * @param {Boolean} on True to add the behavior, removes it otherwise.
         *
         * @return {undefined}
         */
        function updateMovable(instance) {
            if (instance.get('movable')) {
                // add class
                addClass(instance.elements.root, classes.movable);
                if (instance.isOpen()) {
                    bindMovableEvents(instance);
                }
            } else {

                //reset
                resetMove(instance);
                // remove class
                removeClass(instance.elements.root, classes.movable);
                if (instance.isOpen()) {
                    unbindMovableEvents(instance);
                }
            }
        }

        /* Controls moving a dialog around */
        //holde the current instance being resized		
        var resizable = null,
            //holds the staring left offset when resize starts.
            startingLeft = Number.Nan,
            //holds the staring width when resize starts.
            startingWidth = 0,
            //holds the initial width when resized for the first time.
            minWidth = 0,
            //holds the offset of the resize handle.
            handleOffset = 0;

        /**
         * Helper: sets the element width/height and updates left coordinate if neccessary.
         *
         * @param {Event} event	DOM mousemove event object.
         * @param {Node} element The element being moved.
         * @param {Boolean} pinned A flag indicating if the element being resized is pinned to the screen.
         * 
         * @return {undefined}
         */
        function resizeElement(event, element, pageRelative) {

            //calculate offsets from 0,0
            var current = element;
            var offsetLeft = 0;
            var offsetTop = 0;
            do {
                offsetLeft += current.offsetLeft;
                offsetTop += current.offsetTop;
            } while (current = current.offsetParent);

            // determine X,Y coordinates.
            var X, Y;
            if (pageRelative === true) {
                X = event.pageX;
                Y = event.pageY;
            } else {
                X = event.clientX;
                Y = event.clientY;
            }
            // rtl handling
            var isRTL = isRightToLeft();
            if (isRTL) {
                // reverse X 
                X = document.body.offsetWidth - X;
                // if has a starting left, calculate offsetRight
                if (!isNaN(startingLeft)) {
                    offsetLeft = document.body.offsetWidth - offsetLeft - element.offsetWidth;
                }
            }

            // set width/height
            element.style.height = (Y - offsetTop + handleOffset) + 'px';
            element.style.width = (X - offsetLeft + handleOffset) + 'px';

            // if the element being resized has a starting left, maintain it.
            // the dialog is centered, divide by half the offset to maintain the margins.
            if (!isNaN(startingLeft)) {
                var diff = Math.abs(element.offsetWidth - startingWidth) * 0.5;
                if (isRTL) {
                    //negate the diff, why?
                    //when growing it should decrease left
                    //when shrinking it should increase left
                    diff *= -1;
                }
                if (element.offsetWidth > startingWidth) {
                    //growing
                    element.style.left = (startingLeft + diff) + 'px';
                } else if (element.offsetWidth >= minWidth) {
                    //shrinking
                    element.style.left = (startingLeft - diff) + 'px';
                }
            }
        }

        /**
         * Triggers the start of a resize event, attached to the resize handle element mouse down event.
         * Adds no-selection class to the body, disabling selection while moving.
         *
         * @param {Event} event	DOM event object.
         * @param {Object} instance The dilog instance.
         * 
         * @return {Boolean} false
         */
        function beginResize(event, instance) {
            if (!instance.isMaximized()) {
                var eventSrc;
                if (event.type === 'touchstart') {
                    event.preventDefault();
                    eventSrc = event.targetTouches[0];
                } else if (event.button === 0) {
                    eventSrc = event;
                }
                if (eventSrc) {
                    // allow custom `onresize` method
                    dispatchEvent('onresize', instance);
                    
                    resizable = instance;
                    handleOffset = instance.elements.resizeHandle.offsetHeight / 2;
                    var element = instance.elements.dialog;
                    addClass(element, classes.capture);
                    startingLeft = parseInt(element.style.left, 10);
                    element.style.height = element.offsetHeight + 'px';
                    element.style.minHeight = instance.elements.header.offsetHeight + instance.elements.footer.offsetHeight + 'px';
                    element.style.width = (startingWidth = element.offsetWidth) + 'px';

                    if (element.style.maxWidth !== 'none') {
                        element.style.minWidth = (minWidth = element.offsetWidth) + 'px';
                    }
                    element.style.maxWidth = 'none';
                    addClass(document.body, classes.noSelection);
                    return false;
                }
            }
        }

        /**
         * The actual resize handler,  attached to document.body mousemove event.
         *
         * @param {Event} event	DOM event object.
         * 
         * @return {undefined}
         */
        function resize(event) {
            if (resizable) {
                var eventSrc;
                if (event.type === 'touchmove') {
                    event.preventDefault();
                    eventSrc = event.targetTouches[0];
                } else if (event.button === 0) {
                    eventSrc = event;
                }
                if (eventSrc) {
                    resizeElement(eventSrc, resizable.elements.dialog, !resizable.get('modal') && !resizable.get('pinned'));
                }
            }
        }

        /**
         * Triggers the end of a resize event,  attached to document.body mouseup event.
         * Removes no-selection class from document.body, allowing selection.
         *
         * @return {undefined}
         */
        function endResize() {
            if (resizable) {
                var instance = resizable;
                resizable = null;
                removeClass(document.body, classes.noSelection);
                removeClass(instance.elements.dialog, classes.capture);
                cancelClick = true;
                // allow custom `onresized` method
                dispatchEvent('onresized', instance);
            }
        }

        /**
         * Resets any changes made by resizing the element to its original state.
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */
        function resetResize(instance) {
            resizable = null;
            var element = instance.elements.dialog;
            if (element.style.maxWidth === 'none') {
                //clear inline styles.
                element.style.maxWidth = element.style.minWidth = element.style.width = element.style.height = element.style.minHeight = element.style.left = '';
                //reset variables.
                startingLeft = Number.Nan;
                startingWidth = minWidth = handleOffset = 0;
            }
        }


        /**
         * Updates the dialog move behavior.
         *
         * @param {Object} instance The dilog instance.
         * @param {Boolean} on True to add the behavior, removes it otherwise.
         *
         * @return {undefined}
         */
        function updateResizable(instance) {
            if (instance.get('resizable')) {
                // add class
                addClass(instance.elements.root, classes.resizable);
                if (instance.isOpen()) {
                    bindResizableEvents(instance);
                }
            } else {
                //reset
                resetResize(instance);
                // remove class
                removeClass(instance.elements.root, classes.resizable);
                if (instance.isOpen()) {
                    unbindResizableEvents(instance);
                }
            }
        }

        /**
         * Reset move/resize on window resize.
         *
         * @param {Event} event	window resize event object.
         *
         * @return {undefined}
         */
        function windowResize(/*event*/) {
            for (var x = 0; x < openDialogs.length; x += 1) {
                var instance = openDialogs[x];
                if (instance.get('autoReset')) {
                    resetMove(instance);
                    resetResize(instance);
                }
            }
        }
        /**
         * Bind dialogs events
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */
        function bindEvents(instance) {
            // if first dialog, hook global handlers
            if (openDialogs.length === 1) {
                //global
                on(window, 'resize', windowResize);
                on(document.body, 'keyup', keyupHandler);
                on(document.body, 'keydown', keydownHandler);
                on(document.body, 'focus', onReset);

                //move
                on(document.documentElement, 'mousemove', move);
                on(document.documentElement, 'touchmove', move);
                on(document.documentElement, 'mouseup', endMove);
                on(document.documentElement, 'touchend', endMove);
                //resize
                on(document.documentElement, 'mousemove', resize);
                on(document.documentElement, 'touchmove', resize);
                on(document.documentElement, 'mouseup', endResize);
                on(document.documentElement, 'touchend', endResize);
            }

            // common events
            on(instance.elements.commands.container, 'click', instance.__internal.commandsClickHandler);
            on(instance.elements.footer, 'click', instance.__internal.buttonsClickHandler);
            on(instance.elements.reset[0], 'focus', instance.__internal.resetHandler);
            on(instance.elements.reset[1], 'focus', instance.__internal.resetHandler);

            //prevent handling key up when dialog is being opened by a key stroke.
            cancelKeyup = true;
            // hook in transition handler
            on(instance.elements.dialog, transition.type, instance.__internal.transitionInHandler);

            // modelss only events
            if (!instance.get('modal')) {
                bindModelessEvents(instance);
            }

            // resizable
            if (instance.get('resizable')) {
                bindResizableEvents(instance);
            }

            // movable
            if (instance.get('movable')) {
                bindMovableEvents(instance);
            }
        }

        /**
         * Unbind dialogs events
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */
        function unbindEvents(instance) {
            // if last dialog, remove global handlers
            if (openDialogs.length === 1) {
                //global
                off(window, 'resize', windowResize);
                off(document.body, 'keyup', keyupHandler);
                off(document.body, 'keydown', keydownHandler);
                off(document.body, 'focus', onReset);
                //move
                off(document.documentElement, 'mousemove', move);
                off(document.documentElement, 'mouseup', endMove);
                //resize
                off(document.documentElement, 'mousemove', resize);
                off(document.documentElement, 'mouseup', endResize);
            }

            // common events
            off(instance.elements.commands.container, 'click', instance.__internal.commandsClickHandler);
            off(instance.elements.footer, 'click', instance.__internal.buttonsClickHandler);
            off(instance.elements.reset[0], 'focus', instance.__internal.resetHandler);
            off(instance.elements.reset[1], 'focus', instance.__internal.resetHandler);

            // hook out transition handler
            on(instance.elements.dialog, transition.type, instance.__internal.transitionOutHandler);

            // modelss only events
            if (!instance.get('modal')) {
                unbindModelessEvents(instance);
            }

            // movable
            if (instance.get('movable')) {
                unbindMovableEvents(instance);
            }

            // resizable
            if (instance.get('resizable')) {
                unbindResizableEvents(instance);
            }

        }

        /**
         * Bind modeless specific events
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */
        function bindModelessEvents(instance) {
            on(instance.elements.dialog, 'focus', instance.__internal.bringToFrontHandler, true);
        }

        /**
         * Unbind modeless specific events
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */
        function unbindModelessEvents(instance) {
            off(instance.elements.dialog, 'focus', instance.__internal.bringToFrontHandler, true);
        }



        /**
         * Bind movable specific events
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */
        function bindMovableEvents(instance) {
            on(instance.elements.header, 'mousedown', instance.__internal.beginMoveHandler);
            on(instance.elements.header, 'touchstart', instance.__internal.beginMoveHandler);
        }

        /**
         * Unbind movable specific events
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */
        function unbindMovableEvents(instance) {
            off(instance.elements.header, 'mousedown', instance.__internal.beginMoveHandler);
            off(instance.elements.header, 'touchstart', instance.__internal.beginMoveHandler);
        }



        /**
         * Bind resizable specific events
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */
        function bindResizableEvents(instance) {
            on(instance.elements.resizeHandle, 'mousedown', instance.__internal.beginResizeHandler);
            on(instance.elements.resizeHandle, 'touchstart', instance.__internal.beginResizeHandler);
        }

        /**
         * Unbind resizable specific events
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */
        function unbindResizableEvents(instance) {
            off(instance.elements.resizeHandle, 'mousedown', instance.__internal.beginResizeHandler);
            off(instance.elements.resizeHandle, 'touchstart', instance.__internal.beginResizeHandler);
        }

        /**
         * Bind closable events
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */
        function bindClosableEvents(instance) {
            on(instance.elements.modal, 'click', instance.__internal.modalClickHandler);
        }

        /**
         * Unbind closable specific events
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */
        function unbindClosableEvents(instance) {
            off(instance.elements.modal, 'click', instance.__internal.modalClickHandler);
        }
        // dialog API
        return {
            __init:initialize,
            /**
             * Check if dialog is currently open
             *
             * @return {Boolean}
             */
            isOpen: function () {
                return this.__internal.isOpen;
            },
            isModal: function (){
                return this.elements.root.className.indexOf(classes.modeless) < 0;
            },
            isMaximized:function(){
                return this.elements.root.className.indexOf(classes.maximized) > -1;
            },
            isPinned:function(){
                return this.elements.root.className.indexOf(classes.unpinned) < 0;
            },
            maximize:function(){
                if(!this.isMaximized()){
                    maximize(this);
                }
                return this;
            },
            restore:function(){
                if(this.isMaximized()){
                    restore(this);
                }
                return this;
            },
            pin:function(){
                if(!this.isPinned()){
                    pin(this);
                }
                return this;
            },
            unpin:function(){
                if(this.isPinned()){
                    unpin(this);
                }
                return this;
            },
            bringToFront:function(){
                bringToFront(null, this);
                return this;
            },
            /**
             * Move the dialog to a specific x/y coordinates
             *
             * @param {Number} x    The new dialog x coordinate in pixels.
             * @param {Number} y    The new dialog y coordinate in pixels.
             *
             * @return {Object} The dialog instance.
             */
            moveTo:function(x,y){
                if(!isNaN(x) && !isNaN(y)){
                    // allow custom `onmove` method
                    dispatchEvent('onmove', this);
                    
                    var element = this.elements.dialog,
                        current = element,
                        offsetLeft = 0,
                        offsetTop = 0;
                    
                    //subtract existing left,top
                    if (element.style.left) {
                        offsetLeft -= parseInt(element.style.left, 10);
                    }
                    if (element.style.top) {
                        offsetTop -= parseInt(element.style.top, 10);
                    }
                    //calc offset
                    do {
                        offsetLeft += current.offsetLeft;
                        offsetTop += current.offsetTop;
                    } while (current = current.offsetParent);

                    //calc left, top
                    var left = (x - offsetLeft);
                    var top  = (y - offsetTop);

                    //// rtl handling
                    if (isRightToLeft()) {
                        left *= -1;
                    }

                    element.style.left = left + 'px';
                    element.style.top = top + 'px';
                    
                    // allow custom `onmoved` method
                    dispatchEvent('onmoved', this);
                }
                return this;
            },
            /**
             * Resize the dialog to a specific width/height (the dialog must be 'resizable').
             * The dialog can be resized to:
             *  A minimum width equal to the initial display width
             *  A minimum height equal to the sum of header/footer heights.
             *
             *
             * @param {Number or String} width    The new dialog width in pixels or in percent.
             * @param {Number or String} height   The new dialog height in pixels or in percent.
             *
             * @return {Object} The dialog instance.
             */
            resizeTo:function(width,height){
                var w = parseFloat(width),
                    h = parseFloat(height),
                    regex = /(\d*\.\d+|\d+)%/;

                if(!isNaN(w) && !isNaN(h) && this.get('resizable') === true){
                    
                    // allow custom `onresize` method
                    dispatchEvent('onresize', this);
                    
                    if(('' + width).match(regex)){
                        w = w / 100 * document.documentElement.clientWidth ;
                    }

                    if(('' + height).match(regex)){
                        h = h / 100 * document.documentElement.clientHeight;
                    }

                    var element = this.elements.dialog;
                    if (element.style.maxWidth !== 'none') {
                        element.style.minWidth = (minWidth = element.offsetWidth) + 'px';
                    }
                    element.style.maxWidth = 'none';
                    element.style.minHeight = this.elements.header.offsetHeight + this.elements.footer.offsetHeight + 'px';
                    element.style.width = w + 'px';
                    element.style.height = h + 'px';
                    
                    // allow custom `onresized` method
                    dispatchEvent('onresized', this);
                }
                return this;
            },
            /**
             * Gets or Sets dialog settings/options 
             *
             * @param {String|Object} key A string specifying a propery name or a collection of key/value pairs.
             * @param {Object} value Optional, the value associated with the key (in case it was a string).
             *
             * @return {undefined}
             */
            setting : function (key, value) {
                var self = this;
                var result = update(this, this.__internal.options, function(k,o,n){ optionUpdated(self,k,o,n); }, key, value);
                if(result.op === 'get'){
                    if(result.found){
                        return result.value;
                    }else if(typeof this.settings !== 'undefined'){
                        return update(this, this.settings, this.settingUpdated || function(){}, key, value).value;
                    }else{
                        return undefined;
                    }
                }else if(result.op === 'set'){
                    if(result.items.length > 0){
                        var callback = this.settingUpdated || function(){};
                        for(var x=0;x<result.items.length;x+=1){
                            var item = result.items[x];
                            if(!item.found && typeof this.settings !== 'undefined'){
                                update(this, this.settings, callback, item.key, item.value);
                            }
                        }
                    }
                    return this;
                }
            },
            /**
             * [Alias] Sets dialog settings/options 
             */
            set:function(key, value){
                this.setting(key,value);
                return this;
            },
            /**
             * [Alias] Gets dialog settings/options 
             */
            get:function(key){
                return this.setting(key);
            },
            /**
            * Sets dialog header
            * @content {string or element}
            *
            * @return {undefined}
            */
            setHeader:function(content){
                if(typeof content === 'string'){
                    clearContents(this.elements.header);
                    this.elements.header.innerHTML = content;
                }else if (content instanceof window.HTMLElement && this.elements.header.firstChild !== content){
                    clearContents(this.elements.header);
                    this.elements.header.appendChild(content);
                }
                return this;
            },
            /**
            * Sets dialog contents
            * @content {string or element}
            *
            * @return {undefined}
            */
            setContent:function(content){
                if(typeof content === 'string'){
                    clearContents(this.elements.content);
                    this.elements.content.innerHTML = content;
                }else if (content instanceof window.HTMLElement && this.elements.content.firstChild !== content){
                    clearContents(this.elements.content);
                    this.elements.content.appendChild(content);
                }
                return this;
            },
            /**
             * Show the dialog as modal
             *
             * @return {Object} the dialog instance.
             */
            showModal: function(className){
                return this.show(true, className);
            },
            /**
             * Show the dialog
             *
             * @return {Object} the dialog instance.
             */
            show: function (modal, className) {
                
                // ensure initialization
                initialize(this);

                if ( !this.__internal.isOpen ) {

                    // add to open dialogs
                    this.__internal.isOpen = true;
                    openDialogs.push(this);

                    // save last focused element
                    if(alertify.defaults.maintainFocus){
                        this.__internal.activeElement = document.activeElement;
                    }

                    //allow custom dom manipulation updates before showing the dialog.
                    if(typeof this.prepare === 'function'){
                        this.prepare();
                    }

                    bindEvents(this);

                    if(modal !== undefined){
                        this.set('modal', modal);
                    }

                    //save scroll to prevent document jump
                    saveScrollPosition();

                    ensureNoOverflow();

                    // allow custom dialog class on show
                    if(typeof className === 'string' && className !== ''){
                        this.__internal.className = className;
                        addClass(this.elements.root, className);
                    }

                    // maximize if start maximized
                    if ( this.get('startMaximized')) {
                        this.maximize();
                    }else if(this.isMaximized()){
                        restore(this);
                    }

                    updateAbsPositionFix(this);

                    removeClass(this.elements.root, classes.animationOut);
                    addClass(this.elements.root, classes.animationIn);

                    // set 1s fallback in case transition event doesn't fire
                    clearTimeout( this.__internal.timerIn);
                    this.__internal.timerIn = setTimeout( this.__internal.transitionInHandler, transition.supported ? 1000 : 100 );

                    if(isSafari){
                        // force desktop safari reflow
                        var root = this.elements.root;
                        root.style.display  = 'none';
                        setTimeout(function(){root.style.display  = 'block';}, 0);
                    }

                    //reflow
                    reflow = this.elements.root.offsetWidth;
                  
                    // show dialog
                    removeClass(this.elements.root, classes.hidden);

                    // internal on show event
                    if(typeof this.hooks.onshow === 'function'){
                        this.hooks.onshow.call(this);
                    }

                    // allow custom `onshow` method
                    dispatchEvent('onshow', this);

                }else{
                    // reset move updates
                    resetMove(this);
                    // reset resize updates
                    resetResize(this);
                    // shake the dialog to indicate its already open
                    addClass(this.elements.dialog, classes.shake);
                    var self = this;
                    setTimeout(function(){
                        removeClass(self.elements.dialog, classes.shake);
                    },200);
                }
                return this;
            },
            /**
             * Close the dialog
             *
             * @return {Object} The dialog instance
             */
            close: function () {
                if (this.__internal.isOpen ) {
                    // custom `onclosing` event
                    if(dispatchEvent('onclosing', this) !== false){

                        unbindEvents(this);

                        removeClass(this.elements.root, classes.animationIn);
                        addClass(this.elements.root, classes.animationOut);

                        // set 1s fallback in case transition event doesn't fire
                        clearTimeout( this.__internal.timerOut );
                        this.__internal.timerOut = setTimeout( this.__internal.transitionOutHandler, transition.supported ? 1000 : 100 );
                        // hide dialog
                        addClass(this.elements.root, classes.hidden);
                        //reflow
                        reflow = this.elements.modal.offsetWidth;

                        // remove custom dialog class on hide
                        if (typeof this.__internal.className !== 'undefined' && this.__internal.className !== '') {
                            removeClass(this.elements.root, this.__internal.className);
                        }

                        // internal on close event
                        if(typeof this.hooks.onclose === 'function'){
                            this.hooks.onclose.call(this);
                        }

                        // allow custom `onclose` method
                        dispatchEvent('onclose', this);

                        //remove from open dialogs
                        openDialogs.splice(openDialogs.indexOf(this),1);
                        this.__internal.isOpen = false;

                        ensureNoOverflow();
                    }

                }
                return this;
            },
            /**
             * Close all open dialogs except this.
             *
             * @return {undefined}
             */
            closeOthers:function(){
                alertify.closeAll(this);
                return this;
            },
            /**
             * Destroys this dialog instance
             *
             * @return {undefined}
             */
            destroy:function(){
                if (this.__internal.isOpen ) {
                    //mark dialog for destruction, this will be called on tranistionOut event.
                    this.__internal.destroy = function(){
                        destruct(this, initialize);
                    };
                    //close the dialog to unbind all events.
                    this.close();
                }else{
                    destruct(this, initialize);
                }
                return this;
            },
        };
	} () );
    var notifier = (function () {
        var reflow,
            element,
            openInstances = [],
            classes = {
                base: 'alertify-notifier',
                message: 'ajs-message',
                top: 'ajs-top',
                right: 'ajs-right',
                bottom: 'ajs-bottom',
                left: 'ajs-left',
                center: 'ajs-center',
                visible: 'ajs-visible',
                hidden: 'ajs-hidden',
                close: 'ajs-close'
            };
        /**
         * Helper: initializes the notifier instance
         *
         */
        function initialize(instance) {

            if (!instance.__internal) {
                instance.__internal = {
                    position: alertify.defaults.notifier.position,
                    delay: alertify.defaults.notifier.delay,
                };

                element = document.createElement('DIV');

                updatePosition(instance);
            }

            //add to DOM tree.
            if (element.parentNode !== document.body) {
                document.body.appendChild(element);
            }
        }

        function pushInstance(instance) {
            instance.__internal.pushed = true;
            openInstances.push(instance);
        }
        function popInstance(instance) {
            openInstances.splice(openInstances.indexOf(instance), 1);
            instance.__internal.pushed = false;
        }
        /**
         * Helper: update the notifier instance position
         *
         */
        function updatePosition(instance) {
            element.className = classes.base;
            switch (instance.__internal.position) {
            case 'top-right':
                addClass(element, classes.top + ' ' + classes.right);
                break;
            case 'top-left':
                addClass(element, classes.top + ' ' + classes.left);
                break;
            case 'top-center':
                addClass(element, classes.top + ' ' + classes.center);
                break;
            case 'bottom-left':
                addClass(element, classes.bottom + ' ' + classes.left);
                break;
            case 'bottom-center':
                addClass(element, classes.bottom + ' ' + classes.center);
                break;

            default:
            case 'bottom-right':
                addClass(element, classes.bottom + ' ' + classes.right);
                break;
            }
        }

        /**
        * creates a new notification message
        *
        * @param  {DOMElement} message	The notifier message element
        * @param  {Number} wait   Time (in ms) to wait before the message is dismissed, a value of 0 means keep open till clicked.
        * @param  {Function} callback A callback function to be invoked when the message is dismissed.
        *
        * @return {undefined}
        */
        function create(div, callback) {

            function clickDelegate(event, instance) {
                if(!instance.__internal.closeButton || event.target.getAttribute('data-close') === 'true'){
                    instance.dismiss(true);
                }
            }

            function transitionDone(event, instance) {
                // unbind event
                off(instance.element, transition.type, transitionDone);
                // remove the message
                element.removeChild(instance.element);
            }

            function initialize(instance) {
                if (!instance.__internal) {
                    instance.__internal = {
                        pushed: false,
                        delay : undefined,
                        timer: undefined,
                        clickHandler: undefined,
                        transitionEndHandler: undefined,
                        transitionTimeout: undefined
                    };
                    instance.__internal.clickHandler = delegate(instance, clickDelegate);
                    instance.__internal.transitionEndHandler = delegate(instance, transitionDone);
                }
                return instance;
            }
            function clearTimers(instance) {
                clearTimeout(instance.__internal.timer);
                clearTimeout(instance.__internal.transitionTimeout);
            }
            return initialize({
                /* notification DOM element*/
                element: div,
                /*
                 * Pushes a notification message
                 * @param {string or DOMElement} content The notification message content
                 * @param {Number} wait The time (in seconds) to wait before the message is dismissed, a value of 0 means keep open till clicked.
                 *
                 */
                push: function (_content, _wait) {
                    if (!this.__internal.pushed) {

                        pushInstance(this);
                        clearTimers(this);

                        var content, wait;
                        switch (arguments.length) {
                        case 0:
                            wait = this.__internal.delay;
                            break;
                        case 1:
                            if (typeof (_content) === 'number') {
                                wait = _content;
                            } else {
                                content = _content;
                                wait = this.__internal.delay;
                            }
                            break;
                        case 2:
                            content = _content;
                            wait = _wait;
                            break;
                        }
                        this.__internal.closeButton = alertify.defaults.notifier.closeButton;
                        // set contents
                        if (typeof content !== 'undefined') {
                            this.setContent(content);
                        }
                        // append or insert
                        if (notifier.__internal.position.indexOf('top') < 0) {
                            element.appendChild(this.element);
                        } else {
                            element.insertBefore(this.element, element.firstChild);
                        }
                        reflow = this.element.offsetWidth;
                        addClass(this.element, classes.visible);
                        // attach click event
                        on(this.element, 'click', this.__internal.clickHandler);
                        return this.delay(wait);
                    }
                    return this;
                },
                /*
                 * {Function} callback function to be invoked before dismissing the notification message.
                 * Remarks: A return value === 'false' will cancel the dismissal
                 *
                 */
                ondismiss: function () { },
                /*
                 * {Function} callback function to be invoked when the message is dismissed.
                 *
                 */
                callback: callback,
                /*
                 * Dismisses the notification message
                 * @param {Boolean} clicked A flag indicating if the dismissal was caused by a click.
                 *
                 */
                dismiss: function (clicked) {
                    if (this.__internal.pushed) {
                        clearTimers(this);
                        if (!(typeof this.ondismiss === 'function' && this.ondismiss.call(this) === false)) {
                            //detach click event
                            off(this.element, 'click', this.__internal.clickHandler);
                            // ensure element exists
                            if (typeof this.element !== 'undefined' && this.element.parentNode === element) {
                                //transition end or fallback
                                this.__internal.transitionTimeout = setTimeout(this.__internal.transitionEndHandler, transition.supported ? 1000 : 100);
                                removeClass(this.element, classes.visible);

                                // custom callback on dismiss
                                if (typeof this.callback === 'function') {
                                    this.callback.call(this, clicked);
                                }
                            }
                            popInstance(this);
                        }
                    }
                    return this;
                },
                /*
                 * Delays the notification message dismissal
                 * @param {Number} wait The time (in seconds) to wait before the message is dismissed, a value of 0 means keep open till clicked.
                 *
                 */
                delay: function (wait) {
                    clearTimers(this);
                    this.__internal.delay = typeof wait !== 'undefined' && !isNaN(+wait) ? +wait : notifier.__internal.delay;
                    if (this.__internal.delay > 0) {
                        var  self = this;
                        this.__internal.timer = setTimeout(function () { self.dismiss(); }, this.__internal.delay * 1000);
                    }
                    return this;
                },
                /*
                 * Sets the notification message contents
                 * @param {string or DOMElement} content The notification message content
                 *
                 */
                setContent: function (content) {
                    if (typeof content === 'string') {
                        clearContents(this.element);
                        this.element.innerHTML = content;
                    } else if (content instanceof window.HTMLElement && this.element.firstChild !== content) {
                        clearContents(this.element);
                        this.element.appendChild(content);
                    }
                    if(this.__internal.closeButton){
                        var close = document.createElement('span');
                        addClass(close, classes.close);
                        close.setAttribute('data-close', true);
                        this.element.appendChild(close);
                    }
                    return this;
                },
                /*
                 * Dismisses all open notifications except this.
                 *
                 */
                dismissOthers: function () {
                    notifier.dismissAll(this);
                    return this;
                }
            });
        }

        //notifier api
        return {
            /**
             * Gets or Sets notifier settings.
             *
             * @param {string} key The setting name
             * @param {Variant} value The setting value.
             *
             * @return {Object}	if the called as a setter, return the notifier instance.
             */
            setting: function (key, value) {
                //ensure init
                initialize(this);

                if (typeof value === 'undefined') {
                    //get
                    return this.__internal[key];
                } else {
                    //set
                    switch (key) {
                    case 'position':
                        this.__internal.position = value;
                        updatePosition(this);
                        break;
                    case 'delay':
                        this.__internal.delay = value;
                        break;
                    }
                }
                return this;
            },
            /**
             * [Alias] Sets dialog settings/options
             */
            set:function(key,value){
                this.setting(key,value);
                return this;
            },
            /**
             * [Alias] Gets dialog settings/options
             */
            get:function(key){
                return this.setting(key);
            },
            /**
             * Creates a new notification message
             *
             * @param {string} type The type of notification message (simply a CSS class name 'ajs-{type}' to be added).
             * @param {Function} callback  A callback function to be invoked when the message is dismissed.
             *
             * @return {undefined}
             */
            create: function (type, callback) {
                //ensure notifier init
                initialize(this);
                //create new notification message
                var div = document.createElement('div');
                div.className = classes.message + ((typeof type === 'string' && type !== '') ? ' ajs-' + type : '');
                return create(div, callback);
            },
            /**
             * Dismisses all open notifications.
             *
             * @param {Object} excpet [optional] The notification object to exclude from dismissal.
             *
             */
            dismissAll: function (except) {
                var clone = openInstances.slice(0);
                for (var x = 0; x < clone.length; x += 1) {
                    var  instance = clone[x];
                    if (except === undefined || except !== instance) {
                        instance.dismiss();
                    }
                }
            }
        };
    })();

    /**
     * Alertify public API
     * This contains everything that is exposed through the alertify object.
     *
     * @return {Object}
     */
    function Alertify() {

        // holds a references of created dialogs
        var dialogs = {};

        /**
         * Extends a given prototype by merging properties from base into sub.
         *
         * @sub {Object} sub The prototype being overwritten.
         * @base {Object} base The prototype being written.
         *
         * @return {Object} The extended prototype.
         */
        function extend(sub, base) {
            // copy dialog pototype over definition.
            for (var prop in base) {
                if (base.hasOwnProperty(prop)) {
                    sub[prop] = base[prop];
                }
            }
            return sub;
        }


        /**
        * Helper: returns a dialog instance from saved dialogs.
        * and initializes the dialog if its not already initialized.
        *
        * @name {String} name The dialog name.
        *
        * @return {Object} The dialog instance.
        */
        function get_dialog(name) {
            var dialog = dialogs[name].dialog;
            //initialize the dialog if its not already initialized.
            if (dialog && typeof dialog.__init === 'function') {
                dialog.__init(dialog);
            }
            return dialog;
        }

        /**
         * Helper:  registers a new dialog definition.
         *
         * @name {String} name The dialog name.
         * @Factory {Function} Factory a function resposible for creating dialog prototype.
         * @transient {Boolean} transient True to create a new dialog instance each time the dialog is invoked, false otherwise.
         * @base {String} base the name of another dialog to inherit from.
         *
         * @return {Object} The dialog definition.
         */
        function register(name, Factory, transient, base) {
            var definition = {
                dialog: null,
                factory: Factory
            };

            //if this is based on an existing dialog, create a new definition
            //by applying the new protoype over the existing one.
            if (base !== undefined) {
                definition.factory = function () {
                    return extend(new dialogs[base].factory(), new Factory());
                };
            }

            if (!transient) {
                //create a new definition based on dialog
                definition.dialog = extend(new definition.factory(), dialog);
            }
            return dialogs[name] = definition;
        }

        return {
            /**
             * Alertify defaults
             * 
             * @type {Object}
             */
            defaults: defaults,
            /**
             * Dialogs factory 
             *
             * @param {string}      Dialog name.
             * @param {Function}    A Dialog factory function.
             * @param {Boolean}     Indicates whether to create a singleton or transient dialog.
             * @param {String}      The name of the base type to inherit from.
             */
            dialog: function (name, Factory, transient, base) {

                // get request, create a new instance and return it.
                if (typeof Factory !== 'function') {
                    return get_dialog(name);
                }

                if (this.hasOwnProperty(name)) {
                    throw new Error('alertify.dialog: name already exists');
                }

                // register the dialog
                var definition = register(name, Factory, transient, base);

                if (transient) {

                    // make it public
                    this[name] = function () {
                        //if passed with no params, consider it a get request
                        if (arguments.length === 0) {
                            return definition.dialog;
                        } else {
                            var instance = extend(new definition.factory(), dialog);
                            //ensure init
                            if (instance && typeof instance.__init === 'function') {
                                instance.__init(instance);
                            }
                            instance['main'].apply(instance, arguments);
                            return instance['show'].apply(instance);
                        }
                    };
                } else {
                    // make it public
                    this[name] = function () {
                        //ensure init
                        if (definition.dialog && typeof definition.dialog.__init === 'function') {
                            definition.dialog.__init(definition.dialog);
                        }
                        //if passed with no params, consider it a get request
                        if (arguments.length === 0) {
                            return definition.dialog;
                        } else {
                            var dialog = definition.dialog;
                            dialog['main'].apply(definition.dialog, arguments);
                            return dialog['show'].apply(definition.dialog);
                        }
                    };
                }
            },
            /**
             * Close all open dialogs.
             *
             * @param {Object} excpet [optional] The dialog object to exclude from closing.
             *
             * @return {undefined}
             */
            closeAll: function (except) {
                var clone = openDialogs.slice(0);
                for (var x = 0; x < clone.length; x += 1) {
                    var instance = clone[x];
                    if (except === undefined || except !== instance) {
                        instance.close();
                    }
                }
            },
            /**
             * Gets or Sets dialog settings/options. if the dialog is transient, this call does nothing.
             *
             * @param {string} name The dialog name.
             * @param {String|Object} key A string specifying a propery name or a collection of key/value pairs.
             * @param {Variant} value Optional, the value associated with the key (in case it was a string).
             *
             * @return {undefined}
             */
            setting: function (name, key, value) {

                if (name === 'notifier') {
                    return notifier.setting(key, value);
                }

                var dialog = get_dialog(name);
                if (dialog) {
                    return dialog.setting(key, value);
                }
            },
            /**
             * [Alias] Sets dialog settings/options 
             */
            set: function(name,key,value){
                return this.setting(name, key,value);
            },
            /**
             * [Alias] Gets dialog settings/options 
             */
            get: function(name, key){
                return this.setting(name, key);
            },
            /**
             * Creates a new notification message.
             * If a type is passed, a class name "ajs-{type}" will be added.
             * This allows for custom look and feel for various types of notifications.
             *
             * @param  {String | DOMElement}    [message=undefined]		Message text
             * @param  {String}                 [type='']				Type of log message
             * @param  {String}                 [wait='']				Time (in seconds) to wait before auto-close
             * @param  {Function}               [callback=undefined]	A callback function to be invoked when the log is closed.
             *
             * @return {Object} Notification object.
             */
            notify: function (message, type, wait, callback) {
                return notifier.create(type, callback).push(message, wait);
            },
            /**
             * Creates a new notification message.
             *
             * @param  {String}		[message=undefined]		Message text
             * @param  {String}     [wait='']				Time (in seconds) to wait before auto-close
             * @param  {Function}	[callback=undefined]	A callback function to be invoked when the log is closed.
             *
             * @return {Object} Notification object.
             */
            message: function (message, wait, callback) {
                return notifier.create(null, callback).push(message, wait);
            },
            /**
             * Creates a new notification message of type 'success'.
             *
             * @param  {String}		[message=undefined]		Message text
             * @param  {String}     [wait='']				Time (in seconds) to wait before auto-close
             * @param  {Function}	[callback=undefined]	A callback function to be invoked when the log is closed.
             *
             * @return {Object} Notification object.
             */
            success: function (message, wait, callback) {
                return notifier.create('success', callback).push(message, wait);
            },
            /**
             * Creates a new notification message of type 'error'.
             *
             * @param  {String}		[message=undefined]		Message text
             * @param  {String}     [wait='']				Time (in seconds) to wait before auto-close
             * @param  {Function}	[callback=undefined]	A callback function to be invoked when the log is closed.
             *
             * @return {Object} Notification object.
             */
            error: function (message, wait, callback) {
                return notifier.create('error', callback).push(message, wait);
            },
            /**
             * Creates a new notification message of type 'warning'.
             *
             * @param  {String}		[message=undefined]		Message text
             * @param  {String}     [wait='']				Time (in seconds) to wait before auto-close
             * @param  {Function}	[callback=undefined]	A callback function to be invoked when the log is closed.
             *
             * @return {Object} Notification object.
             */
            warning: function (message, wait, callback) {
                return notifier.create('warning', callback).push(message, wait);
            },
            /**
             * Dismisses all open notifications
             *
             * @return {undefined}
             */
            dismissAll: function () {
                notifier.dismissAll();
            }
        };
    }
    var alertify = new Alertify();

    /**
    * Alert dialog definition
    *
    * invoked by:
    *	alertify.alert(message);
    *	alertify.alert(title, message);
    *	alertify.alert(message, onok);
    *	alertify.alert(title, message, onok);
     */
    alertify.dialog('alert', function () {
        return {
            main: function (_title, _message, _onok) {
                var title, message, onok;
                switch (arguments.length) {
                case 1:
                    message = _title;
                    break;
                case 2:
                    if (typeof _message === 'function') {
                        message = _title;
                        onok = _message;
                    } else {
                        title = _title;
                        message = _message;
                    }
                    break;
                case 3:
                    title = _title;
                    message = _message;
                    onok = _onok;
                    break;
                }
                this.set('title', title);
                this.set('message', message);
                this.set('onok', onok);
                return this;
            },
            setup: function () {
                return {
                    buttons: [
                        {
                            text: alertify.defaults.glossary.ok,
                            key: keys.ESC,
                            invokeOnClose: true,
                            className: alertify.defaults.theme.ok,
                        }
                    ],
                    focus: {
                        element: 0,
                        select: false
                    },
                    options: {
                        maximizable: false,
                        resizable: false
                    }
                };
            },
            build: function () {
                // nothing
            },
            prepare: function () {
                //nothing
            },
            setMessage: function (message) {
                this.setContent(message);
            },
            settings: {
                message: undefined,
                onok: undefined,
                label: undefined,
            },
            settingUpdated: function (key, oldValue, newValue) {
                switch (key) {
                case 'message':
                    this.setMessage(newValue);
                    break;
                case 'label':
                    if (this.__internal.buttons[0].element) {
                        this.__internal.buttons[0].element.innerHTML = newValue;
                    }
                    break;
                }
            },
            callback: function (closeEvent) {
                if (typeof this.get('onok') === 'function') {
                    var returnValue = this.get('onok').call(this, closeEvent);
                    if (typeof returnValue !== 'undefined') {
                        closeEvent.cancel = !returnValue;
                    }
                }
            }
        };
    });
    /**
     * Confirm dialog object
     *
     *	alertify.confirm(message);
     *	alertify.confirm(message, onok);
     *	alertify.confirm(message, onok, oncancel);
     *	alertify.confirm(title, message, onok, oncancel);
     */
    alertify.dialog('confirm', function () {

        var autoConfirm = {
            timer: null,
            index: null,
            text: null,
            duration: null,
            task: function (event, self) {
                if (self.isOpen()) {
                    self.__internal.buttons[autoConfirm.index].element.innerHTML = autoConfirm.text + ' (&#8207;' + autoConfirm.duration + '&#8207;) ';
                    autoConfirm.duration -= 1;
                    if (autoConfirm.duration === -1) {
                        clearAutoConfirm(self);
                        var button = self.__internal.buttons[autoConfirm.index];
                        var closeEvent = createCloseEvent(autoConfirm.index, button);

                        if (typeof self.callback === 'function') {
                            self.callback.apply(self, [closeEvent]);
                        }
                        //close the dialog.
                        if (closeEvent.close !== false) {
                            self.close();
                        }
                    }
                } else {
                    clearAutoConfirm(self);
                }
            }
        };

        function clearAutoConfirm(self) {
            if (autoConfirm.timer !== null) {
                clearInterval(autoConfirm.timer);
                autoConfirm.timer = null;
                self.__internal.buttons[autoConfirm.index].element.innerHTML = autoConfirm.text;
            }
        }

        function startAutoConfirm(self, index, duration) {
            clearAutoConfirm(self);
            autoConfirm.duration = duration;
            autoConfirm.index = index;
            autoConfirm.text = self.__internal.buttons[index].element.innerHTML;
            autoConfirm.timer = setInterval(delegate(self, autoConfirm.task), 1000);
            autoConfirm.task(null, self);
        }


        return {
            main: function (_title, _message, _onok, _oncancel) {
                var title, message, onok, oncancel;
                switch (arguments.length) {
                case 1:
                    message = _title;
                    break;
                case 2:
                    message = _title;
                    onok = _message;
                    break;
                case 3:
                    message = _title;
                    onok = _message;
                    oncancel = _onok;
                    break;
                case 4:
                    title = _title;
                    message = _message;
                    onok = _onok;
                    oncancel = _oncancel;
                    break;
                }
                this.set('title', title);
                this.set('message', message);
                this.set('onok', onok);
                this.set('oncancel', oncancel);
                return this;
            },
            setup: function () {
                return {
                    buttons: [
                        {
                            text: alertify.defaults.glossary.ok,
                            key: keys.ENTER,
                            className: alertify.defaults.theme.ok,
                        },
                        {
                            text: alertify.defaults.glossary.cancel,
                            key: keys.ESC,
                            invokeOnClose: true,
                            className: alertify.defaults.theme.cancel,
                        }
                    ],
                    focus: {
                        element: 0,
                        select: false
                    },
                    options: {
                        maximizable: false,
                        resizable: false
                    }
                };
            },
            build: function () {
                //nothing
            },
            prepare: function () {
                //nothing
            },
            setMessage: function (message) {
                this.setContent(message);
            },
            settings: {
                message: null,
                labels: null,
                onok: null,
                oncancel: null,
                defaultFocus: null,
                reverseButtons: null,
            },
            settingUpdated: function (key, oldValue, newValue) {
                switch (key) {
                case 'message':
                    this.setMessage(newValue);
                    break;
                case 'labels':
                    if ('ok' in newValue && this.__internal.buttons[0].element) {
                        this.__internal.buttons[0].text = newValue.ok;
                        this.__internal.buttons[0].element.innerHTML = newValue.ok;
                    }
                    if ('cancel' in newValue && this.__internal.buttons[1].element) {
                        this.__internal.buttons[1].text = newValue.cancel;
                        this.__internal.buttons[1].element.innerHTML = newValue.cancel;
                    }
                    break;
                case 'reverseButtons':
                    if (newValue === true) {
                        this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element);
                    } else {
                        this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element);
                    }
                    break;
                case 'defaultFocus':
                    this.__internal.focus.element = newValue === 'ok' ? 0 : 1;
                    break;
                }
            },
            callback: function (closeEvent) {
                clearAutoConfirm(this);
                var returnValue;
                switch (closeEvent.index) {
                case 0:
                    if (typeof this.get('onok') === 'function') {
                        returnValue = this.get('onok').call(this, closeEvent);
                        if (typeof returnValue !== 'undefined') {
                            closeEvent.cancel = !returnValue;
                        }
                    }
                    break;
                case 1:
                    if (typeof this.get('oncancel') === 'function') {
                        returnValue = this.get('oncancel').call(this, closeEvent);
                        if (typeof returnValue !== 'undefined') {
                            closeEvent.cancel = !returnValue;
                        }
                    }
                    break;
                }
            },
            autoOk: function (duration) {
                startAutoConfirm(this, 0, duration);
                return this;
            },
            autoCancel: function (duration) {
                startAutoConfirm(this, 1, duration);
                return this;
            }
        };
    });
    /**
     * Prompt dialog object
     *
     * invoked by:
     *	alertify.prompt(message);
     *	alertify.prompt(message, value);
     *	alertify.prompt(message, value, onok);
     *	alertify.prompt(message, value, onok, oncancel);
     *	alertify.prompt(title, message, value, onok, oncancel);
     */
    alertify.dialog('prompt', function () {
        var input = document.createElement('INPUT');
        var p = document.createElement('P');
        return {
            main: function (_title, _message, _value, _onok, _oncancel) {
                var title, message, value, onok, oncancel;
                switch (arguments.length) {
                case 1:
                    message = _title;
                    break;
                case 2:
                    message = _title;
                    value = _message;
                    break;
                case 3:
                    message = _title;
                    value = _message;
                    onok = _value;
                    break;
                case 4:
                    message = _title;
                    value = _message;
                    onok = _value;
                    oncancel = _onok;
                    break;
                case 5:
                    title = _title;
                    message = _message;
                    value = _value;
                    onok = _onok;
                    oncancel = _oncancel;
                    break;
                }
                this.set('title', title);
                this.set('message', message);
                this.set('value', value);
                this.set('onok', onok);
                this.set('oncancel', oncancel);
                return this;
            },
            setup: function () {
                return {
                    buttons: [
                        {
                            text: alertify.defaults.glossary.ok,
                            key: keys.ENTER,
                            className: alertify.defaults.theme.ok,
                        },
                        {
                            text: alertify.defaults.glossary.cancel,
                            key: keys.ESC,
                            invokeOnClose: true,
                            className: alertify.defaults.theme.cancel,
                        }
                    ],
                    focus: {
                        element: input,
                        select: true
                    },
                    options: {
                        maximizable: false,
                        resizable: false
                    }
                };
            },
            build: function () {
                input.className = alertify.defaults.theme.input;
                input.setAttribute('type', 'text');
                input.value = this.get('value');
                this.elements.content.appendChild(p);
                this.elements.content.appendChild(input);
            },
            prepare: function () {
                //nothing
            },
            setMessage: function (message) {
                if (typeof message === 'string') {
                    clearContents(p);
                    p.innerHTML = message;
                } else if (message instanceof window.HTMLElement && p.firstChild !== message) {
                    clearContents(p);
                    p.appendChild(message);
                }
            },
            settings: {
                message: undefined,
                labels: undefined,
                onok: undefined,
                oncancel: undefined,
                value: '',
                type:'text',
                reverseButtons: undefined,
            },
            settingUpdated: function (key, oldValue, newValue) {
                switch (key) {
                case 'message':
                    this.setMessage(newValue);
                    break;
                case 'value':
                    input.value = newValue;
                    break;
                case 'type':
                    switch (newValue) {
                    case 'text':
                    case 'color':
                    case 'date':
                    case 'datetime-local':
                    case 'email':
                    case 'month':
                    case 'number':
                    case 'password':
                    case 'search':
                    case 'tel':
                    case 'time':
                    case 'week':
                        input.type = newValue;
                        break;
                    default:
                        input.type = 'text';
                        break;
                    }
                    break;
                case 'labels':
                    if (newValue.ok && this.__internal.buttons[0].element) {
                        this.__internal.buttons[0].element.innerHTML = newValue.ok;
                    }
                    if (newValue.cancel && this.__internal.buttons[1].element) {
                        this.__internal.buttons[1].element.innerHTML = newValue.cancel;
                    }
                    break;
                case 'reverseButtons':
                    if (newValue === true) {
                        this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element);
                    } else {
                        this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element);
                    }
                    break;
                }
            },
            callback: function (closeEvent) {
                var returnValue;
                switch (closeEvent.index) {
                case 0:
                    this.settings.value = input.value;
                    if (typeof this.get('onok') === 'function') {
                        returnValue = this.get('onok').call(this, closeEvent, this.settings.value);
                        if (typeof returnValue !== 'undefined') {
                            closeEvent.cancel = !returnValue;
                        }
                    }
                    break;
                case 1:
                    if (typeof this.get('oncancel') === 'function') {
                        returnValue = this.get('oncancel').call(this, closeEvent);
                        if (typeof returnValue !== 'undefined') {
                            closeEvent.cancel = !returnValue;
                        }
                    }
                    if(!closeEvent.cancel){
                        input.value = this.settings.value;
                    }
                    break;
                }
            }
        };
    });

    // CommonJS
    {
        module.exports = alertify;
    // AMD
    }

} ( typeof window !== 'undefined' ? window : commonjsGlobal ) );
});

/*
*  Color options (applied on the map and on the chart):
*/
var color_countries = 'rgb(147, 144, 252)'; // Color for features within the study zone but not highlighted
var color_disabled = '#bebecd'; // Color for features outside the study zone / without data
var color_sup = 'green'; // Color for selected feature with "better" values than the reference feature
var color_inf = 'red'; // Color for selected feature with "worse" values than the reference feature
var color_highlight = 'yellow'; // Color for the reference feature ("Ma rÃ©gion")
var color_default_dissim = 'darkred'; // Neutral color for selected features when green/red can't be used

/*
*  Misc. options:
*/
var MAX_VARIABLES = 7; // The maximum number of variables that can be selected simultaneously.
var RATIO_WH_MAP = 0.879;

var classCallCheck = function (instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
};

var createClass = function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }

  return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);
    if (staticProps) defineProperties(Constructor, staticProps);
    return Constructor;
  };
}();



























var slicedToArray = function () {
  function sliceIterator(arr, i) {
    var _arr = [];
    var _n = true;
    var _d = false;
    var _e = undefined;

    try {
      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
        _arr.push(_s.value);

        if (i && _arr.length === i) break;
      }
    } catch (err) {
      _d = true;
      _e = err;
    } finally {
      try {
        if (!_n && _i["return"]) _i["return"]();
      } finally {
        if (_d) throw _e;
      }
    }

    return _arr;
  }

  return function (arr, i) {
    if (Array.isArray(arr)) {
      return arr;
    } else if (Symbol.iterator in Object(arr)) {
      return sliceIterator(arr, i);
    } else {
      throw new TypeError("Invalid attempt to destructure non-iterable instance");
    }
  };
}();

var math_abs = Math.abs;
var math_round = Math.round;
var math_max = Math.max;
var math_sin = Math.sin;
var math_cos = Math.cos;
var math_sqrt = Math.sqrt;
var HALF_PI = Math.PI / 2;

function prepareTooltip2(parent, before) {
  var classname = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'tooltip';

  var t = parent.select('.tooltip');
  if (t.node()) {
    return t;
  }
  var tooltip = parent.insert('div', before).attr('class', classname).style('display', 'none');

  tooltip.append('p').attr('class', 'title');
  tooltip.append('p').attr('class', 'content');

  return tooltip;
}

function unbindUI() {
  // Removes the current behavior corresponding to clicking on the left menu:
  d3.selectAll('span.filter_v').on('click', null);
  d3.selectAll('span.target_region').on('click', null);
  d3.selectAll('span.label_chk').on('click', null);

  // Remove the table:
  d3.select('.dataTable-wrapper').remove();

  // Unbind buttons on the top of the map:
  d3.select('#header_map').selectAll('img').on('click', null);

  // Remove the selection menu (or buttons) under the chart:
  d3.select('#bar_section > #menu_selection').remove();

  // Removes the current behavior corresponding to clicking on the top menu:
  d3.selectAll('.type_chart.title_menu').on('click', null);

  // Removes the current behavior corresponding to pressing the Control key:
  document.onkeyup = null;
  document.onkeydown = null;
}

/**
* Function to compare the value of a feature to the reference value (i.e. the value of "my region")
* and return the appropriate color (serie may be inversed)
*
* @param {Number} test_value - The value to be compared to the value of "my region".
* @param {Number} ref_value - The value of my region.
* @param {Boolean} serie_inversed - Whether the serie is inversed or not in the current chart.
* @return {String} - A string containing the color to be used for this value.
*
*/
var comp = function comp(test_value, ref_value, serie_inversed) {
  if (test_value < ref_value) {
    return serie_inversed ? color_sup : color_inf;
  }
  return serie_inversed ? color_inf : color_sup;
};

/**
* Function to compare the value of a feature to the reference value (i.e. the value of "my region")
* and return the appropriate color (serie may be inversed)
*
* @param {Number} val1 - The value to be compared to the value of "my region" for the 1st variable.
* @param {Number} val2 - The value to be compared to the value of "my region" for the 2nd variable.
* @param {Number} ref_val1 - The value of my region for he first variable.
* @param {Number} ref_val2 - The value of my region for the second variable.
* @param {Boolean} xInversed - Whether the serie is inversed on the x axis in the current chart.
* @param {Boolean} yInversed - Whether the serie is inversed on the y axis in the current chart.
* @return {String} - A string containing the color to be used for theses values.
*
*/
var comp2 = function comp2(val1, val2, ref_val1, ref_val2, xInversed, yInversed) {
  if (val1 < ref_val1 && !xInversed || val1 > ref_val1 && xInversed) {
    // val1 is inferior:
    if (val2 < ref_val2) {
      return yInversed ? 'rgb(160, 30, 160)' : color_inf;
    }
    return yInversed ? color_inf : 'rgb(160, 30, 160)';
  }
  // val1 is superior :
  if (val2 > ref_val2) {
    return !yInversed ? color_sup : 'orange';
  }
  return !yInversed ? 'orange' : color_sup;
};

var Rect = function () {
  function Rect(topleft, bottomright) {
    classCallCheck(this, Rect);

    this.xmin = topleft[0];
    this.xmax = bottomright[0];
    this.ymin = topleft[1];
    this.ymax = bottomright[1];
  }

  createClass(Rect, [{
    key: 'contains',
    value: function contains(pt) {
      if (pt[0] >= this.xmin && pt[0] <= this.xmax && pt[1] >= this.ymin && pt[1] <= this.ymax) {
        return true;
      }
      return false;
    }
  }]);
  return Rect;
}();

var PropSizer = function PropSizer(fixed_value, fixed_size) {
  var _this = this;

  this.fixed_value = fixed_value;
  var sqrt = Math.sqrt;
  var abs = Math.abs;
  var PI = Math.PI;
  this.smax = fixed_size * fixed_size * PI;
  this.scale = function (val) {
    return sqrt(abs(val) * _this.smax / _this.fixed_value) / PI;
  };
  // this.get_value = size => ((size * PI) ** 2) / this.smax * this.fixed_value;
  // Use Math pow to support browser without ** operator:
  // eslint-disable-next-line no-restricted-properties
  this.get_value = function (size) {
    return Math.pow(size * PI, 2) / _this.smax * _this.fixed_value;
  };
};

var removeDuplicates = function removeDuplicates(arr) {
  var tmp = [];
  for (var i = 0, len_arr = arr.length; i < len_arr; i++) {
    if (tmp.indexOf(arr[i]) === -1) {
      tmp.push(arr[i]);
    }
  }
  return tmp;
};

var getSvgPathType = function getSvgPathType(path) {
  if (path.indexOf('M ') > -1 && path.indexOf(' L ') > -1) {
    return 2;
  }
  return 1;
};

var svgPathToCoords = function svgPathToCoords(path, type_path) {
  if (type_path === 1) {
    return path.slice(1).split('L').map(function (pt) {
      return pt.split(',').map(function (a) {
        return +a;
      });
    });
  }
  return path.slice(2).split(' L ').map(function (pt) {
    return pt.split(' ').map(function (a) {
      return +a;
    });
  });
};

function computePercentileRank(obj, field_name, result_field_name) {
  var values = obj.map(function (d) {
    return d[field_name];
  });
  var len_values = values.length;
  var getPR = function getPR(v) {
    var count = 0;
    for (var i = 0; i < len_values; i++) {
      if (values[i] <= v) {
        count += 1;
      }
    }
    // return 100 * count / len_values;
    return 100 * (count - 1) / (len_values - 1);
  };
  for (var ix = 0; ix < len_values; ix++) {
    // eslint-disable-next-line no-param-reassign
    obj[ix][result_field_name] = getPR(values[ix]);
  }
}

var _getPR = function _getPR(v, serie) {
  var count = 0;
  for (var i = 0; i < serie.length; i++) {
    if (serie[i] <= v) {
      count += 1;
    }
  }
  // return 100 * count / serie.length;
  return 100 * (count - 1) / (serie.length - 1);
};

var getMean = function getMean(serie) {
  var nb_values = serie.length;
  var sum = 0;
  for (var i = 0; i < nb_values; i++) {
    sum += serie[i];
  }
  return sum / nb_values;
};

function euclidian_distance(feature1, feature2) {
  var _feature1$geometry$co = slicedToArray(feature1.geometry.coordinates, 2),
      x1 = _feature1$geometry$co[0],
      y1 = _feature1$geometry$co[1];

  var _feature2$geometry$co = slicedToArray(feature2.geometry.coordinates, 2),
      x2 = _feature2$geometry$co[0],
      y2 = _feature2$geometry$co[1];

  var a = x1 - x2;
  var b = y1 - y2;
  return math_sqrt(a * a + b * b);
}

/**
* Function to select the first variable on the left menu
* (triggered after changing region, if no more variable was selected)
*
* @return {void}
*/
function selectFirstAvailableVar() {
  var menu = document.querySelector('#menu');
  var v = menu.querySelectorAll('.target_variable');
  for (var i = 0; i < v.length; i++) {
    if (!v[i].classList.contains('disabled')) {
      v[i].classList.add('checked');
      return v[i].getAttribute('value');
    }
  }
}

function prepareGeomLayerId(layer, id_field) {
  layer.features.forEach(function (ft) {
    // eslint-disable-next-line no-param-reassign
    ft.id = ft.properties[id_field];
  });
}

function getRandom(arr, false_length) {
  return arr[Math.round(Math.random() * (false_length || arr.length))];
}

var createMenu = function createMenu(names, variables, study_zones, territorial_mesh) {
  // First section, regions names:
  var title_section1 = document.createElement('p');
  title_section1.className = 'title_menu';
  title_section1.innerHTML = 'Ma rÃ©gion';
  var section1 = document.createElement('div');
  section1.className = 'box';
  section1.style.overflow = 'auto';
  section1.style.height = '15%';
  for (var i = 0, len_i = names.length; i < len_i; i++) {
    var id = names[i].id;
    var name = names[i].name;
    var entry = document.createElement('p');
    entry.innerHTML = '<span value="' + id + '" class=\'target_region square\'></span><span class="label_chk">' + name + '</span>';
    section1.appendChild(entry);
  }

  // Second section, groups of variables:
  var title_section2 = document.createElement('p');
  title_section2.className = 'title_menu';
  title_section2.innerHTML = 'Indicateurs';
  var section2 = document.createElement('div');
  section2.id = 'menu_variables';
  section2.className = 'box';
  section2.style.overflow = 'auto';
  section2.style.height = '25%';

  // Filter the "variables" variable to fetch the group names :
  var groups_var = removeDuplicates(variables.map(function (d) {
    return d.group;
  }).filter(function (d) {
    return d !== 'Num/dÃ©nom';
  }));

  var _loop = function _loop(_i, _len_i) {
    var gp_name = groups_var[_i];
    var entry = document.createElement('p');
    entry.className = 'name_group_var';

    entry.innerHTML = _i === 0 ? '<span class=\'arrow arrow_right\'></span><span>' + gp_name + '</span>' : '<span class=\'arrow arrow_down\'></span><span>' + gp_name + '</span>';
    section2.appendChild(entry);
    var div_grp = document.createElement('div');
    div_grp.style.display = _i === 0 ? null : 'none';
    var var_names = variables.filter(function (d) {
      return d.group === gp_name;
    });
    for (var j = 0, len_j = var_names.length; j < len_j; j++) {
      var name_var = var_names[j].name;
      var code_var = var_names[j].id;
      var sub_entry = document.createElement('p');
      sub_entry.className = 'small';
      sub_entry.innerHTML = '<span value="' + code_var + '" class="target_variable small_square"></span><span class="label_chk">' + name_var + '</span><span class="i_info">i</span>';
      div_grp.appendChild(sub_entry);
    }
    section2.appendChild(div_grp);
  };

  for (var _i = 0, _len_i = groups_var.length; _i < _len_i; _i++) {
    _loop(_i, _len_i);
  }

  // Third section, study zone:
  var title_section3 = document.createElement('p');
  title_section3.className = 'title_menu';
  title_section3.innerHTML = 'Espace d\'Ã©tude';
  var section3 = document.createElement('div');
  section3.id = 'menu_studyzone';
  section3.className = 'box';
  section3.style.overflow = 'auto';
  section3.style.maxHeight = '25%';
  for (var _i2 = 0, _len_i2 = study_zones.length; _i2 < _len_i2; _i2++) {
    var _entry = document.createElement('p');
    var zone = study_zones[_i2];
    if (zone.id === 'filter_dist') {
      _entry.innerHTML = '<span filter-value="' + zone.id + '" display_level="' + zone.display_level + '" class=\'filter_v square\'></span><span class="label_chk">' + zone.name + '</span><input value="450" disabled="disabled" style="width: 55px; height: 13px;" type="number" min="0" max="100000" id="dist_filter"></input><span> km</span><span class="i_info">i</span>';
    } else {
      _entry.innerHTML = '<span filter-value="' + zone.id + '" display_level="' + zone.display_level + '" class=\'filter_v square\'></span><span class="label_chk">' + zone.name + '</span><span class="i_info">i</span>';
    }
    section3.appendChild(_entry);
  }
  // Fourth section:
  var title_section4 = document.createElement('p');
  title_section4.className = 'title_menu';
  title_section4.innerHTML = 'Maillage territorial d\'analyse';
  var section4 = document.createElement('div');
  section4.id = 'menu_territ_level';
  section4.className = 'box';
  section4.style.overflow = 'auto';
  section4.style.maxHeight = '20%';
  for (var _i3 = 0, _len_i3 = territorial_mesh.length; _i3 < _len_i3; _i3++) {
    var _entry2 = document.createElement('p');
    var territ_level = territorial_mesh[_i3];
    _entry2.innerHTML = '<span value="' + territ_level.id + '" class=\'territ_level square\'></span><span class="label_chk">' + territ_level.name + '</span><span class="i_info">i</span>';
    section4.appendChild(_entry2);
  }

  // The actual menu containing these 4 sections:
  var menu = document.getElementById('menu');
  menu.id = 'menu';
  menu.style.float = 'left';
  menu.appendChild(title_section1);
  menu.appendChild(section1);
  menu.appendChild(title_section2);
  menu.appendChild(section2);
  menu.appendChild(title_section3);
  menu.appendChild(section3);
  menu.appendChild(title_section4);
  menu.appendChild(section4);
};

function makeTopMenu() {
  var top_menu = d3.select('#menutop').styles({ 'font-family': "'Signika', sans-serif", 'font-size': '0.80em', 'text-align': 'center' });
  var width_left = document.querySelector('#menu').getBoundingClientRect().width + 25 + 'px';
  var width_central_chart = document.querySelector('#bar_section').getBoundingClientRect().width + 'px';
  var width_map = document.querySelector('#map_section').getBoundingClientRect().width - 40 + 'px';

  top_menu.append('div').attrs({ class: 'title_section t1' }).html('SÃ‰LECTION');

  var type_chart = top_menu.append('div').attr('class', 'top_section t2').style('display', 'flex');

  var position = type_chart.append('div').attr('class', 'type_comparaison');

  position.append('p').attr('class', 'title_type_comp').html('POSITION');

  position.append('span').attrs({ class: 'type_chart chart_t1 selected', value: 'BarChart1' }).html('1 ind.');

  position.append('span').attrs({ class: 'type_chart chart_t2 disabled', value: 'ScatterPlot2' }).html('2 ind.');

  position.append('span').attrs({ class: 'type_chart chart_t3 disabled', value: 'RadarChart3' }).html('+3 ind.');

  var ressemblance = type_chart.append('div').attr('class', 'type_comparaison');

  ressemblance.append('p').attr('class', 'title_type_comp').html('RESSEMBLANCES');

  ressemblance.append('span').attrs({ class: 'type_chart chart_t1', value: 'Similarity1plus' }).html('+1 ind.');

  top_menu.append('div').attrs({ class: 'title_section t3' }).html('QUELLES RÃ‰GIONS ?');
}

function makeHeaderMapSection() {
  var header_map_section = d3.select('#map_section').insert('div', '#svg_map').attr('id', 'header_map');

  header_map_section.append('div').attrs({ class: 'filter_info', title: 'Espace d\'Ã©tude' });

  var completude_section = header_map_section.append('div').attrs({ class: 'completude_section', title: 'ComplÃ©tude de l\'information' });

  completude_section.append('p').attr('id', 'completude_features');

  completude_section.append('p').attr('id', 'completude_population');

  header_map_section.insert('img').attrs({
    class: 'map_button active',
    width: 20,
    height: 20,
    src: 'img/gimp-tool-rect-select.png',
    id: 'img_rect_selec'
  });

  header_map_section.insert('img').attrs({
    class: 'map_button',
    width: 20,
    height: 20,
    src: 'img/gimp-tool-zoom.png',
    id: 'img_map_zoom'
  });

  header_map_section.insert('img').attrs({
    class: 'map_button',
    width: 20,
    height: 20,
    src: 'img/gimp-cursor.png',
    id: 'img_map_select'
  });

  header_map_section.insert('div').attrs({
    id: 'zoom_in',
    class: 'top_half_circle'
  }).append('span').text('+');

  header_map_section.insert('div').attrs({
    id: 'zoom_out',
    class: 'top_half_circle'
  }).append('span').text('-');
}

function makeHeaderChart() {
  var header_bar_section = d3.select('#bar_section').insert('p', 'svg').attr('id', 'header_chart').style('margin-bottom', '0').style('clear', 'both');

  header_bar_section.insert('img').attrs({
    width: 20,
    height: 20,
    src: 'img/picto_download2.png',
    id: 'img_table'
  }).styles({ margin: '3px', float: 'right' }).on('click', function () {
    var columns = Object.keys(app.current_data[0]);
    var content = [columns.join(','), '\r\n', app.current_data.map(function (d) {
      return columns.map(function (c) {
        return d[c];
      }).join(',');
    }).join('\r\n')].join('');
    var elem = document.createElement('a');
    elem.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(content));
    elem.setAttribute('download', 'Regioviz_export.csv');
    elem.style.display = 'none';
    document.body.appendChild(elem);
    elem.click();
    document.body.removeChild(elem);
    // if (document.querySelector('.dataTable-wrapper').style.display) {
    //   document.querySelector('#svg_map').style.display = 'none';
    //   document.querySelector('#svg_legend').style.display = 'none';
    //   document.querySelector('#header_map').style.display = 'none';
    //   document.querySelector('#header_table').style.display = null;
    //   document.querySelector('.dataTable-wrapper').style.display = null;
    //   this.style.filter = 'invert(75%)';
    // } else {
    //   document.querySelector('#svg_map').style.display = null;
    //   document.querySelector('#svg_legend').style.display = null;
    //   document.querySelector('#header_map').style.display = null;
    //   document.querySelector('#header_table').style.display = 'none';
    //   document.querySelector('.dataTable-wrapper').style.display = 'none';
    //   this.style.filter = null;
    // }
  });

  header_bar_section.insert('img').attrs({
    width: 20,
    height: 20,
    src: 'img/picto_report2.png',
    id: 'img_printer'
  }).styles({ margin: '3px', float: 'right' }).on('click', function () {
    var content = '<div id="prep_rapport"><h3>Rapport en cours de pr\xE9paration...</h3>\n<div class="spinner"><div class="cube1"></div><div class="cube2"></div></div></div>';
    // eslint-disable-next-line new-cap
    var modal = new tingle_min.modal({
      stickyFooter: false,
      closeMethods: ['overlay', 'escape'],
      closeLabel: 'Close',
      onOpen: function onOpen() {
        document.querySelector('div.tingle-modal.tingle-modal--visible').style.background = 'rgba(0,0,0,0.4)';
      },
      onClose: function onClose() {
        modal.destroy();
      }
    });
    modal.setContent(content);
    modal.open();
    setTimeout(function () {
      modal.setContent('<div id="prep_rapport">\n<p><a class="buttonDownload" href="#">T\xE9l\xE9charger</a> <a class="buttonDownload" href="#">Ouvrir</a></p></div>');
    }, 2500);
  });

  header_bar_section.insert('img').attrs({
    width: 20,
    height: 20,
    src: 'img/picto_information2.png',
    id: 'img_info'
  }).styles({ margin: '3px', float: 'right' }).on('click', function () {
    var help_message = app.chart.getHelpMessage().split('\n').join('<br>');
    // eslint-disable-next-line new-cap
    var modal = new tingle_min.modal({
      stickyFooter: false,
      closeMethods: ['overlay', 'button', 'escape'],
      closeLabel: 'Close',
      onOpen: function onOpen() {
        document.querySelector('div.tingle-modal.tingle-modal--visible').style.background = 'rgba(0,0,0,0.4)';
      },
      onClose: function onClose() {
        modal.destroy();
      }
    });
    modal.setContent(help_message);
    modal.open();
  });
}

function prepare_dataset(full_dataset, app$$1) {
  app$$1.full_dataset = full_dataset;
  // Create an Object feature_id ->  feature_name for easier lookup:
  app$$1.feature_names = {};
  full_dataset.forEach(function (elem) {
    app$$1.feature_names[elem.id] = elem.name;
  });
}

/**
*
* @param {Object} app - The variable containing the global parameters about
*   the current state of the application.
* @return {Array} - The filtered data, containing only the requested variables
*   for the feature of the current study zone,
*    without features containing empty ratios.
*
*/
function filterLevelVar(app$$1) {
  // Fetch the name(s) of the ratio (and associated num and denum variable),
  // the name of the targeted region and the current level :
  var _app$current_config = app$$1.current_config,
      num = _app$current_config.num,
      denum = _app$current_config.denum,
      ratio = _app$current_config.ratio,
      current_level = _app$current_config.current_level,
      id_field = _app$current_config.id_field,
      filter_key = _app$current_config.filter_key,
      name_field = _app$current_config.name_field,
      my_region = _app$current_config.my_region;


  var all_variables = ratio.concat(num).concat(denum);
  // Prepare the data:
  var temp = void 0;
  if (filter_key instanceof Array) {
    temp = app$$1.full_dataset.filter(function (ft) {
      return +ft[current_level] && filter_key.indexOf(ft[id_field]) > -1;
    });
    app$$1.current_config.my_category = null;
  } else if (filter_key) {
    var my_category = app$$1.full_dataset.filter(function (ft) {
      return ft[id_field] === my_region;
    })[0][filter_key];
    temp = app$$1.full_dataset.filter(function (ft) {
      return +ft[current_level] && ft[filter_key] === my_category;
    });
    app$$1.current_config.my_category = my_category;
  } else {
    temp = app$$1.full_dataset.filter(function (ft) {
      return +ft[current_level];
    });
    app$$1.current_config.my_category = null;
  }
  temp = temp.map(function (ft) {
    var props_feature = {
      id: ft[id_field],
      name: ft[name_field]
    };
    for (var i = 0, len_i = all_variables.length; i < len_i; i++) {
      props_feature[all_variables[i]] = +ft[all_variables[i]];
    }
    return props_feature;
  });
  app$$1.current_data = temp;
}

/**
* TODO
*/
function filterLevelGeom(nuts_features) {
  var filter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'N1';

  return nuts_features.filter(function (d) {
    return d.properties[filter] === 1;
  });
}

/**
* Function to prepare the global "variables_info" Array of objects from the array
* containing the readed 'metadata.csv' file.
*
* @param {Array} metadata_indicateurs - The array returned by d3.csv.
* @return {void}
*
*/
function prepareVariablesInfo(metadata_indicateurs) {
  metadata_indicateurs.filter(function (ft) {
    return ft.Regioviz_item === 'Indicateur' || ft.Regioviz_item === 'Stock';
  }).forEach(function (ft) {
    variables_info.push({
      id: ft.id,
      id1: '' + ft.id1,
      id2: '' + ft.id2,
      name: ft.Name + ' (' + parseInt(ft.Year, 10) + ')',
      unit: '' + ft.Unit,
      group: ft.Theme,
      methodo: ft.Methodology,
      source: ft.Data_source,
      last_update: ft.Last_update,
      formula: ft.Formula
    });
  });
  metadata_indicateurs.filter(function (ft) {
    return ft.Regioviz_item === 'Study Area';
  }).forEach(function (ft) {
    study_zones.push({
      name: ft.Name, id: ft.id, display_level: ft.Theme, methodology: ft.Methodology
    });
  });
  metadata_indicateurs.filter(function (ft) {
    return ft.Regioviz_item === 'Territorial division';
  }).forEach(function (ft) {
    territorial_mesh.push({ name: ft.Name, id: ft.id, methodology: ft.Methodology });
  });
}

/**
* Set and apply a new filter (ie. restrict the study zone) on the dataset to be used.
*
* @param {String} filter_type - The name of the filter to use.
* @return {void}
*
*/
function applyFilter(app$$1, filter_type) {
  if (filter_type === 'filter_country') {
    app$$1.current_config.filter_key = 'Pays';
  } else if (filter_type === 'no_filter') {
    app$$1.current_config.filter_key = undefined;
  } else if (filter_type instanceof Array) {
    app$$1.current_config.filter_key = filter_type;
  } else {
    app$$1.current_config.filter_key = filter_type;
  }
  filterLevelVar(app$$1);
  app$$1.colors = {};
  app$$1.colors[app$$1.current_config.my_region] = color_highlight;
}

// TODO : Doc
function changeRegion(app$$1, id_region, map_elem) {
  app$$1.current_config.my_region = id_region;
  app$$1.current_config.my_region_pretty_name = app$$1.feature_names[app$$1.current_config.my_region];
  if (app$$1.current_config.filter_key instanceof Array) {
    map_elem.computeDistMat();
    app$$1.current_config.filter_key = map_elem.getUnitsWithin(+d3.select('#dist_filter').property('value'));
    filterLevelVar(app$$1);
  } else if (app$$1.current_config.filter_key) {
    filterLevelVar(app$$1);
  }
  // Reset the color to use on the chart/map:
  app$$1.colors = {};
  app$$1.colors[app$$1.current_config.my_region] = color_highlight;
}

/**
*
* @param app -
* @param code_ratio - The code of the variable to be added.
* @return {void}
*/
function addVariable(app$$1, code_ratio) {
  var variable_info = variables_info.filter(function (d) {
    return d.id === code_ratio;
  })[0];
  app$$1.colors = {};
  app$$1.colors[app$$1.current_config.my_region] = color_highlight;
  app$$1.current_config.num.push(variable_info.id1);
  app$$1.current_config.denum.push(variable_info.id2);
  app$$1.current_config.ratio.push(variable_info.id);
  app$$1.current_config.ratio_pretty_name.push(variable_info.name);
  app$$1.current_config.ratio_unit.push(variable_info.unit);
  filterLevelVar(app$$1);
}

/**
*
* @param app -
* @param code_ratio - The code of the variable to be remove.
* @return {void}
*/
function removeVariable(app$$1, code_ratio) {
  var ix = app$$1.current_config.ratio.indexOf(code_ratio);
  app$$1.current_config.num.splice(ix, 1);
  app$$1.current_config.denum.splice(ix, 1);
  app$$1.current_config.ratio.splice(ix, 1);
  app$$1.current_config.ratio_pretty_name.splice(ix, 1);
  app$$1.current_config.ratio_unit.splice(ix, 1);
  filterLevelVar(app$$1);
}

/**
* Reset the current variables in use.
*
* @param app -
* @param codes_ratio -
* @return {void}
*/
function resetVariables(app$$1, codes_ratio) {
  app$$1.colors = {};
  app$$1.colors[app$$1.current_config.my_region] = color_highlight;
  app$$1.current_config.num = [];
  app$$1.current_config.denum = [];
  app$$1.current_config.ratio = [];
  app$$1.current_config.ratio_pretty_name = [];
  app$$1.current_config.ratio_unit = [];

  var _loop = function _loop(i, len) {
    var code_ratio = codes_ratio[i];
    var variable_info = variables_info.filter(function (d) {
      return d.id === code_ratio;
    })[0];
    app$$1.current_config.num.push(variable_info.id1);
    app$$1.current_config.denum.push(variable_info.id2);
    app$$1.current_config.ratio.push(variable_info.id);
    app$$1.current_config.ratio_pretty_name.push(variable_info.name);
    app$$1.current_config.ratio_unit.push(variable_info.unit);
  };

  for (var i = 0, len = codes_ratio.length; i < len; i++) {
    _loop(i, len);
  }
  filterLevelVar(app$$1);
}

/**
* Compute the ratio of available (= not empty) values (the "complÃ©tude") within
* the subset currently in use for all the variables in "vars".
*
* @param {Object} app - The variable containing the global parameters about
*   the current state of the application.
* @param {Array} vars - A list of variable names for which completeness will be calculated.
* @param {String} output - Whether to output the result as a Number or as an Array
* @return {Number or Array} - Number: The ratios of features with available values within
*    the study zone (in %) or, Array : the number of features with available values
*    and the total number of features.
*/
function calcCompletudeSubset(app$$1, vars) {
  var output = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'ratio';
  var _app$current_config2 = app$$1.current_config,
      current_level = _app$current_config2.current_level,
      id_field = _app$current_config2.id_field,
      filter_key = _app$current_config2.filter_key,
      my_region = _app$current_config2.my_region;

  // Compute the length of the dataset (within the "study zone" if any):

  var temp = void 0;
  if (filter_key instanceof Array) {
    temp = app$$1.full_dataset.filter(function (ft) {
      return !!+ft[current_level] && filter_key.indexOf(ft[id_field]) > -1;
    });
  } else if (filter_key) {
    var my_category = app$$1.full_dataset.find(function (ft) {
      return ft[id_field] === my_region;
    })[filter_key];
    temp = app$$1.full_dataset.filter(function (ft) {
      return !!+ft[current_level] && ft[filter_key] === my_category;
    });
  } else {
    temp = app$$1.full_dataset.filter(function (ft) {
      return !!+ft[current_level];
    });
  }
  var total_length = temp.length;

  // Compute the length of the dataset if we filter empty features
  // on all the variables of "vars":
  temp = temp.map(function (ft) {
    var props_feature = {
      id: ft[id_field]
    };
    for (var i = 0, len_i = vars.length; i < len_i; i++) {
      props_feature[vars[i]] = +ft[vars[i]];
    }
    return props_feature;
  }).filter(function (ft) {
    return vars.map(function (ratio_name) {
      return !!ft[ratio_name];
    }).every(function (v) {
      return v === true;
    });
  });
  var filtered_length = temp.length;

  if (!(output === 'ratio')) {
    // Return the number of features with available values within
    // the study zone, and the total number of features of the study zone
    return [filtered_length, total_length];
  }
  // Return the ratio of available values ("complÃ©tude") within
  // the study zone selected by the user:
  return Math.round(filtered_length / total_length * 10000) / 100;
}

/**
* Compute the ratio of population covered by features on which all the variables
* of "vars" are available.
*
* @param {Object} app -The variable containing the global parameters about
*   the current state of the application.
* @param {Array} vars - A list of variable names for which completeness will be calculated.
* @return {Number} - The ratio (in %) of population covered by features for which
*   are available within the study zone.
*
*/
function calcPopCompletudeSubset(app$$1, vars) {
  var _app$current_config3 = app$$1.current_config,
      current_level = _app$current_config3.current_level,
      id_field = _app$current_config3.id_field,
      filter_key = _app$current_config3.filter_key,
      my_region = _app$current_config3.my_region,
      pop_field = _app$current_config3.pop_field;

  // Compute the total population stock of the data (within the "study zone" if any):

  var temp = void 0;
  if (filter_key instanceof Array) {
    temp = app$$1.full_dataset.filter(function (ft) {
      return !!+ft[current_level] && filter_key.indexOf(ft[id_field]) > -1;
    });
  } else if (filter_key) {
    var my_category = app$$1.full_dataset.find(function (ft) {
      return ft[id_field] === my_region;
    })[filter_key];
    temp = app$$1.full_dataset.filter(function (ft) {
      return !!+ft[current_level] && ft[filter_key] === my_category;
    });
  } else {
    temp = app$$1.full_dataset.filter(function (ft) {
      return !!+ft[current_level];
    });
  }
  var total_pop = 0;
  for (var i = 0, len = temp.length; i < len; i++) {
    total_pop += isNaN(+temp[i][pop_field]) ? 0 : +temp[i][pop_field];
  }
  // Compute the population stock of the dataset if we filter empty features
  // on all the variables of "vars":
  temp = temp.map(function (ft) {
    var props_feature = {
      id: ft[id_field],
      pop: +ft[pop_field]
    };
    for (var _i = 0, len_i = vars.length; _i < len_i; _i++) {
      props_feature[vars[_i]] = +ft[vars[_i]];
    }
    return props_feature;
  }).filter(function (ft) {
    return vars.map(function (ratio_name) {
      return !!ft[ratio_name];
    }).every(function (v) {
      return v === true;
    });
  });
  var subset_pop = 0;
  for (var _i2 = 0, _len = temp.length; _i2 < _len; _i2++) {
    subset_pop += isNaN(temp[_i2].pop) ? 0 : temp[_i2].pop;
  }
  // Return the ratio of population values ("complÃ©tude") within
  // the study zone selected by the user:
  return Math.round(subset_pop / total_pop * 10000) / 100;
}
/* eslint-enable no-param-reassign */

// const svg_map = d3.select('svg#svg_map'),
//   margin_map = { top: 0, right: 0, bottom: 0, left: 0 },
//   bbox_svg = svg_map.node().getBoundingClientRect(),
//   width_map = +bbox_svg.width - margin_map.left - margin_map.right,
//   height_map = +bbox_svg.height - margin_map.top - margin_map.bottom;

var svg_map = d3.select('svg#svg_map');
var bbox_svg = svg_map.node().getBoundingClientRect();
var width_map = +bbox_svg.width;
var height_map = width_map * (1 / RATIO_WH_MAP);
svg_map.attr('height', height_map + 'px');

var styles = {
  frame: { id: 'frame', fill: '#e9f4fe', 'fill-opacity': 1 },
  countries: { id: 'countries', fill: '#d6d6d6', 'fill-opacity': 1 },
  boxes: { id: 'boxes', fill: '#e9f4fe', 'fill-opacity': 1 },
  nuts: { id: 'nuts', fill: '#9390fc', 'fill-opacity': 1, 'stroke-width': 0.5, stroke: '#f7fcfe', 'stroke-opacity': 0.9, target: true },
  countries_remote: { id: 'countries_remote', fill: '#d6d6d6', 'fill-opacity': 1 },
  cyprus_non_espon_space: { id: 'cyprus_non_espon_space', fill: '#ffffff', 'fill-opacity': 1 },
  borders: { id: 'borders', fill: 'none', 'stroke-width': 1, stroke: '#ffffff' },
  countries_remote_boundaries: { id: 'countries_remote_boundaries', fill: 'none', 'stroke-width': 1, stroke: '#ffffff' },
  coasts: { id: 'coasts', fill: 'none', stroke: '#d2dbef', 'stroke-width': 0.5 },
  coasts_remote: { id: 'coasts_remote', fill: 'none', stroke: '#d2dbef', 'stroke-width': 0.5 },
  boxes2: { id: 'boxes2', stroke: '#7a7a7a', 'stroke-width': 1, fill: 'none' },
  line: { id: 'line', stroke: '#d6d6d6', 'stroke-width': 1.5, fill: 'none' }
};

var projection = void 0;
var path = void 0;

function get_bbox_layer_path(name) {
  var bbox_layer = [[Infinity, Infinity], [-Infinity, -Infinity]];
  svg_map.select('#' + name).selectAll('path').each(function (d) {
    var bbox_path = path.bounds(d.geometry);
    bbox_layer[0][0] = bbox_path[0][0] < bbox_layer[0][0] ? bbox_path[0][0] : bbox_layer[0][0];
    bbox_layer[0][1] = bbox_path[0][1] < bbox_layer[0][1] ? bbox_path[0][1] : bbox_layer[0][1];
    bbox_layer[1][0] = bbox_path[1][0] > bbox_layer[1][0] ? bbox_path[1][0] : bbox_layer[1][0];
    bbox_layer[1][1] = bbox_path[1][1] > bbox_layer[1][1] ? bbox_path[1][1] : bbox_layer[1][1];
  });
  return bbox_layer;
}

function fitLayer() {
  projection.scale(1).translate([0, 0]);
  var b = get_bbox_layer_path('frame');
  var s = 1 / Math.max((b[1][0] - b[0][0]) / width_map, (b[1][1] - b[0][1]) / height_map);
  var t = [(width_map - s * (b[1][0] + b[0][0])) / 2, (height_map - s * (b[1][1] + b[0][1])) / 2];
  projection.scale(s).translate(t);
  svg_map.selectAll('path').attr('d', path);
}

function map_zoomed() {
  var transform = d3.event ? d3.event.transform : svg_map.node().__zoom;
  if (transform.k < 1) transform.k = 1;
  if (transform.k === 1) {
    transform.x = 0;
    transform.y = 0;
  }
  var layers = svg_map.select('#layers');
  var t = layers.selectAll('g').transition().duration(225);

  layers.selectAll('g').transition(t).style('stroke-width', function () {
    return styles[this.id]['stroke-width'] / transform.k + 'px';
  });

  layers.selectAll('g').transition(t).attr('transform', transform);

  svg_map.select('.brush_map').transition(t).attr('transform', transform);
}

function interpolateZoom(translate, scale) {
  var node_svg_map = svg_map.node();
  var transform = d3.zoomTransform(node_svg_map);
  return d3.transition().duration(225).tween('zoom', function () {
    var iTranslate = d3.interpolate([transform.x, transform.y], translate);
    var iScale = d3.interpolate(transform.k, scale);
    return function (t_value) {
      node_svg_map.__zoom.k = iScale(t_value);
      var _t = iTranslate(t_value);
      node_svg_map.__zoom.x = _t[0];
      node_svg_map.__zoom.y = _t[1];
      map_zoomed();
    };
  });
}

function zoomClick() {
  var direction = this.id === 'zoom_in' ? 1 : -1,
      factor = 0.1,
      center = [width_map / 2, height_map / 2],
      transform = d3.zoomTransform(svg_map.node()),
      translate = [transform.x, transform.y],
      view = { x: translate[0], y: translate[1], k: transform.k };
  var target_zoom = 1,
      translate0 = [],
      l = [];
  d3.event.preventDefault();
  target_zoom = transform.k * (1 + factor * direction);
  translate0 = [(center[0] - view.x) / view.k, (center[1] - view.y) / view.k];
  view.k = target_zoom;
  l = [translate0[0] * view.k + view.x, translate0[1] * view.k + view.y];
  view.x += center[0] - l[0];
  view.y += center[1] - l[1];
  interpolateZoom([view.x, view.y], view.k);
}

function makeMapLegend(legend_elems, size, translateY) {
  var rect_size = 14;
  var spacing = 4;
  var lgd_height = rect_size + spacing;
  var offset = lgd_height * legend_elems.length / 2;

  var grp_lgd = d3.select('#svg_legend').attr('height', size).append('g').attr('transform', 'translate(50, ' + translateY + ')').styles({ 'font-size': '11px', 'font-family': '\'Signika\', sans-serif' });

  var legends = grp_lgd.selectAll('.legend').data(legend_elems).enter().append('g').attr('class', 'legend').attr('transform', function (d, i) {
    var tx = -2 * rect_size;
    var ty = i * lgd_height - offset;
    return 'translate(' + [tx, ty] + ')';
  });

  legends.append('rect').attrs({ width: rect_size, height: rect_size }).styles(function (d) {
    return { fill: d.color, stroke: d.color };
  });

  legends.append('text').attrs({ x: rect_size + spacing, y: rect_size - spacing }).text(function (d) {
    return d.text;
  });

  if (legend_elems[legend_elems.length - 1].color instanceof Array) {
    var elems = grp_lgd.selectAll('g.legend')._groups[0];
    var last_elem = d3.select(elems[elems.length - 1]);
    last_elem.append('polygon').attr('points', '0,0 ' + rect_size + ',' + rect_size + ' 0,' + rect_size).style('fill', last_elem.node().__data__.color[0]);
    last_elem.append('polygon').attr('points', '0,0 ' + rect_size + ',0 ' + rect_size + ',' + rect_size).style('fill', last_elem.node().__data__.color[1]);
  }
}

function getLegendElems(type) {
  if (type === 0) {
    return [[{ color: color_highlight, text: 'Ma r\xE9gion : ' + app.current_config.my_region_pretty_name }, { color: color_countries, text: 'Autres rÃ©gions de l\'espace d\'Ã©tude' }, { color: color_sup, text: 'Rang plus Ã©levÃ© que ma rÃ©gion' }, { color: color_inf, text: 'Rang moins Ã©levÃ© que ma rÃ©gion' }], '75', '41'];
  } else if (type === 1) {
    return [[{ color: color_highlight, text: 'Ma r\xE9gion : ' + app.current_config.my_region_pretty_name }, { color: color_countries, text: 'Autres rÃ©gions de l\'espace d\'Ã©tude' }, { color: color_sup, text: 'Rang plus Ã©levÃ© que ma rÃ©gion (2 indicateurs)' }, { color: color_inf, text: 'Rang moins Ã©levÃ© que ma rÃ©gion (2 indicateurs)' }, { color: ['orange', 'rgb(160, 30, 160)'], text: 'Rang plus Ã©levÃ© que ma rÃ©gion (1 indicateur sur 2)' }], '95', '50'];
  }
  return [[{ color: color_highlight, text: 'Ma r\xE9gion : ' + app.current_config.my_region_pretty_name }, { color: color_countries, text: 'Autres rÃ©gions de l\'espace d\'Ã©tude, sÃ©lectionnables pour la comparaison' }], '60', '22.5'];
}

var MapSelect = function () {
  function MapSelect(nuts, other_layers) {
    var filter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'N1';
    classCallCheck(this, MapSelect);

    app.mapDrawRatio = app.ratioToWide;
    projection = d3.geoIdentity().fitExtent([[0, 0], [width_map, height_map]], other_layers.get('frame')).reflectY(true);

    path = d3.geoPath().projection(projection);

    var layers = svg_map.append('g').attr('id', 'layers').attr('transform', 'scale(1)');
    this.nuts = nuts;
    this.zoom_map = d3.zoom().scaleExtent([1, 5]).translateExtent([[0, 0], [width_map, height_map]]).on('zoom', map_zoomed);

    svg_map.call(this.zoom_map);

    var layer_list = Object.keys(styles);
    for (var i = 0, n_layer = layer_list.length; i < n_layer; i++) {
      var name_lyr = layer_list[i];
      var style_layer = styles[name_lyr];
      if (style_layer.target === true) {
        this.target_layer = layers.append('g').attrs(style_layer);
        this.target_layer.selectAll('path').data(filterLevelGeom(this.nuts.features, filter), function (d) {
          return d.id;
        }).enter().append('path').attr('class', 'tg_ft').attr('title', function (d) {
          return d.properties[app.current_config.name_field] + ' (' + d.id + ')';
        }).attr('fill', function (d) {
          return d.id !== app.current_config.my_region ? color_countries : color_highlight;
        }).attr('d', path);
      } else {
        layers.append('g').attrs(style_layer).selectAll('path').data(other_layers.get(name_lyr).features).enter().append('path').attrs({ d: path });
      }
    }
    this.layers = layers;
    fitLayer();
    app.type_path = getSvgPathType(this.target_layer.select('path').node().getAttribute('d'));
    this.target_layer.selectAll('path').each(function () {
      this._pts = svgPathToCoords(this.getAttribute('d'), app.type_path);
    });
    this.tooltip = prepareTooltip2(d3.select(svg_map.node().parentElement), null, 'tooltip_map');
    this.bindTooltips();
  }

  createClass(MapSelect, [{
    key: 'updateLevelRegion',
    value: function updateLevelRegion() {
      var filter = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'N1';

      var new_selection = filterLevelGeom(this.nuts.features, filter);
      var selection = this.target_layer.selectAll('path').data(new_selection, function (d) {
        return d.id;
      });
      selection.enter().append('path').attrs(function (d) {
        return {
          title: d.properties[app.current_config.name_field] + ' (' + d.id + ')',
          fill: d.id !== app.current_config.my_region ? color_countries : color_highlight,
          d: path
        };
      });
      selection.attr('d', path);
      selection.exit().remove();
      this.resetColors(new_selection.map(function (d) {
        return d.id;
      }));
      this.computeDistMat();
      this.target_layer.selectAll('path').each(function () {
        this._pts = undefined;
      });
      this.bindTooltips();
    }
  }, {
    key: 'bindTooltips',
    value: function bindTooltips() {
      var _this = this;

      var self = this;
      this.target_layer.selectAll('path').on('mouseover', function () {
        // clearTimeout(t);
        _this.tooltip.style('display', null);
      }).on('mouseout', function () {
        // clearTimeout(t);
        // t = setTimeout(() => {
        _this.tooltip.style('display', 'none');
        // }, 250);
      }).on('mousemove mousedown', function () {
        // clearTimeout(t);
        self.tooltip.select('.title').html(this.getAttribute('title'));
        var b = self.tooltip.select('.title').node().getBoundingClientRect();
        var left = d3.event.pageX < window.innerWidth - (b.width + 20) ? d3.event.pageX - 5 : d3.event.pageX - b.width;
        self.tooltip.styles({
          display: null,
          left: left + 'px',
          top: d3.event.pageY - b.height - 20 + 'px' });
      });
    }
  }, {
    key: 'resetColors',
    value: function resetColors$$1(current_ids) {
      this.target_layer.selectAll('path').attr('fill', function (d) {
        if (d.id === app.current_config.my_region) {
          return color_highlight;
        } else if (current_ids.indexOf(d.id) > -1) {
          return app.colors[d.id] || color_countries;
        }
        return color_disabled;
      });
    }
  }, {
    key: 'resetZoom',
    value: function resetZoom() {
      svg_map.transition().duration(250).call(this.zoom_map.transform, d3.zoomIdentity);
    }
  }, {
    key: 'updateLegend',
    value: function updateLegend() {
      d3.select('#svg_legend > g > .legend > text').text('Ma r\xE9gion : ' + app.current_config.my_region_pretty_name);
    }
  }, {
    key: 'removeRectBrush',
    value: function removeRectBrush() {
      svg_map.select('.brush_map').call(this.brush_map.move, null);
    }
  }, {
    key: 'callBrush',
    value: function callBrush(selection) {
      svg_map.select('.brush_map').call(this.brush_map.move, selection);
    }
  }, {
    key: 'bindBrushClick',
    value: function bindBrushClick(chart) {
      if (chart.handleClickMap) {
        document.getElementById('img_map_select').classList.remove('disabled');
        document.getElementById('img_map_select').classList.add('active');
      } else {
        document.getElementById('img_map_select').classList.add('disabled');
      }
      if (chart.handle_brush_map) {
        var self = this;
        document.getElementById('img_rect_selec').classList.remove('disabled');
        document.getElementById('img_rect_selec').classList.add('active');
        document.getElementById('img_map_zoom').classList.remove('active');
        document.getElementById('img_map_select').classList.remove('active');
        this.brush_map = d3.brush().extent([[0, 0], [width_map, height_map]]).on('start brush', function () {
          chart.handle_brush_map(d3.event);
        });
        svg_map.append('g').attr('class', 'brush_map').call(this.brush_map);

        svg_map.select('.brush_map').on('mousemove mousedown', function () {
          var elems = document.elementsFromPoint(d3.event.pageX, d3.event.pageY);
          var elem = elems.find(function (e) {
            return e.className.baseVal === 'tg_ft';
          });
          if (elem) {
            var new_click_event = new MouseEvent('mousemove', {
              pageX: d3.event.pageX,
              pageY: d3.event.pageY,
              clientX: d3.event.clientX,
              clientY: d3.event.clientY,
              bubbles: true,
              cancelable: true,
              view: window });
            elem.dispatchEvent(new_click_event);
          } else {
            self.tooltip.style('display', 'none');
          }
        }).on('mouseout', function () {
          self.tooltip.style('display', 'none');
        });
      } else {
        document.getElementById('img_rect_selec').classList.remove('active');
        document.getElementById('img_rect_selec').classList.add('disabled');
        document.getElementById('img_map_zoom').classList.remove('active');
        document.getElementById('img_map_select').classList.add('active');
      }
      if (chart.handleClickMap && !chart.handle_brush_map) {
        this.target_layer.selectAll('path').on('click', function (d) {
          chart.handleClickMap(d, this);
        });
      }
    }
  }, {
    key: 'getUnitsWithin',
    value: function getUnitsWithin(dist_km) {
      var dist = dist_km * 1000;
      if (!this.dist_to_my_region) this.computeDistMat();
      return this.dist_to_my_region.filter(function (d) {
        return d.dist <= dist;
      }).map(function (d) {
        return d.id;
      });
    }
  }, {
    key: 'computeDistMat',
    value: function computeDistMat() {
      var features = Array.prototype.slice.call(this.target_layer.node().querySelectorAll('path'));
      var nb_ft = features.length;
      var my_region_geom = features.find(function (d) {
        return d.__data__.id === app.current_config.my_region;
      }).__data__.geometry;
      var my_region_centroid = turf.centroid(my_region_geom);
      var result_dist = [];
      for (var i = 0; i < nb_ft; i++) {
        var id = features[i].__data__.id;
        var dist = euclidian_distance(my_region_centroid, turf.centroid(features[i].__data__.geometry));
        result_dist.push({ id: id, dist: dist });
      }
      this.dist_to_my_region = result_dist;
    }
  }, {
    key: 'unbindBrushClick',
    value: function unbindBrushClick() {
      this.brush_map = null;
      svg_map.select('.brush_map').remove();
    }
  }, {
    key: 'displayLegend',
    value: function displayLegend() {
      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;

      d3.selectAll('#svg_legend > g').remove();

      var _getLegendElems = getLegendElems(type),
          _getLegendElems2 = slicedToArray(_getLegendElems, 3),
          elems = _getLegendElems2[0],
          size = _getLegendElems2[1],
          ty = _getLegendElems2[2];

      makeMapLegend(elems, size, ty);
    }
  }]);
  return MapSelect;
}();

function makeSourceSection() {
  var parent = svg_map.node().parentElement;
  var elem = document.createElement('p');
  elem.style.fontSize = '0.45em';
  elem.style.position = 'relative';
  elem.innerHTML = 'DonnÃ©es : Eurostat (tÃ©lÃ©chargement : Oct. 2017)- Limite administrative: UMS RIATE, CC-BY-SA';
  parent.insertBefore(elem, parent.querySelector('#header_map'));
  elem.style.left = '49%';
  elem.style.paddingLeft = '2em';
  elem.style.top = '32%';
  elem.style.margin = 'auto';
  elem.style.width = '100%';
  elem.className = 'rotate';
}

var TableResumeStat = function () {
  function TableResumeStat(summary_features) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    classCallCheck(this, TableResumeStat);

    var doc = document;
    var nb_features = summary_features.length;
    var column_names = ['Variable', 'Min', 'Moy', 'Med', 'Max', 'Ma rÃ©gion'];
    var nb_columns = column_names.length;
    var container_div = doc.createElement('div');
    var myTable = doc.createElement('table');
    var headers = doc.createElement('thead');
    var table_body = doc.createElement('tbody');
    var headers_row = doc.createElement('tr');
    myTable.className = 'minitable';
    container_div.className = 'minitable_container';
    for (var i = 0; i < nb_columns; i++) {
      var cell = doc.createElement('th');
      cell.innerHTML = ['Variable', 'Ma rÃ©gion'].indexOf(column_names[i]) > -1 ? column_names[i] : column_names[i] + '.';
      headers_row.appendChild(cell);
    }
    headers.appendChild(headers_row);
    myTable.appendChild(headers);
    for (var _i = 0; _i < nb_features; _i++) {
      var row = doc.createElement('tr');
      row.id = 'row_' + summary_features[_i].id;
      for (var j = 0; j < nb_columns; j++) {
        var _cell = doc.createElement('td');
        var col_name = column_names[j];
        if (col_name !== 'Variable') {
          _cell.innerHTML = Math.round(summary_features[_i][col_name] * 10) / 10;
        } else {
          _cell.innerHTML = summary_features[_i][col_name];
        }
        row.appendChild(_cell);
      }
      table_body.appendChild(row);
    }
    myTable.appendChild(table_body);
    myTable.setAttribute('id', options.id || 'table_summary');
    container_div.appendChild(myTable);
    document.querySelector('#map_section').appendChild(container_div);
    this.nb_columns = nb_columns;
    this.column_names = column_names;
    this.table_body = table_body;
  }

  createClass(TableResumeStat, [{
    key: 'addFeatures',
    value: function addFeatures(summary_features) {
      for (var i = 0, len = summary_features.length; i < len; i++) {
        this.addFeature(summary_features[i]);
      }
    }
  }, {
    key: 'addFeature',
    value: function addFeature(summary) {
      var row = document.createElement('tr');
      row.id = 'row_' + summary.id;
      for (var j = 0; j < this.nb_columns; j++) {
        var cell = document.createElement('td');
        var col_name = this.column_names[j];
        if (col_name !== 'Variable') {
          cell.innerHTML = Math.round(summary[col_name] * 10) / 10;
        } else {
          cell.innerHTML = summary[col_name];
        }
        row.appendChild(cell);
      }
      this.table_body.appendChild(row);
    }
  }, {
    key: 'removeFeature',
    value: function removeFeature(id_variable) {
      var row = this.table_body.querySelector('tr#row_' + id_variable);
      if (row) row.remove();
    }
  }, {
    key: 'removeAll',
    value: function removeAll() {
      var rows = this.table_body.querySelectorAll('tr');
      for (var i = rows.length - 1; i > -1; i--) {
        rows[i].remove();
      }
    }
  }, {
    key: 'remove',
    value: function remove() {
      this.table_body.parentElement.parentElement.remove();
      this.table_body = null;
    }
  }]);
  return TableResumeStat;
}();

var CompletudeSection = function () {
  function CompletudeSection() {
    classCallCheck(this, CompletudeSection);

    this.completude_population = document.querySelector('.completude_section > #completude_population');
    this.completude_features = document.querySelector('.completude_section > #completude_features');
    this.completude_features.className = 'active';
    this.completude_population.className = '';
    var self = this;
    this.completude_features.onclick = function () {
      this.classList.remove('active');
      self.completude_population.classList.add('active');
    };
    this.completude_population.onclick = function () {
      this.classList.remove('active');
      self.completude_features.classList.add('active');
    };
  }

  createClass(CompletudeSection, [{
    key: 'update',
    value: function update(value_features, value_pop) {
      this.completude_features.innerHTML = 'Donn\xE9es disponibles pour ' + value_features[0] + '/' + value_features[1] + ' r\xE9gions.';
      this.completude_population.innerHTML = 'Donn\xE9es disponibles pour ' + value_pop + '% de la population de l\'espace d\'\xE9tude.';
    }

    // remove() {
    //   this.section.remove();
    //   this.section = null;
    //   this.completude_population = null;
    //   this.completude_features = null;
    // }

  }]);
  return CompletudeSection;
}();

// export default class CompletudeSection {
//   constructor(parent, before) {
//     this.section = document.createElement('div');
//     this.section.className = 'completude_section';
//     this.category_filter = document.createElement('p');
//     this.completude_population = document.createElement('p');
//     this.completude_features = document.createElement('p');
//     this.completude_features.className = 'active';
//     this.category_filter.style.display = 'initial';
//     this.section.appendChild(this.completude_features);
//     this.section.appendChild(this.completude_population);
//     this.section.appendChild(this.category_filter);
//     const self = this;
//     parent.insertBefore(this.section, before);
//     this.completude_features.onclick = function () {
//       this.classList.remove('active');
//       self.completude_population.classList.add('active');
//     };
//     this.completude_population.onclick = function () {
//       this.classList.remove('active');
//       self.completude_features.classList.add('active');
//     };
//   }
//
//   update(value_features, value_pop) {
//     this.completude_features.innerHTML = `DonnÃ©es disponibles pour ${value_features[0]}/${value_features[1]} rÃ©gions.`;
//     this.completude_population.innerHTML = `DonnÃ©es disponibles pour ${value_pop}% de la population de l'espace d'Ã©tude.`;
//   }
//
//   updateFilterInfo(value) {
//     this.category_filter.innerHTML = value;
//   }
//
//   remove() {
//     this.section.remove();
//     this.section = null;
//     this.completude_population = null;
//     this.completude_features = null;
//   }
// }

var svg_bar = d3.select('svg#svg_bar');
var margin = { top: 10, right: 20, bottom: 100, left: 45 };
var margin2 = { top: 430, right: 20, bottom: 15, left: 45 };
var bbox_svg$1 = svg_bar.node().getBoundingClientRect();
var width = +bbox_svg$1.width - margin.left - margin.right;
var height = +bbox_svg$1.height - margin.top - margin.bottom;
var height2 = +bbox_svg$1.height - margin2.top - margin2.bottom;
var svg_container = void 0;

var nbFt = void 0;
var current_range_brush = [0, 0];
var current_range = [0, 0];
var displayed = void 0;

function updateDimensions() {
  svg_bar = d3.select('svg#svg_bar');
  bbox_svg$1 = svg_bar.node().getBoundingClientRect();
  margin = { top: 10, right: 20, bottom: 500 * app.ratioToWide / 5, left: 45 };
  margin2 = { top: 500 * app.ratioToWide * 0.86, right: 20, bottom: 500 * app.ratioToWide / 40, left: 45 };
  width = +bbox_svg$1.width - margin.left - margin.right;
  height = 500 * app.ratioToWide - margin.top - margin.bottom;
  svg_bar.attr('height', 500 * app.ratioToWide + 'px');
  height2 = 500 * app.ratioToWide - margin2.top - margin2.bottom;
  svg_container = svg_bar.append('g').attr('class', 'container');
}

function getMeanRank(mean_value, ratio_to_use) {
  var mean_rank = app.current_data.map(function (d, i) {
    return [d[ratio_to_use], math_abs(mean_value - d[ratio_to_use]), i];
  });
  mean_rank.sort(function (a, b) {
    return a[1] - b[1];
  });
  mean_rank = mean_rank[0];
  if (mean_rank[1] > mean_value) {
    mean_rank = mean_rank[2] - 1;
  } else {
    mean_rank = mean_rank[2];
  }
  return mean_rank;
}

var t = void 0;

var BarChart1 = function () {
  function BarChart1(ref_data) {
    var _this = this;

    classCallCheck(this, BarChart1);

    this.brushed = function () {
      if (d3.event.sourceEvent && d3.event.sourceEvent.type === 'zoom') return; // ignore brush-by-zoom
      if (!_this.x) {
        console.log('a');return;
      }
      var s = d3.event.selection || _this.x2.range();
      context_left_handle.attr('x', s[0] - 12);
      context_right_handle.attr('x', s[1] - 7);
      current_range = [math_round(s[0] / (width / nbFt)), math_round(s[1] / (width / nbFt))];
      _this.x.domain(_this.data.slice(current_range[0], current_range[1]).map(function (ft) {
        return ft.id;
      }));
      svg_container.select('.zoom').call(_this.zoom.transform, d3.zoomIdentity.scale(width / (current_range[1] - current_range[0])).translate(-current_range[0], 0));
      _this.update();
      _this.updateContext(current_range[0], current_range[1]);
      svg_container.select('.brush_top').call(_this.brush_top.move, null);
      // this.brushed_top();
    };

    this.brushed_top = function () {
      if (!_this._focus || !_this.map_elem) return;

      var d3_event = d3.event;
      var ratio_to_use = _this.ratio_to_use;
      var ref_value = _this.ref_value;

      // const elems = document.elementsFromPoint(d3_event.sourceEvent.pageX, d3_event.sourceEvent.pageY);
      // const elem = elems.find(e => e.className.baseVal === 'bar');
      // if (elem) {
      //   const new_click_event = new MouseEvent('mousedown', {
      //     pageX: d3_event.sourceEvent.pageX,
      //     pageY: d3_event.sourceEvent.pageY,
      //     clientX: d3_event.sourceEvent.clientX,
      //     clientY: d3_event.sourceEvent.clientY,
      //     bubbles: true,
      //     cancelable: true,
      //     view: window
      //   });
      //   elem.dispatchEvent(new_click_event);
      // } else {
      clearTimeout(t);
      t = setTimeout(function () {
        _this.tooltip.style('display', 'none');
      }, 5);
      // }

      // if (d3_event && d3_event.selection
      //       && d3_event.sourceEvent && d3_event.sourceEvent.target === document.querySelector('.brush_top > rect.overlay')) {
      if (d3_event && d3_event.selection && d3_event.sourceEvent && d3_event.sourceEvent.target) {
        _this.map_elem.removeRectBrush();
        var s = d3_event.selection;
        current_range_brush = [current_range[0] + math_round(s[0] / (width / displayed)) - 1, current_range[0] + math_round(s[1] / (width / displayed))];
        // this.x.domain(this.data.slice(current_range_brush[0] + 1, current_range_brush[1])
        //   .map(ft => ft.id));
        app.colors = {};
        _this._focus.selectAll('.bar').style('fill', function (d, i) {
          if (d.id === app.current_config.my_region) {
            app.colors[d.id] = color_highlight;
            return color_highlight;
          } else if (i > current_range_brush[0] && i < current_range_brush[1]) {
            var color = comp(d[ratio_to_use], ref_value, _this.serie_inversed);
            app.colors[d.id] = color;
            return color;
          }
          return color_countries;
        });
        // this.update();
        if (_this.reset_state_button === true) {
          d3.selectAll('#menu_selection > button').attr('class', 'button_blue');
        }
        _this.updateMapRegio();
      } else {
        if (d3_event && !d3_event.selection && d3_event.sourceEvent && d3_event.sourceEvent.detail !== undefined) {
          _this.map_elem.removeRectBrush();
          app.colors = {};
          app.colors[app.current_config.my_region] = color_highlight;
          _this.updateMapRegio();
        }
        _this._focus.selectAll('.bar').style('fill', function (d) {
          return app.colors[d.id] || color_countries;
        });
        if (_this.reset_state_button === true) {
          d3.selectAll('#menu_selection > button').attr('class', 'button_blue');
        }
      }
    };
    updateDimensions();
    app.chartDrawRatio = app.ratioToWide;
    // Set the minimum number of variables to keep selected for this kind of chart:
    app.current_config.nb_var = 1;
    var x = d3.scaleBand().range([0, width]).padding(0.1),
        x2 = d3.scaleBand().range([0, width]).padding(0.1),
        y = d3.scaleLinear().range([height, 0]),
        y2 = d3.scaleLinear().range([height2, 0]);

    var xAxis = d3.axisBottom(x);
    var xAxis2 = d3.axisBottom(x2);
    var yAxis = d3.axisLeft(y);

    this.x = x;
    this.x2 = x2;
    this.y = y;
    this.y2 = y2;
    this.xAxis = xAxis;
    this.yAxis = yAxis;
    this.xAxis2 = xAxis2;
    var self = this;
    var available_ratios = app.current_config.ratio;
    var ratio_to_use = available_ratios[0];
    this.ratio_to_use = ratio_to_use;
    this.unit = variables_info.find(function (ft) {
      return ft.id === ratio_to_use;
    }).unit;
    this.data = ref_data.filter(function (ft) {
      return !!ft[ratio_to_use];
    });
    this.data.sort(function (a, b) {
      return a[ratio_to_use] - b[ratio_to_use];
    });
    this.current_ids = this.data.map(function (d) {
      return d.id;
    });
    resetColors();
    this.current_ranks = this.data.map(function (d, i) {
      return i + 1;
    });
    nbFt = this.data.length;
    this.mean_value = getMean(this.data.map(function (d) {
      return d[ratio_to_use];
    }));
    this.ref_value = this.data.filter(function (ft) {
      return ft.id === app.current_config.my_region;
    })[0][ratio_to_use];
    svg_container.append('defs').append('clipPath').attr('id', 'clip').append('rect').attrs({ width: width, height: height });

    var focus = svg_container.append('g').attrs({
      class: 'focus',
      transform: 'translate(' + margin.left + ', ' + margin.top + ')'
    });

    var context = svg_container.append('g').attrs({
      class: 'context',
      transform: 'translate(' + margin2.left + ', ' + margin2.top + ')'
    });

    this._focus = focus;
    this.context = context;

    x.domain(this.current_ids);
    y.domain([0, d3.max(this.data, function (d) {
      return d[ratio_to_use];
    })]);
    x2.domain(x.domain());
    y2.domain(y.domain());

    var brush_bottom = d3.brushX().extent([[0, 0], [width, height2]]).on('brush end', this.brushed);

    var brush_top = d3.brushX().extent([[0, 0], [width, height]]).on('brush end', this.brushed_top);

    var zoom = d3.zoom().scaleExtent([1, Infinity]).translateExtent([[0, 0], [width, height]]).extent([[0, 0], [width, height]]);
    // .on("zoom", zoomed);
    this.brush_top = brush_top;
    this.brush_bottom = brush_bottom;
    this.zoom = zoom;

    focus.append('g').attrs({ class: 'axis axis--x', transform: 'translate(0, ' + height + ')' }).call(xAxis);

    focus.select('.axis--x').selectAll('text').style('text-anchor', 'end').attrs({ dx: '-0.8em', dy: '0.15em', transform: 'rotate(-65)' });

    focus.append('g').attr('class', 'axis axis--y').call(yAxis);

    this.g_bar = focus.append('g');

    var g_brush_top = focus.append('g').attr('class', 'brush_top').call(brush_top);

    var g_brush_bottom = context.append('g').attr('class', 'brush_bottom').call(brush_bottom);

    var groupe_line_mean = focus.append('g').attr('class', 'mean');
    groupe_line_mean.append('text').attrs({ x: 60, y: y(this.mean_value) + 20 }).styles({
      display: 'none',
      fill: 'red',
      'fill-opacity': '0.8',
      'font-family': '\'Signika\', sans-serif'
    }).text('Valeur moyenne : ' + Math.round(this.mean_value * 10) / 10 + ' ' + this.unit);

    groupe_line_mean.append('line').attrs({
      x1: 0,
      x2: width,
      y1: y(this.mean_value),
      y2: y(this.mean_value),
      'stroke-dasharray': '10, 5',
      'stroke-width': '2px',
      class: 'mean_line'
    }).style('stroke', 'red');

    groupe_line_mean.append('line').attrs({ x1: 0, x2: width, y1: y(this.mean_value), y2: y(this.mean_value), 'stroke-width': '14px', class: 'transp_mean_line' }).style('stroke', 'transparent').on('mouseover', function () {
      groupe_line_mean.select('text').style('display', 'initial');
    }).on('mouseout', function () {
      groupe_line_mean.select('text').style('display', 'none');
    });

    this.updateMiniBars();

    var context_left_handle = g_brush_bottom.insert('image', '.handle').attrs({
      width: 20,
      height: height2,
      x: x2(this.current_ids[0]) - 12,
      'xlink:href': 'img/left-handle.png'
    });

    var context_right_handle = g_brush_bottom.insert('image', '.handle').attrs({
      width: 20,
      height: height2,
      x: x2(this.current_ids[this.current_ids.length - 1]) - 7,
      'xlink:href': 'img/right-handle.png'
    });

    g_brush_top.call(brush_top.move, null);
    g_brush_bottom.call(brush_bottom.move, x.range());

    this.completude = new CompletudeSection();
    this.completude.update(calcCompletudeSubset(app, [this.ratio_to_use], 'array'), calcPopCompletudeSubset(app, [this.ratio_to_use]));

    svg_container.append('image').attrs({
      x: width + margin.left + 5,
      y: 385,
      width: 15,
      height: 15,
      'xlink:href': 'img/reverse_plus.png',
      id: 'img_reverse'
    }).on('click', function () {
      // this.data = app.current_data.slice();
      if (!_this.serie_inversed) {
        _this.data.sort(function (a, b) {
          return b[_this.ratio_to_use] - a[_this.ratio_to_use];
        });
      } else {
        _this.data.sort(function (a, b) {
          return a[_this.ratio_to_use] - b[_this.ratio_to_use];
        });
      }
      _this.current_ids = _this.data.map(function (d) {
        return d.id;
      });
      _this.serie_inversed = !_this.serie_inversed;
      x.domain(_this.data.slice(current_range[0], current_range[1]).map(function (ft) {
        return ft.id;
      }));
      x2.domain(_this.data.map(function (ft) {
        return ft.id;
      }));
      // svg_container.select(".zoom").call(zoom.transform, d3.zoomIdentity
      //     .scale(width / (current_range[1] - current_range[0]))
      //     .translate(-current_range[0], 0));
      _this.update();
      // this.updateMiniBars();
      _this.updateContext(current_range[0], current_range[1]);
      svg_container.select('.brush_top').call(brush_top.move, null);
      _this.map_elem.removeRectBrush();
      svg_container.select('.brush_bottom').call(brush_bottom.move, x.range());
    });

    // Prepare the tooltip displayed on mouseover:
    this.tooltip = prepareTooltip2(d3.select(svg_bar.node().parentElement), null);

    // Deactivate the brush rect selection on the map + on the chart
    // when he user press the Ctrl key:
    document.onkeydown = function (event) {
      if (event && event.key === 'Control') {
        svg_container.select('.brush_top').selectAll('.selection, .overlay').style('display', 'none');
        svg_map.select('.brush_map').selectAll('.selection, .overlay').style('display', 'none');
      }
    };
    document.onkeyup = function (event) {
      if (event && event.key === 'Control') {
        svg_container.select('.brush_top').selectAll('.selection, .overlay').style('display', null);
        svg_map.select('.brush_map').selectAll('.selection, .overlay').style('display', null);
      }
    };

    var header_bar_section = d3.select('#header_chart');

    this.selec_var = header_bar_section.insert('select', '#img_table').attrs({ class: 'title_variable' }).styles({
      'font-family': '\'Signika\', sans-serif',
      'font-size': '0.8em',
      'margin-top': '12px',
      'margin-left': '40px',
      float: 'left'
    });

    var _loop = function _loop(i, len_i) {
      var code_variable = available_ratios[i];
      var name_variable = app.current_config.ratio_pretty_name[i];
      var unit = variables_info.find(function (ft) {
        return ft.id === code_variable;
      }).unit;
      var year = name_variable.match(/\([^)]*\)$/)[0];
      var unit_year = '' + year.slice(0, 1) + unit + ', ' + year.slice(1, 6);

      _this.selec_var.append('option').attr('value', 'v_' + code_variable).text(name_variable.replace(year, unit_year));
    };

    for (var i = 0, len_i = available_ratios.length; i < len_i; i++) {
      _loop(i, len_i);
    }

    this.selec_var.on('change', function () {
      var code_variable = this.value.slice(2);
      self.changeVariable(code_variable);
      self.changeStudyZone();
      self.updateCompletude();
    });

    // Create the menu under the chart allowing to use some useful selections
    // (above or below the mean value and above or below my_region)
    var menu_selection = d3.select('#bar_section').append('div').attr('id', 'menu_selection').styles({ padding: '0 10px 10px 10px', 'text-align': 'center', color: '#4f81bd' });

    menu_selection.append('p').attr('id', 'selection_subtitle').styles({ margin: '10px 0px 2px 0px' }).html('SÃ©lection des rÃ©gions ayant des valeurs...');

    menu_selection.append('button').attrs({ class: 'button_blue', id: 'btn_above_mean' }).text('infÃ©rieures Ã  la moyenne').on('click', function () {
      menu_selection.selectAll('button').attr('class', 'button_blue');
      this.classList.add('pressed');
      self.selectBelowMean();
    });

    menu_selection.append('button').attrs({ class: 'button_blue', id: 'btn_above_my_region' }).text('infÃ©rieurs Ã  ma rÃ©gion').on('click', function () {
      menu_selection.selectAll('button').attr('class', 'button_blue');
      this.classList.add('pressed');
      self.selectBelowMyRegion();
    });

    menu_selection.append('button').attrs({ class: 'button_blue', id: 'btn_below_mean' }).text('supÃ©rieures Ã  la moyenne').on('click', function () {
      menu_selection.selectAll('button').attr('class', 'button_blue');
      this.classList.add('pressed');
      self.selectAboveMean();
    });

    menu_selection.append('button').attrs({ class: 'button_blue', id: 'btn_below_my_region' }).text('supÃ©rieures Ã  ma rÃ©gion').on('click', function () {
      menu_selection.selectAll('button').attr('class', 'button_blue');
      this.classList.add('pressed');
      self.selectAboveMyRegion();
    });

    this.makeTableStat();
  }

  createClass(BarChart1, [{
    key: 'updateCompletude',
    value: function updateCompletude() {
      this.completude.update(calcCompletudeSubset(app, [this.ratio_to_use], 'array'), calcPopCompletudeSubset(app, [this.ratio_to_use]));
    }
  }, {
    key: 'updateContext',
    value: function updateContext(min, max) {
      this.context.selectAll('.bar').style('fill-opacity', function (_, i) {
        return i >= min && i < max ? '1' : '0.3';
      });
    }
  }, {
    key: 'update',
    value: function update() {
      var _this2 = this;

      displayed = 0;
      var ratio_to_use = this.ratio_to_use;
      var self = this;
      var bar = this.g_bar.selectAll('.bar').data(this.data);

      if (this.reset_state_button === true) {
        d3.selectAll('#menu_selection > button').attr('class', 'button_blue');
      }

      bar.attrs(function (d) {
        return {
          x: _this2.x(d.id),
          y: _this2.y(d[ratio_to_use]),
          width: _this2.x.bandwidth(),
          height: height - _this2.y(d[ratio_to_use])
        };
      }).style('fill', function (d) {
        return app.colors[d.id] || color_countries;
      }).style('display', function (d) {
        var to_display = _this2.x(d.id) != null;
        if (to_display) {
          displayed += 1;
          return 'initial';
        }
        return 'none';
      });

      bar.enter().insert('rect', '.mean').attrs(function (d) {
        return {
          class: 'bar',
          x: _this2.x(d.id),
          y: _this2.y(d[ratio_to_use]),
          width: _this2.x.bandwidth(),
          height: height - _this2.y(d[ratio_to_use])
        };
      });

      bar.exit().remove();

      this._focus.select('.axis--y').call(this.yAxis);

      var axis_x = this._focus.select('.axis--x').attr('font-size', function () {
        return displayed > 75 ? 6 : 10;
      }).call(this.xAxis);
      axis_x.selectAll('text').attrs(function () {
        if (displayed > 100) {
          return { dx: '-0.8em', dy: '0.15em', transform: 'rotate(-65)' };
        } else if (displayed > 20) {
          return { dx: '-0.8em', dy: '0.15em', transform: 'rotate(-65)' };
        } else {
          return { dx: '0', dy: '0.71em', transform: null };
        }
      }).style('text-anchor', function () {
        return displayed > 20 ? 'end' : 'middle';
      });

      this.g_bar.selectAll('.bar').on('mouseover', function () {
        clearTimeout(t);
        _this2.tooltip.style('display', null);
      }).on('mouseout', function () {
        clearTimeout(t);
        t = setTimeout(function () {
          _this2.tooltip.style('display', 'none');
        }, 250);
      }).on('mousemove mousedown', function (d) {
        clearTimeout(t);
        self.tooltip.select('.title').html(['<b>', d.name, ' (', d.id, ')', '</b>'].join(''));
        self.tooltip.select('.content').html([self.ratio_to_use, ' : ', math_round(d[self.ratio_to_use] * 10) / 10, ' ', self.unit, '<br>', 'Rang : ', self.current_ids.indexOf(d.id) + 1, '/', self.current_ids.length].join(''));
        self.tooltip.styles({
          display: null,
          left: d3.event.pageX - 5 + 'px',
          top: d3.event.pageY - 85 + 'px' });
      });

      svg_container.select('.brush_top').on('mousemove mousedown', function () {
        var elems = document.elementsFromPoint(d3.event.pageX, d3.event.pageY);
        var elem = elems.find(function (e) {
          return e.className.baseVal === 'bar';
        });
        if (elem) {
          var new_click_event = new MouseEvent('mousemove', {
            pageX: d3.event.pageX,
            pageY: d3.event.pageY,
            clientX: d3.event.clientX,
            clientY: d3.event.clientY,
            bubbles: true,
            cancelable: true,
            view: window });
          elem.dispatchEvent(new_click_event);
        } else {
          clearTimeout(t);
          t = setTimeout(function () {
            self.tooltip.style('display', 'none');
          }, 250);
        }
      }).on('mouseout', function () {
        clearTimeout(t);
        t = setTimeout(function () {
          self.tooltip.style('display', 'none');
        }, 250);
      });

      this.updateMiniBars();
    }
  }, {
    key: 'updateMiniBars',
    value: function updateMiniBars() {
      var _this3 = this;

      var ratio_to_use = this.ratio_to_use;
      var mini_bars = this.context.selectAll('.bar').data(this.data);

      mini_bars.attrs(function (d) {
        return {
          x: _this3.x2(d.id),
          y: _this3.y2(d[ratio_to_use]),
          width: _this3.x2.bandwidth(),
          height: height2 - _this3.y2(d[ratio_to_use])
        };
      }).style('fill', function (d) {
        return d.id !== app.current_config.my_region ? color_countries : color_highlight;
      });

      mini_bars.enter().insert('rect').attrs(function (d) {
        return {
          class: 'bar',
          x: _this3.x2(d.id),
          y: _this3.y2(d[ratio_to_use]),
          width: _this3.x2.bandwidth(),
          height: height2 - _this3.y2(d[ratio_to_use])
        };
      }).style('fill', function (d) {
        return d.id !== app.current_config.my_region ? color_countries : color_highlight;
      });
      mini_bars.exit().remove();
    }
  }, {
    key: 'updateMapRegio',
    value: function updateMapRegio() {
      var _this4 = this;

      this.map_elem.target_layer.selectAll('path').attr('fill', function (d) {
        return _this4.current_ids.indexOf(d.id) > -1 ? app.colors[d.id] || color_countries : color_disabled;
      });
    }
  }, {
    key: 'selectAboveMyRegion',
    value: function selectAboveMyRegion() {
      var my_rank = this.data.map(function (d, i) {
        return [d.id, i];
      }).filter(function (d) {
        return d[0] === app.current_config.my_region;
      })[0][1];
      app.colors = {};
      app.colors[app.current_config.my_region] = color_highlight;
      if (!this.serie_inversed) {
        current_range_brush = [my_rank, this.data.length];
        this.data.filter(function (d, i) {
          return i > my_rank;
        }).map(function (d) {
          return d.id;
        }).forEach(function (ft) {
          app.colors[ft] = color_sup;
        });
      } else {
        current_range_brush = [0, my_rank];
        this.data.filter(function (d, i) {
          return i < my_rank;
        }).map(function (d) {
          return d.id;
        }).forEach(function (ft) {
          app.colors[ft] = color_inf;
        });
      }
      this.reset_state_button = false;
      svg_container.select('.brush_bottom').call(this.brush_bottom.move, this.x2.range());
      this.update();
      // svg_container.select('.brush_top').call(this.brush_top.move, current_range_brush.map(d => d * (width / nbFt)));
      this.map_elem.removeRectBrush();
      this.updateMapRegio();
      this.reset_state_button = true;
    }
  }, {
    key: 'selectBelowMyRegion',
    value: function selectBelowMyRegion() {
      var my_rank = this.data.map(function (d, i) {
        return [d.id, i];
      }).filter(function (d) {
        return d[0] === app.current_config.my_region;
      })[0][1];

      app.colors = {};
      app.colors[app.current_config.my_region] = color_highlight;
      if (!this.serie_inversed) {
        current_range_brush = [0, my_rank];
        this.data.filter(function (d, i) {
          return i < my_rank;
        }).map(function (d) {
          return d.id;
        }).forEach(function (ft) {
          app.colors[ft] = color_inf;
        });
      } else {
        current_range_brush = [my_rank, this.data.length];
        this.data.filter(function (d, i) {
          return i > my_rank;
        }).map(function (d) {
          return d.id;
        }).forEach(function (ft) {
          app.colors[ft] = color_sup;
        });
      }
      this.reset_state_button = false;
      svg_container.select('.brush_bottom').call(this.brush_bottom.move, this.x2.range());
      this.update();
      // svg_bar.select('.brush_top').call(this.brush_top.move, current_range_brush.map(d => d * (width / nbFt)));
      this.map_elem.removeRectBrush();
      this.updateMapRegio();
      this.reset_state_button = true;
    }
  }, {
    key: 'selectAboveMean',
    value: function selectAboveMean() {
      var _this5 = this;

      var mean_rank = getMeanRank(this.mean_value, this.ratio_to_use);
      var ratio_to_use = this.ratio_to_use;
      var ref_value = this.ref_value;

      app.colors = {};
      app.colors[app.current_config.my_region] = color_highlight;
      if (!this.serie_inversed) {
        current_range_brush = [mean_rank, this.data.length];
        this.data.filter(function (d) {
          return d[ratio_to_use] > _this5.mean_value;
        }).forEach(function (ft) {
          if (ft[ratio_to_use] > ref_value) app.colors[ft.id] = color_sup;else app.colors[ft.id] = color_inf;
        });
      } else {
        current_range_brush = [0, mean_rank + 1];
        this.data.filter(function (d) {
          return d[ratio_to_use] > _this5.mean_value;
        }).forEach(function (ft) {
          if (ft[ratio_to_use] > ref_value) app.colors[ft.id] = color_inf;else app.colors[ft.id] = color_sup;
        });
      }
      app.colors[app.current_config.my_region] = color_highlight;
      this.reset_state_button = false;
      svg_bar.select('.brush_bottom').call(this.brush_bottom.move, this.x2.range());
      this.update();
      this.map_elem.removeRectBrush();
      // svg_bar.select('.brush_top').call(this.brush_top.move, current_range_brush.map(d => d * (width / nbFt)));
      this.updateMapRegio();
      this.reset_state_button = true;
    }
  }, {
    key: 'selectBelowMean',
    value: function selectBelowMean() {
      var _this6 = this;

      var mean_rank = getMeanRank(this.mean_value, this.ratio_to_use);
      var ratio_to_use = this.ratio_to_use;
      var ref_value = this.ref_value;
      app.colors = {};
      if (!this.serie_inversed) {
        current_range_brush = [0, mean_rank];
        this.data.filter(function (d) {
          return d[ratio_to_use] < _this6.mean_value;
        }).forEach(function (ft) {
          if (ft[ratio_to_use] < ref_value) app.colors[ft.id] = color_inf;else app.colors[ft.id] = color_sup;
        });
      } else {
        current_range_brush = [mean_rank + 1, this.data.length];
        this.data.filter(function (d) {
          return d[ratio_to_use] < _this6.mean_value;
        }).forEach(function (ft) {
          if (ft[ratio_to_use] < ref_value) app.colors[ft.id] = color_sup;else app.colors[ft.id] = color_inf;
        });
      }
      app.colors[app.current_config.my_region] = color_highlight;
      this.reset_state_button = false;
      svg_bar.select('.brush_bottom').call(this.brush_bottom.move, this.x2.range());
      this.update();
      this.map_elem.removeRectBrush();
      // svg_bar.select('.brush_top').call(this.brush_top.move, current_range_brush.map(d => d * (width / nbFt)));
      this.updateMapRegio();
      this.reset_state_button = true;
    }
  }, {
    key: 'handle_brush_map',
    value: function handle_brush_map(event) {
      var _this7 = this;

      if (!event || !event.selection) {
        this.last_map_selection = undefined;
        return;
      }
      this.map_elem.tooltip.style('display', 'none');
      var ratio_to_use = this.ratio_to_use;
      var ref_value = this.ref_value;
      var self = this;
      svg_bar.select('.brush_top').call(self.brush_top.move, null);

      var _event$selection = slicedToArray(event.selection, 2),
          topleft = _event$selection[0],
          bottomright = _event$selection[1];

      this.last_map_selection = [topleft, bottomright];
      // const transform = svg_map.node().__zoom;
      // topleft[0] = (topleft[0] - transform.x) / transform.k;
      // topleft[1] = (topleft[1] - transform.y) / transform.k;
      // bottomright[0] = (bottomright[0] - transform.x) / transform.k;
      // bottomright[1] = (bottomright[1] - transform.y) / transform.k;
      var rect = new Rect(topleft, bottomright);
      app.colors = {};
      self.map_elem.target_layer.selectAll('path').attr('fill', function (d) {
        var id = d.id;
        if (id === app.current_config.my_region) {
          app.colors[id] = color_highlight;
          return color_highlight;
        } else if (self.current_ids.indexOf(id) < 0) {
          return color_disabled;
        }
        if (!this._pts) {
          this._pts = svgPathToCoords(this.getAttribute('d'), app.type_path);
        }
        var pts = this._pts;
        for (var ix = 0, nb_pts = pts.length; ix < nb_pts; ix++) {
          if (rect.contains(pts[ix])) {
            var value = d.properties[ratio_to_use];
            var color = comp(value, ref_value, this.serie_inversed);
            app.colors[id] = color;
            return color;
          }
        }
        return color_countries;
      });
      self._focus.selectAll('.bar').style('fill', function (d) {
        return app.colors[d.id] || color_countries;
      });
      var ids = Object.keys(app.colors);
      var ranks = ids.map(function (d) {
        return _this7.current_ids.indexOf(d.id) > -1;
      }).map(function (d) {
        return _this7.current_ranks[d];
      });
      if (ranks.length > 1) {
        var c1 = ranks[0] - 1;
        var c2 = ranks[ranks.length - 1];
        if (c1 < current_range[0] || c2 > current_range[1]) {
          current_range = [ranks[0] - 1, ranks[ranks.length - 1]];
          svg_bar.select('.brush_bottom').call(self.brush_bottom.move, [current_range[0] * (width / nbFt), current_range[1] * (width / nbFt)]);
        }
      } else {
        current_range = [0, this.data.length];
        svg_bar.select('.brush_bottom').call(self.brush_bottom.move, self.x.range());
      }
    }
  }, {
    key: 'handleClickMap',
    value: function handleClickMap(d, parent) {
      var id = d.id;
      if (this.current_ids.indexOf(id) < 0 || id === app.current_config.my_region) return;
      if (app.colors[id] !== undefined) {
        app.colors[id] = undefined;
        d3.select(parent).attr('fill', color_countries);
      } else {
        var color = comp(d.properties[this.ratio_to_use], this.ref_value, this.serie_inversed);
        app.colors[id] = color;
        d3.select(parent).attr('fill', color);
      }
      this.update();
    }
  }, {
    key: 'updateChangeRegion',
    value: function updateChangeRegion() {
      if (app.current_config.filter_key !== undefined) {
        this.changeStudyZone();
      } else {
        this.ref_value = this.data.find(function (ft) {
          return ft.id === app.current_config.my_region;
        })[this.ratio_to_use];
        this.update();
        this.updateContext(0, this.data.length);
        this.updateMapRegio();
        this.updateTableStats();
        svg_bar.select('.brush_bottom').call(this.brush_bottom.move, this.x.range());
        this.map_elem.removeRectBrush();
        this.map_elem.updateLegend();
      }
    }
  }, {
    key: 'updateMeanValue',
    value: function updateMeanValue() {
      var y = this.y;
      var ratio_to_use = this.ratio_to_use;
      var grp_mean = this._focus.select('.mean');
      this.mean_value = getMean(this.data.map(function (d) {
        return d[ratio_to_use];
      }));
      grp_mean.select('text').attr('y', y(this.mean_value) + 20).text('Valeur moyenne : ' + Math.round(this.mean_value * 10) / 10 + ' ' + this.unit);
      grp_mean.select('.mean_line').attrs({ y1: y(this.mean_value), y2: y(this.mean_value) });
      grp_mean.select('.transp_mean_line').attrs({ y1: y(this.mean_value), y2: y(this.mean_value) });
    }
  }, {
    key: 'changeStudyZone',
    value: function changeStudyZone() {
      var ratio_to_use = this.ratio_to_use;
      this.data = app.current_data.filter(function (ft) {
        return !!ft[ratio_to_use];
      });
      this.ref_value = this.data.find(function (ft) {
        return ft.id === app.current_config.my_region;
      })[ratio_to_use];
      this.current_ranks = this.data.map(function (d, i) {
        return i + 1;
      });
      if (this.serie_inversed) {
        this.data.sort(function (a, b) {
          return b[ratio_to_use] - a[ratio_to_use];
        });
      } else {
        this.data.sort(function (a, b) {
          return a[ratio_to_use] - b[ratio_to_use];
        });
      }
      this.current_ids = this.data.map(function (d) {
        return d.id;
      });
      nbFt = this.data.length;
      this.ref_value = this.data.find(function (ft) {
        return ft.id === app.current_config.my_region;
      })[ratio_to_use];
      this.x.domain(this.current_ids);
      var min_serie = d3.min(this.data, function (d) {
        return d[ratio_to_use];
      });
      min_serie = min_serie >= 0 ? 0 : min_serie + min_serie / 10;
      var max_serie = d3.max(this.data, function (d) {
        return d[ratio_to_use];
      });
      // const offset_y = (max_serie - min_serie) / 20;
      this.y.domain([
      // min_serie - offset_y, max_serie,
      min_serie, max_serie]);
      this.x2.domain(this.x.domain());
      this.y2.domain(this.y.domain());
      this.updateMeanValue();
      this.update();
      this.updateContext(0, this.data.length);

      svg_bar.select('.brush_bottom').call(this.brush_bottom.move, this.x2.range());
      this.map_elem.removeRectBrush();
      app.colors = {};
      app.colors[app.current_config.my_region] = color_highlight;
      this.updateTableStats();
      this.updateCompletude();
      this.updateMapRegio();
    }
  }, {
    key: 'addVariable',
    value: function addVariable$$1(code_variable, name_variable) {
      // Fetch the unit for this indicator:
      var unit = variables_info.find(function (ft) {
        return ft.id === code_variable;
      }).unit;
      var year = name_variable.match(/\([^)]*\)$/)[0];
      var unit_year = '' + year.slice(0, 1) + unit + ', ' + year.slice(1, 6);
      // Add the variable to the input element allowing to choose variables:
      this.selec_var.append('option').attr('value', 'v_' + code_variable).text(name_variable.replace(year, unit_year));

      // And use it immediatly:
      this.selec_var.node().value = 'v_' + code_variable;
      this.selec_var.dispatch('change');
    }
  }, {
    key: 'removeVariable',
    value: function removeVariable$$1(code_variable) {
      // Add the variable to the input element allowing to choose variables:
      this.selec_var.select('option[value=v_' + code_variable + ']').remove();
      if (this.ratio_to_use === code_variable) {
        this.selec_var.node().value = this.selec_var.select('option').node().value;
        this.selec_var.dispatch('change');
      }
    }
  }, {
    key: 'changeVariable',
    value: function changeVariable(code_variable) {
      this.ratio_to_use = code_variable;
      this.unit = variables_info.find(function (ft) {
        return ft.id === code_variable;
      }).unit;
    }
  }, {
    key: 'remove',
    value: function remove() {
      this._focus.remove();
      this.context.remove();
      this.selec_var.remove();
      this.table_stats.remove();
      this.table_stats = null;
      this.map_elem.unbindBrushClick();
      this.map_elem = null;
      d3.select('#svg_bar').html('');
    }
  }, {
    key: 'bindMap',
    value: function bindMap(map_elem) {
      this.map_elem = map_elem;
      this.map_elem.resetColors(this.current_ids);
      this.map_elem.displayLegend(0);
    }
  }, {
    key: 'updateTableStats',
    value: function updateTableStats() {
      this.table_stats.removeAll();
      this.table_stats.addFeature(this.prepareTableStat());
    }
  }, {
    key: 'prepareTableStat',
    value: function prepareTableStat() {
      var _this8 = this;

      var values = this.data.map(function (d) {
        return d[_this8.ratio_to_use];
      });
      return {
        'Min': d3.min(values),
        'Max': d3.max(values),
        'Moy': getMean(values),
        'Med': d3.median(values),
        id: this.ratio_to_use,
        Variable: this.ratio_to_use,
        'Ma rÃ©gion': this.ref_value
      };
    }
  }, {
    key: 'makeTableStat',
    value: function makeTableStat() {
      var feature = this.prepareTableStat();
      this.table_stats = new TableResumeStat([feature]);
    }
  }, {
    key: 'getHelpMessage',
    value: function getHelpMessage() {
      return '\n<h3>Position \u2013 1 Indicateur</h3>\n\n<b>Aide g\xE9n\xE9rale</b>\nCe graphique repr\xE9sente l\u2019indicateur s\xE9lectionn\xE9 ordonn\xE9 de la valeur minimale \xE0 la valeur maximale (barres bleues) pour l\u2019espace d\u2019\xE9tude et le maillage territorial d\u2019analyse s\xE9lectionn\xE9. La valeur de l\u2019unit\xE9 territoriale s\xE9lectionn\xE9e appara\xEEt en surbrillance (jaune). La ligne repr\xE9sent\xE9e par un tiret\xE9 rouge repr\xE9sente la moyenne de l\u2019espace d\u2019\xE9tude (non pond\xE9r\xE9e).\n\nSur ce graphique, il est possible d\u2019inverser l\u2019ordre de classement de l\u2019indicateur (appuyer sur le \xAB\xA0+\xA0\xBB).\n\nLa carte et le graphique sont interactifs dans la mesure o\xF9 l\u2019utilisateur peut choisir de s\xE9lectionner des unit\xE9s territoriales (clic gauche appuy\xE9 de la souris) et visualiser leur positionnement simultan\xE9ment sur la carte (localisation g\xE9ographique) ou sur le diagramme de distribution (positionnement statistique). Il peut aussi en un clic choisir de visualiser les unit\xE9s territoriales ayant des valeurs inf\xE9rieures/sup\xE9rieures \xE0 la moyenne de l\u2019espace d\u2019\xE9tude ou inf\xE9rieures/sup\xE9rieures \xE0 la valeur de l\u2019unit\xE9 territoriale de r\xE9f\xE9rence (\xAB\xA0ma r\xE9gion\xA0\xBB).';
    }
  }]);
  return BarChart1;
}();

var contextMenu = function () {
  function contextMenu(items) {
    classCallCheck(this, contextMenu);

    if (items) {
      this.setItems(items);
    } else {
      this.items = [];
    }
  }

  createClass(contextMenu, [{
    key: 'addItem',
    value: function addItem(item) {
      this.items.push({
        name: item.name,
        action: item.action
      });
    }
  }, {
    key: 'removeItem',
    value: function removeItem(name) {
      for (var i = this.items.length - 1; i > 0; i--) {
        if (this.items[i].name === name) {
          this.items.splice(i, 1);
          break;
        }
      }
    }
  }, {
    key: 'setItems',
    value: function setItems(items) {
      this.items = [];
      for (var i = 0, nb_items = items.length; i < nb_items; i++) {
        if (items[i].name && items[i].action) {
          this.addItem(items[i]);
        }
      }
    }
  }, {
    key: 'showMenu',
    value: function showMenu(event, parent, items, position) {
      var _this = this;

      if (event.preventDefault) event.preventDefault();
      if (event.stopPropagation) event.stopPropagation();
      if (this.DOMobj) {
        this.hideMenu();
        return;
      }
      if (items) {
        this.setItems(items);
      }

      this.initMenu(parent);
      if (!position) {
        this.DOMobj.style.top = event.clientY + document.body.scrollTop + 'px';
        this.DOMobj.style.left = event.clientX + 'px';
      } else {
        this.DOMobj.style.top = position[1] + 'px';
        this.DOMobj.style.left = position[0] + 'px';
      }
      this.displayed = true;
      setTimeout(function () {
        document.addEventListener('click', function () {
          return _this.hideMenu();
        });
      }, 150);
    }
  }, {
    key: 'hideMenu',
    value: function hideMenu() {
      if (this.DOMobj && this.DOMobj.parentElement && this.DOMobj.parentElement.removeChild) {
        this.DOMobj.parentElement.removeChild(this.DOMobj);
        this.DOMobj = null;
      }
      this.displayed = false;
      document.removeEventListener('click', this.hideMenu);
    }
  }, {
    key: 'initMenu',
    value: function initMenu(parent) {
      if (this.DOMobj && this.DOMobj.parentElement && this.DOMobj.parentElement.removeChild) {
        this.DOMobj.parentElement.removeChild(this.DOMobj);
        this.DOMobj = null;
      }
      var self = this;
      var menu = document.createElement('div');
      var list = document.createElement('ul');
      menu.className = 'context-menu';
      menu.appendChild(list);
      for (var i = 0, nb_item = this.items.length; i < nb_item; i++) {
        var item = document.createElement('li');
        item.setAttribute('data-index', i);
        item.innerHTML = '<span class="context-menu-item-name">' + this.items[i].name + '</span>';
        list.appendChild(item);
        item.onclick = function () {
          var ix = this.getAttribute('data-index');
          self.items[ix].action();
        };
      }
      this.DOMobj = menu;
      parent.appendChild(menu);
    }
  }]);
  return contextMenu;
}();

var svg_bar$1 = void 0;
var margin$1 = void 0;
var bbox_svg$2 = void 0;
var width$1 = void 0;
var height$1 = void 0;
var svg_container$1 = void 0;
var t$1 = void 0;

var updateDimensions$1 = function updateDimensions() {
  svg_bar$1 = d3.select('#svg_bar');
  margin$1 = { top: 20, right: 20, bottom: 40, left: 50 };
  bbox_svg$2 = svg_bar$1.node().getBoundingClientRect();
  width$1 = +bbox_svg$2.width - margin$1.left - margin$1.right;
  height$1 = 500 * app.ratioToWide - margin$1.top - margin$1.bottom;
  svg_bar$1.attr('height', 500 * app.ratioToWide + 'px');
  svg_container$1 = svg_bar$1.append('g').attr('class', 'container');
};
/** Class representing a scatterplot */
var ScatterPlot2 = function () {
  /**
   * Create a the scatterplot on the `svg_bar` svg element previously defined
   * @param {Array} ref_data - A reference to the subset of the dataset to be used
   * to create the scatterplot (should contain at least two field flagged as ratio
   * in the `app.current_config.ratio` Object).
   */
  function ScatterPlot2(ref_data) {
    var _this = this;

    classCallCheck(this, ScatterPlot2);

    this.brushed = function () {
      if (d3.event && !d3.event.selection) {
        if (d3.event.type === 'end' && d3.event.sourceEvent.type === 'mouseup') {
          _this.map_elem.removeRectBrush();
        }
        app.colors = {};
        app.colors[app.current_config.my_region] = color_highlight;
        _this.updateLight();
        _this.updateMapRegio();
        return;
      }

      resetColors();
      // const self = this;

      var _d3$event$selection = slicedToArray(d3.event.selection, 2),
          topleft = _d3$event$selection[0],
          bottomright = _d3$event$selection[1];

      var range_x = [_this.x.invert(topleft[0]), _this.x.invert(bottomright[0])];
      var range_y = [_this.y.invert(bottomright[1]), _this.y.invert(topleft[1])];
      if (_this.xInversed) range_x.reverse();
      if (_this.yInversed) range_y.reverse();
      range_x[0] -= 0.5;
      range_x[1] += 0.5;
      range_y[0] -= 0.5;
      range_y[1] += 0.5;
      var t1 = void 0;
      var t2 = void 0;
      if (_this.type === 'value') {
        t1 = _this.variable1;
        t2 = _this.variable2;
      } else {
        t1 = _this.rank_variable1;
        t2 = _this.rank_variable2;
      }

      for (var i = 0, len_i = _this.data.length; i < len_i; i++) {
        var ft = _this.data[i];
        if (ft[t1] >= range_x[0] && ft[t1] <= range_x[1] && ft[t2] >= range_y[0] && ft[t2] <= range_y[1]) {
          app.colors[ft.id] = comp2(ft[_this.variable1], ft[_this.variable2], _this.ref_value1, _this.ref_value2, _this.xInversed, _this.yInversed);
        }
      }
      app.colors[app.current_config.my_region] = color_highlight;
      _this.updateLight();
      _this.updateMapRegio();
      _this.map_elem.removeRectBrush();
    };
    updateDimensions$1();
    app.chartDrawRatio = app.ratioToWide;
    // Set the minimum number of variables to keep selected for this kind of chart:
    app.current_config.nb_var = 2;
    var self = this;
    this.type = 'value';
    this.variable1 = app.current_config.ratio[0];
    this.variable2 = app.current_config.ratio[1];
    this.rank_variable1 = 'pr_' + this.variable1;
    this.rank_variable2 = 'pr_' + this.variable2;
    this.unit1 = variables_info.find(function (ft) {
      return ft.id === _this.variable1;
    }).unit;
    this.unit2 = variables_info.find(function (ft) {
      return ft.id === _this.variable2;
    }).unit;
    this.pretty_name1 = app.current_config.ratio_pretty_name[0];
    this.pretty_name2 = app.current_config.ratio_pretty_name[1];
    this.data = ref_data.filter(function (ft) {
      return !!ft[_this.variable1] && !!ft[_this.variable2];
    }).map(function (d) {
      var res = { id: d.id, name: d.name };
      res[_this.variable1] = d[_this.variable1];
      res[_this.variable2] = d[_this.variable2];
      return res;
    });
    this.current_ids = this.data.map(function (d) {
      return d.id;
    });
    resetColors(this.current_ids);
    this.nbFt = this.data.length;
    computePercentileRank(this.data, this.variable1, this.rank_variable1);
    computePercentileRank(this.data, this.variable2, this.rank_variable2);

    this.x = d3.scaleLinear().range([0, width$1]).nice();
    this.y = d3.scaleLinear().range([height$1, 0]).nice();
    this.xAxis = d3.axisBottom(this.x).ticks(12);
    this.yAxis = d3.axisLeft(this.y).ticks(12 * height$1 / width$1);
    this.xAxis2 = d3.axisBottom(this.x).ticks(12);
    this.yAxis2 = d3.axisLeft(this.y).ticks(12 * height$1 / width$1);

    this.brush = d3.brush().extent([[0, 0], [width$1, height$1]]).on('brush end', this.brushed);

    this.xInversed = false;
    this.yInversed = false;
    this.ref_value1 = this.data.find(function (d) {
      return d.id === app.current_config.my_region;
    })[this.variable1];
    this.ref_value2 = this.data.find(function (d) {
      return d.id === app.current_config.my_region;
    })[this.variable2];

    this.plot = svg_container$1.append('g').attr('transform', 'translate(' + [margin$1.left, margin$1.top] + ')');

    this.plot.append('defs').append('svg:clipPath').attr('id', 'clip').append('svg:rect').attrs({
      width: width$1,
      height: height$1,
      x: 0,
      y: 0
    });

    this.scatter = this.plot.append('g').attr('id', 'scatterplot').attr('clip-path', 'url(#clip)');

    this.scatter.append('g').attr('class', 'brush').call(this.brush);

    this.makeGrid();

    var groupe_line_mean = this.plot.append('g').attr('clip-path', 'url(#clip)').attr('class', 'mean');
    groupe_line_mean.append('line').attr('clip-path', 'url(#clip)').attrs({
      id: 'mean_x',
      x1: this.x(this.mean_variable1),
      x2: this.x(this.mean_variable1),
      y1: 0,
      y2: width$1,
      'stroke-dasharray': '10, 5',
      'stroke-width': '2px'
    }).style('stroke', 'red');
    groupe_line_mean.append('line').style('stroke', 'red').attrs({
      id: 'mean_y',
      x1: 0,
      x2: width$1,
      y1: this.y(this.mean_variable2),
      y2: this.y(this.mean_variable2),
      'clip-path': 'url(#clip)',
      'stroke-dasharray': '10, 5',
      'stroke-width': '2px'
    });

    this.plot.append('g').attrs({
      class: 'x axis', id: 'axis--x', transform: 'translate(0, ' + height$1 + ')'
    }).call(this.xAxis);

    this.plot.append('g').attrs({ class: 'y axis', id: 'axis--y', opacity: 0.9 }).call(this.yAxis);

    // Prepare the tooltip displayed on mouseover:
    this.tooltip = prepareTooltip2(d3.select(svg_bar$1.node().parentElement), null);

    this.prepareTitleAxis();

    svg_container$1.append('image').attrs({
      x: margin$1.left + width$1 / 2 - 20 - svg_container$1.select('#title-axis-x').node().getBoundingClientRect().width / 2,
      y: margin$1.top + height$1 + margin$1.bottom / 2 + 5,
      width: 15,
      height: 15,
      'xlink:href': 'img/reverse_plus.png',
      id: 'img_reverse_x'
    }).on('click', function () {
      _this.xInversed = !_this.xInversed;
      // for (let i = 0; i < this.nbFt; i++) {
      //   self.data[i][self.rank_variable1] = 100 - self.data[i][self.rank_variable1];
      // }
      svg_container$1.select('#title-axis-x').style('fill', _this.xInversed ? 'red' : 'black');
      if (_this.last_map_selection) {
        _this.map_elem.callBrush(_this.last_map_selection);
      } else {
        _this.update();
      }
    });

    svg_container$1.append('image').attrs({
      x: margin$1.left / 2 - 20,
      y: margin$1.top + height$1 / 2 + svg_container$1.select('#title-axis-y').node().getBoundingClientRect().height / 2 + 5,
      width: 15,
      height: 15,
      'xlink:href': 'img/reverse_plus.png',
      id: 'img_reverse_y'
    }).on('click', function () {
      _this.yInversed = !_this.yInversed;
      // for (let i = 0; i < this.nbFt; i++) {
      //   this.data[i][this.rank_variable2] = 100 - this.data[i][this.rank_variable2];
      // }
      svg_container$1.select('#title-axis-y').style('fill', _this.yInversed ? 'red' : 'black');
      if (_this.last_map_selection) {
        _this.map_elem.callBrush(_this.last_map_selection);
      } else {
        _this.update();
      }
    });

    this.completude = new CompletudeSection();
    this.completude.update(calcCompletudeSubset(app, [this.variable1, this.variable2], 'array'), calcPopCompletudeSubset(app, [this.variable1, this.variable2]));

    // Deactivate the rect brush selection on the map
    // while the user press the Ctrl key:
    document.onkeydown = function (event) {
      if (event && event.key === 'Control') {
        svg_map.select('.brush_map').selectAll('.selection, .overlay').style('display', 'none');
      }
    };
    // Reactivate the rect brush selection on the map
    // when the user doesn't press the Ctrl key anymore
    document.onkeyup = function (event) {
      if (event && event.key === 'Control') {
        svg_map.select('.brush_map').selectAll('.selection, .overlay').style('display', null);
      }
    };

    var menu_selection = d3.select(svg_bar$1.node().parentElement).append('div').attr('id', 'menu_selection').styles({ position: 'relative', 'text-align': 'center' });

    var chart_type = menu_selection.append('p');

    chart_type.append('span').attrs({
      id: 'ind_raw_values',
      class: 'choice_ind active'
    }).text('Valeurs brutes');

    chart_type.append('span').attrs({
      id: 'ind_ranks',
      class: 'choice_ind'
    }).text('Rangs normalisÃ©s');

    menu_selection.append('p').attr('id', 'selection_subtitle').styles({ margin: '10px 0px 2px 0px' }).html('SÃ©lection des rÃ©gions ayant des valeurs...');

    menu_selection.append('button').attrs({ class: 'button_blue', id: 'btn_above_mean' }).text('infÃ©rieures Ã  la moyenne').on('click', function () {
      menu_selection.selectAll('button').attr('class', 'button_blue');
      this.classList.add('pressed');
      self.selectBelowMean();
    });

    menu_selection.append('button').attrs({ class: 'button_blue', id: 'btn_above_my_region' }).text('infÃ©rieurs Ã  ma rÃ©gion').on('click', function () {
      menu_selection.selectAll('button').attr('class', 'button_blue');
      this.classList.add('pressed');
      self.selectBelowMyRegion();
    });

    menu_selection.append('button').attrs({ class: 'button_blue', id: 'btn_below_mean' }).text('supÃ©rieures Ã  la moyenne').on('click', function () {
      menu_selection.selectAll('button').attr('class', 'button_blue');
      this.classList.add('pressed');
      self.selectAboveMean();
    });

    menu_selection.append('button').attrs({ class: 'button_blue', id: 'btn_below_my_region' }).text('supÃ©rieures Ã  ma rÃ©gion').on('click', function () {
      menu_selection.selectAll('button').attr('class', 'button_blue');
      this.classList.add('pressed');
      self.selectAboveMyRegion();
    });

    this.bindMenu();
    // this.update();
    this.makeTableStat();
  }

  /**
   * Create the underlying grey grid
   */


  createClass(ScatterPlot2, [{
    key: 'makeGrid',
    value: function makeGrid() {
      this.plot.insert('g', '#scatterplot').attrs({
        class: 'grid grid-x', transform: 'translate(0, ' + height$1 + ')'
      }).call(this.xAxis2.tickSize(-height$1).tickFormat(''));
      this.plot.insert('g', '#scatterplot').attr('class', 'grid grid-y').call(this.yAxis2.tickSize(-width$1).tickFormat(''));
    }
  }, {
    key: 'updateAxisGrid',
    value: function updateAxisGrid() {
      this.plot.select('.grid-x').transition().duration(125).call(this.xAxis2.tickSize(-height$1).tickFormat(''));
      this.plot.select('.grid-y').transition().duration(125).call(this.yAxis2.tickSize(-width$1).tickFormat(''));
      this.plot.select('#axis--x').transition().duration(125).call(this.xAxis);
      this.plot.select('#axis--y').transition().duration(125).call(this.yAxis);
      this.plot.selectAll('.grid').selectAll('line').attr('stroke', 'lightgray');
    }

    /**
     * Create the title of the X and Y axis with the associated context menu
     * displayed when they are clicked and allowing to select an other variable
     * for this axis.
     */

  }, {
    key: 'prepareTitleAxis',
    value: function prepareTitleAxis() {
      var _this2 = this;

      var self = this;
      this.menuX = new contextMenu();
      this.menuY = new contextMenu();
      this.itemsX = app.current_config.ratio.filter(function (elem) {
        return elem !== _this2.variable2;
      }).map(function (elem) {
        return {
          name: elem,
          action: function action() {
            return _this2.changeVariableX(elem);
          }
        };
      });
      this.itemsY = app.current_config.ratio.filter(function (elem) {
        return elem !== _this2.variable1;
      }).map(function (elem) {
        return {
          name: elem,
          action: function action() {
            return _this2.changeVariableY(elem);
          }
        };
      });

      svg_container$1.append('text').attrs({
        id: 'title-axis-x',
        class: 'title-axis',
        x: margin$1.left + width$1 / 2,
        y: margin$1.top + height$1 + margin$1.bottom / 2 + 15
      }).html(this.variable1 + ' &#x25BE;').on('click', function () {
        var bbox = this.getBoundingClientRect();
        if (self.menuY.displayed) {
          self.menuY.hideMenu();
        }
        self.menuX.showMenu(d3.event, document.body, self.itemsX, [bbox.left - 20, bbox.top + 20]);
      });

      svg_container$1.append('text').attrs({
        id: 'title-axis-y',
        class: 'title-axis',
        x: margin$1.left / 2,
        y: margin$1.top + height$1 / 2 - 10,
        transform: 'rotate(-90, ' + margin$1.left / 2 + ', ' + (margin$1.top + height$1 / 2) + ')'
      }).html(this.variable2 + ' &#x25BE;').on('click', function () {
        var bbox = this.getBoundingClientRect();
        if (self.menuX.displayed) {
          self.menuX.hideMenu();
        }
        self.menuY.showMenu(d3.event, document.body, self.itemsY, [bbox.left, bbox.bottom + 10]);
      });
    }
  }, {
    key: 'updateLight',
    value: function updateLight() {
      var default_color = 'gray';
      this.scatter.selectAll('.dot').transition().duration(125).styles(function (d) {
        return {
          fill: app.colors[d.id] || default_color,
          stroke: app.colors[d.id] ? 'rgb(97, 97, 97)' : 'rgb(206, 206, 206)'
        };
      });
    }
  }, {
    key: 'update',
    value: function update() {
      var _this3 = this;

      var self = this;
      var data = self.data;
      var dots = this.scatter.selectAll('.dot').data(data, function (d) {
        return d.id;
      });

      if (this.type === 'rank') {
        var rank_variable1 = this.rank_variable1;
        var rank_variable2 = this.rank_variable2;
        var range_x = this.xInversed ? d3.extent(this.data, function (d) {
          return d[rank_variable1];
        }).reverse() : d3.extent(this.data, function (d) {
          return d[rank_variable1];
        });
        var range_y = this.yInversed ? d3.extent(this.data, function (d) {
          return d[rank_variable2];
        }).reverse() : d3.extent(this.data, function (d) {
          return d[rank_variable2];
        });
        var serie_x = this.data.map(function (d) {
          return d[_this3.variable1];
        });
        var serie_y = this.data.map(function (d) {
          return d[_this3.variable2];
        });
        this.x.domain(range_x).nice();
        this.y.domain(range_y).nice();
        this.mean_variable1 = _getPR(getMean(serie_x), serie_x);
        this.mean_variable2 = _getPR(getMean(serie_y), serie_y);

        var x = this.x;
        var y = this.y;
        var default_color = 'gray';

        // const dots = this.scatter.selectAll('.dot')
        //   .data(data, d => d.id);

        dots.transition().duration(125).attrs(function (d) {
          return {
            r: 5,
            cx: x(d[rank_variable1]),
            cy: y(d[rank_variable2])
          };
        }).styles(function (d) {
          return {
            fill: app.colors[d.id] || default_color,
            stroke: app.colors[d.id] ? 'rgb(97, 97, 97)' : 'rgb(206, 206, 206)'
          };
        }).on('end', function () {
          self.bindTooltips(true);
        });

        dots.enter().insert('circle').transition().duration(125).styles(function (d) {
          return {
            fill: app.colors[d.id] || default_color,
            stroke: app.colors[d.id] ? 'rgb(97, 97, 97)' : 'rgb(206, 206, 206)'
          };
        }).attrs(function (d) {
          return {
            r: 5,
            cx: x(d[rank_variable1]),
            cy: y(d[rank_variable2]),
            class: 'dot'
          };
        }).on('end', function () {
          self.bindTooltips(true);
        });
        dots.exit().transition().duration(125).remove();
      } else if (this.type === 'value') {
        var variable1 = this.variable1;
        var variable2 = this.variable2;
        var _serie_x = this.data.map(function (d) {
          return d[variable1];
        });
        var _serie_y = this.data.map(function (d) {
          return d[variable2];
        });
        var _range_x = this.xInversed ? d3.extent(_serie_x).reverse() : d3.extent(_serie_x);
        var _range_y = this.yInversed ? d3.extent(_serie_y).reverse() : d3.extent(_serie_y);
        this.x.domain(_range_x).nice();
        this.y.domain(_range_y).nice();
        this.mean_variable1 = getMean(_serie_x);
        this.mean_variable2 = getMean(_serie_y);

        var _x = this.x;
        var _y = this.y;
        var _default_color = 'gray';

        this.plot.select('#axis--x').transition().duration(125).call(this.xAxis);
        this.plot.select('#axis--y').transition().duration(125).call(this.yAxis);

        // const dots = this.scatter.selectAll('.dot')
        //   .data(data, d => d.id);

        dots.transition().duration(125).attrs(function (d) {
          return {
            r: 5,
            cx: _x(d[variable1]),
            cy: _y(d[variable2])
          };
        }).styles(function (d) {
          return {
            fill: app.colors[d.id] || _default_color,
            stroke: app.colors[d.id] ? 'rgb(97, 97, 97)' : 'rgb(206, 206, 206)'
          };
        }).on('end', function () {
          self.bindTooltips(false);
        });

        dots.enter().insert('circle').transition().duration(125).styles(function (d) {
          return {
            fill: app.colors[d.id] || _default_color,
            stroke: app.colors[d.id] ? 'rgb(97, 97, 97)' : 'rgb(206, 206, 206)'
          };
        }).attrs(function (d) {
          return {
            r: 5,
            cx: _x(d[variable1]),
            cy: _y(d[variable2]),
            class: 'dot'
          };
        }).on('end', function () {
          self.bindTooltips(false);
        });

        dots.exit().transition().duration(125).remove();
      }
      this.updateMeanValue();
      this.updateAxisGrid();
    }
  }, {
    key: 'updateCompletude',
    value: function updateCompletude() {
      this.completude.update(calcCompletudeSubset(app, [this.variable1, this.variable2], 'array'), calcPopCompletudeSubset(app, [this.variable1, this.variable2]));
    }
  }, {
    key: 'updateMapRegio',
    value: function updateMapRegio() {
      var _this4 = this;

      if (!this.map_elem) return;
      this.map_elem.target_layer.selectAll('path').attr('fill', function (d) {
        return _this4.current_ids.indexOf(d.id) > -1 ? app.colors[d.id] || color_countries : color_disabled;
      });
    }
  }, {
    key: 'handle_brush_map',
    value: function handle_brush_map(event) {
      if (!event || !event.selection) {
        this.last_map_selection = undefined;
        return;
      }
      this.map_elem.tooltip.style('display', 'none');
      svg_container$1.select('.brush').call(this.brush.move, null);
      var self = this;

      var _event$selection = slicedToArray(event.selection, 2),
          topleft = _event$selection[0],
          bottomright = _event$selection[1];

      this.last_map_selection = [topleft, bottomright];
      var rect = new Rect(topleft, bottomright);
      app.colors = {};
      self.map_elem.target_layer.selectAll('path').attr('fill', function (d) {
        var id = d.id;
        if (id === app.current_config.my_region) {
          app.colors[id] = color_highlight;
          return color_highlight;
        } else if (self.current_ids.indexOf(id) < 0) {
          return color_disabled;
        }
        if (!this._pts) {
          this._pts = svgPathToCoords(this.getAttribute('d'), app.type_path);
        }
        var pts = this._pts;
        for (var ix = 0, nb_pts = pts.length; ix < nb_pts; ix++) {
          if (rect.contains(pts[ix])) {
            var value1 = d.properties[self.variable1];
            var value2 = d.properties[self.variable2];
            var color = comp2(value1, value2, self.ref_value1, self.ref_value2, self.xInversed, self.yInversed);
            app.colors[id] = color;
            return color;
          }
        }
        return color_countries;
      });
      self.updateLight();
    }
  }, {
    key: 'bindTooltips',
    value: function bindTooltips(with_rank) {
      var _this5 = this;

      var self = this;
      this.scatter.selectAll('.dot').on('mouseover.tooltip', function () {
        clearTimeout(t$1);
        self.tooltip.style('display', null);
      }).on('mousemove.tooltip', function (d) {
        clearTimeout(t$1);
        self.tooltip.select('.title').html(['<b>', d.name, ' (', d.id, ')', '</b>'].join(''));
        var yoffset = void 0;
        if (with_rank) {
          self.tooltip.select('.content').html([self.variable1 + ' (rang) : ' + Math.round(d[self.rank_variable1] * 10) / 10 + '/100', self.variable1 + ' (valeur) : ' + Math.round(d[self.variable1] * 10) / 10 + ' ' + self.unit1, self.variable2 + ' (rang) : ' + Math.round(d[self.rank_variable2] * 10) / 10 + '/100', self.variable2 + ' (valeur) : ' + Math.round(d[self.variable2] * 10) / 10 + ' ' + self.unit2].join('<br>'));
          yoffset = 120;
        } else {
          self.tooltip.select('.content').html([self.variable1 + ' (valeur) : ' + Math.round(d[self.variable1] * 10) / 10 + ' ' + self.unit1, self.variable2 + ' (valeur) : ' + Math.round(d[self.variable2] * 10) / 10 + ' ' + self.unit2].join('<br>'));
          yoffset = 85;
        }
        var b = self.tooltip.node().getBoundingClientRect();
        self.tooltip.styles({
          display: null,
          left: d3.event.pageX - 5 + 'px',
          top: d3.event.pageY - yoffset + 'px' });
      }).on('mouseout.tooltip', function () {
        clearTimeout(t$1);
        t$1 = setTimeout(function () {
          _this5.tooltip.style('display', 'none');
        }, 250);
      });
    }
  }, {
    key: 'handleClickMap',
    value: function handleClickMap(d, parent) {
      var id = d.id;
      if (this.current_ids.indexOf(id) < 0 || id === app.current_config.my_region) return;
      if (app.colors[id] !== undefined) {
        // Change its color in the global colors object:
        app.colors[id] = undefined;
        // Change the color on the map:
        d3.select(parent).attr('fill', color_countries);
      } else {
        var value1 = d.properties[this.variable1];
        var value2 = d.properties[this.variable2];
        var color = comp2(value1, value2, this.ref_value1, this.ref_value2, this.xInversed, this.yInversed);
        app.colors[id] = color;
        // Change the color on the map:
        d3.select(parent).attr('fill', color);
        // Add the clicked feature on the colored selection on the chart:
      }
      this.updateLight();
    }
  }, {
    key: 'updateMeanValue',
    value: function updateMeanValue() {
      var _this6 = this;

      if (this.type === 'value') {
        this.mean_variable1 = getMean(this.data.map(function (d) {
          return d[_this6.variable1];
        }));
        this.mean_variable2 = getMean(this.data.map(function (d) {
          return d[_this6.variable2];
        }));
      } else if (this.type === 'rank') {
        this.mean_variable1 = _getPR(getMean(this.data.map(function (d) {
          return d[_this6.variable1];
        })), this.data.map(function (d) {
          return d[_this6.variable1];
        }));
        this.mean_variable2 = _getPR(getMean(this.data.map(function (d) {
          return d[_this6.variable2];
        })), this.data.map(function (d) {
          return d[_this6.variable2];
        }));
      }
      var grp_mean = this.plot.select('g.mean');
      grp_mean.select('#mean_x').transition().duration(125).attrs({
        x1: this.x(this.mean_variable1),
        x2: this.x(this.mean_variable1)
      });
      grp_mean.select('#mean_y').transition().duration(125).attrs({
        y1: this.y(this.mean_variable2),
        y2: this.y(this.mean_variable2)
      });
    }
  }, {
    key: 'updateChangeRegion',
    value: function updateChangeRegion() {
      if (app.current_config.filter_key !== undefined) {
        this.changeStudyZone();
      } else {
        this.ref_value1 = this.data.find(function (d) {
          return d.id === app.current_config.my_region;
        })[this.variable1];
        this.ref_value2 = this.data.find(function (d) {
          return d.id === app.current_config.my_region;
        })[this.variable2];
        this.map_elem.removeRectBrush();
        this.map_elem.updateLegend();
        this.map_elem.resetColors(this.current_ids);
        this.update();
      }
    }
  }, {
    key: 'changeStudyZone',
    value: function changeStudyZone() {
      var _this7 = this;

      this.data = app.current_data.filter(function (ft) {
        return !!ft[_this7.variable1] && !!ft[_this7.variable2];
      }).map(function (d) {
        var res = { id: d.id, name: d.name };
        res[_this7.variable1] = d[_this7.variable1];
        res[_this7.variable2] = d[_this7.variable2];
        return res;
      });
      this.current_ids = this.data.map(function (d) {
        return d.id;
      });
      resetColors();
      this.nbFt = this.data.length;
      computePercentileRank(this.data, this.variable1, this.rank_variable1);
      computePercentileRank(this.data, this.variable2, this.rank_variable2);

      this.xInversed = false;
      this.yInversed = false;
      var tmp_my_region = this.data.filter(function (d) {
        return d.id === app.current_config.my_region;
      })[0];
      this.ref_value1 = tmp_my_region[this.variable1];
      this.ref_value2 = tmp_my_region[this.variable2];

      this.map_elem.removeRectBrush();
      this.updateItemsCtxMenu();
      this.updateMapRegio();
      this.updateTableStat();
      this.updateCompletude();
      this.update();
    }
  }, {
    key: 'changeVariableX',
    value: function changeVariableX(code_variable) {
      var _this8 = this;

      this.variable1 = code_variable;
      this.rank_variable1 = 'pr_' + this.variable1;
      var var_info = variables_info.find(function (ft) {
        return ft.id === code_variable;
      });
      this.pretty_name1 = var_info.name;
      this.unit1 = var_info.unit;
      svg_container$1.select('#title-axis-x').html(code_variable + ' &#x25BE;');
      // TODO: Also change the position of the button alowing to inverse the serie
      this.updateItemsCtxMenu();
      this.data = app.current_data.filter(function (ft) {
        return !!ft[_this8.variable1] && !!ft[_this8.variable2];
      }).map(function (d) {
        var res = { id: d.id, name: d.name };
        res[_this8.variable1] = d[_this8.variable1];
        res[_this8.variable2] = d[_this8.variable2];
        return res;
      });
      this.current_ids = this.data.map(function (d) {
        return d.id;
      });
      resetColors();
      this.nbFt = this.data.length;
      computePercentileRank(this.data, this.variable1, this.rank_variable1);
      computePercentileRank(this.data, this.variable2, this.rank_variable2);
      this.ref_value1 = this.data.find(function (d) {
        return d.id === app.current_config.my_region;
      })[this.variable1];
      this.updateCompletude();
      this.updateMapRegio();
      this.updateTableStat();
      this.update();
    }
  }, {
    key: 'changeVariableY',
    value: function changeVariableY(code_variable) {
      var _this9 = this;

      this.variable2 = code_variable;
      this.rank_variable2 = 'pr_' + this.variable2;
      var var_info = variables_info.find(function (ft) {
        return ft.id === code_variable;
      });
      this.pretty_name2 = var_info.name;
      this.unit2 = var_info.unit;
      svg_container$1.select('#title-axis-y').html(code_variable + ' &#x25BE;');
      // TODO: Also change the position of the button alowing to inverse the serie
      this.updateItemsCtxMenu();
      this.data = app.current_data.filter(function (ft) {
        return !!ft[_this9.variable1] && !!ft[_this9.variable2];
      }).map(function (d) {
        var res = { id: d.id, name: d.name };
        res[_this9.variable1] = d[_this9.variable1];
        res[_this9.variable2] = d[_this9.variable2];
        return res;
      });
      this.current_ids = this.data.map(function (d) {
        return d.id;
      });
      resetColors();
      this.nbFt = this.data.length;
      computePercentileRank(this.data, this.variable1, this.rank_variable1);
      computePercentileRank(this.data, this.variable2, this.rank_variable2);
      this.ref_value2 = this.data.find(function (d) {
        return d.id === app.current_config.my_region;
      })[this.variable2];
      this.updateCompletude();
      this.updateMapRegio();
      this.updateTableStat();
      this.update();
    }
  }, {
    key: 'updateItemsCtxMenu',
    value: function updateItemsCtxMenu() {
      var _this10 = this;

      this.itemsX = app.current_config.ratio.filter(function (elem) {
        return elem !== _this10.variable2;
      }).map(function (elem) {
        return {
          name: elem,
          action: function action() {
            return _this10.changeVariableX(elem);
          }
        };
      });
      this.itemsY = app.current_config.ratio.filter(function (elem) {
        return elem !== _this10.variable1;
      }).map(function (elem) {
        return {
          name: elem,
          action: function action() {
            return _this10.changeVariableY(elem);
          }
        };
      });
    }
  }, {
    key: 'addVariable',
    value: function addVariable$$1(code_variable, name_variable) {
      var _this11 = this;

      this.itemsX.push({
        name: code_variable,
        action: function action() {
          return _this11.changeVariableX(code_variable);
        }
      });
      this.itemsY.push({
        name: code_variable,
        action: function action() {
          return _this11.changeVariableY(code_variable);
        }
      });
    }
  }, {
    key: 'removeVariable',
    value: function removeVariable$$1(code_variable) {
      var _this12 = this;

      // Remove the variable from the X and Y list of items:
      for (var i = this.itemsX.length - 1; i > -1; i--) {
        if (this.itemsX[i].name === code_variable) {
          this.itemsX.splice(i, 1);
          break;
        }
      }
      for (var _i = this.itemsY.length - 1; _i > -1; _i--) {
        if (this.itemsY[_i].name === code_variable) {
          this.itemsY.splice(_i, 1);
          break;
        }
      }

      // If the variable to remove was currently used for drawing this chart,
      // set a new variable for this axis and redraw the chart:
      if (code_variable === this.variable1) {
        var new_var_x = this.itemsX.filter(function (ft) {
          return ft.name !== _this12.variable2;
        })[0].name;
        this.changeVariableX(new_var_x);
      } else if (code_variable === this.variable2) {
        var new_var_y = this.itemsY.filter(function (ft) {
          return ft.name !== _this12.variable1;
        })[0].name;
        this.changeVariableY(new_var_y);
      }
    }
  }, {
    key: 'remove',
    value: function remove() {
      this.table_stats.remove();
      this.map_elem.unbindBrushClick();
      this.map_elem = null;
      svg_bar$1.html('');
    }
  }, {
    key: 'bindMap',
    value: function bindMap(map_elem) {
      this.map_elem = map_elem;
      this.map_elem.displayLegend(1);
      this.updateMapRegio();
      this.update();
    }
  }, {
    key: 'bindMenu',
    value: function bindMenu() {
      var self = this;
      var menu = d3.select('#menu_selection');

      menu.select('#ind_raw_values').on('click', function () {
        if (this.classList.contains('active')) {
          return;
        }
        self.type = 'value';
        this.classList.add('active');
        menu.select('#ind_ranks').attr('class', 'choice_ind');
        self.update();
      });

      menu.select('#ind_ranks').on('click', function () {
        if (this.classList.contains('active')) {
          return;
        }
        self.type = 'rank';
        this.classList.add('active');
        menu.select('#ind_raw_values').attr('class', 'choice_ind');
        self.update();
      });
    }
  }, {
    key: 'selectBelowMean',
    value: function selectBelowMean() {
      var _this13 = this;

      var mean1 = getMean(this.data.map(function (ft) {
        return ft[_this13.variable1];
      }));
      var mean2 = getMean(this.data.map(function (ft) {
        return ft[_this13.variable2];
      }));
      svg_container$1.select('.brush').call(this.brush.move, null);
      app.colors = {};
      for (var i = 0, len_i = this.data.length; i < len_i; i++) {
        var ft = this.data[i];
        if (ft[this.variable1] <= mean1 && ft[this.variable2] <= mean2) {
          app.colors[ft.id] = comp2(ft[this.variable1], ft[this.variable2], this.ref_value1, this.ref_value2, this.xInversed, this.yInversed);
        }
      }
      app.colors[app.current_config.my_region] = color_highlight;
      this.updateLight();
      this.updateMapRegio();
      this.map_elem.removeRectBrush();
    }
  }, {
    key: 'selectBelowMyRegion',
    value: function selectBelowMyRegion() {
      svg_container$1.select('.brush').call(this.brush.move, null);
      app.colors = {};
      for (var i = 0, len_i = this.data.length; i < len_i; i++) {
        var ft = this.data[i];
        if (ft[this.variable1] <= this.ref_value1 && ft[this.variable2] <= this.ref_value2) {
          app.colors[ft.id] = comp2(ft[this.variable1], ft[this.variable2], this.ref_value1, this.ref_value2, this.xInversed, this.yInversed);
        }
      }
      app.colors[app.current_config.my_region] = color_highlight;
      this.updateLight();
      this.updateMapRegio();
      this.map_elem.removeRectBrush();
    }
  }, {
    key: 'selectAboveMean',
    value: function selectAboveMean() {
      var _this14 = this;

      var mean1 = getMean(this.data.map(function (ft) {
        return ft[_this14.variable1];
      }));
      var mean2 = getMean(this.data.map(function (ft) {
        return ft[_this14.variable2];
      }));
      svg_container$1.select('.brush').call(this.brush.move, null);
      app.colors = {};
      for (var i = 0, len_i = this.data.length; i < len_i; i++) {
        var ft = this.data[i];
        if (ft[this.variable1] >= mean1 && ft[this.variable2] >= mean2) {
          app.colors[ft.id] = comp2(ft[this.variable1], ft[this.variable2], this.ref_value1, this.ref_value2, this.xInversed, this.yInversed);
        }
      }
      app.colors[app.current_config.my_region] = color_highlight;
      this.updateLight();
      this.updateMapRegio();
      this.map_elem.removeRectBrush();
    }
  }, {
    key: 'selectAboveMyRegion',
    value: function selectAboveMyRegion() {
      svg_container$1.select('.brush').call(this.brush.move, null);
      app.colors = {};
      for (var i = 0, len_i = this.data.length; i < len_i; i++) {
        var ft = this.data[i];
        if (ft[this.variable1] >= this.ref_value1 && ft[this.variable2] >= this.ref_value2) {
          app.colors[ft.id] = comp2(ft[this.variable1], ft[this.variable2], this.ref_value1, this.ref_value2, this.xInversed, this.yInversed);
        }
      }
      app.colors[app.current_config.my_region] = color_highlight;
      this.updateLight();
      this.updateMapRegio();
      this.map_elem.removeRectBrush();
    }
  }, {
    key: 'prepareTableStat',
    value: function prepareTableStat() {
      var _this15 = this;

      var values1 = this.data.map(function (d) {
        return d[_this15.variable1];
      });
      var values2 = this.data.map(function (d) {
        return d[_this15.variable2];
      });
      var features = [{
        Min: d3.min(values1),
        Max: d3.max(values1),
        Moy: getMean(values1),
        Med: d3.median(values1),
        id: this.variable1,
        Variable: this.variable1,
        'Ma rÃ©gion': this.ref_value1
      }, {
        Min: d3.min(values2),
        Max: d3.max(values2),
        Moy: getMean(values2),
        Med: d3.median(values2),
        id: this.variable2,
        Variable: this.variable2,
        'Ma rÃ©gion': this.ref_value2
      }];
      return features;
    }
  }, {
    key: 'updateTableStat',
    value: function updateTableStat() {
      this.table_stats.removeAll();
      this.table_stats.addFeatures(this.prepareTableStat());
    }
  }, {
    key: 'makeTableStat',
    value: function makeTableStat() {
      var features = this.prepareTableStat();
      this.table_stats = new TableResumeStat(features);
    }
  }, {
    key: 'getHelpMessage',
    value: function getHelpMessage() {
      return '\n<h3>Position  - 2 indicateurs</h3>\n\n<b>Aide g\xE9n\xE9rale</b>\nCe graphique bidimensionnel repr\xE9sente la position de l\u2019unit\xE9 territoriale de r\xE9f\xE9rence sur deux indicateurs pour un espace d\u2019\xE9tude et un maillage territorial d\u2019analyse donn\xE9. La valeur de l\u2019unit\xE9 territoriale de r\xE9f\xE9rence appara\xEEt en surbrillance (jaune). Les lignes repr\xE9sent\xE9es par un tiret\xE9 rouge repr\xE9sentent la moyenne de l\u2019espace d\u2019\xE9tude pour chacun des indicateurs s\xE9lectionn\xE9s (non pond\xE9r\xE9e).\n\nSur le graphique et la carte, les unit\xE9s territoriales qui disposent de valeurs sup\xE9rieures \xE0 la unit\xE9 territoriale de r\xE9f\xE9rence pour les deux indicateurs sont repr\xE9sent\xE9es en vert. Les unit\xE9s territoriales caract\xE9ris\xE9es par des valeurs inf\xE9rieures \xE0 l\u2019unit\xE9 territoriale de r\xE9f\xE9rence pour les deux indicateurs sont repr\xE9sent\xE9es en rouge. Celles qui sont sup\xE9rieures pour l\u2019indicateur repr\xE9sent\xE9 sur l\u2019axe des abscisses et inf\xE9rieur sur l\u2019axe des ordonn\xE9es sont repr\xE9sent\xE9es en orange\xA0; et violet \xE0 l\u2019inverse. Sur ce graphique, il est possible d\u2019inverser l\u2019ordre de classement de l\u2019indicateur (appuyer sur le \xAB\xA0+\xA0\xBB)\xA0: les valeurs minimales seront alors consid\xE9r\xE9es comme maximale sur l\u2019axe.\n\nPar d\xE9faut, ce graphique est exprim\xE9 dans les valeurs brutes de l\u2019indicateur (pourcentage par exemple). En s\xE9lectionnant l\u2019option \xABvaleurs de rang\xA0\xBB, l\u2019indicateur est normalis\xE9 de 0 (valeur minimale) \xE0 100 (valeur maximale). L\u2019utilisation possible de ce type de transformation est la suivante\xA0: une unit\xE9 territoriale disposant d\u2019un indice de 67 sur un indicateur signifie que 33\xA0% des unit\xE9s territoriales de l\u2019espace d\u2019\xE9tude sont caract\xE9ris\xE9es par des valeurs sup\xE9rieures \xE0 l\u2019unit\xE9 territoriale de r\xE9f\xE9rence pour les indicateurs s\xE9lectionn\xE9s. Et r\xE9ciproquement. Les valeurs de rang permettent notamment de rendre comparables des unit\xE9s de mesure et des param\xE8tres de dispersion de deux indicateurs. Il ne faut n\xE9anmoins pas omettre que cette transformation nuit \xE0 la restitution de la dispersion statistique effective des indicateurs.';
    }
  }]);
  return ScatterPlot2;
}();

var svg_bar$2 = void 0;
var margin$2 = void 0;
var bbox_svg$3 = void 0;
var width$2 = void 0;
var height$2 = void 0;

var updateDimensions$2 = function updateDimensions() {
  svg_bar$2 = d3.select('#svg_bar');
  margin$2 = { top: 50, right: 60, bottom: 50, left: 60 };
  bbox_svg$3 = svg_bar$2.node().getBoundingClientRect();
  width$2 = +bbox_svg$3.width - margin$2.left - margin$2.right;
  height$2 = 500 * app.ratioToWide - margin$2.top - margin$2.bottom;
  svg_bar$2.attr('height', 500 * app.ratioToWide + 'px');
  svg_bar$2 = svg_bar$2.append('g').attr('class', 'container');
};

var wrap = function wrap(_text, _width) {
  _text.each(function () {
    var text = d3.select(this),
        words = text.text().split(/\s+/).reverse(),
        lineHeight = 1.4,
        x = +text.attr('x'),
        dy = parseFloat(text.attr('dy')),
        // ems
    nb_var = app.current_config.ratio.length;
    var y = +text.attr('y');
    var id = +text.attr('id');
    var line = [];
    var lineNumber = 0;
    // if (y > height / 2 - 35) {
    //   y -= 40;
    // }
    if (id === 0) y = y + 12;
    if (id === nb_var / 2) y = y - 12;
    var tspan = text.text(null).append('tspan').attr('x', x).attr('y', y).attr('dy', dy + 'em');
    var word = words.pop();
    while (word) {
      line.push(word);
      tspan.text(line.join(' '));
      if (tspan.node().getComputedTextLength() > _width) {
        line.pop();
        tspan.text(line.join(' '));
        line = [word];
        tspan = text.append('tspan').attr('x', x).attr('y', y).attr('dy', ++lineNumber * lineHeight + dy + 'em').text(word);
      }
      word = words.pop();
    }
  });
};

var move = function move(array, from, to) {
  array.splice(to, 0, array.splice(from, 1)[0]);
  return array;
};

var swap = function swap(array, ix1, ix2) {
  // eslint-disable-line no-param-reassign
  var _ref = [array[ix2], array[ix1]];
  array[ix1] = _ref[0];
  array[ix2] = _ref[1];
  return array;
};

var prepare_data_radar_default = function prepare_data_radar_default(data, variables) {
  // Prepare the data for "My RÃ©gion":
  var v_my_region = data.find(function (d) {
    return d.id === app.current_config.my_region;
  });
  var ojb_my_region = {
    name: app.current_config.my_region,
    axes: []
  };
  variables.forEach(function (v) {
    var t = variables_info.find(function (d) {
      return d.id === v;
    }).id;
    var _v = 'pr_' + v;
    ojb_my_region.axes.push({
      axis: t, value: v_my_region[_v]
    });
  });
  return ojb_my_region;
};

var prepare_data_radar_ft = function prepare_data_radar_ft(data, variables, ft) {
  var ft_values = data.find(function (d) {
    return d.id === ft;
  });
  if (!ft_values) {
    return null;
  }
  var obj = {
    name: ft,
    axes: []
  };
  variables.forEach(function (v) {
    var t = variables_info.find(function (d) {
      return d.id === v;
    }).id;
    var _v = 'pr_' + v;
    obj.axes.push({
      axis: t, value: ft_values[_v]
    });
  });
  return obj;
};

var RadarChart3 = function () {
  function RadarChart3(data, options) {
    var _this = this;

    classCallCheck(this, RadarChart3);

    updateDimensions$2();
    var cfg = {
      w: width$2 - 20, // Width of the circle
      h: height$2 - 20, // Height of the circle
      margin: margin$2, // The margins of the SVG
      levels: 10, // How many levels or inner circles should there be drawn
      maxValue: 100, // What is the value that the biggest circle will represent
      labelFactor: 1.2, // How much farther than the radius of the outer circle should the labels be placed
      wrapWidth: 75, // The number of pixels after which a label needs to be given a new line
      opacityArea: 0.10, // The opacity of the area of the blob
      dotRadius: 4, // The size of the colored circles of each blog
      opacityCircles: 0.1, // The opacity of the circles of each blob
      strokeWidth: 2, // The width of the stroke around each blob
      roundStrokes: true, // If true the area and stroke will follow a round path (cardinal-closed)
      color: d3.scaleOrdinal(d3.schemeCategory10), // Color function,
      format: '.2', // The format string to be used by d3.format
      unit: '%', // The unit to display after the number on the axis and point tooltips (like $, â‚¬, %, etc)
      legend: false,
      allowInverseData: true
    };
    this.cfg = cfg;
    // Put all of the options into a variable called cfg
    if (typeof options !== 'undefined') {
      var opts_key = Object.keys(options);
      for (var i = 0, len_i = opts_key.length; i < len_i; i++) {
        var k = opts_key[i];
        if (typeof options[k] !== 'undefined') {
          cfg[k] = options[k];
        }
      }
    }
    this.inversedAxis = new Set();
    this.g = svg_bar$2.append('g').attr('id', 'RadarGrp').attr('transform', 'translate(' + (cfg.w / 2 + cfg.margin.left) + ',' + (cfg.h / 2 + cfg.margin.top) + ')');

    this.prepareData(data);
    this.drawAxisGrid();
    this.drawArea();

    this.completude = new CompletudeSection();
    // Compute the "complÃ©tude" value for these ratios:
    this.completude.update(calcCompletudeSubset(app, this.variables, 'array'), calcPopCompletudeSubset(app, this.variables));
    app.colors[app.current_config.my_region] = color_highlight;
    if (cfg.allowInverseData) {
      this.inverse_data = function (field) {
        var data_length = _this.data.length;
        if (!field) {
          for (var _i = 0; _i < data_length; _i++) {
            var ax = _this.data[_i].axes;
            for (var j = 0; j < ax.length; j++) {
              ax[j].value = 100 - ax[j].value;
            }
          }
        } else {
          for (var _i2 = 0; _i2 < data_length; _i2++) {
            var _ax = _this.data[_i2].axes;
            for (var _j = 0; _j < _ax.length; _j++) {
              if (_ax[_j].axis === field) {
                _ax[_j].value = 100 - _ax[_j].value;
              }
            }
          }
        }
        _this.update();
      };
    }
    this.makeTableStat();
  }

  createClass(RadarChart3, [{
    key: 'add_element',
    value: function add_element(elem) {
      var _this2 = this;

      var n_axis = elem.axes.map(function (i) {
        return i.axis;
      });
      if (!(JSON.stringify(n_axis.sort()) === JSON.stringify(this.allAxis.sort()))) {
        throw new Error('Expected element with same axes name than existing data.');
      }
      elem.axes.forEach(function (ft) {
        if (_this2.inversedAxis.has(ft.axis)) {
          ft.value = 100 - ft.value; // eslint-disable-line no-param-reassign
        }
      });
      this.data.push(elem);
      var colors_in_use = Object.keys(app.colors).map(function (k) {
        return app.colors[k];
      });
      for (var j = 0; j < this.data.length; j++) {
        var on_axes = [];
        if (this.id_my_region === this.data[j].name) app.colors[this.data[j].name] = color_highlight;else if (!app.colors[this.data[j].name]) {
          var ii = 0;
          while (ii++ < 21) {
            var c = this.cfg.color(ii);
            if (!(colors_in_use.indexOf(c) > -1)) {
              app.colors[this.data[j].name] = c;
            }
          }
        }
        for (var i = 0; i < this.data[j].axes.length; i++) {
          this.data[j].axes[i].id = this.data[j].name;
          on_axes.push(this.data[j].name);
        }
      }
      this.displayed_ids.push(elem.name);
      var self = this;
      var cfg = this.cfg;

      var blobWrapper = this.g.insert('g', '.radarCircleWrapper').attr('id', elem.name.indexOf(' ') > -1 ? 'ctx' : elem.name).attr('class', 'radarWrapper');

      // Append the backgrounds
      blobWrapper.append('path').attr('class', 'radarArea').attr('d', this.radarLine(elem.axes)).style('fill', app.colors[elem.name]).style('fill-opacity', cfg.opacityArea).on('mouseover', function () {
        // Dim all blobs
        self.g.selectAll('.radarArea').transition().duration(200).style('fill-opacity', 0);
        // Bring back the hovered over blob
        d3.select(this).transition().duration(200).style('fill-opacity', 0.3);
      }).on('mouseout', function () {
        // Bring back all blobs
        self.g.selectAll('.radarArea').transition().duration(200).style('fill-opacity', cfg.opacityArea);
      }).on('click', function (d) {
        var ft_id = d.name;
        self.map_elem.target_layer.selectAll('path').each(function (ft) {
          if (ft.id === ft_id) {
            var cloned = this.cloneNode();
            cloned.style.stroke = 'yellow';
            cloned.style.strokeWidth = '2.25px';
            cloned.classList.add('cloned');
            self.map_elem.layers.node().appendChild(cloned);
            setTimeout(function () {
              cloned.remove();
            }, 5000);
          }
        });
      });

      // Create the outlines
      blobWrapper.append('path').attr('class', 'radarStroke').attr('d', this.radarLine(elem.axes)).style('stroke-width', cfg.strokeWidth + 'px').style('stroke', app.colors[elem.name]).style('fill', 'none').style('filter', 'url(#glow)');

      // Append the circles
      blobWrapper.selectAll('.radarCircle').data(elem.axes).enter().append('circle').attr('class', 'radarCircle').attr('r', cfg.dotRadius).attr('cx', function (d, i) {
        return _this2.rScale(d.value) * math_cos(_this2.angleSlice * i - HALF_PI);
      }).attr('cy', function (d, i) {
        return _this2.rScale(d.value) * math_sin(_this2.angleSlice * i - HALF_PI);
      }).style('fill', app.colors[elem.name]).style('fill-opacity', 0.8);

      blobWrapper.node().__data__ = elem;

      // ///////////////////////////////////////////////////////
      // ////// Append invisible circles for tooltip ///////////
      // ///////////////////////////////////////////////////////

      // Wrapper for the invisible circles on top
      var blobCircleWrapper = this.g.insert('g', '.tooltip').attr('id', elem.name.indexOf(' ') > -1 ? 'ctx' : elem.name).attr('class', 'radarCircleWrapper');

      blobCircleWrapper.node().__data__ = elem;

      // Append a set of invisible circles on top for the mouseover pop-up
      blobCircleWrapper.selectAll('.radarInvisibleCircle').data(elem.axes).enter().append('circle').attr('class', 'radarInvisibleCircle').attr('r', cfg.dotRadius * 1.5).attr('cx', function (d, i) {
        return _this2.rScale(d.value) * math_cos(_this2.angleSlice * i - HALF_PI);
      }).attr('cy', function (d, i) {
        return _this2.rScale(d.value) * math_sin(_this2.angleSlice * i - HALF_PI);
      }).style('fill', 'none').style('pointer-events', 'all').on('mouseover', function (d) {
        self.g.select('.tooltip').attr('x', this.cx.baseVal.value - 10).attr('y', this.cy.baseVal.value - 10).transition().style('display', 'block').text(self.Format(d.value) + cfg.unit);
      }).on('mouseout', function () {
        self.g.select('.tooltip').transition().style('display', 'none').text('');
      });
    }
  }, {
    key: 'changeOrder',
    value: function changeOrder() {
      this.data = this.data.slice(1, this.data.length).concat(this.data.slice(0, 1));
      this.update();
    }
  }, {
    key: 'prepareData',
    value: function prepareData(data) {
      var _this3 = this;

      // Set the minimum number of variables to keep selected for this kind of chart:
      app.current_config.nb_var = 3;
      this.variables = app.current_config.ratio;
      this.ref_data = data.slice().filter(function (ft) {
        return _this3.variables.map(function (v) {
          return !!ft[v];
        }).every(function (d) {
          return d === true;
        });
      });
      this.rank_variables = this.variables.map(function (d) {
        return 'pr_' + d;
      });
      this.variables.forEach(function (d, i) {
        computePercentileRank(_this3.ref_data, d, _this3.rank_variables[i]);
      });
      this.data = [prepare_data_radar_default(this.ref_data, this.variables)];
      this.displayed_ids = this.data.map(function (d) {
        return d.name;
      });
      this.current_ids = this.ref_data.map(function (d) {
        return d.id;
      });
      this.id_my_region = app.current_config.my_region;

      // If the supplied maxValue is smaller than the actual one, replace by the max in the data
      var maxValue = 0;
      for (var j = 0; j < this.data.length; j++) {
        if (this.id_my_region === this.data[j].name) app.colors[this.data[j].name] = color_highlight;else app.colors[this.data[j].name] = this.cfg.color(j + 1);
        for (var i = 0; i < this.data[j].axes.length; i++) {
          this.data[j].axes[i].id = this.data[j].name;
          if (this.data[j].axes[i].value > maxValue) {
            maxValue = this.data[j].axes[i].value;
          }
        }
      }

      this.maxValue = math_max(this.cfg.maxValue, maxValue);
      this.allAxis = this.data[0].axes.map(function (i) {
        return i.axis;
      }); // Names of each axis
      this.total = this.allAxis.length; // The number of different axes
      this.radius = Math.min(this.cfg.w / 2, this.cfg.h / 2); // Radius of the outermost circle
      this.Format = d3.format(this.cfg.format); // Formatting
      this.angleSlice = Math.PI * 2 / this.total; // The width in radians of each "slice"
      // Scale for the radius
      this.rScale = d3.scaleLinear().range([0, this.radius]).domain([0, this.maxValue]);
      // The radial line function
      this.radarLine = d3.radialLine().curve(this.cfg.roundStrokes ? d3.curveCardinalClosed : d3.curveLinearClosed).radius(function (d) {
        return _this3.rScale(d.value);
      }).angle(function (d, i) {
        return i * _this3.angleSlice;
      });
    }
  }, {
    key: 'drawAxisGrid',
    value: function drawAxisGrid() {
      var self = this;
      var cfg = this.cfg;
      var g = this.g;
      var radius = this.radius;
      var maxValue = this.maxValue;
      var rScale = this.rScale;
      var angleSlice = this.angleSlice;

      var labelClicked = function labelClicked() {
        var ix = +this.id;
        if (ix + 1 === self.allAxis.length) {
          for (var i = 0; i < self.data.length; i++) {
            swap(self.data[i].axes, ix, 0);
          }
        } else {
          var new_ix = ix + 1;
          for (var _i3 = 0; _i3 < self.data.length; _i3++) {
            move(self.data[_i3].axes, ix, new_ix);
          }
        }
        self.update();
      };

      var labelCtxMenu = function labelCtxMenu(label) {
        if (self.inversedAxis.has(label)) {
          self.inversedAxis.delete(label);
          this.style.fill = 'black';
        } else {
          self.inversedAxis.add(label);
          this.style.fill = 'red';
        }
        d3.event.stopPropagation();
        d3.event.preventDefault();
        self.inverse_data(label);
      };

      var axisGrid = g.append('g').attr('class', 'axisWrapper');

      // Draw the background circles
      axisGrid.selectAll('.levels').data(d3.range(1, cfg.levels + 1).reverse()).enter().append('circle').attrs(function (d) {
        return {
          class: 'gridCircle',
          r: radius / cfg.levels * d
        };
      }).styles(function (d) {
        if (d === 5) {
          return {
            fill: '#CDCDCD',
            stroke: 'rgb(245, 138, 138)',
            'stroke-dasharray': '5, 5',
            'fill-opacity': cfg.opacityCircles,
            filter: 'url(#glow)'
          };
        }
        return {
          fill: '#CDCDCD',
          stroke: '#CDCDCD',
          'fill-opacity': cfg.opacityCircles,
          filter: 'url(#glow)'
        };
      });

      // // Text indicating at what % each level is
      // axisGrid.selectAll('.axisLabel')
      //   .data(d3.range(1, (cfg.levels + 1)).reverse())
      //   .enter().append('text')
      //   .attr('class', 'axisLabel')
      //   .attr('x', 4)
      //   .attr('y', d => -d * radius / cfg.levels)
      //   .attr('dy', '0.4em')
      //   .style('font-size', '10px')
      //   .attr('fill', '#737373')
      //   .text(d => Format(maxValue * d / cfg.levels) + cfg.unit);

      // Create the straight lines radiating outward from the center
      var axis = axisGrid.selectAll('.axis').data(this.allAxis).enter().append('g').attr('class', 'axis');
      // Append the lines
      axis.append('line').attr('x1', 0).attr('y1', 0).attr('x2', function (d, i) {
        return rScale(maxValue * 1.1) * math_cos(angleSlice * i - HALF_PI);
      }).attr('y2', function (d, i) {
        return rScale(maxValue * 1.1) * math_sin(angleSlice * i - HALF_PI);
      }).attr('class', 'line').style('stroke', 'white').style('stroke-width', '2px');

      // Append the labels at each axis
      axis.append('text').attr('class', 'legend').style('font-size', '11px').attr('id', function (d, i) {
        return i;
      }).attr('text-anchor', 'middle').attr('dy', '0.35em').attr('x', function (d, i) {
        return rScale(maxValue * cfg.labelFactor) * math_cos(angleSlice * i - HALF_PI);
      }).attr('y', function (d, i) {
        return rScale(maxValue * cfg.labelFactor) * math_sin(angleSlice * i - HALF_PI);
      }).style('fill', function (d) {
        return self.inversedAxis.has(d) ? 'red' : 'black';
      }).style('cursor', 'pointer').text(function (d) {
        return d;
      }).on('click', labelClicked).on('contextmenu', cfg.allowInverseData ? labelCtxMenu : null).call(wrap, cfg.wrapWidth);

      // Filter for the outside glow
      var filter = g.append('defs').append('filter').attr('id', 'glow');
      filter.append('feGaussianBlur').attr('stdDeviation', '2.5').attr('result', 'coloredBlur');
      var feMerge = filter.append('feMerge');
      feMerge.append('feMergeNode').attr('in', 'coloredBlur');
      feMerge.append('feMergeNode').attr('in', 'SourceGraphic');

      this.axisGrid = axisGrid;
    }

    // handleLegend() {
    //   const cfg = this.cfg;
    //   if (cfg.legend !== false && typeof cfg.legend === 'object') {
    //     const names = this.data.map(el => el.name);
    //     if (cfg.legend.title) {
    //       this.legendZone.append('text')
    //         .attr('class', 'title')
    //         .attr('transform', 'translate(0, -20)')
    //         .attr('x', cfg.w - 70)
    //         .attr('y', 10)
    //         .attr('font-size', '12px')
    //         .attr('fill', '#404040')
    //         .text(cfg.legend.title);
    //     }
    //     const legend = this.legendZone
    //       .selectAll('g')
    //       .data(names);
    //     const legendEnter = legend
    //       .enter()
    //       .append('g');
    //
    //     // Create rectangles markers
    //     legendEnter
    //       .append('rect')
    //       .attrs((d, i) => ({
    //         x: cfg.w - 65,
    //         y: i * 20,
    //         width: 10,
    //         height: 10,
    //       }))
    //       .style('fill', d => app.colors[d.name]);
    //
    //     // Create labels
    //     legendEnter
    //       .append('text')
    //       .attrs((d, i) => ({
    //         x: cfg.w - 52,
    //         y: i * 20 + 9,
    //         fill: '#737373',
    //         'font-size': '11px',
    //       }))
    //       .text(d => d);
    //
    //     legend.merge(legendEnter).selectAll('rect')
    //       .attr('y', (d, i) => i * 20)
    //       .style('fill', d => app.colors[d.name]);
    //
    //     legend.merge(legendEnter).selectAll('text')
    //       .attrs((d, i) => ({
    //         x: cfg.w - 52,
    //         y: i * 20 + 9,
    //       }))
    //       .text(d => d);
    //
    //     legend.exit().remove();
    //   }
    // }

  }, {
    key: 'drawArea',
    value: function drawArea() {
      var _this4 = this;

      var cfg = this.cfg;
      var g = this.g;
      var Format = this.Format;
      var rScale = this.rScale;
      var angleSlice = this.angleSlice;

      // Create a wrapper for the blobs
      var blobWrapper = g.selectAll('.radarWrapper').data(this.data, function (d) {
        return d.name;
      }).enter().append('g').attr('id', function (d) {
        return d.name.indexOf(' ') > -1 ? 'ctx' : d.name;
      }).attr('class', 'radarWrapper');

      // Append the backgrounds
      blobWrapper.append('path').attr('class', 'radarArea').attr('d', function (d) {
        return _this4.radarLine(d.axes);
      }).style('fill', function (d) {
        return app.colors[d.name];
      }).style('fill-opacity', cfg.opacityArea).on('mouseover', function () {
        // Dim all blobs
        g.selectAll('.radarArea').transition().duration(200).style('fill-opacity', 0.1);
        // Bring back the hovered over blob
        d3.select(this).transition().duration(200).style('fill-opacity', 0.7);
      }).on('mouseout', function () {
        g.selectAll('.radarArea').transition().duration(200).style('fill-opacity', cfg.opacityArea);
      });

      // Create the outlines
      blobWrapper.append('path').attr('class', 'radarStroke').attr('d', function (d) {
        return _this4.radarLine(d.axes);
      }).style('stroke-width', cfg.strokeWidth + 'px').style('stroke', function (d, i) {
        return app.colors[d.name];
      }).style('fill', 'none').style('filter', 'url(#glow)');

      // Append the circles
      blobWrapper.selectAll('.radarCircle').data(function (d) {
        return d.axes;
      }).enter().append('circle').attr('class', 'radarCircle').attr('r', cfg.dotRadius).attr('cx', function (d, i) {
        return rScale(d.value) * math_cos(angleSlice * i - HALF_PI);
      }).attr('cy', function (d, i) {
        return rScale(d.value) * math_sin(angleSlice * i - HALF_PI);
      }).style('fill', function (d) {
        return app.colors[d.id];
      }).style('fill-opacity', 0.8);

      // ///////////////////////////////////////////////////////
      // ////// Append invisible circles for tooltip ///////////
      // ///////////////////////////////////////////////////////

      // Wrapper for the invisible circles on top
      var blobCircleWrapper = g.selectAll('.radarCircleWrapper').data(this.data, function (d) {
        return d.name;
      }).enter().append('g').attr('id', function (d) {
        return d.name.indexOf(' ') > -1 ? 'ctx' : d.name;
      }).attr('class', 'radarCircleWrapper');

      // Append a set of invisible circles on top for the mouseover pop-up
      blobCircleWrapper.selectAll('.radarInvisibleCircle').data(function (d) {
        return d.axes;
      }).enter().append('circle').attr('class', 'radarInvisibleCircle').attr('r', cfg.dotRadius * 1.5).attr('cx', function (d, i) {
        return rScale(d.value) * math_cos(angleSlice * i - HALF_PI);
      }).attr('cy', function (d, i) {
        return rScale(d.value) * math_sin(angleSlice * i - HALF_PI);
      }).style('fill', 'none').style('pointer-events', 'all').on('mouseover', function (d) {
        g.select('.tooltip').attr('x', this.cx.baseVal.value - 10).attr('y', this.cy.baseVal.value - 10).transition().style('display', 'block').text(Format(d.value) + cfg.unit);
      }).on('mouseout', function () {
        g.select('.tooltip').transition().style('display', 'none').text('');
      });

      var tooltip = g.append('text').attrs({ class: 'tooltip', x: 0, y: 0, dy: '0.35em', 'text-anchor': 'middle' }).styles({ 'font-size': '12px', display: 'none' });
    }
  }, {
    key: 'update',
    value: function update() {
      var _this5 = this;

      var rScale = this.rScale;
      var maxValue = this.maxValue;
      var cfg = this.cfg;
      var angleSlice = this.angleSlice;
      // console.log(this.current_ids);
      // if (new_data) {
      //   const new_axis = new_data[0].axes.map(elem => elem.axis);
      //   if (!(JSON.stringify(new_axis) === JSON.stringify(this.allAxis))) {
      //     throw new Error('Expected element with same axes name than existing data.');
      //   }
      //   this.data = new_data;
      //   this.allAxis = new_axis;
      // } else {
      this.allAxis = this.data[0].axes.map(function (elem) {
        return elem.axis;
      });
      // }
      var update_axis = this.axisGrid.selectAll('.axis').data(this.allAxis);

      var t = this.g.selectAll('.radarWrapper').transition().duration(225);

      update_axis.select('text.legend').attrs(function (d, i) {
        return {
          id: i,
          x: rScale(maxValue * cfg.labelFactor) * math_cos(angleSlice * i - HALF_PI),
          y: rScale(maxValue * cfg.labelFactor) * math_sin(angleSlice * i - HALF_PI)
        };
      }).style('fill', function (d) {
        return _this5.inversedAxis.has(d) ? 'red' : 'black';
      }).style('cursor', 'pointer').text(function (d) {
        return d;
      }).call(wrap, cfg.wrapWidth);

      var update_blobWrapper = this.g.selectAll('.radarWrapper').data(this.data, function (d) {
        return d.name;
      });

      update_blobWrapper.select('.radarArea').transition(t).attr('d', function (d) {
        return _this5.radarLine(d.axes);
      });

      update_blobWrapper.select('.radarStroke').transition(t).attr('d', function (d) {
        return _this5.radarLine(d.axes);
      });

      var circle = update_blobWrapper.selectAll('.radarCircle').data(function (d) {
        return d.axes;
      });
      circle.transition(t).attrs(function (d, i) {
        return {
          cx: rScale(d.value) * math_cos(angleSlice * i - HALF_PI),
          cy: rScale(d.value) * math_sin(angleSlice * i - HALF_PI)
        };
      }).styles(function (d) {
        return {
          fill: app.colors[d.id],
          'fill-opacity': 0.8
        };
      });

      var update_blobCircleWrapper = this.g.selectAll('.radarCircleWrapper').data(this.data, function (d) {
        return d.name;
      });

      var invisibleCircle = update_blobCircleWrapper.selectAll('.radarInvisibleCircle').data(function (d) {
        return d.axes;
      });
      invisibleCircle.transition(t).attrs(function (d, i) {
        return {
          cx: rScale(d.value) * math_cos(angleSlice * i - HALF_PI),
          cy: rScale(d.value) * math_sin(angleSlice * i - HALF_PI)
        };
      });
    }
  }, {
    key: 'round_stroke',
    value: function round_stroke(val) {
      var _this6 = this;

      if (val === undefined) {
        return this.cfg.roundStrokes;
      } else if (val !== this.cfg.roundStrokes) {
        this.cfg.roundStrokes = val;
        this.radarLine = d3.radialLine().curve(this.cfg.roundStrokes ? d3.curveCardinalClosed : d3.curveLinearClosed).radius(function (d) {
          return _this6.rScale(d.value);
        }).angle(function (d, i) {
          return i * _this6.angleSlice;
        });
        this.update();
      }
      return val;
    }
  }, {
    key: 'bindMap',
    value: function bindMap(map_elem) {
      this.map_elem = map_elem;
      this.map_elem.resetColors(this.current_ids);
      this.map_elem.displayLegend(2);
      this.updateMapRegio();
    }
  }, {
    key: 'remove',
    value: function remove() {
      this.table_stats.remove();
      this.table_stats = null;
      this.map_elem.layers.selectAll('.cloned').remove();
      this.map_elem.unbindBrushClick();
      this.map_elem = null;
      d3.select('#svg_bar').html('');
    }
  }, {
    key: 'updateChangeRegion',
    value: function updateChangeRegion() {
      this.changeStudyZone();
    }
  }, {
    key: 'changeStudyZone',
    value: function changeStudyZone() {
      var _this7 = this;

      var old_my_region = this.id_my_region;
      var other_features = this.displayed_ids.filter(function (d) {
        return d !== old_my_region;
      });
      this.g.remove();
      this.g = svg_bar$2.append('g').attr('id', 'RadarGrp').attr('transform', 'translate(' + (this.cfg.w / 2 + this.cfg.margin.left) + ',' + (this.cfg.h / 2 + this.cfg.margin.top) + ')');

      this.id_my_region = app.current_config.my_region;
      this.prepareData(app.current_data);
      this.drawAxisGrid();
      this.drawArea();
      other_features.forEach(function (id) {
        var a = prepare_data_radar_ft(_this7.ref_data, _this7.variables, id);
        _this7.add_element(a);
      });
      this.updateMapRegio();
      this.updateCompletude();
      this.updateTableStat();
    }
  }, {
    key: 'addVariable',
    value: function addVariable$$1(code_variable, name_variable) {
      var _this8 = this;

      var other_features = this.displayed_ids.filter(function (d) {
        return d !== _this8.id_my_region;
      });
      this.g.remove();
      this.g = svg_bar$2.append('g').attr('id', 'RadarGrp').attr('transform', 'translate(' + (this.cfg.w / 2 + this.cfg.margin.left) + ',' + (this.cfg.h / 2 + this.cfg.margin.top) + ')');

      this.prepareData(app.current_data);
      this.drawAxisGrid();
      this.drawArea();
      other_features.forEach(function (id) {
        var a = prepare_data_radar_ft(_this8.ref_data, _this8.variables, id);
        _this8.add_element(a);
      });
      this.updateCompletude();
      this.updateMapRegio();
      this.updateTableStat();
    }
  }, {
    key: 'removeVariable',
    value: function removeVariable$$1(code_variable) {
      var _this9 = this;

      var other_features = this.displayed_ids.filter(function (d) {
        return d !== _this9.id_my_region;
      });
      this.g.remove();
      this.g = svg_bar$2.append('g').attr('id', 'RadarGrp').attr('transform', 'translate(' + (this.cfg.w / 2 + this.cfg.margin.left) + ',' + (this.cfg.h / 2 + this.cfg.margin.top) + ')');

      this.prepareData(app.current_data);
      this.drawAxisGrid();
      this.drawArea();
      other_features.forEach(function (id) {
        var a = prepare_data_radar_ft(_this9.ref_data, _this9.variables, id);
        _this9.add_element(a);
      });
      this.updateCompletude();
      this.updateMapRegio();
      this.updateTableStat();
    }
  }, {
    key: 'prepareTableStat',
    value: function prepareTableStat() {
      var _this10 = this;

      var all_values = this.variables.map(function (v) {
        return _this10.ref_data.map(function (d) {
          return d[v];
        });
      });
      var my_region = this.ref_data.find(function (d) {
        return d.id === _this10.id_my_region;
      });
      var features = all_values.map(function (values, i) {
        return {
          Min: d3.min(values),
          Max: d3.max(values),
          Moy: getMean(values),
          Med: d3.median(values),
          id: _this10.variables[i],
          Variable: _this10.variables[i],
          'Ma rÃ©gion': my_region[_this10.variables[i]]
        };
      });
      return features;
    }
  }, {
    key: 'handleClickMap',
    value: function handleClickMap(d, parent) {
      var id = d.id;
      if (this.current_ids.indexOf(id) < 0 || id === this.id_my_region) return;
      if (this.displayed_ids.indexOf(id) < 0) {
        if (this.data.length > 6) {
          alertify.warning('Le nombre maximal de rÃ©gions sÃ©lectionnÃ©es est atteint.');
          return;
        }
        var a = prepare_data_radar_ft(this.ref_data, this.variables, id);
        this.add_element(a);
        this.update();
      } else {
        app.colors[id] = null;
        this.g.selectAll('#' + id + '.radarWrapper').remove();
        this.g.selectAll('#' + id + '.radarCircleWrapper').remove();
        var ix = this.data.map(function (_d, i) {
          return [i, _d.name === id];
        }).find(function (_d) {
          return _d[1] === true;
        })[0];
        this.data.splice(ix, 1);
        this.displayed_ids = this.data.map(function (_d) {
          return _d.name;
        });
        this.update();
      }
      this.updateMapRegio();
    }
  }, {
    key: 'updateCompletude',
    value: function updateCompletude() {
      this.completude.update(calcCompletudeSubset(app, this.variables, 'array'), calcPopCompletudeSubset(app, this.variables));
    }
  }, {
    key: 'updateMapRegio',
    value: function updateMapRegio() {
      var _this11 = this;

      if (!this.map_elem) return;
      this.map_elem.target_layer.selectAll('path').attr('fill', function (d) {
        return d.id === _this11.id_my_region ? color_highlight : _this11.current_ids.indexOf(d.id) > -1 ? _this11.displayed_ids.indexOf(d.id) > -1 ? app.colors[d.id] : color_countries : color_disabled;
      });
    }
  }, {
    key: 'updateTableStat',
    value: function updateTableStat() {
      this.table_stats.removeAll();
      this.table_stats.addFeatures(this.prepareTableStat());
    }
  }, {
    key: 'makeTableStat',
    value: function makeTableStat() {
      var features = this.prepareTableStat();
      this.table_stats = new TableResumeStat(features);
    }
  }, {
    key: 'getHelpMessage',
    value: function getHelpMessage() {
      return '\n<h3>Position  - 3 indicateurs</h3>\n\n<b>Aide g\xE9n\xE9rale</b>\n\nCe graphique construit tel \xAB\xA0une cible\xA0\xBB permet de repr\xE9senter la position de l\u2019unit\xE9 territoriale de r\xE9f\xE9rence pour 3 \xE0 8 indicateurs simultan\xE9ment. Les cercles concentriques qui constituent le graphique expriment les d\xE9ciles de la distribution pour chacun des indicateurs s\xE9lectionn\xE9s (premier cercle = premier d\xE9cile, valeurs minimales par d\xE9faut / cercle ext\xE9rieur = dernier d\xE9cile, valeurs maximales par d\xE9faut). Les indicateurs repr\xE9sent\xE9s sur ce graphique sont de fait normalis\xE9s selon leur rang respectif dans la distribution statistique pour chacun des indicateurs\xA0: 0 correspondant \xE0 la valeur minimale (100\xA0% des unit\xE9s territoriales disposent de valeurs plus fortes) et 100 la valeur maximale (100\xA0% des unit\xE9 territoriales sont caract\xE9ris\xE9es par des valeurs moins fortes).\n\nLe cercle repr\xE9sent\xE9 en tiret\xE9 rouge repr\xE9sente la valeur m\xE9diane (50) pour l\u2019espace d\u2019\xE9tude. Si pour un indicateur la unit\xE9 territoriale se situe \xE0 l\u2019int\xE9rieur de ce cercle, cela signifie que la valeur pour cet indicateur se situe en-dessous de la m\xE9diane de l\u2019espace d\u2019\xE9tude. Si pour un autre indicateur la unit\xE9 territoriale se situe \xE0 l\u2019ext\xE9rieur de ce cercle, cela signifie que la valeur pour cet indicateur se situe au dessus de la m\xE9diane de l\u2019espace d\u2019\xE9tude.\n\nIl est possible de cliquer sur la carte pour visualiser le positionnement d\u2019autres unit\xE9s territoriales par rapport \xE0 l\u2019unit\xE9 territoriale de r\xE9f\xE9rence. Il est d\xE9conseill\xE9 de repr\xE9senter simultan\xE9ment plus de 3 unit\xE9s territoriales sur le m\xEAme graphique, au risque de rendre sa lecture al\xE9atoire.\n\nCe n\u2019est pas tant la forme cr\xE9\xE9e sur ce graphique qu\u2019il faut analyser (la forme d\xE9pend largement de la position des indicateurs sur le graphique, al\xE9atoire par d\xE9finition) que la position au regard de l\u2019espace de r\xE9f\xE9rence ou d\u2019autres unit\xE9s territoriales s\xE9lectionn\xE9es sur le graphique. L\u2019utilisateur peut d\xE8s lors inverser le sens du classement (clic droit sur le label de l\u2019indicateur, adapt\xE9 pour des indicateurs comme le taux de ch\xF4mage ou un taux \xE9lev\xE9 ne signifie pas forc\xE9ment une situation favorable) ou peut inverser l\u2019ordre d\u2019apparition des variables sur le graphique (clic gauche) si l\u2019on souhaite par exemple rapprocher des indicateurs de m\xEAme th\xE9matique c\xF4te \xE0 c\xF4te.';
    }
  }]);
  return RadarChart3;
}();

var svg_bar$3 = void 0;
var margin$3 = void 0;
var bbox_svg$4 = void 0;
var width$3 = void 0;
var height$3 = void 0;
var svg_container$2 = void 0;
var t$2 = void 0;

var updateDimensions$3 = function updateDimensions() {
  svg_bar$3 = d3.select('#svg_bar');
  margin$3 = { top: 20, right: 20, bottom: 40, left: 30 };
  bbox_svg$4 = svg_bar$3.node().getBoundingClientRect();
  width$3 = +bbox_svg$4.width - margin$3.left - margin$3.right;
  height$3 = 500 * app.ratioToWide - margin$3.top - margin$3.bottom;
  svg_bar$3.attr('height', 500 * app.ratioToWide + 'px');
  svg_container$2 = svg_bar$3.append('g').attr('class', 'container');
};

var Similarity1plus = function () {
  function Similarity1plus(ref_data) {
    var _this = this;

    classCallCheck(this, Similarity1plus);

    updateDimensions$3();
    app.chartDrawRatio = app.ratioToWide;
    // Set the minimum number of variables to keep selected for this kind of chart:
    app.current_config.nb_var = 1;
    this.ratios = app.current_config.ratio;
    this.nums = app.current_config.num;
    this.data = ref_data.filter(function (ft) {
      return _this.ratios.map(function (v) {
        return !!ft[v];
      }).every(function (v) {
        return v === true;
      });
    }).slice();
    this.my_region = this.data.find(function (d) {
      return d.id === app.current_config.my_region;
    });
    this.data.forEach(function (ft) {
      _this.ratios.forEach(function (v) {
        // eslint-disable-next-line no-param-reassign
        ft['dist_' + v] = math_abs(+ft[v] - +_this.my_region[v]);
      });
    });
    this.current_ids = this.data.map(function (d) {
      return d.id;
    });
    resetColors();
    this.highlight_selection = [];
    this.serie_inversed = false;
    this.proportionnal_symbols = false;
    this.draw_group = svg_container$2.append('g').attr('transform', 'translate(' + margin$3.left + ', ' + margin$3.top + ')');

    // Prepare the tooltip displayed on mouseover:
    this.tooltip = prepareTooltip2(d3.select(svg_bar$3.node().parentElement), null);

    this.completude = new CompletudeSection();
    this.completude.update(calcCompletudeSubset(app, this.ratios, 'array'), calcPopCompletudeSubset(app, this.ratios));

    // Create the button allowing to choose
    // if the colors are inversed
    // (like green/red for superior/inferior regions)
    svg_container$2.append('image').attrs({
      x: width$3 + margin$3.left + 5,
      y: 232.5,
      width: 15,
      height: 15,
      'xlink:href': 'img/reverse_plus.png',
      id: 'img_reverse'
    }).on('click', function () {
      _this.serie_inversed = !_this.serie_inversed;
      _this.applySelection(_this.highlight_selection.length);
    });

    // Create the section containing the input element allowing to chose
    // how many "close" regions we want to highlight.
    var menu_selection = d3.select(svg_bar$3.node().parentElement).append('div').attr('id', 'menu_selection').styles({ position: 'relative', color: '#4f81bd', 'text-align': 'center' });
    var selection_close = menu_selection.append('p');
    selection_close.append('span').html('SÃ©lection des');
    selection_close.append('input').attrs({ class: 'nb_select', type: 'number' }).styles({ color: '#4f81bd', 'margin-left': '1px' }).property('value', 5);
    selection_close.append('span').html('rÃ©gions les plus proches');
    var section = menu_selection.append('section').attr('class', 'slider-checkbox');
    section.append('input').attrs({ type: 'checkbox', id: 'check_prop' });
    section.append('label').attrs({ class: 'label not_selected', for: 'check_prop' }).text('Cercles proportionnels au numÃ©rateur');

    // const switch_button = menu_selection.append('p')
    //   .attr('class', 'btn-switch');
    // switch_button.append('input')
    //   .attrs({ type: 'radio', id: 'yes', name: 'switch', class: 'btn-switch__radio btn-switch__radio_yes' })
    // switch_button.append('input')
    //   .attrs({ type: 'radio', id: 'no', name: 'switch', class: 'btn-switch__radio btn-switch__radio_no' })
    //   .property('checked', 'checked');
    // const yes_label = switch_button.append('label')
    //   .attrs({ for: 'yes', class: 'btn-switch__label btn-switch__label_yes'});
    // yes_label.append('span')
    //   .attr('class', 'btn-switch__txt')
    //   .html('&#xf00c;');
    // const no_label = switch_button.append('label')
    //   .attrs({ for: 'no', class: 'btn-switch__label btn-switch__label_no' });
    // no_label.append('span')
    //   .attr('class', 'btn-switch__txt')
    //   .html('&#xf00d;');

    this.bindMenu();
    this.makeTableStat();
  }

  createClass(Similarity1plus, [{
    key: 'applySelection',
    value: function applySelection(nb) {
      var _this2 = this;

      app.colors = {};
      if (nb > 0) {
        this.data.forEach(function (ft) {
          // eslint-disable-next-line
          ft.dist = math_sqrt(_this2.ratios.map(function (v) {
            return 'dist_' + v;
          }).map(function (v) {
            return Math.pow(ft[v], 2);
          }).reduce(function (a, b) {
            return a + b;
          }));
        });
        this.data.sort(function (a, b) {
          return a.dist - b.dist;
        });
        this.data.forEach(function (el, i) {
          el.rank = i;
        });
        this.highlight_selection = this.data.slice(1, nb + 1);
      } else {
        this.highlight_selection = [];
      }
      this.removeLines();
      this.update();
      this.updateMapRegio();
    }
  }, {
    key: 'update',
    value: function update() {
      var _this3 = this;

      var self = this;
      var data = self.data;
      var highlight_selection = self.highlight_selection;
      var nb_variables = self.ratios.length;
      var offset = height$3 / nb_variables + 1;
      var height_to_use = offset / 2;

      var _loop = function _loop(i) {
        var ratio_name = self.ratios[i];
        var selector_ratio_name = 'l_' + ratio_name;
        var num_name = self.nums[i];
        var my_region_value = self.my_region[ratio_name];
        var ratio_values = _this3.data.map(function (d) {
          return d[ratio_name];
        });
        var g = _this3.draw_group.select('#' + selector_ratio_name);
        var axis = _this3.draw_group.select('g.axis--x.' + selector_ratio_name);
        var layer_other = void 0;
        var layer_highlighted = void 0;
        if (!g.node()) {
          g = _this3.draw_group.append('g').attrs({
            id: selector_ratio_name,
            num: num_name,
            class: 'grp_var'
          });
          axis = g.append('g').attrs({
            class: 'axis axis--x ' + selector_ratio_name,
            transform: 'translate(0, 10)'
          });
          g.append('text').attrs({
            x: 0,
            y: -7.5,
            fill: '#4f81bd',
            'font-size': '11px',
            'font-weight': 'bold',
            'font-family': '"Signika",sans-serif'
          }).text(ratio_name);
          layer_other = g.append('g').attr('class', 'otherfeature');
          layer_highlighted = g.append('g').attr('class', 'highlighted');
        } else {
          layer_other = g.select('g.otherfeature');
          layer_highlighted = g.select('g.highlighted');
        }
        g.attr('transform', 'translate(0, ' + height_to_use + ')');
        var _min = void 0;
        var _max = void 0;
        _this3.data.sort(function (a, b) {
          return b['dist_' + ratio_name] - a['dist_' + ratio_name];
        });
        if (highlight_selection.length > 0) {
          var dist_axis = Math.max(math_abs(my_region_value - +d3.min(highlight_selection, function (d) {
            return d[ratio_name];
          })), math_abs(+d3.max(highlight_selection, function (d) {
            return d[ratio_name];
          }) - my_region_value));
          var margin_min_max = math_round(dist_axis) / 8;
          _min = my_region_value - dist_axis - margin_min_max;
          _max = my_region_value + dist_axis + margin_min_max;
          // if (_min > _max) { [_min, _max] = [_max, _min]; }
        } else {
          var _dist_axis = Math.max(math_abs(my_region_value - d3.min(ratio_values)), math_abs(d3.max(ratio_values) - my_region_value));
          var _margin_min_max = math_round(_dist_axis) / 8;
          _min = my_region_value - _dist_axis - _margin_min_max;
          _max = my_region_value + _dist_axis + _margin_min_max;
        }
        _this3.highlight_selection.forEach(function (elem) {
          app.colors[elem.id] = comp(elem[ratio_name], my_region_value, _this3.serie_inversed);
        });

        app.colors[app.current_config.my_region] = color_highlight;

        var size_func = _this3.proportionnal_symbols ? new PropSizer(d3.max(data, function (d) {
          return d[num_name];
        }), 33).scale : function () {
          return 7.5;
        };
        var xScale = d3.scaleLinear().domain([_min, _max]).range([0, width$3]);

        axis.transition().duration(125).call(d3.axisBottom(xScale));

        var bubbles1 = layer_other.selectAll('.bubble').data(data.filter(function (d) {
          return app.colors[d.id] === undefined;
        }), function (d) {
          return d.id;
        });

        bubbles1.transition().duration(125).attrs(function (d) {
          var x_value = xScale(d[ratio_name]);
          if (x_value > width$3) x_value = width$3 + 200;else if (x_value < 0) x_value = -200;
          return {
            rank: d.rank,
            cx: x_value,
            cy: 10,
            r: size_func(d[num_name])
          };
        }).styles(function (d) {
          return {
            fill: color_countries,
            'fill-opacity': 0.1,
            stroke: 'darkgray',
            'stroke-width': 0.75,
            'stroke-opacity': 0.75
          };
        });

        bubbles1.enter().insert('circle').styles(function (d) {
          return {
            fill: color_countries,
            'fill-opacity': 0.1,
            stroke: 'darkgray',
            'stroke-width': 0.75,
            'stroke-opacity': 0.75
          };
        }).transition().duration(125).attrs(function (d) {
          var x_value = xScale(d[ratio_name]);
          if (x_value > width$3) x_value = width$3 + 200;else if (x_value < 0) x_value = -200;
          return {
            rank: d.rank,
            id: d.id,
            class: 'bubble',
            cx: x_value,
            cy: 10,
            r: size_func(d[num_name])
          };
        });

        bubbles1.exit().transition().duration(125).remove();

        var bubbles2 = layer_highlighted.selectAll('.bubble').data(data.filter(function (d) {
          return app.colors[d.id] !== undefined;
        }), function (d) {
          return d.id;
        });

        bubbles2.transition().duration(125).attrs(function (d) {
          var x_value = xScale(d[ratio_name]);
          if (x_value > width$3) x_value = width$3 + 200;else if (x_value < 0) x_value = -200;
          return {
            rank: d.rank,
            cx: x_value,
            cy: 10,
            r: size_func(d[num_name])
          };
        }).styles(function (d) {
          return {
            fill: app.colors[d.id],
            'fill-opacity': d.id === app.current_config.my_region ? 1 : 0.7,
            stroke: 'darkgray',
            'stroke-width': 0.75,
            'stroke-opacity': 0.75
          };
        });

        bubbles2.enter().insert('circle').styles(function (d) {
          return {
            fill: app.colors[d.id],
            'fill-opacity': d.id === app.current_config.my_region ? 1 : 0.7,
            stroke: 'darkgray',
            'stroke-width': 0.75,
            'stroke-opacity': 0.75
          };
        }).transition().duration(125).attrs(function (d) {
          var x_value = xScale(d[ratio_name]);
          if (x_value > width$3) x_value = width$3 + 200;else if (x_value < 0) x_value = -200;
          return {
            rank: d.rank,
            id: d.id,
            class: 'bubble',
            cx: x_value,
            cy: 10,
            r: size_func(d[num_name])
          };
        });

        bubbles2.exit().transition().duration(125).remove();

        height_to_use += offset;
      };

      for (var i = 0; i < nb_variables; i++) {
        _loop(i);
      }
      setTimeout(function () {
        _this3.makeTooltips();
      }, 125);
    }
  }, {
    key: 'updateCompletude',
    value: function updateCompletude() {
      this.completude.update(calcCompletudeSubset(app, this.ratios, 'array'), calcPopCompletudeSubset(app, this.ratios));
    }
  }, {
    key: 'updateMapRegio',
    value: function updateMapRegio() {
      var _this4 = this;

      if (!this.map_elem) return;
      this.map_elem.target_layer.selectAll('path').attr('fill', function (d) {
        var _id = d.id;
        if (_id === app.current_config.my_region) {
          return color_highlight;
        } else if (_this4.current_ids.indexOf(_id) > -1) {
          if (app.colors[_id]) return color_default_dissim;
          return color_countries;
        }
        return color_disabled;
      });
    }
  }, {
    key: 'handleClickMap',
    value: function handleClickMap(d, parent) {
      var _this5 = this;

      var to_display = false;
      var id = d.id;
      if (this.current_ids.indexOf(id) < 0 || id === app.current_config.my_region) return;
      if (app.colors[id] !== undefined) {
        // Remove the clicked feature from the colored selection on the chart:
        var id_to_remove = this.highlight_selection.map(function (ft, i) {
          return ft.id === id ? i : null;
        }).filter(function (ft) {
          return ft;
        })[0];
        this.highlight_selection.splice(id_to_remove, 1);
        // Change its color in the global colors object:
        app.colors[id] = undefined;
        // Change the color on the map:
        d3.select(parent).attr('fill', color_countries);
      } else {
        app.colors[id] = color_default_dissim;
        // Change the color on the map:
        d3.select(parent).attr('fill', color_default_dissim);
        // Add the clicked feature on the colored selection on the chart:
        // eslint-disable-next-line no-restricted-properties
        var obj = this.data.find(function (el) {
          return el.id === id;
        });
        // const global_dist = math_sqrt(this.ratios.map(v => `dist_${v}`).map(v => Math.pow(+d.properties[v], 2)).reduce((a, b) => a + b));
        // const obj = {
        //   id,
        //   dist: global_dist,
        // };
        // this.ratios.forEach((v) => { obj[v] = +d.properties[v]; });
        this.highlight_selection.push(obj);
        to_display = true;
      }
      this.highlight_selection.sort(function (a, b) {
        return a.dist - b.dist;
      });
      this.removeLines();
      this.update();
      if (to_display) setTimeout(function () {
        _this5.displayLine(id);
      }, 150);
    }
  }, {
    key: 'makeTooltips',
    value: function makeTooltips() {
      var _this6 = this;

      var self = this;
      this.draw_group.selectAll('g.grp_var').selectAll('circle').on('mouseover', function () {
        clearTimeout(t$2);
        _this6.tooltip.style('display', null);
      }).on('mouseout', function () {
        clearTimeout(t$2);
        t$2 = setTimeout(function () {
          _this6.tooltip.style('display', 'none');
        }, 250);
      }).on('mousemove mousedown', function (d) {
        var content = [];
        var ratio_n = this.parentElement.parentElement.id.replace('l_', '');
        var unit_ratio = variables_info.find(function (ft) {
          return ft.id === ratio_n;
        }).unit;
        var rank = +this.getAttribute('rank');
        content.push(ratio_n + ' : ' + Math.round(d[ratio_n] * 10) / 10 + ' ' + unit_ratio);
        if (self.proportionnal_symbols) {
          var num_n = this.parentElement.parentElement.getAttribute('num');
          var o = variables_info.find(function (ft) {
            return ft.id === num_n;
          });
          var unit_num = o.unit;
          var coef = +o.formula;
          coef = isNaN(coef) || coef === 0 ? 1 : coef;
          content.push(num_n + ' (num\xE9rateur) : ' + Math.round(d[num_n] * coef * 10) / 10 + ' ' + unit_num);
        }
        if (!isNaN(rank)) {
          if (+rank === 0) {
            content.push('(Ma rÃ©gion)');
          } else if (+rank === 1) {
            content.push('(RÃ©gion la plus proche)');
          } else {
            content.push('(' + rank + '\xE8me r\xE9gion la plus proche)');
          }
        }
        clearTimeout(t$2);
        self.tooltip.select('.title').html(['<b>', d.name, ' (', d.id, ')', '</b>'].join(''));
        self.tooltip.select('.content').html(content.join('<br>'));
        self.tooltip.styles({
          display: null,
          left: d3.event.pageX - 5 + 'px',
          top: d3.event.pageY - 65 + 'px' });
      }).on('click', function (d) {
        if (this.style.fill !== color_countries) {
          self.displayLine(d.id);
        }
        self.map_elem.target_layer.selectAll('path').each(function (ft) {
          if (ft.id === d.id) {
            var cloned = this.cloneNode();
            cloned.style.fill = 'red';
            cloned.style.stroke = 'orange';
            cloned.style.strokeWidth = '2.25px';
            cloned.classList.add('cloned');
            self.map_elem.layers.node().appendChild(cloned);
            setTimeout(function () {
              cloned.remove();
            }, 5000);
          }
        });
      });
    }
  }, {
    key: 'displayLine',
    value: function displayLine(id_region) {
      if (this.ratios.length === 1) return;
      var coords = [];
      svg_container$2.selectAll('.grp_var').selectAll('#' + id_region + '.bubble').each(function () {
        var ty = +this.parentElement.parentElement.getAttribute('transform').split('translate(0, ')[1].replace(')', '');
        coords.push([this.cx.baseVal.value, this.cy.baseVal.value + ty]);
      });

      var l = this.draw_group.append('path').datum(coords).attrs({
        class: 'regio_line',
        fill: 'none',
        stroke: 'steelblue',
        'stroke-linejoin': 'round',
        'stroke-linecap': 'round',
        'stroke-width': 1.5,
        d: d3.line().x(function (_d) {
          return _d[0];
        }).y(function (_d) {
          return _d[1];
        })
      });
      setTimeout(function () {
        l.remove();
      }, 5000);
    }
  }, {
    key: 'updateChangeRegion',
    value: function updateChangeRegion() {
      var _this7 = this;

      this.removeLines();
      if (app.current_config.filter_key !== undefined) {
        this.changeStudyZone();
      } else {
        this.map_elem.updateLegend();
        this.my_region = this.data.find(function (d) {
          return d.id === app.current_config.my_region;
        });
        this.data.forEach(function (ft) {
          _this7.ratios.forEach(function (v) {
            // eslint-disable-next-line no-param-reassign
            ft['dist_' + v] = math_abs(+ft[v] - +_this7.my_region[v]);
          });
        });
        this.updateTableStat();
        this.update();
        this.updateMapRegio();
        // this.applySelection(this.highlight_selection.length);
      }
    }
  }, {
    key: 'changeStudyZone',
    value: function changeStudyZone() {
      var _this8 = this;

      this.removeLines();
      this.map_elem.updateLegend();
      this.ratios = app.current_config.ratio;
      this.nums = app.current_config.num;
      this.data = app.current_data.filter(function (ft) {
        return _this8.ratios.map(function (v) {
          return !!ft[v];
        }).every(function (v) {
          return v === true;
        });
      }).slice();
      this.my_region = this.data.find(function (d) {
        return d.id === app.current_config.my_region;
      });
      this.data.forEach(function (ft) {
        _this8.ratios.forEach(function (v) {
          // eslint-disable-next-line no-param-reassign
          ft['dist_' + v] = math_abs(+ft[v] - +_this8.my_region[v]);
        });
      });
      this.current_ids = this.data.map(function (d) {
        return d.id;
      });
      var temp = this.highlight_selection.length;
      this.highlight_selection = [];
      this.updateTableStat();
      this.updateCompletude();
      this.applySelection(temp);
      this.updateMapRegio();
    }
  }, {
    key: 'addVariable',
    value: function addVariable$$1(code_variable, name_variable) {
      var _this9 = this;

      this.removeLines();
      this.ratios = app.current_config.ratio.slice();
      this.nums = app.current_config.num.slice();
      this.data = app.current_data.filter(function (ft) {
        return _this9.ratios.map(function (v) {
          return !!ft[v];
        }).every(function (v) {
          return v === true;
        });
      }).slice();
      this.current_ids = this.data.map(function (d) {
        return d.id;
      });
      this.my_region = this.data.find(function (d) {
        return d.id === app.current_config.my_region;
      });
      this.data.forEach(function (ft) {
        _this9.ratios.forEach(function (v) {
          // eslint-disable-next-line no-param-reassign
          ft['dist_' + v] = math_abs(+ft[v] - +_this9.my_region[v]);
        });
      });
      this.highlight_selection = this.highlight_selection.map(function (d) {
        var obj = Object.assign(d, {});
        var ft = _this9.data.find(function (elem) {
          return elem.id === obj.id;
        });
        if (!ft) return undefined;
        _this9.ratios.forEach(function (v) {
          obj[v] = +ft[v];
          obj['dist_' + v] = +ft['dist_' + v];
        });
        return obj;
      }).filter(function (d) {
        return !!d;
      });
      // And use it immediatly:
      this.updateTableStat();
      this.update();
      this.updateMapRegio();
    }
  }, {
    key: 'removeVariable',
    value: function removeVariable$$1(code_variable) {
      var _this10 = this;

      this.removeLines();
      this.ratios = app.current_config.ratio.slice();
      this.nums = app.current_config.num.slice();
      this.data = app.current_data.filter(function (ft) {
        return _this10.ratios.map(function (v) {
          return !!ft[v];
        }).every(function (v) {
          return v === true;
        });
      }).slice();
      this.my_region = this.data.find(function (d) {
        return d.id === app.current_config.my_region;
      });

      this.draw_group.select('g#l_' + code_variable).remove();
      // And use it immediatly:
      this.updateTableStat();
      this.update();
      this.updateMapRegio();
    }
  }, {
    key: 'bindMenu',
    value: function bindMenu() {
      var self = this;
      var menu = d3.select('#menu_selection');
      var applychange = function applychange() {
        // self.map_elem.removeRectBrush();
        var value = +this.value;
        if (value < 1) {
          this.value = 1;
          return;
        }
        self.applySelection(value);
      };
      menu.select('.nb_select').on('change', applychange);
      menu.select('.nb_select').on('wheel', applychange);
      menu.select('.nb_select').on('keyup', applychange);
      menu.select('#check_prop').on('change', function () {
        if (this.checked) {
          menu.select('.slider-checkbox > .label').attr('class', 'label');
          self.proportionnal_symbols = true;
        } else {
          menu.select('.slider-checkbox > .label').attr('class', 'label not_selected');
          self.proportionnal_symbols = false;
        }
        self.update();
      });
    }
  }, {
    key: 'removeLines',
    value: function removeLines() {
      this.draw_group.selectAll('.regio_line').remove();
    }
  }, {
    key: 'remove',
    value: function remove() {
      this.map_elem.layers.selectAll('.cloned').remove();
      this.map_elem.unbindBrushClick();
      this.map_elem = null;
      this.table_stats.remove();
      this.table_stats = null;
      svg_bar$3.html('');
    }
  }, {
    key: 'bindMap',
    value: function bindMap(map_elem) {
      this.map_elem = map_elem;
      this.map_elem.resetColors(this.current_ids);
      this.map_elem.displayLegend(2);
      this.applySelection(5);
    }
  }, {
    key: 'prepareTableStat',
    value: function prepareTableStat() {
      var _this11 = this;

      var ratios = this.ratios;
      var all_values = ratios.map(function (v) {
        return _this11.data.map(function (d) {
          return +d[v];
        });
      });
      var my_region = this.my_region;
      var features = all_values.map(function (values, i) {
        return {
          Min: d3.min(values),
          Max: d3.max(values),
          Moy: getMean(values),
          Med: d3.median(values),
          id: _this11.ratios[i],
          Variable: _this11.ratios[i],
          'Ma rÃ©gion': my_region[_this11.ratios[i]]
        };
      });
      return features;
    }
  }, {
    key: 'updateTableStat',
    value: function updateTableStat() {
      this.table_stats.removeAll();
      this.table_stats.addFeatures(this.prepareTableStat());
    }
  }, {
    key: 'makeTableStat',
    value: function makeTableStat() {
      var features = this.prepareTableStat();
      this.table_stats = new TableResumeStat(features);
    }
  }, {
    key: 'getHelpMessage',
    value: function getHelpMessage() {
      return '\n<h3>Ressemblances</h3>\n\n<b>Aide g\xE9n\xE9rale</b>\n\nLes graphiques de ressemblance permettent de visualiser pour 1 \xE0 8 indicateurs les unit\xE9s territoriales les plus proches statistiquement \xE0 l\u2019unit\xE9 territoriale de r\xE9f\xE9rence.\n\nCette proximit\xE9 est mesur\xE9e par la distance euclidienne. Cette fonction permet d\u2019\xE9valuer la distance normalis\xE9e globale (exprim\xE9e en rang) s\xE9parant l\u2019unit\xE9 territoriale de r\xE9f\xE9rence avec l\u2019ensemble des autres unit\xE9s territoriales pour un ensemble d\u2019indicateurs. La formule de la fonction est la suivante\xA0:\n\n<b>\u03A3(xi - yi)\xB2</b>\n\nSi la valeur de l\u2019indice \xE9quivaut \xE0 0, la similarit\xE9 est totale entre deux unit\xE9s territoriales. Plus la valeur de l\u2019indice est \xE9lev\xE9e, plus la dissimilarit\xE9 est importante. A noter que cette m\xE9trique euclidienne est assez sensible aux ordres de grandeur h\xE9t\xE9rog\xE8nes entre plusieurs indicateurs (un fort \xE9cart pour un indicateur peut affecter significativement la valeur de l\u2019indice).\n\nPour \xE9viter de potentielles erreurs d\u2019interpr\xE9tation li\xE9es \xE0 cet indice de similarit\xE9 synth\xE9tique, Regioviz propose syst\xE9matiquement une repr\xE9sentation graphique permettant d\u2019\xE9valuer visuellement le degr\xE9 de similarit\xE9 indicateur par indicateur.\n\nPar d\xE9faut, l\u2019application renvoie les 5 unit\xE9s territoriales pour l\u2019espace d\u2019\xE9tude et les indicateurs s\xE9lectionn\xE9es qui sont d\xE9finis par la distance euclidienne la plus faible. Libre \xE0 l\u2019utilisateur de choisir plus ou moins d\u2019unit\xE9s territoriales de comparaison en fonction de ses objectifs d\u2019analyse.\n\nSur le graphique apparaissent les n unit\xE9s territoriales les plus proches pour chaque indicateur dans leurs unit\xE9s de mesure respectives. L\u2019unit\xE9 territoriale de r\xE9f\xE9rence appara\xEEt syst\xE9matiquement au centre de chacun des graphiques. Un clic gauche sur une des unit\xE9s territoriales sur le graphique ou sur la carte g\xE9n\xE8re une ligne entre chaque indicateur permettant d\u2019\xE9valuer le degr\xE9 de ressemblance avec l\u2019unit\xE9 territoriale de r\xE9f\xE9rence et visualiser ainsi si celle-ci se positionne au-dessus ou en dessous, et pour quel indicateur.\n\nPar d\xE9faut, la taille des cercles sur le graphique est constante. Mais l\u2019utilisateur peut activer l\u2019option \xAB\xA0cercles proportionnels au num\xE9rateur\xA0\xBB pour visualiser graphiquement la masse des unit\xE9s territoriales. Par exemple, si l\u2019indicateur PIB par habitant est s\xE9lectionn\xE9, la taille des cercles sera proportionnelle \xE0 la masse de PIB des unit\xE9s territoriales. Si c\u2019est la part des 0-24 ans dans la population totale, la taille des figur\xE9s sera proportionnelle \xE0 la masse de la population \xE2g\xE9e de 0 \xE0 24 ans. Cette option a \xE9t\xE9 cr\xE9\xE9e afin de pouvoir restituer les ordres de grandeur potentiellement h\xE9t\xE9rog\xE8nes des unit\xE9s territoriales propos\xE9es dans l\u2019application.';
    }
  }]);
  return Similarity1plus;
}();

//
//
//
//
//
// import { comp, math_round, math_abs, math_sqrt, PropSizer, prepareTooltip2, getMean } from './../helpers';
// import { color_disabled, color_countries, color_default_dissim, color_highlight } from './../options';
// import { calcPopCompletudeSubset, calcCompletudeSubset } from './../prepare_data';
// // import { svg_map } from './../map';
// import { app, resetColors, variables_info } from './../../main';
// import TableResumeStat from './../tableResumeStat';
// import CompletudeSection from './../completude';
//
// let svg_bar;
// let margin;
// let bbox_svg;
// let width;
// let height;
// let svg_container;
// let t;
//
// const updateDimensions = () => {
//   svg_bar = d3.select('#svg_bar');
//   margin = { top: 20, right: 20, bottom: 40, left: 30 };
//   bbox_svg = svg_bar.node().getBoundingClientRect();
//   width = +bbox_svg.width - margin.left - margin.right;
//   height = 500 * app.ratioToWide - margin.top - margin.bottom;
//   svg_bar.attr('height', `${500 * app.ratioToWide}px`);
//   svg_container = svg_bar.append('g').attr('class', 'container');
// };
//
//
// export class Similarity1plus {
//   constructor(ref_data) {
//     updateDimensions();
//     app.chartDrawRatio = app.ratioToWide;
//     // Set the minimum number of variables to keep selected for this kind of chart:
//     app.current_config.nb_var = 1;
//     this.ratios = app.current_config.ratio;
//     this.nums = app.current_config.num;
//     this.data = ref_data.filter(ft => this.ratios.map(v => !!ft[v]).every(v => v === true)).slice();
//     this.my_region = this.data.find(d => d.id === app.current_config.my_region);
//     this.data.forEach((ft) => {
//       this.ratios.forEach((v) => {
//         // eslint-disable-next-line no-param-reassign
//         ft[`dist_${v}`] = math_abs(+ft[v] - +this.my_region[v]);
//       });
//     });
//     this.current_ids = this.data.map(d => d.id);
//     resetColors();
//     this.highlight_selection = [];
//     this.serie_inversed = false;
//     this.proportionnal_symbols = false;
//     this.draw_group = svg_container
//       .append('g')
//       .attr('transform', `translate(${margin.left}, ${margin.top})`);
//
//     // Prepare the tooltip displayed on mouseover:
//     this.tooltip = prepareTooltip2(d3.select(svg_bar.node().parentElement), null);
//
//     this.completude = new CompletudeSection();
//     this.completude.update(
//       calcCompletudeSubset(app, this.ratios, 'array'),
//       calcPopCompletudeSubset(app, this.ratios));
//
//     // Create the button allowing to choose
//     // if the colors are inversed
//     // (like green/red for superior/inferior regions)
//     svg_container.append('image')
//       .attrs({
//         x: width + margin.left + 5,
//         y: 232.5,
//         width: 15,
//         height: 15,
//         'xlink:href': 'img/reverse_plus.png',
//         id: 'img_reverse',
//       })
//       .on('click', () => {
//         this.serie_inversed = !this.serie_inversed;
//         this.applySelection(this.highlight_selection.length);
//       });
//
//     // Create the section containing the input element allowing to chose
//     // how many "close" regions we want to highlight.
//     const menu_selection = d3.select(svg_bar.node().parentElement)
//       .append('div')
//       .attr('id', 'menu_selection')
//       .styles({ position: 'relative', color: '#4f81bd', 'text-align': 'center' });
//     const selection_close = menu_selection.append('p');
//     selection_close.append('span')
//       .html('SÃ©lection des');
//     selection_close.append('input')
//       .attrs({ class: 'nb_select', type: 'number' })
//       .styles({ color: '#4f81bd', 'margin-left': '1px' })
//       .property('value', 5);
//     selection_close.append('span')
//       .html('rÃ©gions les plus proches');
//     const section = menu_selection.append('section')
//       .attr('class', 'slider-checkbox');
//     section.append('input')
//       .attrs({ type: 'checkbox', id: 'check_prop' });
//     section.append('label')
//       .attrs({ class: 'label', for: 'check_prop' })
//       .text('Cercles proportionnels au numÃ©rateur');
//
//     // const switch_button = menu_selection.append('p')
//     //   .attr('class', 'btn-switch');
//     // switch_button.append('input')
//     //   .attrs({ type: 'radio', id: 'yes', name: 'switch', class: 'btn-switch__radio btn-switch__radio_yes' })
//     // switch_button.append('input')
//     //   .attrs({ type: 'radio', id: 'no', name: 'switch', class: 'btn-switch__radio btn-switch__radio_no' })
//     //   .property('checked', 'checked');
//     // const yes_label = switch_button.append('label')
//     //   .attrs({ for: 'yes', class: 'btn-switch__label btn-switch__label_yes'});
//     // yes_label.append('span')
//     //   .attr('class', 'btn-switch__txt')
//     //   .html('&#xf00c;');
//     // const no_label = switch_button.append('label')
//     //   .attrs({ for: 'no', class: 'btn-switch__label btn-switch__label_no' });
//     // no_label.append('span')
//     //   .attr('class', 'btn-switch__txt')
//     //   .html('&#xf00d;');
//
//     this.bindMenu();
//     this.makeTableStat();
//   }
//
//   applySelection(nb) {
//     app.colors = {};
//     if (nb > 0) {
//       this.highlight_selection = this.data.map((ft) => {
//         // eslint-disable-next-line no-restricted-properties
//         const global_dist = math_sqrt(this.ratios.map(v => `dist_${v}`).map(v => Math.pow(ft[v], 2)).reduce((a, b) => a + b));
//         const obj = {
//           id: ft.id,
//           dist: global_dist,
//         };
//         this.ratios.forEach((v) => { obj[v] = ft[v]; });
//         return obj;
//       });
//       this.highlight_selection.sort((a, b) => a.dist - b.dist);
//       this.highlight_selection.forEach((el, i) => { el.rank = i + 1; });
//       this.highlight_selection = this.highlight_selection.slice(1, nb + 1);
//     } else {
//       this.highlight_selection = [];
//     }
//     this.removeLines();
//     this.update();
//     this.updateMapRegio();
//   }
//
//   update() {
//     const self = this;
//     const data = self.data;
//     const highlight_selection = self.highlight_selection;
//     const nb_variables = self.ratios.length;
//     const offset = height / nb_variables + 1;
//     let height_to_use = offset / 2;
//     for (let i = 0; i < nb_variables; i++) {
//       const ratio_name = self.ratios[i];
//       const selector_ratio_name = `l_${ratio_name}`;
//       const num_name = self.nums[i];
//       const my_region_value = self.my_region[ratio_name];
//       const ratio_values = this.data.map(d => d[ratio_name]);
//       let g = this.draw_group.select(`#${selector_ratio_name}`);
//       let axis = this.draw_group.select(`g.axis--x.${selector_ratio_name}`);
//       let layer_other;
//       let layer_highlighted;
//       if (!g.node()) {
//         g = this.draw_group
//           .append('g')
//           .attrs({
//             id: selector_ratio_name,
//             num: num_name,
//             class: 'grp_var',
//           });
//         axis = g.append('g')
//           .attrs({
//             class: `axis axis--x ${selector_ratio_name}`,
//             transform: 'translate(0, 10)',
//           });
//         g.append('text')
//           .attrs({
//             x: 0,
//             y: -7.5,
//             fill: '#4f81bd',
//             'font-size': '11px',
//             'font-weight': 'bold',
//             'font-family': '"Signika",sans-serif',
//           })
//           .text(ratio_name);
//         layer_other = g.append('g').attr('class', 'otherfeature');
//         layer_highlighted = g.append('g').attr('class', 'highlighted');
//       } else {
//         layer_other = g.select('g.otherfeature');
//         layer_highlighted = g.select('g.highlighted');
//       }
//       g.attr('transform', `translate(0, ${height_to_use})`);
//       let _min;
//       let _max;
//       this.data.sort((a, b) => b[`dist_${ratio_name}`] - a[`dist_${ratio_name}`]);
//       if (highlight_selection.length > 0) {
//         const dist_axis = Math.max(
//           math_abs(my_region_value - +d3.min(highlight_selection, d => d[ratio_name])),
//           math_abs(+d3.max(highlight_selection, d => d[ratio_name]) - my_region_value));
//         const margin_min_max = math_round(dist_axis) / 8;
//         _min = my_region_value - dist_axis - margin_min_max;
//         _max = my_region_value + dist_axis + margin_min_max;
//         // if (_min > _max) { [_min, _max] = [_max, _min]; }
//       } else {
//         const dist_axis = Math.max(
//           math_abs(my_region_value - d3.min(ratio_values)),
//           math_abs(d3.max(ratio_values) - my_region_value));
//         const margin_min_max = math_round(dist_axis) / 8;
//         _min = my_region_value - dist_axis - margin_min_max;
//         _max = my_region_value + dist_axis + margin_min_max;
//       }
//       this.highlight_selection.forEach((elem) => {
//         app.colors[elem.id] = comp(elem[ratio_name], my_region_value, this.serie_inversed);
//       });
//
//       app.colors[app.current_config.my_region] = color_highlight;
//
//       const size_func = this.proportionnal_symbols ? new PropSizer(d3.max(data, d => d[num_name]), 33).scale : () => 7.5;
//       const xScale = d3.scaleLinear()
//         .domain([_min, _max])
//         .range([0, width]);
//
//       axis
//         .transition()
//         .duration(125)
//         .call(d3.axisBottom(xScale));
//
//       const bubbles1 = layer_other.selectAll('.bubble')
//         .data(data.filter(d => app.colors[d.id] === undefined), d => d.id);
//
//       bubbles1
//         .transition()
//         .duration(125)
//         .attrs((d) => {
//           let x_value = xScale(d[ratio_name]);
//           if (x_value > width) x_value = width + 200;
//           else if (x_value < 0) x_value = -200;
//           return {
//             cx: x_value,
//             cy: 10,
//             r: size_func(d[num_name]),
//           };
//         })
//         .styles(d => ({
//           fill: color_countries,
//           'fill-opacity': 0.1,
//           stroke: 'darkgray',
//           'stroke-width': 0.75,
//           'stroke-opacity': 0.75,
//         }));
//
//       bubbles1
//         .enter()
//         .insert('circle')
//         .styles(d => ({
//           fill: color_countries,
//           'fill-opacity': 0.1,
//           stroke: 'darkgray',
//           'stroke-width': 0.75,
//           'stroke-opacity': 0.75,
//         }))
//         .transition()
//         .duration(125)
//         .attrs((d) => {
//           let x_value = xScale(d[ratio_name]);
//           if (x_value > width) x_value = width + 200;
//           else if (x_value < 0) x_value = -200;
//           return {
//             id: d.id,
//             class: 'bubble',
//             cx: x_value,
//             cy: 10,
//             r: size_func(d[num_name]),
//           };
//         });
//
//       bubbles1.exit().transition().duration(125).remove();
//
//       const bubbles2 = layer_highlighted.selectAll('.bubble')
//         .data(data.filter(d => app.colors[d.id] !== undefined), d => d.id);
//
//       bubbles2
//         .transition()
//         .duration(125)
//         .attrs((d) => {
//           let x_value = xScale(d[ratio_name]);
//           if (x_value > width) x_value = width + 200;
//           else if (x_value < 0) x_value = -200;
//           return {
//             cx: x_value,
//             cy: 10,
//             r: size_func(d[num_name]),
//           };
//         })
//         .styles(d => ({
//           fill: app.colors[d.id],
//           'fill-opacity': d.id === app.current_config.my_region ? 1 : 0.7,
//           stroke: 'darkgray',
//           'stroke-width': 0.75,
//           'stroke-opacity': 0.75,
//         }));
//
//       bubbles2
//         .enter()
//         .insert('circle')
//         .styles(d => ({
//           fill: app.colors[d.id],
//           'fill-opacity': d.id === app.current_config.my_region ? 1 : 0.7,
//           stroke: 'darkgray',
//           'stroke-width': 0.75,
//           'stroke-opacity': 0.75,
//         }))
//         .transition()
//         .duration(125)
//         .attrs((d) => {
//           let x_value = xScale(d[ratio_name]);
//           if (x_value > width) x_value = width + 200;
//           else if (x_value < 0) x_value = -200;
//           return {
//             id: d.id,
//             class: 'bubble',
//             cx: x_value,
//             cy: 10,
//             r: size_func(d[num_name]),
//           };
//         });
//
//       bubbles2.exit().transition().duration(125).remove();
//
//       height_to_use += offset;
//     }
//     setTimeout(() => { this.makeTooltips(); }, 125);
//   }
//
//   updateCompletude() {
//     this.completude.update(
//       calcCompletudeSubset(app, this.ratios, 'array'),
//       calcPopCompletudeSubset(app, this.ratios));
//   }
//
//   updateMapRegio() {
//     if (!this.map_elem) return;
//     this.map_elem.target_layer.selectAll('path')
//       .attr('fill', (d) => {
//         const _id = d.id;
//         if (_id === app.current_config.my_region) {
//           return color_highlight;
//         } else if (this.current_ids.indexOf(_id) > -1) {
//           if (app.colors[_id]) return color_default_dissim;
//           return color_countries;
//         }
//         return color_disabled;
//       });
//   }
//
//   handleClickMap(d, parent) {
//     let to_display = false;
//     const id = d.id;
//     if (this.current_ids.indexOf(id) < 0 || id === app.current_config.my_region) return;
//     if (app.colors[id] !== undefined) {
//       // Remove the clicked feature from the colored selection on the chart:
//       const id_to_remove = this.highlight_selection
//         .map((ft, i) => (ft.id === id ? i : null)).filter(ft => ft)[0];
//       this.highlight_selection.splice(id_to_remove, 1);
//       // Change its color in the global colors object:
//       app.colors[id] = undefined;
//       // Change the color on the map:
//       d3.select(parent).attr('fill', color_countries);
//     } else {
//       app.colors[id] = color_default_dissim;
//       // Change the color on the map:
//       d3.select(parent).attr('fill', color_default_dissim);
//       // Add the clicked feature on the colored selection on the chart:
//       // eslint-disable-next-line no-restricted-properties
//       const global_dist = math_sqrt(this.ratios.map(v => `dist_${v}`).map(v => Math.pow(+d.properties[v], 2)).reduce((a, b) => a + b));
//       const obj = {
//         id,
//         dist: global_dist,
//       };
//       this.ratios.forEach((v) => { obj[v] = +d.properties[v]; });
//       this.highlight_selection.push(obj);
//       to_display = true;
//     }
//     this.highlight_selection.sort((a, b) => a.dist - b.dist);
//     this.highlight_selection.forEach((el, i) => { el.rank = i + 1; });
//     this.removeLines();
//     this.update();
//     if (to_display) setTimeout(() => { this.displayLine(id); }, 150);
//   }
//
//   makeTooltips() {
//     const self = this;
//     this.draw_group.selectAll('g.grp_var')
//       .selectAll('circle')
//         .on('mouseover', () => {
//           clearTimeout(t);
//           this.tooltip.style('display', null);
//         })
//         .on('mouseout', () => {
//           clearTimeout(t);
//           t = setTimeout(() => { this.tooltip.style('display', 'none'); }, 250);
//         })
//         .on('mousemove mousedown', function (d) {
//           const content = [];
//           const ratio_n = this.parentElement.parentElement.id.replace('l_', '');
//           const unit_ratio = variables_info.find(ft => ft.id === ratio_n).unit;
//           const rank = this.getAttribute('rank');
//           content.push(`${ratio_n} : ${Math.round(d[ratio_n] * 10) / 10} ${unit_ratio}`);
//           let num_n, unit_num, coef;
//           if (self.proportionnal_symbols) {
//             num_n = this.parentElement.parentElement.getAttribute('num');
//             const o = variables_info.find(ft => ft.id === num_n);
//             unit_num = o.unit;
//             coef = +o.formula;
//             coef = isNaN(coef) || coef === 0 ? 1 : coef;
//             content.push(`${num_n} (numÃ©rateur) : ${Math.round(d[num_n] * coef * 10) / 10} ${unit_num}`);
//           }
//           if (rank) {
//             if (+rank === 1) {
//               content.push('(RÃ©gion la plus proche)');
//             } else {
//               content.push(`(${rank}Ã¨me rÃ©gion la plus proche)`)
//             }
//           }
//           clearTimeout(t);
//           self.tooltip.select('.title')
//             .html([
//               '<b>', d.name, ' (', d.id, ')', '</b>'].join(''));
//           self.tooltip.select('.content')
//             .html(content.join('<br>'));
//           self.tooltip
//             .styles({
//               display: null,
//               left: `${d3.event.pageX - 5}px`,
//               top: `${d3.event.pageY - 65}px` });
//         })
//         .on('click', function (d) {
//           if (this.style.fill !== color_countries) {
//             self.displayLine(d.id);
//           }
//           self.map_elem.target_layer
//             .selectAll('path')
//             .each(function (ft) {
//               if (ft.id === d.id) {
//                 const cloned = this.cloneNode();
//                 cloned.style.fill = 'red';
//                 cloned.style.stroke = 'orange';
//                 cloned.style.strokeWidth = '2.25px';
//                 cloned.classList.add('cloned');
//                 self.map_elem.layers.node().appendChild(cloned);
//                 setTimeout(() => { cloned.remove(); }, 5000);
//               }
//             });
//         });
//   }
//
//   displayLine(id_region) {
//     if (this.ratios.length === 1) return;
//     const coords = [];
//     svg_container.selectAll('.grp_var')
//       .selectAll(`#${id_region}.bubble`)
//       .each(function () {
//         const ty = +this.parentElement.parentElement.getAttribute('transform').split('translate(0, ')[1].replace(')', '');
//         coords.push([this.cx.baseVal.value, this.cy.baseVal.value + ty]);
//       });
//
//     const l = this.draw_group.append('path')
//       .datum(coords)
//       .attrs({
//         class: 'regio_line',
//         fill: 'none',
//         stroke: 'steelblue',
//         'stroke-linejoin': 'round',
//         'stroke-linecap': 'round',
//         'stroke-width': 1.5,
//         d: d3.line().x(_d => _d[0]).y(_d => _d[1]),
//       });
//     setTimeout(() => {
//       l.remove();
//     }, 5000);
//   }
//
//   updateChangeRegion() {
//     this.removeLines();
//     if (app.current_config.filter_key !== undefined) {
//       this.changeStudyZone();
//     } else {
//       this.map_elem.updateLegend();
//       this.my_region = this.data.find(d => d.id === app.current_config.my_region);
//       this.data
//         .forEach((ft) => {
//           this.ratios.forEach((v) => {
//             // eslint-disable-next-line no-param-reassign
//             ft[`dist_${v}`] = math_abs(+ft[v] - +this.my_region[v]);
//           });
//         });
//       this.updateTableStat();
//       this.update();
//       this.updateMapRegio();
//       // this.applySelection(this.highlight_selection.length);
//     }
//   }
//
//   changeStudyZone() {
//     this.removeLines();
//     this.map_elem.updateLegend();
//     this.ratios = app.current_config.ratio;
//     this.nums = app.current_config.num;
//     this.data = app.current_data.filter(
//       ft => this.ratios.map(v => !!ft[v]).every(v => v === true)).slice();
//     this.my_region = this.data.find(d => d.id === app.current_config.my_region);
//     this.data.forEach((ft) => {
//       this.ratios.forEach((v) => {
//         // eslint-disable-next-line no-param-reassign
//         ft[`dist_${v}`] = math_abs(+ft[v] - +this.my_region[v]);
//       });
//     });
//     this.current_ids = this.data.map(d => d.id);
//     const temp = this.highlight_selection.length;
//     this.highlight_selection = [];
//     this.updateTableStat();
//     this.updateCompletude();
//     this.applySelection(temp);
//     this.updateMapRegio();
//   }
//
//   addVariable(code_variable, name_variable) {
//     this.removeLines();
//     this.ratios = app.current_config.ratio.slice();
//     this.nums = app.current_config.num.slice();
//     this.data = app.current_data.filter(
//       ft => this.ratios.map(v => !!ft[v]).every(v => v === true)).slice();
//     this.current_ids = this.data.map(d => d.id);
//     this.my_region = this.data.find(d => d.id === app.current_config.my_region);
//     this.data.forEach((ft) => {
//       this.ratios.forEach((v) => {
//         // eslint-disable-next-line no-param-reassign
//         ft[`dist_${v}`] = math_abs(+ft[v] - +this.my_region[v]);
//       });
//     });
//     this.highlight_selection = this.highlight_selection.map((d) => {
//       const obj = Object.assign(d, {});
//       const ft = this.data.find(elem => elem.id === obj.id);
//       if (!ft) return undefined;
//       this.ratios.forEach((v) => {
//         obj[v] = +ft[v];
//         obj[`dist_${v}`] = +ft[`dist_${v}`];
//       });
//       return obj;
//     }).filter(d => !!d);
//     // And use it immediatly:
//     this.updateTableStat();
//     this.update();
//     this.updateMapRegio();
//   }
//
//   removeVariable(code_variable) {
//     this.removeLines();
//     this.ratios = app.current_config.ratio.slice();
//     this.nums = app.current_config.num.slice();
//     this.data = app.current_data.filter(
//       ft => this.ratios.map(v => !!ft[v]).every(v => v === true)).slice();
//     this.my_region = this.data.find(d => d.id === app.current_config.my_region);
//
//     this.draw_group.select(`g#l_${code_variable}`).remove();
//     // And use it immediatly:
//     this.updateTableStat();
//     this.update();
//     this.updateMapRegio();
//   }
//
//   bindMenu() {
//     const self = this;
//     const menu = d3.select('#menu_selection');
//     const applychange = function () {
//       // self.map_elem.removeRectBrush();
//       const value = +this.value;
//       if (value < 1) {
//         this.value = 1;
//         return;
//       }
//       self.applySelection(value);
//     };
//     menu.select('.nb_select')
//       .on('change', applychange);
//     menu.select('.nb_select')
//       .on('wheel', applychange);
//     menu.select('.nb_select')
//       .on('keyup', applychange);
//     menu.select('#check_prop')
//       .on('change', function () {
//         if (this.checked) {
//           self.proportionnal_symbols = true;
//         } else {
//           self.proportionnal_symbols = false;
//         }
//         self.update();
//       });
//   }
//
//   removeLines() {
//     this.draw_group.selectAll('.regio_line').remove();
//   }
//
//   remove() {
//     this.map_elem.layers.selectAll('.cloned').remove();
//     this.map_elem.unbindBrushClick();
//     this.map_elem = null;
//     this.table_stats.remove();
//     this.table_stats = null;
//     svg_bar.html('');
//   }
//
//   bindMap(map_elem) {
//     this.map_elem = map_elem;
//     this.map_elem.resetColors(this.current_ids);
//     this.map_elem.displayLegend(2);
//     this.applySelection(5);
//   }
//
//   prepareTableStat() {
//     const ratios = this.ratios;
//     const all_values = ratios.map(v => this.data.map(d => +d[v]));
//     const my_region = this.my_region;
//     const features = all_values.map((values, i) => ({
//       Min: d3.min(values),
//       Max: d3.max(values),
//       Moy: getMean(values),
//       Med: d3.median(values),
//       id: this.ratios[i],
//       Variable: this.ratios[i],
//       'Ma rÃ©gion': my_region[this.ratios[i]],
//     }));
//     return features;
//   }
//
//   updateTableStat() {
//     this.table_stats.removeAll();
//     this.table_stats.addFeatures(this.prepareTableStat());
//   }
//
//   makeTableStat() {
//     const features = this.prepareTableStat();
//     this.table_stats = new TableResumeStat(features);
//   }
//
//   getHelpMessage() {
//     return `
// <h3>Ressemblances</h3>
//
// <b>Aide gÃ©nÃ©rale</b>
//
// Les graphiques de ressemblance permettent de visualiser pour 1 Ã  8 indicateurs les unitÃ©s territoriales les plus proches statistiquement Ã  lâ€™unitÃ© territoriale de rÃ©fÃ©rence.
//
// Cette proximitÃ© est mesurÃ©e par la distance euclidienne. Cette fonction permet dâ€™Ã©valuer la distance normalisÃ©e globale (exprimÃ©e en rang) sÃ©parant lâ€™unitÃ© territoriale de rÃ©fÃ©rence avec lâ€™ensemble des autres unitÃ©s territoriales pour un ensemble dâ€™indicateurs. La formule de la fonction est la suivanteÂ :
//
// <b>Î£(xi - yi)Â²</b>
//
// Si la valeur de lâ€™indice Ã©quivaut Ã  0, la similaritÃ© est totale entre deux unitÃ©s territoriales. Plus la valeur de lâ€™indice est Ã©levÃ©e, plus la dissimilaritÃ© est importante. A noter que cette mÃ©trique euclidienne est assez sensible aux ordres de grandeur hÃ©tÃ©rogÃ¨nes entre plusieurs indicateurs (un fort Ã©cart pour un indicateur peut affecter significativement la valeur de lâ€™indice).
//
// Pour Ã©viter de potentielles erreurs dâ€™interprÃ©tation liÃ©es Ã  cet indice de similaritÃ© synthÃ©tique, Regioviz propose systÃ©matiquement une reprÃ©sentation graphique permettant dâ€™Ã©valuer visuellement le degrÃ© de similaritÃ© indicateur par indicateur.
//
// Par dÃ©faut, lâ€™application renvoie les 5 unitÃ©s territoriales pour lâ€™espace dâ€™Ã©tude et les indicateurs sÃ©lectionnÃ©es qui sont dÃ©finis par la distance euclidienne la plus faible. Libre Ã  lâ€™utilisateur de choisir plus ou moins dâ€™unitÃ©s territoriales de comparaison en fonction de ses objectifs dâ€™analyse.
//
// Sur le graphique apparaissent les n unitÃ©s territoriales les plus proches pour chaque indicateur dans leurs unitÃ©s de mesure respectives. Lâ€™unitÃ© territoriale de rÃ©fÃ©rence apparaÃ®t systÃ©matiquement au centre de chacun des graphiques. Un clic gauche sur une des unitÃ©s territoriales sur le graphique ou sur la carte gÃ©nÃ¨re une ligne entre chaque indicateur permettant dâ€™Ã©valuer le degrÃ© de ressemblance avec lâ€™unitÃ© territoriale de rÃ©fÃ©rence et visualiser ainsi si celle-ci se positionne au-dessus ou en dessous, et pour quel indicateur.
//
// Par dÃ©faut, la taille des cercles sur le graphique est constante. Mais lâ€™utilisateur peut activer lâ€™option Â«Â cercles proportionnels au numÃ©rateurÂ Â» pour visualiser graphiquement la masse des unitÃ©s territoriales. Par exemple, si lâ€™indicateur PIB par habitant est sÃ©lectionnÃ©, la taille des cercles sera proportionnelle Ã  la masse de PIB des unitÃ©s territoriales. Si câ€™est la part des 0-24 ans dans la population totale, la taille des figurÃ©s sera proportionnelle Ã  la masse de la population Ã¢gÃ©e de 0 Ã  24 ans. Cette option a Ã©tÃ© crÃ©Ã©e afin de pouvoir restituer les ordres de grandeur potentiellement hÃ©tÃ©rogÃ¨nes des unitÃ©s territoriales proposÃ©es dans lâ€™application.`;
//   }
// }

// import debug from 'debug';
var variables_info = [];

var study_zones = [{ id: 'no_filter', name: 'UE28', display_level: '' }, { id: 'filter_dist', name: 'RÃ©gion dans un rayon de ', display_level: '' }];
var territorial_mesh = [];

var app = {
  // A mapping id -> color, containing the color to use for each
  // feature not using the default color or the disabled color
  colors: {},
  // The filtered dataset (acccording to: the current territorial level,
  // the filter key (if any) and the ratio(s) selected on the left menu:
  current_data: [],
  // The full dataset provided (containing all the features at any level in one table)
  // Row without data are expected to be empty or to contain the "NA" string.
  full_dataset: [],
  // The ids of the current feature in use (acccording to: the current territorial level,
  // the filter key (if any) and the ratio(s) used in the current chart; filtered
  // to not contain feature with empty ratio values within the ratios in use).
  current_ids: []
};

function setDefaultConfig() {
  var code = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'FRE';
  var variable = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'REVMEN';
  // }, level = 'NUTS1') {
  var var_info = variables_info.find(function (ft) {
    return ft.id === variable;
  });
  app.current_config = {
    // The name of the field of the dataset containing the ID of each feature:
    id_field: 'id',
    // The name of the field of the dataset containing the name of each feature:
    name_field: 'name',
    // The name of the field of the dataset containing the population of each feature:
    pop_field: 'POP_AGE_T',
    // The name of the field of the geojson layer containing the ID of each feature
    // (these values should match with the values of the "id_field" in the
    // tabular dataset)
    id_field_geom: 'id',
    num: [var_info.id1],
    denum: [var_info.id2],
    ratio: [variable],
    ratio_pretty_name: [var_info.name],
    ratio_unit: [var_info.unit],
    // The level currently in use:
    current_level: 'N1',
    // The ID of the region currently in use:
    my_region: code,
    // The name of the region currently in use:
    my_region_pretty_name: app.feature_names[code],
    // How many ratio on the current chart:
    nb_var: 1
  };
  app.colors[app.current_config.my_region] = color_highlight;
}

function setDefaultConfigMenu() {
  var code = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'FRE';
  var variable = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'REVMEN';
  var level = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'N1';

  document.querySelector('.target_region.square[value="' + code + '"]').classList.add('checked');
  document.querySelector('.target_variable.small_square[value="' + variable + '"]').classList.add('checked');
  document.querySelector('.filter_v.square[filter-value="no_filter"]').classList.add('checked');
  document.querySelector('.territ_level.square[value="' + level + '"]').classList.add('checked');
  updateAvailableRatios(code);
}

function updateMenuStudyZones() {
  Array.prototype.forEach.call(document.querySelectorAll('#menu_studyzone > p'), function (elem) {
    var val = elem.querySelector('.filter_v.square').getAttribute('display_level');
    if (val === '' || val === app.current_config.current_level) {
      elem.style.display = null;
    } else {
      elem.style.display = 'none';
    }
  });
}

function resetColors() {
  app.colors = {};
  // for (let i = 0, len_i = current_ids.length; i < len_i; i++) {
  //   app.colors[current_ids[i]] = color_countries;
  // }
  app.colors[app.current_config.my_region] = color_highlight;
}

/**
* Function to update the availables ratios in the left menu (after changing region)
* If a selected variable is not available anymore it will be deselected.
* If there selected variable (all the previously selected variables are unavailable for this region)
* the first variable on the menu will be selected.
* If the new number of selected feature is inferior to the number of variables on the current
* chart, a new chart (suitable for only 1 variable) will be selected.
*
*
* @param {String} my_region - The ID of the newly selected region.
* @return {Number} - The new number of selected ratios.
*
*/
function updateAvailableRatios(my_region) {
  var data_my_feature = app.full_dataset.filter(function (ft) {
    return ft[app.current_config.id_field] === my_region;
  })[0];
  var menu = document.querySelector('#menu');
  var lines = menu.querySelectorAll('.target_variable');
  for (var i = 0, nb_lines = lines.length; i < nb_lines; i++) {
    var code_variable = lines[i].getAttribute('value');
    if (data_my_feature[code_variable] !== undefined && data_my_feature[code_variable] !== 'NA') {
      lines[i].classList.remove('disabled');
      lines[i].nextSibling.classList.remove('disabled');
    } else {
      lines[i].classList.remove('checked');
      lines[i].classList.add('disabled');
      lines[i].nextSibling.classList.add('disabled');
    }
  }
  var new_var = menu.querySelectorAll('.target_variable.checked');
  if (new_var.length !== app.current_config.ratio.length) {
    var new_var_names = void 0;
    if (new_var.length === 0) {
      var name = selectFirstAvailableVar();
      new_var_names = [name];
    } else {
      new_var_names = Array.prototype.slice.call(new_var).map(function (elem) {
        return elem.getAttribute('value');
      });
    }
    resetVariables(app, new_var_names);
  }
  return new_var.length;
}

/**
* Update the menu located on the top of the window the display the available
* charts, according to the current number of selected variables.
*
* @param {Number} nb_var - How many variables are currently selected.
* @return {void}
*
*/
function updateAvailableCharts(nb_var) {
  if (nb_var === 1) {
    // Allow all kind of vizu with 1 variable:
    d3.selectAll('.chart_t1').each(function () {
      this.classList.remove('disabled');
    });
    d3.selectAll('.chart_t2, .chart_t3').each(function () {
      this.classList.add('disabled');
    });
  } else if (nb_var === 2) {
    // Allow all kind of vizu with 2 variables:
    d3.selectAll('.chart_t1, .chart_t2').each(function () {
      this.classList.remove('disabled');
    });
    d3.selectAll('.chart_t3').each(function () {
      this.classList.add('disabled');
    });
  } else if (nb_var > 2) {
    // Allow all kind of vizu with 3 variables:
    d3.selectAll('.chart_t1, .chart_t2, .chart_t3').each(function () {
      this.classList.remove('disabled');
    });
  }
}

function updateMyCategorySection() {
  document.querySelector('.filter_info').innerHTML = app.current_config.my_category;
}

/**
* Create handlers for user event on the left menu and on the map for charts only
* allowing to use 1 variable.
*
* @param {Object} chart - The chart object.
* @param {Object} map_elem - The map object.
* @return {void}
*
*/
function bindUI_chart(chart, map_elem) {
  // User change the study zone:
  d3.selectAll('span.filter_v').on('click', function () {
    if (!this.classList.contains('checked')) {
      d3.selectAll('span.filter_v').attr('class', 'filter_v square');
      this.classList.add('checked');
      var filter_type = this.getAttribute('filter-value');
      if (filter_type === 'filter_dist') {
        var input_elem = document.getElementById('dist_filter');
        input_elem.removeAttribute('disabled');
        var dist = +input_elem.value;
        var ids = map_elem.getUnitsWithin(dist);
        applyFilter(app, ids);
      } else {
        document.getElementById('dist_filter').setAttribute('disabled', 'disabled');
        applyFilter(app, filter_type);
      }
      updateMyCategorySection();
      chart.changeStudyZone();
      chart.updateCompletude();
    }
  });

  d3.select('#dist_filter').on('change, keyup', function () {
    var ids = map_elem.getUnitsWithin(+this.value);
    applyFilter(app, ids);
    chart.changeStudyZone();
    chart.updateCompletude();
  });

  // User change the targeted region:
  d3.selectAll('span.target_region').on('click', function () {
    if (!this.classList.contains('checked')) {
      d3.selectAll('span.target_region').attr('class', 'target_region square');
      this.classList.add('checked');
      var id_region = this.getAttribute('value');
      var old_nb_var = app.current_config.ratio.length;
      changeRegion(app, id_region, map_elem);
      // Update the availables ratio on the left menu
      // (this may change the current selected ratio(s) as some variables are
      // not available for some features) and fetch the number of selected
      // variables after that:
      var new_nb_var = updateAvailableRatios(id_region);
      updateAvailableCharts(new_nb_var);
      if (new_nb_var >= app.current_config.nb_var) {
        if (old_nb_var === new_nb_var) {
          chart.updateChangeRegion();
        } else {
          d3.select('span.type_chart.selected').dispatch('click');
          alertify.warning('Une variable prÃ©cÃ©demment sÃ©lectionnÃ©e n\'est pas disponible pour cette rÃ©gion.');
        }
      } else {
        // If there fewer selected variables than requested by the current chart,
        // redraw the first (default) kind of chart:
        d3.select('span.chart_t1[value="BarChart1"]').dispatch('click');
        alertify.warning('Des variables sÃ©lectionnÃ©es sont indisponibles pour cette rÃ©gion. Un changement de reprÃ©sentation est nÃ©cessaire.');
      }
    }
  });

  // User click on the name of a group of variables
  // to expand or collapse its content:
  d3.selectAll('.name_group_var').on('click', function () {
    var group_var = this.nextSibling;
    var title_arrow = this.querySelector('span.arrow');
    if (group_var.style.display === 'none') {
      title_arrow.classList.remove('arrow_down');
      title_arrow.classList.add('arrow_right');
      group_var.style.display = null;
    } else {
      title_arrow.classList.remove('arrow_right');
      title_arrow.classList.add('arrow_down');
      group_var.style.display = 'none';
    }
  });

  // User click to add/remove a variable from the comparison:
  d3.selectAll('span.target_variable').on('click', function () {
    if (this.classList.contains('disabled')) return;
    var nb_var = Array.prototype.slice.call(document.querySelectorAll('span.target_variable')).filter(function (elem) {
      return !!elem.classList.contains('checked');
    }).length;
    // Select a new variable and trigger the appropriate changes on the current chart:
    if (!this.classList.contains('checked')) {
      // We don't want the user to be able to select more than
      // MAX_VARIABLES (default = 7) variables simultaneously:
      if (nb_var >= MAX_VARIABLES) {
        alertify.warning('Le nombre maximal de variables sÃ©lectionnÃ©es est atteint.');
        return;
      }
      this.classList.add('checked');
      var code_variable = this.getAttribute('value');
      var name_variable = variables_info.find(function (d) {
        return d.id === code_variable;
      }).name;
      addVariable(app, code_variable);
      // makeTable(app.current_data, app.current_config);
      chart.addVariable(code_variable, name_variable);
      nb_var += 1;
    } else {
      // Remove a variable from the selection:
      nb_var -= 1;
      // We don't want to let the user remove the variable if
      // it's the only one selected or if the currently displayed
      // chart need a minimum number of variables:
      if (nb_var < app.current_config.nb_var) {
        return;
      }
      var _code_variable = this.getAttribute('value');
      this.classList.remove('checked');
      removeVariable(app, _code_variable);
      chart.removeVariable(_code_variable);
      // makeTable(app.current_data, app.current_config);
    }
    // Update the top menu to display available charts according to the current
    // number of available variables:
    updateAvailableCharts(nb_var);
  });

  d3.selectAll('span.territ_level').on('click', function () {
    if (!this.classList.contains('checked')) {
      // Reset the study zone :
      d3.select('span.filter_v[filter-value="no_filter"]').dispatch('click');
      d3.selectAll('span.territ_level').attr('class', 'territ_level square');
      this.classList.add('checked');
      var level_value = this.getAttribute('value');
      app.current_config.current_level = level_value;
      updateMenuStudyZones();
      filterLevelVar(app);
      resetColors();
      map_elem.updateLevelRegion(level_value);
      map_elem.unbindBrushClick();
      map_elem.bindBrushClick(chart);
      chart.changeStudyZone();
    }
  });

  // Dispatch a click event on the associated checkbox when the text is clicked:
  d3.selectAll('span.label_chk').on('click', function () {
    this.previousSibling.click();
  });

  var header_map_section = d3.select('#map_section > #header_map');

  header_map_section.select('#img_rect_selec').on('click', function () {
    if (!this.classList.contains('active')) {
      this.classList.add('active');
      document.getElementById('img_map_zoom').classList.remove('active');
      document.getElementById('img_map_select').classList.remove('active');
      svg_map.on('.zoom', null);
      if (map_elem.brush_map) {
        svg_map.select('.brush_map').style('display', null);
      }
      map_elem.target_layer.selectAll('path').on('click', null);
    }
  });

  header_map_section.select('#img_map_zoom').on('click', function () {
    if (!this.classList.contains('active')) {
      this.classList.add('active');
      document.getElementById('img_rect_selec').classList.remove('active');
      document.getElementById('img_map_select').classList.remove('active');
      svg_map.call(map_elem.zoom_map);
      if (map_elem.brush_map) {
        svg_map.select('.brush_map').call(map_elem.brush_map.move, null);
        svg_map.select('.brush_map').style('display', 'none');
      }
      map_elem.target_layer.selectAll('path').on('click', null);
    }
  });

  header_map_section.select('#img_map_select').on('click', function () {
    if (!this.classList.contains('active')) {
      this.classList.add('active');
      document.getElementById('img_rect_selec').classList.remove('active');
      document.getElementById('img_map_zoom').classList.remove('active');
      svg_map.on('.zoom', null);
      if (map_elem.brush_map) {
        svg_map.select('.brush_map').call(map_elem.brush_map.move, null);
        svg_map.select('.brush_map').style('display', 'none');
      }
      map_elem.target_layer.selectAll('path').on('click', function (d) {
        chart.handleClickMap(d, this);
      });
    }
  });

  header_map_section.select('#zoom_in').on('click', zoomClick);

  header_map_section.select('#zoom_out').on('click', zoomClick);

  if (!map_elem.brush_map) {
    if (chart.handleClickMap) {
      map_elem.target_layer.selectAll('path').on('click', function (d) {
        chart.handleClickMap(d, this);
      });
    } else {
      map_elem.target_layer.selectAll('path').on('click', null);
    }
  }

  bindTopButtons(chart, map_elem);
}

/**
* Function to handle click on the top menu, in order to choose
* the kind of availables representation
*
* @param {Object} chart -
* @param {Object} map_elem -
* @return {void}
*/
function bindTopButtons(chart, map_elem) {
  d3.selectAll('.type_chart').on('click', function () {
    if (this.classList.contains('disabled')) return;
    // if (this.classList.contains('selected')) return;
    document.querySelector('.type_chart.selected').classList.remove('selected');
    this.classList.add('selected');
    chart.remove();
    chart = null; // eslint-disable-line no-param-reassign
    unbindUI();
    map_elem.resetZoom();
    app.colors = {};
    var value = this.getAttribute('value');
    if (value === 'BarChart1') {
      chart = new BarChart1(app.current_data); // eslint-disable-line no-param-reassign
      bindUI_chart(chart, map_elem);
      map_elem.bindBrushClick(chart);
      chart.bindMap(map_elem);
    } else if (value === 'ScatterPlot2') {
      chart = new ScatterPlot2(app.current_data); // eslint-disable-line no-param-reassign
      bindUI_chart(chart, map_elem);
      map_elem.bindBrushClick(chart);
      chart.bindMap(map_elem);
    } else if (value === 'RadarChart3') {
      chart = new RadarChart3(app.current_data); // eslint-disable-line no-param-reassign
      bindUI_chart(chart, map_elem);
      map_elem.bindBrushClick(chart);
      chart.bindMap(map_elem);
    } else if (value === 'Similarity1plus') {
      chart = new Similarity1plus(app.current_data); // eslint-disable-line no-param-reassign
      bindUI_chart(chart, map_elem);
      map_elem.bindBrushClick(chart);
      chart.bindMap(map_elem);
    }
    app.chart = chart;
  });
}

function bindHelpMenu() {
  var help_buttons_var = document.querySelector('#menu_variables').querySelectorAll('span.i_info');
  Array.prototype.slice.call(help_buttons_var).forEach(function (btn_i) {
    // eslint-disable-next-line no-param-reassign
    btn_i.onclick = function () {
      var code_variable = this.previousSibling.previousSibling.getAttribute('value');
      var o = variables_info.find(function (d) {
        return d.id === code_variable;
      });
      // eslint-disable-next-line new-cap
      var modal = new tingle_min.modal({
        stickyFooter: false,
        closeMethods: ['overlay', 'button', 'escape'],
        closeLabel: 'Close',
        onOpen: function onOpen() {
          document.querySelector('div.tingle-modal.tingle-modal--visible').style.background = 'rgba(0,0,0,0.4)';
        },
        onClose: function onClose() {
          modal.destroy();
        }
      });
      modal.setContent('<p style="font-family: \'Signika\',sans-serif;color: #4f81bd;font-size: 1.3rem;">Description de l\'indicateur</p>\n        <p style="font-family: \'Signika\',sans-serif;text-align: justify;">' + o.methodo.split('\n').join('<br>') + '</p>\n        <p style="font-family: \'Signika\',sans-serif;font-size: 0.8em">' + o.source + '</p>\n        <p style="font-family: \'Signika\',sans-serif;font-size: 0.8em">Date de t\xE9l\xE9chargement de la donn\xE9e : ' + o.last_update + '</p>');
      modal.open();
    };
  });

  var helps_buttons_study_zone = document.querySelector('#menu_studyzone').querySelectorAll('span.i_info');
  Array.prototype.slice.call(helps_buttons_study_zone).forEach(function (btn_i) {
    // eslint-disable-next-line no-param-reassign
    btn_i.onclick = function () {
      var filter_name = this.previousSibling.previousSibling.getAttribute('filter-value');
      var o = study_zones.find(function (d) {
        return d.id === filter_name;
      });

      // eslint-disable-next-line new-cap
      var modal = new tingle_min.modal({
        stickyFooter: false,
        closeMethods: ['overlay', 'button', 'escape'],
        closeLabel: 'Close',
        onOpen: function onOpen() {
          document.querySelector('div.tingle-modal.tingle-modal--visible').style.background = 'rgba(0,0,0,0.4)';
        },
        onClose: function onClose() {
          modal.destroy();
        }
      });
      modal.setContent('<p style="font-family: \'Signika\',sans-serif;color: #4f81bd;font-size: 1.3rem;">M\xE9thodologie</p>\n        <p style="font-family: \'Signika\',sans-serif;text-align: justify;">' + filter_name + '</p>\n        <p style="font-family: \'Signika\',sans-serif;text-align: justify;">' + o.methodology.split('\n').join('<br>') + '</p>\n        ');
      modal.open();
    };
  });

  var helps_buttons_territ_unit = document.querySelector('#menu_territ_level').querySelectorAll('span.i_info');
  Array.prototype.slice.call(helps_buttons_territ_unit).forEach(function (btn_i) {
    // eslint-disable-next-line no-param-reassign
    btn_i.onclick = function () {
      var territ_level_name = this.previousSibling.previousSibling.getAttribute('value');
      var o = territorial_mesh.find(function (d) {
        return d.id === territ_level_name;
      });

      // eslint-disable-next-line new-cap
      var modal = new tingle_min.modal({
        stickyFooter: false,
        closeMethods: ['overlay', 'button', 'escape'],
        closeLabel: 'Close',
        onOpen: function onOpen() {
          document.querySelector('div.tingle-modal.tingle-modal--visible').style.background = 'rgba(0,0,0,0,0.4)';
        },
        onClose: function onClose() {
          modal.destroy();
        }
      });
      modal.setContent('\n        <p style="font-family: \'Signika\',sans-serif; color: #4f81bd;font-size: 1.3rem;">Titre</p>\n        <p style="font-family: \'Signika\',sans-serif;text-align: justify;">' + territ_level_name + '</p>\n        <p style="font-family: \'Signika\',sans-serif;text-align: justify;">' + o.methodology.split('\n').join('<br>') + '</p>\n        ');
      modal.open();
    };
  });
}

function loadData() {
  d3.queue(4).defer(d3.csv, 'data/REGIOVIZ_DATA.csv').defer(d3.json, 'data/CGET_nuts_all3035.geojson').defer(d3.json, 'data/borders3035.geojson').defer(d3.json, 'data/countries3035.geojson').defer(d3.json, 'data/countries-remote3035.geojson').defer(d3.json, 'data/coasts3035.geojson').defer(d3.json, 'data/coasts-remote3035.geojson').defer(d3.json, 'data/cyprus_non_espon_space3035.geojson').defer(d3.json, 'data/countries-remote-boundaries3035.geojson').defer(d3.json, 'data/frame3035.geojson').defer(d3.json, 'data/boxes3035.geojson').defer(d3.json, 'data/line3035.geojson').defer(d3.csv, 'data/indicateurs_meta.csv').awaitAll(function (error, results) {
    if (error) throw error;
    document.body.classList.remove('loading');
    document.querySelector('.spinner').remove();
    app.ratioToWide = getRatioToWide();

    var _results = slicedToArray(results, 13),
        full_dataset = _results[0],
        nuts = _results[1],
        borders = _results[2],
        countries = _results[3],
        countries_remote = _results[4],
        coasts = _results[5],
        coasts_remote = _results[6],
        cyprus_non_espon_space = _results[7],
        countries_remote_boundaries = _results[8],
        frame = _results[9],
        boxes = _results[10],
        line = _results[11],
        metadata_indicateurs = _results[12];

    alertify.set('notifier', 'position', 'bottom-left');
    prepareVariablesInfo(metadata_indicateurs);
    // TODO : Reorder it in the dataset :
    var features_menu = full_dataset.filter(function (ft) {
      return ft.REGIOVIZ === '1';
    });
    features_menu = features_menu.slice(0, 1).concat(features_menu.slice(6)).concat(features_menu.slice(1, 6));
    var start_region = getRandom(features_menu.map(function (d) {
      return d.id;
    }), 12);
    var start_variable = getRandom(['REVMEN', 'CHOM1574', 'CHOM1524']);
    prepare_dataset(full_dataset, app);
    setDefaultConfig(start_region, start_variable, 'N1');
    prepareGeomLayerId(nuts, app.current_config.id_field_geom);
    createMenu(features_menu, variables_info.filter(function (d) {
      return d.group;
    }), study_zones, territorial_mesh);
    updateMenuStudyZones();
    bindHelpMenu();
    makeTopMenu();
    makeHeaderChart();
    makeHeaderMapSection();
    setDefaultConfigMenu(start_region, start_variable, 'N1');
    filterLevelVar(app);
    var other_layers = new Map([['borders', borders], ['boxes', boxes], ['countries', countries], ['countries_remote', countries_remote], ['coasts', coasts], ['coasts_remote', coasts_remote], ['cyprus_non_espon_space', cyprus_non_espon_space], ['countries_remote_boundaries', countries_remote_boundaries], ['frame', frame], ['line', line], ['boxes2', boxes]]);
    var map_elem = new MapSelect(nuts, other_layers);
    var chart = new BarChart1(app.current_data);
    makeSourceSection();
    bindUI_chart(chart, map_elem);
    map_elem.bindBrushClick(chart);
    chart.bindMap(map_elem);
    app.chart = chart;
  });
}

loadData();

var getRatioToWide = function getRatioToWide() {
  if (window.matchMedia('(min-width: 1561px)').matches) {
    return 1550 / 1350;
  } else if (window.matchMedia('(min-width: 1361px) and (max-width: 1560px)').matches) {
    return 1350 / 1350;
  } else if (window.matchMedia('(min-width: 1161px) and (max-width: 1360px)').matches) {
    return 1150 / 1350;
  } else if (window.matchMedia('(min-width: 960px) and (max-width: 1160px)').matches) {
    return 960 / 1350;
  } else if (window.matchMedia('(max-width: 959px)').matches) {
    return 540 / 1350;
  }
  return 1350 / 1350;
};

window.onresize = function () {
  var previous_ratio = app.ratioToWide;
  var new_ratio = getRatioToWide();
  if (previous_ratio === new_ratio) return;
  app.ratioToWide = new_ratio;
  var chart_scale_value = new_ratio / app.chartDrawRatio;
  d3.select('#svg_bar').attr('height', 500 * app.ratioToWide + 'px');
  d3.select('#svg_bar > g.container').attr('transform', 'scale(' + chart_scale_value + ')');

  var bbox_svg = svg_map.node().getBoundingClientRect();
  var width_map = +bbox_svg.width;
  var height_map = width_map * (1 / RATIO_WH_MAP);
  var map_scale_value = new_ratio / app.mapDrawRatio;
  svg_map.attr('height', height_map + 'px');
  svg_map.select('#layers').attr('transform', 'scale(' + map_scale_value + ')');
  svg_map.select('.brush_map').attr('transform', 'scale(' + map_scale_value + ')');
  d3.select('#svg_legend').attr('transform', 'scale(' + map_scale_value + ')');
};

exports.variables_info = variables_info;
exports.study_zones = study_zones;
exports.territorial_mesh = territorial_mesh;
exports.app = app;
exports.resetColors = resetColors;
exports.bindTopButtons = bindTopButtons;

}((this.App = this.App || {})));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy90aW5nbGUuanMvZGlzdC90aW5nbGUubWluLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2FsZXJ0aWZ5anMvYnVpbGQvYWxlcnRpZnkuanMiLCIuLi8uLi9zcmMvc2NyaXB0cy9tb2R1bGVzL29wdGlvbnMuanMiLCIuLi8uLi9zcmMvc2NyaXB0cy9tb2R1bGVzL2hlbHBlcnMuanMiLCIuLi8uLi9zcmMvc2NyaXB0cy9tb2R1bGVzL21lbnVsZWZ0LmpzIiwiLi4vLi4vc3JjL3NjcmlwdHMvbW9kdWxlcy9tZW51dG9wLmpzIiwiLi4vLi4vc3JjL3NjcmlwdHMvbW9kdWxlcy9wcmVwYXJlX2RhdGEuanMiLCIuLi8uLi9zcmMvc2NyaXB0cy9tb2R1bGVzL21hcC5qcyIsIi4uLy4uL3NyYy9zY3JpcHRzL21vZHVsZXMvdGFibGVSZXN1bWVTdGF0LmpzIiwiLi4vLi4vc3JjL3NjcmlwdHMvbW9kdWxlcy9jb21wbGV0dWRlLmpzIiwiLi4vLi4vc3JjL3NjcmlwdHMvbW9kdWxlcy9jaGFydHMvYmFyQ2hhcnRfMXYuanMiLCIuLi8uLi9zcmMvc2NyaXB0cy9tb2R1bGVzL2NvbnRleHRNZW51LmpzIiwiLi4vLi4vc3JjL3NjcmlwdHMvbW9kdWxlcy9jaGFydHMvc2NhdHRlclBsb3RfMnYuanMiLCIuLi8uLi9zcmMvc2NyaXB0cy9tb2R1bGVzL2NoYXJ0cy9yYWRhckNoYXJ0XzN2LmpzIiwiLi4vLi4vc3JjL3NjcmlwdHMvbW9kdWxlcy9jaGFydHMvc2ltaWxhcml0eTF2LmpzIiwiLi4vLi4vc3JjL3NjcmlwdHMvbWFpbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIhZnVuY3Rpb24odCxvKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKG8pOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPW8oKTp0LnRpbmdsZT1vKCl9KHRoaXMsZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3ZhciBvPXtvbkNsb3NlOm51bGwsb25PcGVuOm51bGwsYmVmb3JlT3BlbjpudWxsLGJlZm9yZUNsb3NlOm51bGwsc3RpY2t5Rm9vdGVyOiExLGZvb3RlcjohMSxjc3NDbGFzczpbXSxjbG9zZUxhYmVsOlwiQ2xvc2VcIixjbG9zZU1ldGhvZHM6W1wib3ZlcmxheVwiLFwiYnV0dG9uXCIsXCJlc2NhcGVcIl19O3RoaXMub3B0cz1yKHt9LG8sdCksdGhpcy5pbml0KCl9ZnVuY3Rpb24gbygpe3RoaXMubW9kYWxCb3hGb290ZXImJih0aGlzLm1vZGFsQm94Rm9vdGVyLnN0eWxlLndpZHRoPXRoaXMubW9kYWxCb3guY2xpZW50V2lkdGgrXCJweFwiLHRoaXMubW9kYWxCb3hGb290ZXIuc3R5bGUubGVmdD10aGlzLm1vZGFsQm94Lm9mZnNldExlZnQrXCJweFwiKX1mdW5jdGlvbiBlKCl7dGhpcy5tb2RhbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMubW9kYWwuY2xhc3NMaXN0LmFkZChcInRpbmdsZS1tb2RhbFwiKSwwIT09dGhpcy5vcHRzLmNsb3NlTWV0aG9kcy5sZW5ndGgmJnRoaXMub3B0cy5jbG9zZU1ldGhvZHMuaW5kZXhPZihcIm92ZXJsYXlcIikhPT0tMXx8dGhpcy5tb2RhbC5jbGFzc0xpc3QuYWRkKFwidGluZ2xlLW1vZGFsLS1ub092ZXJsYXlDbG9zZVwiKSx0aGlzLm1vZGFsLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdGhpcy5vcHRzLmNzc0NsYXNzLmZvckVhY2goZnVuY3Rpb24odCl7XCJzdHJpbmdcIj09dHlwZW9mIHQmJnRoaXMubW9kYWwuY2xhc3NMaXN0LmFkZCh0KX0sdGhpcyksdGhpcy5vcHRzLmNsb3NlTWV0aG9kcy5pbmRleE9mKFwiYnV0dG9uXCIpIT09LTEmJih0aGlzLm1vZGFsQ2xvc2VCdG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKSx0aGlzLm1vZGFsQ2xvc2VCdG4uY2xhc3NMaXN0LmFkZChcInRpbmdsZS1tb2RhbF9fY2xvc2VcIiksdGhpcy5tb2RhbENsb3NlQnRuSWNvbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKSx0aGlzLm1vZGFsQ2xvc2VCdG5JY29uLmNsYXNzTGlzdC5hZGQoXCJ0aW5nbGUtbW9kYWxfX2Nsb3NlSWNvblwiKSx0aGlzLm1vZGFsQ2xvc2VCdG5JY29uLmlubmVySFRNTD1cIsOXXCIsdGhpcy5tb2RhbENsb3NlQnRuTGFiZWw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIiksdGhpcy5tb2RhbENsb3NlQnRuTGFiZWwuY2xhc3NMaXN0LmFkZChcInRpbmdsZS1tb2RhbF9fY2xvc2VMYWJlbFwiKSx0aGlzLm1vZGFsQ2xvc2VCdG5MYWJlbC5pbm5lckhUTUw9dGhpcy5vcHRzLmNsb3NlTGFiZWwsdGhpcy5tb2RhbENsb3NlQnRuLmFwcGVuZENoaWxkKHRoaXMubW9kYWxDbG9zZUJ0bkljb24pLHRoaXMubW9kYWxDbG9zZUJ0bi5hcHBlbmRDaGlsZCh0aGlzLm1vZGFsQ2xvc2VCdG5MYWJlbCkpLHRoaXMubW9kYWxCb3g9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLm1vZGFsQm94LmNsYXNzTGlzdC5hZGQoXCJ0aW5nbGUtbW9kYWwtYm94XCIpLHRoaXMubW9kYWxCb3hDb250ZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5tb2RhbEJveENvbnRlbnQuY2xhc3NMaXN0LmFkZChcInRpbmdsZS1tb2RhbC1ib3hfX2NvbnRlbnRcIiksdGhpcy5tb2RhbEJveC5hcHBlbmRDaGlsZCh0aGlzLm1vZGFsQm94Q29udGVudCksdGhpcy5vcHRzLmNsb3NlTWV0aG9kcy5pbmRleE9mKFwiYnV0dG9uXCIpIT09LTEmJnRoaXMubW9kYWwuYXBwZW5kQ2hpbGQodGhpcy5tb2RhbENsb3NlQnRuKSx0aGlzLm1vZGFsLmFwcGVuZENoaWxkKHRoaXMubW9kYWxCb3gpfWZ1bmN0aW9uIHMoKXt0aGlzLm1vZGFsQm94Rm9vdGVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5tb2RhbEJveEZvb3Rlci5jbGFzc0xpc3QuYWRkKFwidGluZ2xlLW1vZGFsLWJveF9fZm9vdGVyXCIpLHRoaXMubW9kYWxCb3guYXBwZW5kQ2hpbGQodGhpcy5tb2RhbEJveEZvb3Rlcil9ZnVuY3Rpb24gaSgpe3RoaXMuX2V2ZW50cz17Y2xpY2tDbG9zZUJ0bjp0aGlzLmNsb3NlLmJpbmQodGhpcyksY2xpY2tPdmVybGF5OmwuYmluZCh0aGlzKSxyZXNpemU6dGhpcy5jaGVja092ZXJmbG93LmJpbmQodGhpcyksa2V5Ym9hcmROYXY6bi5iaW5kKHRoaXMpfSx0aGlzLm9wdHMuY2xvc2VNZXRob2RzLmluZGV4T2YoXCJidXR0b25cIikhPT0tMSYmdGhpcy5tb2RhbENsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX2V2ZW50cy5jbGlja0Nsb3NlQnRuKSx0aGlzLm1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIix0aGlzLl9ldmVudHMuY2xpY2tPdmVybGF5KSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMuX2V2ZW50cy5yZXNpemUpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsdGhpcy5fZXZlbnRzLmtleWJvYXJkTmF2KX1mdW5jdGlvbiBuKHQpe3RoaXMub3B0cy5jbG9zZU1ldGhvZHMuaW5kZXhPZihcImVzY2FwZVwiKSE9PS0xJiYyNz09PXQud2hpY2gmJnRoaXMuaXNPcGVuKCkmJnRoaXMuY2xvc2UoKX1mdW5jdGlvbiBsKHQpe3RoaXMub3B0cy5jbG9zZU1ldGhvZHMuaW5kZXhPZihcIm92ZXJsYXlcIikhPT0tMSYmIWQodC50YXJnZXQsXCJ0aW5nbGUtbW9kYWxcIikmJnQuY2xpZW50WDx0aGlzLm1vZGFsLmNsaWVudFdpZHRoJiZ0aGlzLmNsb3NlKCl9ZnVuY3Rpb24gZCh0LG8pe2Zvcig7KHQ9dC5wYXJlbnRFbGVtZW50KSYmIXQuY2xhc3NMaXN0LmNvbnRhaW5zKG8pOyk7cmV0dXJuIHR9ZnVuY3Rpb24gYSgpe3RoaXMub3B0cy5jbG9zZU1ldGhvZHMuaW5kZXhPZihcImJ1dHRvblwiKSE9PS0xJiZ0aGlzLm1vZGFsQ2xvc2VCdG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fZXZlbnRzLmNsaWNrQ2xvc2VCdG4pLHRoaXMubW9kYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLHRoaXMuX2V2ZW50cy5jbGlja092ZXJsYXkpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5fZXZlbnRzLnJlc2l6ZSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIix0aGlzLl9ldmVudHMua2V5Ym9hcmROYXYpfWZ1bmN0aW9uIHIoKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKWZvcih2YXIgbyBpbiBhcmd1bWVudHNbdF0pYXJndW1lbnRzW3RdLmhhc093blByb3BlcnR5KG8pJiYoYXJndW1lbnRzWzBdW29dPWFyZ3VtZW50c1t0XVtvXSk7cmV0dXJuIGFyZ3VtZW50c1swXX1mdW5jdGlvbiBoKCl7dmFyIHQsbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGluZ2xlLXRlc3QtdHJhbnNpdGlvblwiKSxlPXt0cmFuc2l0aW9uOlwidHJhbnNpdGlvbmVuZFwiLE9UcmFuc2l0aW9uOlwib1RyYW5zaXRpb25FbmRcIixNb3pUcmFuc2l0aW9uOlwidHJhbnNpdGlvbmVuZFwiLFdlYmtpdFRyYW5zaXRpb246XCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCJ9O2Zvcih0IGluIGUpaWYodm9pZCAwIT09by5zdHlsZVt0XSlyZXR1cm4gZVt0XX12YXIgYz1oKCk7cmV0dXJuIHQucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLm1vZGFsfHwoZS5jYWxsKHRoaXMpLGkuY2FsbCh0aGlzKSxkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZSh0aGlzLm1vZGFsLGRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZCksdGhpcy5vcHRzLmZvb3RlciYmdGhpcy5hZGRGb290ZXIoKSl9LHQucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtudWxsIT09dGhpcy5tb2RhbCYmKGEuY2FsbCh0aGlzKSx0aGlzLm1vZGFsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5tb2RhbCksdGhpcy5tb2RhbD1udWxsKX0sdC5wcm90b3R5cGUub3Blbj1mdW5jdGlvbigpe3ZhciB0PXRoaXM7XCJmdW5jdGlvblwiPT10eXBlb2YgdC5vcHRzLmJlZm9yZU9wZW4mJnQub3B0cy5iZWZvcmVPcGVuKCksdGhpcy5tb2RhbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eT90aGlzLm1vZGFsLnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiZGlzcGxheVwiKTp0aGlzLm1vZGFsLnN0eWxlLnJlbW92ZUF0dHJpYnV0ZShcImRpc3BsYXlcIiksZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwidGluZ2xlLWVuYWJsZWRcIiksdGhpcy5zZXRTdGlja3lGb290ZXIodGhpcy5vcHRzLnN0aWNreUZvb3RlciksdGhpcy5tb2RhbC5jbGFzc0xpc3QuYWRkKFwidGluZ2xlLW1vZGFsLS12aXNpYmxlXCIpLGM/dGhpcy5tb2RhbC5hZGRFdmVudExpc3RlbmVyKGMsZnVuY3Rpb24gbygpe1wiZnVuY3Rpb25cIj09dHlwZW9mIHQub3B0cy5vbk9wZW4mJnQub3B0cy5vbk9wZW4uY2FsbCh0KSx0Lm1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoYyxvLCExKX0sITEpOlwiZnVuY3Rpb25cIj09dHlwZW9mIHQub3B0cy5vbk9wZW4mJnQub3B0cy5vbk9wZW4uY2FsbCh0KSx0aGlzLmNoZWNrT3ZlcmZsb3coKX0sdC5wcm90b3R5cGUuaXNPcGVuPWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLm1vZGFsLmNsYXNzTGlzdC5jb250YWlucyhcInRpbmdsZS1tb2RhbC0tdmlzaWJsZVwiKX0sdC5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLm9wdHMuYmVmb3JlQ2xvc2Upe3ZhciB0PXRoaXMub3B0cy5iZWZvcmVDbG9zZS5jYWxsKHRoaXMpO2lmKCF0KXJldHVybn1kb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJ0aW5nbGUtZW5hYmxlZFwiKSx0aGlzLm1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJ0aW5nbGUtbW9kYWwtLXZpc2libGVcIik7dmFyIG89dGhpcztjP3RoaXMubW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihjLGZ1bmN0aW9uIHQoKXtvLm1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoYyx0LCExKSxvLm1vZGFsLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsXCJmdW5jdGlvblwiPT10eXBlb2Ygby5vcHRzLm9uQ2xvc2UmJm8ub3B0cy5vbkNsb3NlLmNhbGwodGhpcyl9LCExKTooby5tb2RhbC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLFwiZnVuY3Rpb25cIj09dHlwZW9mIG8ub3B0cy5vbkNsb3NlJiZvLm9wdHMub25DbG9zZS5jYWxsKHRoaXMpKX0sdC5wcm90b3R5cGUuc2V0Q29udGVudD1mdW5jdGlvbih0KXtcInN0cmluZ1wiPT10eXBlb2YgdD90aGlzLm1vZGFsQm94Q29udGVudC5pbm5lckhUTUw9dDoodGhpcy5tb2RhbEJveENvbnRlbnQuaW5uZXJIVE1MPVwiXCIsdGhpcy5tb2RhbEJveENvbnRlbnQuYXBwZW5kQ2hpbGQodCkpfSx0LnByb3RvdHlwZS5nZXRDb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kYWxCb3hDb250ZW50fSx0LnByb3RvdHlwZS5hZGRGb290ZXI9ZnVuY3Rpb24oKXtzLmNhbGwodGhpcyl9LHQucHJvdG90eXBlLnNldEZvb3RlckNvbnRlbnQ9ZnVuY3Rpb24odCl7dGhpcy5tb2RhbEJveEZvb3Rlci5pbm5lckhUTUw9dH0sdC5wcm90b3R5cGUuZ2V0Rm9vdGVyQ29udGVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1vZGFsQm94Rm9vdGVyfSx0LnByb3RvdHlwZS5zZXRTdGlja3lGb290ZXI9ZnVuY3Rpb24odCl7dGhpcy5pc092ZXJmbG93KCl8fCh0PSExKSx0P3RoaXMubW9kYWxCb3guY29udGFpbnModGhpcy5tb2RhbEJveEZvb3RlcikmJih0aGlzLm1vZGFsQm94LnJlbW92ZUNoaWxkKHRoaXMubW9kYWxCb3hGb290ZXIpLHRoaXMubW9kYWwuYXBwZW5kQ2hpbGQodGhpcy5tb2RhbEJveEZvb3RlciksdGhpcy5tb2RhbEJveEZvb3Rlci5jbGFzc0xpc3QuYWRkKFwidGluZ2xlLW1vZGFsLWJveF9fZm9vdGVyLS1zdGlja3lcIiksby5jYWxsKHRoaXMpLHRoaXMubW9kYWxCb3hDb250ZW50LnN0eWxlW1wicGFkZGluZy1ib3R0b21cIl09dGhpcy5tb2RhbEJveEZvb3Rlci5jbGllbnRIZWlnaHQrMjArXCJweFwiKTp0aGlzLm1vZGFsQm94Rm9vdGVyJiYodGhpcy5tb2RhbEJveC5jb250YWlucyh0aGlzLm1vZGFsQm94Rm9vdGVyKXx8KHRoaXMubW9kYWwucmVtb3ZlQ2hpbGQodGhpcy5tb2RhbEJveEZvb3RlciksdGhpcy5tb2RhbEJveC5hcHBlbmRDaGlsZCh0aGlzLm1vZGFsQm94Rm9vdGVyKSx0aGlzLm1vZGFsQm94Rm9vdGVyLnN0eWxlLndpZHRoPVwiYXV0b1wiLHRoaXMubW9kYWxCb3hGb290ZXIuc3R5bGUubGVmdD1cIlwiLHRoaXMubW9kYWxCb3hDb250ZW50LnN0eWxlW1wicGFkZGluZy1ib3R0b21cIl09XCJcIix0aGlzLm1vZGFsQm94Rm9vdGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJ0aW5nbGUtbW9kYWwtYm94X19mb290ZXItLXN0aWNreVwiKSkpfSx0LnByb3RvdHlwZS5hZGRGb290ZXJCdG49ZnVuY3Rpb24odCxvLGUpe3ZhciBzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7cmV0dXJuIHMuaW5uZXJIVE1MPXQscy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixlKSxcInN0cmluZ1wiPT10eXBlb2YgbyYmby5sZW5ndGgmJm8uc3BsaXQoXCIgXCIpLmZvckVhY2goZnVuY3Rpb24odCl7cy5jbGFzc0xpc3QuYWRkKHQpfSksdGhpcy5tb2RhbEJveEZvb3Rlci5hcHBlbmRDaGlsZChzKSxzfSx0LnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oKXtjb25zb2xlLndhcm4oXCJSZXNpemUgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHZlcnNpb24gMS4wXCIpfSx0LnByb3RvdHlwZS5pc092ZXJmbG93PWZ1bmN0aW9uKCl7dmFyIHQ9d2luZG93LmlubmVySGVpZ2h0LG89dGhpcy5tb2RhbEJveC5jbGllbnRIZWlnaHQ7cmV0dXJuIG8+PXR9LHQucHJvdG90eXBlLmNoZWNrT3ZlcmZsb3c9ZnVuY3Rpb24oKXt0aGlzLm1vZGFsLmNsYXNzTGlzdC5jb250YWlucyhcInRpbmdsZS1tb2RhbC0tdmlzaWJsZVwiKSYmKHRoaXMuaXNPdmVyZmxvdygpP3RoaXMubW9kYWwuY2xhc3NMaXN0LmFkZChcInRpbmdsZS1tb2RhbC0tb3ZlcmZsb3dcIik6dGhpcy5tb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwidGluZ2xlLW1vZGFsLS1vdmVyZmxvd1wiKSwhdGhpcy5pc092ZXJmbG93KCkmJnRoaXMub3B0cy5zdGlja3lGb290ZXI/dGhpcy5zZXRTdGlja3lGb290ZXIoITEpOnRoaXMuaXNPdmVyZmxvdygpJiZ0aGlzLm9wdHMuc3RpY2t5Rm9vdGVyJiYoby5jYWxsKHRoaXMpLHRoaXMuc2V0U3RpY2t5Rm9vdGVyKCEwKSkpfSx7bW9kYWw6dH19KTsiLCIvKipcclxuICogYWxlcnRpZnlqcyAxLjExLjAgaHR0cDovL2FsZXJ0aWZ5anMuY29tXHJcbiAqIEFsZXJ0aWZ5SlMgaXMgYSBqYXZhc2NyaXB0IGZyYW1ld29yayBmb3IgZGV2ZWxvcGluZyBwcmV0dHkgYnJvd3NlciBkaWFsb2dzIGFuZCBub3RpZmljYXRpb25zLlxyXG4gKiBDb3B5cmlnaHQgMjAxNyBNb2hhbW1hZCBZb3VuZXMgPE1vaGFtbWFkQGFsZXJ0aWZ5anMuY29tPiAoaHR0cDovL2FsZXJ0aWZ5anMuY29tKSBcclxuICogTGljZW5zZWQgdW5kZXIgR1BMIDMgPGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvZ3BsLTMuMD4qL1xyXG4oIGZ1bmN0aW9uICggd2luZG93ICkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEtleXMgZW51bVxyXG4gICAgICogQHR5cGUge09iamVjdH1cclxuICAgICAqL1xyXG4gICAgdmFyIGtleXMgPSB7XHJcbiAgICAgICAgRU5URVI6IDEzLFxyXG4gICAgICAgIEVTQzogMjcsXHJcbiAgICAgICAgRjE6IDExMixcclxuICAgICAgICBGMTI6IDEyMyxcclxuICAgICAgICBMRUZUOiAzNyxcclxuICAgICAgICBSSUdIVDogMzlcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIERlZmF1bHQgb3B0aW9ucyBcclxuICAgICAqIEB0eXBlIHtPYmplY3R9XHJcbiAgICAgKi9cclxuICAgIHZhciBkZWZhdWx0cyA9IHtcclxuICAgICAgICBhdXRvUmVzZXQ6dHJ1ZSxcclxuICAgICAgICBiYXNpYzpmYWxzZSxcclxuICAgICAgICBjbG9zYWJsZTp0cnVlLFxyXG4gICAgICAgIGNsb3NhYmxlQnlEaW1tZXI6dHJ1ZSxcclxuICAgICAgICBmcmFtZWxlc3M6ZmFsc2UsXHJcbiAgICAgICAgbWFpbnRhaW5Gb2N1czp0cnVlLCAvL2dsb2JhbCBkZWZhdWx0IG5vdCBwZXIgaW5zdGFuY2UsIGFwcGxpZXMgdG8gYWxsIGRpYWxvZ3NcclxuICAgICAgICBtYXhpbWl6YWJsZTp0cnVlLFxyXG4gICAgICAgIG1vZGFsOnRydWUsXHJcbiAgICAgICAgbW92YWJsZTp0cnVlLFxyXG4gICAgICAgIG1vdmVCb3VuZGVkOmZhbHNlLFxyXG4gICAgICAgIG92ZXJmbG93OnRydWUsXHJcbiAgICAgICAgcGFkZGluZzogdHJ1ZSxcclxuICAgICAgICBwaW5uYWJsZTp0cnVlLFxyXG4gICAgICAgIHBpbm5lZDp0cnVlLFxyXG4gICAgICAgIHByZXZlbnRCb2R5U2hpZnQ6ZmFsc2UsIC8vZ2xvYmFsIGRlZmF1bHQgbm90IHBlciBpbnN0YW5jZSwgYXBwbGllcyB0byBhbGwgZGlhbG9nc1xyXG4gICAgICAgIHJlc2l6YWJsZTp0cnVlLFxyXG4gICAgICAgIHN0YXJ0TWF4aW1pemVkOmZhbHNlLFxyXG4gICAgICAgIHRyYW5zaXRpb246J3B1bHNlJyxcclxuICAgICAgICBub3RpZmllcjp7XHJcbiAgICAgICAgICAgIGRlbGF5OjUsXHJcbiAgICAgICAgICAgIHBvc2l0aW9uOidib3R0b20tcmlnaHQnLFxyXG4gICAgICAgICAgICBjbG9zZUJ1dHRvbjpmYWxzZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2xvc3Nhcnk6e1xyXG4gICAgICAgICAgICB0aXRsZTonQWxlcnRpZnlKUycsXHJcbiAgICAgICAgICAgIG9rOiAnT0snLFxyXG4gICAgICAgICAgICBjYW5jZWw6ICdDYW5jZWwnLFxyXG4gICAgICAgICAgICBhY2NjcHQ6ICdBY2NlcHQnLFxyXG4gICAgICAgICAgICBkZW55OiAnRGVueScsXHJcbiAgICAgICAgICAgIGNvbmZpcm06ICdDb25maXJtJyxcclxuICAgICAgICAgICAgZGVjbGluZTogJ0RlY2xpbmUnLFxyXG4gICAgICAgICAgICBjbG9zZTogJ0Nsb3NlJyxcclxuICAgICAgICAgICAgbWF4aW1pemU6ICdNYXhpbWl6ZScsXHJcbiAgICAgICAgICAgIHJlc3RvcmU6ICdSZXN0b3JlJyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRoZW1lOntcclxuICAgICAgICAgICAgaW5wdXQ6J2Fqcy1pbnB1dCcsXHJcbiAgICAgICAgICAgIG9rOidhanMtb2snLFxyXG4gICAgICAgICAgICBjYW5jZWw6J2Fqcy1jYW5jZWwnLFxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vaG9sZHMgb3BlbiBkaWFsb2dzIGluc3RhbmNlc1xyXG4gICAgdmFyIG9wZW5EaWFsb2dzID0gW107XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBbSGVscGVyXSAgQWRkcyB0aGUgc3BlY2lmaWVkIGNsYXNzKGVzKSB0byB0aGUgZWxlbWVudC5cclxuICAgICAqXHJcbiAgICAgKiBAZWxlbWVudCB7bm9kZX0gICAgICBUaGUgZWxlbWVudFxyXG4gICAgICogQGNsYXNzTmFtZSB7c3RyaW5nfSAgT25lIG9yIG1vcmUgc3BhY2Utc2VwYXJhdGVkIGNsYXNzZXMgdG8gYmUgYWRkZWQgdG8gdGhlIGNsYXNzIGF0dHJpYnV0ZSBvZiB0aGUgZWxlbWVudC5cclxuICAgICAqIFxyXG4gICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBhZGRDbGFzcyhlbGVtZW50LGNsYXNzTmFtZXMpe1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lICs9ICcgJyArIGNsYXNzTmFtZXM7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogW0hlbHBlcl0gIFJlbW92ZXMgdGhlIHNwZWNpZmllZCBjbGFzcyhlcykgZnJvbSB0aGUgZWxlbWVudC5cclxuICAgICAqXHJcbiAgICAgKiBAZWxlbWVudCB7bm9kZX0gICAgICBUaGUgZWxlbWVudFxyXG4gICAgICogQGNsYXNzTmFtZSB7c3RyaW5nfSAgT25lIG9yIG1vcmUgc3BhY2Utc2VwYXJhdGVkIGNsYXNzZXMgdG8gYmUgcmVtb3ZlZCBmcm9tIHRoZSBjbGFzcyBhdHRyaWJ1dGUgb2YgdGhlIGVsZW1lbnQuXHJcbiAgICAgKiBcclxuICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lcykge1xyXG4gICAgICAgIHZhciBvcmlnaW5hbCA9IGVsZW1lbnQuY2xhc3NOYW1lLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgdmFyIHRvQmVSZW1vdmVkID0gY2xhc3NOYW1lcy5zcGxpdCgnICcpO1xyXG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdG9CZVJlbW92ZWQubGVuZ3RoOyB4ICs9IDEpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gb3JpZ2luYWwuaW5kZXhPZih0b0JlUmVtb3ZlZFt4XSk7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKXtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsLnNwbGljZShpbmRleCwxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IG9yaWdpbmFsLmpvaW4oJyAnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFtIZWxwZXJdICBDaGVja3MgaWYgdGhlIGRvY3VtZW50IGlzIFJUTFxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IFRydWUgaWYgdGhlIGRvY3VtZW50IGlzIFJUTCwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBpc1JpZ2h0VG9MZWZ0KCl7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmRpcmVjdGlvbiA9PT0gJ3J0bCc7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFtIZWxwZXJdICBHZXQgdGhlIGRvY3VtZW50IGN1cnJlbnQgc2Nyb2xsVG9wXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBjdXJyZW50IGRvY3VtZW50IHNjcm9sbFRvcCB2YWx1ZVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRTY3JvbGxUb3AoKXtcclxuICAgICAgICByZXR1cm4gKChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCkgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3ApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogW0hlbHBlcl0gIEdldCB0aGUgZG9jdW1lbnQgY3VycmVudCBzY3JvbGxMZWZ0XHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBjdXJyZW50IGRvY3VtZW50IHNjcm9sbExlZnQgdmFsdWVcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0U2Nyb2xsTGVmdCgpe1xyXG4gICAgICAgIHJldHVybiAoKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCkgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogSGVscGVyOiBjbGVhciBjb250ZW50c1xyXG4gICAgKlxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIGNsZWFyQ29udGVudHMoZWxlbWVudCl7XHJcbiAgICAgICAgd2hpbGUgKGVsZW1lbnQubGFzdENoaWxkKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5sYXN0Q2hpbGQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRXh0ZW5kcyBhIGdpdmVuIHByb3RvdHlwZSBieSBtZXJnaW5nIHByb3BlcnRpZXMgZnJvbSBiYXNlIGludG8gc3ViLlxyXG4gICAgICpcclxuICAgICAqIEBzdWIge09iamVjdH0gc3ViIFRoZSBwcm90b3R5cGUgYmVpbmcgb3ZlcndyaXR0ZW4uXHJcbiAgICAgKiBAYmFzZSB7T2JqZWN0fSBiYXNlIFRoZSBwcm90b3R5cGUgYmVpbmcgd3JpdHRlbi5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBleHRlbmRlZCBwcm90b3R5cGUuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGNvcHkoc3JjKSB7XHJcbiAgICAgICAgaWYobnVsbCA9PT0gc3JjKXtcclxuICAgICAgICAgICAgcmV0dXJuIHNyYztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGNweTtcclxuICAgICAgICBpZihBcnJheS5pc0FycmF5KHNyYykpe1xyXG4gICAgICAgICAgICBjcHkgPSBbXTtcclxuICAgICAgICAgICAgZm9yKHZhciB4PTA7eDxzcmMubGVuZ3RoO3grPTEpe1xyXG4gICAgICAgICAgICAgICAgY3B5LnB1c2goY29weShzcmNbeF0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gY3B5O1xyXG4gICAgICAgIH1cclxuICAgICAgXHJcbiAgICAgICAgaWYoc3JjIGluc3RhbmNlb2YgRGF0ZSl7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShzcmMuZ2V0VGltZSgpKTtcclxuICAgICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAgIGlmKHNyYyBpbnN0YW5jZW9mIFJlZ0V4cCl7XHJcbiAgICAgICAgICAgIGNweSA9IG5ldyBSZWdFeHAoc3JjLnNvdXJjZSk7XHJcbiAgICAgICAgICAgIGNweS5nbG9iYWwgPSBzcmMuZ2xvYmFsO1xyXG4gICAgICAgICAgICBjcHkuaWdub3JlQ2FzZSA9IHNyYy5pZ25vcmVDYXNlO1xyXG4gICAgICAgICAgICBjcHkubXVsdGlsaW5lID0gc3JjLm11bHRpbGluZTtcclxuICAgICAgICAgICAgY3B5Lmxhc3RJbmRleCA9IHNyYy5sYXN0SW5kZXg7XHJcbiAgICAgICAgICAgIHJldHVybiBjcHk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKHR5cGVvZiBzcmMgPT09ICdvYmplY3QnKXtcclxuICAgICAgICAgICAgY3B5ID0ge307XHJcbiAgICAgICAgICAgIC8vIGNvcHkgZGlhbG9nIHBvdG90eXBlIG92ZXIgZGVmaW5pdGlvbi5cclxuICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBzcmMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzcmMuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjcHlbcHJvcF0gPSBjb3B5KHNyY1twcm9wXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGNweTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNyYztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICAqIEhlbHBlcjogZGVzdHJ1Y3QgdGhlIGRpYWxvZ1xyXG4gICAgICAqXHJcbiAgICAgICovXHJcbiAgICBmdW5jdGlvbiBkZXN0cnVjdChpbnN0YW5jZSwgaW5pdGlhbGl6ZSl7XHJcbiAgICAgICAgLy9kZWxldGUgdGhlIGRvbSBhbmQgaXQncyByZWZlcmVuY2VzLlxyXG4gICAgICAgIHZhciByb290ID0gaW5zdGFuY2UuZWxlbWVudHMucm9vdDtcclxuICAgICAgICByb290LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocm9vdCk7XHJcbiAgICAgICAgZGVsZXRlIGluc3RhbmNlLmVsZW1lbnRzO1xyXG4gICAgICAgIC8vY29weSBiYWNrIGluaXRpYWwgc2V0dGluZ3MuXHJcbiAgICAgICAgaW5zdGFuY2Uuc2V0dGluZ3MgPSBjb3B5KGluc3RhbmNlLl9fc2V0dGluZ3MpO1xyXG4gICAgICAgIC8vcmUtcmVmZXJlbmNlIGluaXQgZnVuY3Rpb24uXHJcbiAgICAgICAgaW5zdGFuY2UuX19pbml0ID0gaW5pdGlhbGl6ZTtcclxuICAgICAgICAvL2RlbGV0ZSBfX2ludGVybmFsIHZhcmlhYmxlIHRvIGFsbG93IHJlLWluaXRpYWxpemF0aW9uLlxyXG4gICAgICAgIGRlbGV0ZSBpbnN0YW5jZS5fX2ludGVybmFsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXNlIGEgY2xvc3VyZSB0byByZXR1cm4gcHJvcGVyIGV2ZW50IGxpc3RlbmVyIG1ldGhvZC4gVHJ5IHRvIHVzZVxyXG4gICAgICogYGFkZEV2ZW50TGlzdGVuZXJgIGJ5IGRlZmF1bHQgYnV0IGZhbGxiYWNrIHRvIGBhdHRhY2hFdmVudGAgZm9yXHJcbiAgICAgKiB1bnN1cHBvcnRlZCBicm93c2VyLiBUaGUgY2xvc3VyZSBzaW1wbHkgZW5zdXJlcyB0aGF0IHRoZSB0ZXN0IGRvZXNuJ3RcclxuICAgICAqIGhhcHBlbiBldmVyeSB0aW1lIHRoZSBtZXRob2QgaXMgY2FsbGVkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAgICB7Tm9kZX0gICAgIGVsICAgIE5vZGUgZWxlbWVudFxyXG4gICAgICogQHBhcmFtICAgIHtTdHJpbmd9ICAgZXZlbnQgRXZlbnQgdHlwZVxyXG4gICAgICogQHBhcmFtICAgIHtGdW5jdGlvbn0gZm4gICAgQ2FsbGJhY2sgb2YgZXZlbnRcclxuICAgICAqIEByZXR1cm4gICB7RnVuY3Rpb259XHJcbiAgICAgKi9cclxuICAgIHZhciBvbiA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlbCwgZXZlbnQsIGZuLCB1c2VDYXB0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmbiwgdXNlQ2FwdHVyZSA9PT0gdHJ1ZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5hdHRhY2hFdmVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGVsLCBldmVudCwgZm4pIHtcclxuICAgICAgICAgICAgICAgIGVsLmF0dGFjaEV2ZW50KCdvbicgKyBldmVudCwgZm4pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH0oKSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2UgYSBjbG9zdXJlIHRvIHJldHVybiBwcm9wZXIgZXZlbnQgbGlzdGVuZXIgbWV0aG9kLiBUcnkgdG8gdXNlXHJcbiAgICAgKiBgcmVtb3ZlRXZlbnRMaXN0ZW5lcmAgYnkgZGVmYXVsdCBidXQgZmFsbGJhY2sgdG8gYGRldGFjaEV2ZW50YCBmb3JcclxuICAgICAqIHVuc3VwcG9ydGVkIGJyb3dzZXIuIFRoZSBjbG9zdXJlIHNpbXBseSBlbnN1cmVzIHRoYXQgdGhlIHRlc3QgZG9lc24ndFxyXG4gICAgICogaGFwcGVuIGV2ZXJ5IHRpbWUgdGhlIG1ldGhvZCBpcyBjYWxsZWQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtICAgIHtOb2RlfSAgICAgZWwgICAgTm9kZSBlbGVtZW50XHJcbiAgICAgKiBAcGFyYW0gICAge1N0cmluZ30gICBldmVudCBFdmVudCB0eXBlXHJcbiAgICAgKiBAcGFyYW0gICAge0Z1bmN0aW9ufSBmbiAgICBDYWxsYmFjayBvZiBldmVudFxyXG4gICAgICogQHJldHVybiAgIHtGdW5jdGlvbn1cclxuICAgICAqL1xyXG4gICAgdmFyIG9mZiA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlbCwgZXZlbnQsIGZuLCB1c2VDYXB0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBmbiwgdXNlQ2FwdHVyZSA9PT0gdHJ1ZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5kZXRhY2hFdmVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGVsLCBldmVudCwgZm4pIHtcclxuICAgICAgICAgICAgICAgIGVsLmRldGFjaEV2ZW50KCdvbicgKyBldmVudCwgZm4pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH0oKSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcmV2ZW50IGRlZmF1bHQgZXZlbnQgZnJvbSBmaXJpbmdcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHtFdmVudH0gZXZlbnQgRXZlbnQgb2JqZWN0XHJcbiAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcblxyXG4gICAgZnVuY3Rpb24gcHJldmVudCAoIGV2ZW50ICkge1xyXG4gICAgICAgIGlmICggZXZlbnQgKSB7XHJcbiAgICAgICAgICAgIGlmICggZXZlbnQucHJldmVudERlZmF1bHQgKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQucmV0dXJuVmFsdWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICovXHJcbiAgICB2YXIgdHJhbnNpdGlvbiA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHQsIHR5cGU7XHJcbiAgICAgICAgdmFyIHN1cHBvcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IHtcclxuICAgICAgICAgICAgJ2FuaW1hdGlvbicgICAgICAgIDogJ2FuaW1hdGlvbmVuZCcsXHJcbiAgICAgICAgICAgICdPQW5pbWF0aW9uJyAgICAgICA6ICdvQW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQnLFxyXG4gICAgICAgICAgICAnbXNBbmltYXRpb24nICAgICAgOiAnTVNBbmltYXRpb25FbmQnLFxyXG4gICAgICAgICAgICAnTW96QW5pbWF0aW9uJyAgICAgOiAnYW5pbWF0aW9uZW5kJyxcclxuICAgICAgICAgICAgJ1dlYmtpdEFuaW1hdGlvbicgIDogJ3dlYmtpdEFuaW1hdGlvbkVuZCdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmb3IgKHQgaW4gdHJhbnNpdGlvbnMpIHtcclxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZVt0XSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlID0gdHJhbnNpdGlvbnNbdF07XHJcbiAgICAgICAgICAgICAgICBzdXBwb3J0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHR5cGU6IHR5cGUsXHJcbiAgICAgICAgICAgIHN1cHBvcnRlZDogc3VwcG9ydGVkXHJcbiAgICAgICAgfTtcclxuICAgIH0oKSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIENyZWF0ZXMgZXZlbnQgaGFuZGxlciBkZWxlZ2F0ZSB0aGF0IHNlbmRzIHRoZSBpbnN0YW5jZSBhcyBsYXN0IGFyZ3VtZW50LlxyXG4gICAgKiBcclxuICAgICogQHJldHVybiB7RnVuY3Rpb259ICAgIGEgZnVuY3Rpb24gd3JhcHBlciB3aGljaCBzZW5kcyB0aGUgaW5zdGFuY2UgYXMgbGFzdCBhcmd1bWVudC5cclxuICAgICovXHJcbiAgICBmdW5jdGlvbiBkZWxlZ2F0ZShjb250ZXh0LCBtZXRob2QpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGFyZ3VtZW50cy5sZW5ndGg7IHggKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3MucHVzaChhcmd1bWVudHNbeF0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYXJncy5wdXNoKGNvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1ldGhvZC5hcHBseShjb250ZXh0LCBhcmdzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbWV0aG9kLmFwcGx5KGNvbnRleHQsIFtudWxsLCBjb250ZXh0XSk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgKiBIZWxwZXIgZm9yIGNyZWF0aW5nIGEgZGlhbG9nIGNsb3NlIGV2ZW50LlxyXG4gICAgKiBcclxuICAgICogQHJldHVybiB7b2JqZWN0fVxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNsb3NlRXZlbnQoaW5kZXgsIGJ1dHRvbikge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGluZGV4OiBpbmRleCxcclxuICAgICAgICAgICAgYnV0dG9uOiBidXR0b24sXHJcbiAgICAgICAgICAgIGNhbmNlbDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAqIEhlbHBlciBmb3IgZGlzcGF0Y2hpbmcgZXZlbnRzLlxyXG4gICAgKlxyXG4gICAgKiBAcGFyYW0gIHtzdHJpbmd9IGV2ZW5UeXBlIFRoZSB0eXBlIG9mIHRoZSBldmVudCB0byBkaXNwdGFjaC5cclxuICAgICogQHBhcmFtICB7b2JqZWN0fSBpbnN0YW5jZSBUaGUgZGlhbG9nIGluc3RhbmNlIGRpc3B0YWNoaW5nIHRoZSBldmVudC5cclxuICAgICpcclxuICAgICogQHJldHVybiAgIHthbnl9ICAgVGhlIHJlc3VsdCBvZiB0aGUgaW52b2tlZCBmdW5jdGlvbi5cclxuICAgICovXHJcbiAgICBmdW5jdGlvbiBkaXNwYXRjaEV2ZW50KGV2ZW50VHlwZSwgaW5zdGFuY2UpIHtcclxuICAgICAgICBpZiAoIHR5cGVvZiBpbnN0YW5jZS5nZXQoZXZlbnRUeXBlKSA9PT0gJ2Z1bmN0aW9uJyApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlLmdldChldmVudFR5cGUpLmNhbGwoaW5zdGFuY2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdXBlciBjbGFzcyBmb3IgYWxsIGRpYWxvZ3NcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XHRcdGJhc2UgZGlhbG9nIHByb3RvdHlwZVxyXG4gICAgICovXHJcbiAgICB2YXIgZGlhbG9nID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgLy9ob2xkcyB0aGUgbGlzdCBvZiB1c2VkIGtleXMuXHJcbiAgICAgICAgICAgIHVzZWRLZXlzID0gW10sXHJcbiAgICAgICAgICAgIC8vZHVtbXkgdmFyaWFibGUsIHVzZWQgdG8gdHJpZ2dlciBkb20gcmVmbG93LlxyXG4gICAgICAgICAgICByZWZsb3cgPSBudWxsLFxyXG4gICAgICAgICAgICAvL2NvbmRpdGlvbiBmb3IgZGV0ZWN0aW5nIHNhZmFyaVxyXG4gICAgICAgICAgICBpc1NhZmFyaSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ1NhZmFyaScpID4gLTEgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignQ2hyb21lJykgPCAwLFxyXG4gICAgICAgICAgICAvL2RpYWxvZyBidWlsZGluZyBibG9ja3NcclxuICAgICAgICAgICAgdGVtcGxhdGVzID0ge1xyXG4gICAgICAgICAgICAgICAgZGltbWVyOic8ZGl2IGNsYXNzPVwiYWpzLWRpbW1lclwiPjwvZGl2PicsXHJcbiAgICAgICAgICAgICAgICAvKnRhYiBpbmRleCByZXF1aXJlZCB0byBmaXJlIGNsaWNrIGV2ZW50IGJlZm9yZSBib2R5IGZvY3VzKi9cclxuICAgICAgICAgICAgICAgIG1vZGFsOiAnPGRpdiBjbGFzcz1cImFqcy1tb2RhbFwiIHRhYmluZGV4PVwiMFwiPjwvZGl2PicsXHJcbiAgICAgICAgICAgICAgICBkaWFsb2c6ICc8ZGl2IGNsYXNzPVwiYWpzLWRpYWxvZ1wiIHRhYmluZGV4PVwiMFwiPjwvZGl2PicsXHJcbiAgICAgICAgICAgICAgICByZXNldDogJzxidXR0b24gY2xhc3M9XCJhanMtcmVzZXRcIj48L2J1dHRvbj4nLFxyXG4gICAgICAgICAgICAgICAgY29tbWFuZHM6ICc8ZGl2IGNsYXNzPVwiYWpzLWNvbW1hbmRzXCI+PGJ1dHRvbiBjbGFzcz1cImFqcy1waW5cIj48L2J1dHRvbj48YnV0dG9uIGNsYXNzPVwiYWpzLW1heGltaXplXCI+PC9idXR0b24+PGJ1dHRvbiBjbGFzcz1cImFqcy1jbG9zZVwiPjwvYnV0dG9uPjwvZGl2PicsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXI6ICc8ZGl2IGNsYXNzPVwiYWpzLWhlYWRlclwiPjwvZGl2PicsXHJcbiAgICAgICAgICAgICAgICBib2R5OiAnPGRpdiBjbGFzcz1cImFqcy1ib2R5XCI+PC9kaXY+JyxcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICc8ZGl2IGNsYXNzPVwiYWpzLWNvbnRlbnRcIj48L2Rpdj4nLFxyXG4gICAgICAgICAgICAgICAgZm9vdGVyOiAnPGRpdiBjbGFzcz1cImFqcy1mb290ZXJcIj48L2Rpdj4nLFxyXG4gICAgICAgICAgICAgICAgYnV0dG9uczogeyBwcmltYXJ5OiAnPGRpdiBjbGFzcz1cImFqcy1wcmltYXJ5IGFqcy1idXR0b25zXCI+PC9kaXY+JywgYXV4aWxpYXJ5OiAnPGRpdiBjbGFzcz1cImFqcy1hdXhpbGlhcnkgYWpzLWJ1dHRvbnNcIj48L2Rpdj4nIH0sXHJcbiAgICAgICAgICAgICAgICBidXR0b246ICc8YnV0dG9uIGNsYXNzPVwiYWpzLWJ1dHRvblwiPjwvYnV0dG9uPicsXHJcbiAgICAgICAgICAgICAgICByZXNpemVIYW5kbGU6ICc8ZGl2IGNsYXNzPVwiYWpzLWhhbmRsZVwiPjwvZGl2PicsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vY29tbW9uIGNsYXNzIG5hbWVzXHJcbiAgICAgICAgICAgIGNsYXNzZXMgPSB7XHJcbiAgICAgICAgICAgICAgICBhbmltYXRpb25JbjogJ2Fqcy1pbicsXHJcbiAgICAgICAgICAgICAgICBhbmltYXRpb25PdXQ6ICdhanMtb3V0JyxcclxuICAgICAgICAgICAgICAgIGJhc2U6ICdhbGVydGlmeScsXHJcbiAgICAgICAgICAgICAgICBiYXNpYzonYWpzLWJhc2ljJyxcclxuICAgICAgICAgICAgICAgIGNhcHR1cmU6ICdhanMtY2FwdHVyZScsXHJcbiAgICAgICAgICAgICAgICBjbG9zYWJsZTonYWpzLWNsb3NhYmxlJyxcclxuICAgICAgICAgICAgICAgIGZpeGVkOiAnYWpzLWZpeGVkJyxcclxuICAgICAgICAgICAgICAgIGZyYW1lbGVzczonYWpzLWZyYW1lbGVzcycsXHJcbiAgICAgICAgICAgICAgICBoaWRkZW46ICdhanMtaGlkZGVuJyxcclxuICAgICAgICAgICAgICAgIG1heGltaXplOiAnYWpzLW1heGltaXplJyxcclxuICAgICAgICAgICAgICAgIG1heGltaXplZDogJ2Fqcy1tYXhpbWl6ZWQnLFxyXG4gICAgICAgICAgICAgICAgbWF4aW1pemFibGU6J2Fqcy1tYXhpbWl6YWJsZScsXHJcbiAgICAgICAgICAgICAgICBtb2RlbGVzczogJ2Fqcy1tb2RlbGVzcycsXHJcbiAgICAgICAgICAgICAgICBtb3ZhYmxlOiAnYWpzLW1vdmFibGUnLFxyXG4gICAgICAgICAgICAgICAgbm9TZWxlY3Rpb246ICdhanMtbm8tc2VsZWN0aW9uJyxcclxuICAgICAgICAgICAgICAgIG5vT3ZlcmZsb3c6ICdhanMtbm8tb3ZlcmZsb3cnLFxyXG4gICAgICAgICAgICAgICAgbm9QYWRkaW5nOidhanMtbm8tcGFkZGluZycsXHJcbiAgICAgICAgICAgICAgICBwaW46J2Fqcy1waW4nLFxyXG4gICAgICAgICAgICAgICAgcGlubmFibGU6J2Fqcy1waW5uYWJsZScsXHJcbiAgICAgICAgICAgICAgICBwcmVmaXg6ICdhanMtJyxcclxuICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogJ2Fqcy1yZXNpemFibGUnLFxyXG4gICAgICAgICAgICAgICAgcmVzdG9yZTogJ2Fqcy1yZXN0b3JlJyxcclxuICAgICAgICAgICAgICAgIHNoYWtlOidhanMtc2hha2UnLFxyXG4gICAgICAgICAgICAgICAgdW5waW5uZWQ6J2Fqcy11bnBpbm5lZCcsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhlbHBlcjogaW5pdGlhbGl6ZXMgdGhlIGRpYWxvZyBpbnN0YW5jZVxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEByZXR1cm5cdHtOdW1iZXJ9XHRUaGUgdG90YWwgY291bnQgb2YgY3VycmVudGx5IG9wZW4gbW9kYWxzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemUoaW5zdGFuY2Upe1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYoIWluc3RhbmNlLl9faW50ZXJuYWwpe1xyXG5cclxuICAgICAgICAgICAgICAgIC8vbm8gbmVlZCB0byBleHBvc2UgaW5pdCBhZnRlciB0aGlzLlxyXG4gICAgICAgICAgICAgICAgZGVsZXRlIGluc3RhbmNlLl9faW5pdDtcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8va2VlcCBhIGNvcHkgb2YgaW5pdGlhbCBkaWFsb2cgc2V0dGluZ3NcclxuICAgICAgICAgICAgICAgIGlmKCFpbnN0YW5jZS5fX3NldHRpbmdzKXtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5fX3NldHRpbmdzID0gY29weShpbnN0YW5jZS5zZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL2luIGNhc2UgdGhlIHNjcmlwdCB3YXMgaW5jbHVkZWQgYmVmb3JlIGJvZHkuXHJcbiAgICAgICAgICAgICAgICAvL2FmdGVyIGZpcnN0IGRpYWxvZyBnZXRzIGluaXRpYWxpemVkLCBpdCB3b24ndCBiZSBudWxsIGFueW1vcmUhXHJcbiAgICAgICAgICAgICAgICBpZihudWxsID09PSByZWZsb3cpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNldCB0YWJpbmRleCBhdHRyaWJ1dGUgb24gYm9keSBlbGVtZW50IHRoaXMgYWxsb3dzIHNjcmlwdCB0byBnaXZlIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9jdXMgYWZ0ZXIgdGhlIGRpYWxvZyBpcyBjbG9zZWRcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnNldEF0dHJpYnV0ZSggJ3RhYmluZGV4JywgJzAnICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy9nZXQgZGlhbG9nIGJ1dHRvbnMvZm9jdXMgc2V0dXBcclxuICAgICAgICAgICAgICAgIHZhciBzZXR1cDtcclxuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBpbnN0YW5jZS5zZXR1cCA9PT0gJ2Z1bmN0aW9uJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dXAgPSBpbnN0YW5jZS5zZXR1cCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHVwLm9wdGlvbnMgPSBzZXR1cC5vcHRpb25zICB8fCB7fTtcclxuICAgICAgICAgICAgICAgICAgICBzZXR1cC5mb2N1cyA9IHNldHVwLmZvY3VzICB8fCB7fTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHVwID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b25zOltdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb2N1czp7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Om51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Q6ZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczp7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvL2luaXRpYWxpemUgaG9va3Mgb2JqZWN0LlxyXG4gICAgICAgICAgICAgICAgaWYodHlwZW9mIGluc3RhbmNlLmhvb2tzICE9PSAnb2JqZWN0Jyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuaG9va3MgPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL2NvcHkgYnV0dG9ucyBkZWZpbnRpb25cclxuICAgICAgICAgICAgICAgIHZhciBidXR0b25zRGVmaW5pdGlvbiA9IFtdO1xyXG4gICAgICAgICAgICAgICAgaWYoQXJyYXkuaXNBcnJheShzZXR1cC5idXR0b25zKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBiPTA7YjxzZXR1cC5idXR0b25zLmxlbmd0aDtiKz0xKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlZiAgPSBzZXR1cC5idXR0b25zW2JdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3B5ID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gcmVmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVmLmhhc093blByb3BlcnR5KGkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3B5W2ldID0gcmVmW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbnNEZWZpbml0aW9uLnB1c2goY3B5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGludGVybmFsID0gaW5zdGFuY2UuX19pbnRlcm5hbCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAgICAgKiBGbGFnIGhvbGRpbmcgdGhlIG9wZW4gc3RhdGUgb2YgdGhlIGRpYWxvZ1xyXG4gICAgICAgICAgICAgICAgICAgICAqIFxyXG4gICAgICAgICAgICAgICAgICAgICAqIEB0eXBlIHtCb29sZWFufVxyXG4gICAgICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgICAgIGlzT3BlbjpmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAgICAgKiBBY3RpdmUgZWxlbWVudCBpcyB0aGUgZWxlbWVudCB0aGF0IHdpbGwgcmVjZWl2ZSBmb2N1cyBhZnRlclxyXG4gICAgICAgICAgICAgICAgICAgICAqIGNsb3NpbmcgdGhlIGRpYWxvZy4gSXQgZGVmYXVsdHMgYXMgdGhlIGJvZHkgdGFnLCBidXQgZ2V0cyB1cGRhdGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICogdG8gdGhlIGxhc3QgZm9jdXNlZCBlbGVtZW50IGJlZm9yZSB0aGUgZGlhbG9nIHdhcyBvcGVuZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICAgICAgICAgKiBAdHlwZSB7Tm9kZX1cclxuICAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVFbGVtZW50OmRvY3VtZW50LmJvZHksXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZXJJbjp1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZXJPdXQ6dW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbnM6IGJ1dHRvbnNEZWZpbml0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvY3VzOiBzZXR1cC5mb2N1cyxcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2ljOnVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWVsZXNzOnVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGlubmVkOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmFibGU6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZUJvdW5kZWQ6dW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b1Jlc2V0OiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NhYmxlOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NhYmxlQnlEaW1tZXI6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW1pemFibGU6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRNYXhpbWl6ZWQ6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGlubmFibGU6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOnVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6dW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbnNob3c6dW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmNsb3Npbmc6dW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmNsb3NlOnVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25mb2N1czp1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ubW92ZTp1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ubW92ZWQ6dW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbnJlc2l6ZTp1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ucmVzaXplZDp1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ubWF4aW1pemU6dW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbm1heGltaXplZDp1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ucmVzdG9yZTp1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ucmVzdG9yZWQ6dW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICByZXNldEhhbmRsZXI6dW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luTW92ZUhhbmRsZXI6dW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luUmVzaXplSGFuZGxlcjp1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgYnJpbmdUb0Zyb250SGFuZGxlcjp1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWxDbGlja0hhbmRsZXI6dW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbnNDbGlja0hhbmRsZXI6dW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbW1hbmRzQ2xpY2tIYW5kbGVyOnVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSW5IYW5kbGVyOnVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uT3V0SGFuZGxlcjp1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVzdHJveTp1bmRlZmluZWRcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0ge307XHJcbiAgICAgICAgICAgICAgICAvL3Jvb3Qgbm9kZVxyXG4gICAgICAgICAgICAgICAgZWxlbWVudHMucm9vdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50cy5yb290LmNsYXNzTmFtZSA9IGNsYXNzZXMuYmFzZSArICcgJyArIGNsYXNzZXMuaGlkZGVuICsgJyAnO1xyXG5cclxuICAgICAgICAgICAgICAgIGVsZW1lbnRzLnJvb3QuaW5uZXJIVE1MID0gdGVtcGxhdGVzLmRpbW1lciArIHRlbXBsYXRlcy5tb2RhbDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy9kaW1tZXJcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRzLmRpbW1lciA9IGVsZW1lbnRzLnJvb3QuZmlyc3RDaGlsZDtcclxuXHJcbiAgICAgICAgICAgICAgICAvL2RpYWxvZ1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudHMubW9kYWwgPSBlbGVtZW50cy5yb290Lmxhc3RDaGlsZDtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRzLm1vZGFsLmlubmVySFRNTCA9IHRlbXBsYXRlcy5kaWFsb2c7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50cy5kaWFsb2cgPSBlbGVtZW50cy5tb2RhbC5maXJzdENoaWxkO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudHMuZGlhbG9nLmlubmVySFRNTCA9IHRlbXBsYXRlcy5yZXNldCArIHRlbXBsYXRlcy5jb21tYW5kcyArIHRlbXBsYXRlcy5oZWFkZXIgKyB0ZW1wbGF0ZXMuYm9keSArIHRlbXBsYXRlcy5mb290ZXIgKyB0ZW1wbGF0ZXMucmVzaXplSGFuZGxlICsgdGVtcGxhdGVzLnJlc2V0O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vcmVzZXQgbGlua3NcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRzLnJlc2V0ID0gW107XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50cy5yZXNldC5wdXNoKGVsZW1lbnRzLmRpYWxvZy5maXJzdENoaWxkKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRzLnJlc2V0LnB1c2goZWxlbWVudHMuZGlhbG9nLmxhc3RDaGlsZCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vY29tbWFuZHNcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRzLmNvbW1hbmRzID0ge307XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50cy5jb21tYW5kcy5jb250YWluZXIgPSBlbGVtZW50cy5yZXNldFswXS5uZXh0U2libGluZztcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRzLmNvbW1hbmRzLnBpbiA9IGVsZW1lbnRzLmNvbW1hbmRzLmNvbnRhaW5lci5maXJzdENoaWxkO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudHMuY29tbWFuZHMubWF4aW1pemUgPSBlbGVtZW50cy5jb21tYW5kcy5waW4ubmV4dFNpYmxpbmc7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50cy5jb21tYW5kcy5jbG9zZSA9IGVsZW1lbnRzLmNvbW1hbmRzLm1heGltaXplLm5leHRTaWJsaW5nO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvL2hlYWRlclxyXG4gICAgICAgICAgICAgICAgZWxlbWVudHMuaGVhZGVyID0gZWxlbWVudHMuY29tbWFuZHMuY29udGFpbmVyLm5leHRTaWJsaW5nO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vYm9keVxyXG4gICAgICAgICAgICAgICAgZWxlbWVudHMuYm9keSA9IGVsZW1lbnRzLmhlYWRlci5uZXh0U2libGluZztcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRzLmJvZHkuaW5uZXJIVE1MID0gdGVtcGxhdGVzLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50cy5jb250ZW50ID0gZWxlbWVudHMuYm9keS5maXJzdENoaWxkO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vZm9vdGVyXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50cy5mb290ZXIgPSBlbGVtZW50cy5ib2R5Lm5leHRTaWJsaW5nO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudHMuZm9vdGVyLmlubmVySFRNTCA9IHRlbXBsYXRlcy5idXR0b25zLmF1eGlsaWFyeSArIHRlbXBsYXRlcy5idXR0b25zLnByaW1hcnk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vcmVzaXplIGhhbmRsZVxyXG4gICAgICAgICAgICAgICAgZWxlbWVudHMucmVzaXplSGFuZGxlID0gZWxlbWVudHMuZm9vdGVyLm5leHRTaWJsaW5nO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vYnV0dG9uc1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudHMuYnV0dG9ucyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudHMuYnV0dG9ucy5hdXhpbGlhcnkgPSBlbGVtZW50cy5mb290ZXIuZmlyc3RDaGlsZDtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRzLmJ1dHRvbnMucHJpbWFyeSA9IGVsZW1lbnRzLmJ1dHRvbnMuYXV4aWxpYXJ5Lm5leHRTaWJsaW5nO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudHMuYnV0dG9ucy5wcmltYXJ5LmlubmVySFRNTCA9IHRlbXBsYXRlcy5idXR0b247XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50cy5idXR0b25UZW1wbGF0ZSA9IGVsZW1lbnRzLmJ1dHRvbnMucHJpbWFyeS5maXJzdENoaWxkO1xyXG4gICAgICAgICAgICAgICAgLy9yZW1vdmUgYnV0dG9uIHRlbXBsYXRlXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50cy5idXR0b25zLnByaW1hcnkucmVtb3ZlQ2hpbGQoZWxlbWVudHMuYnV0dG9uVGVtcGxhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIHg9MDsgeCA8IGluc3RhbmNlLl9faW50ZXJuYWwuYnV0dG9ucy5sZW5ndGg7IHgrPTEpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYnV0dG9uID0gaW5zdGFuY2UuX19pbnRlcm5hbC5idXR0b25zW3hdO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCB0byB0aGUgbGlzdCBvZiB1c2VkIGtleXMuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYodXNlZEtleXMuaW5kZXhPZihidXR0b24ua2V5KSA8IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VkS2V5cy5wdXNoKGJ1dHRvbi5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmVsZW1lbnQgPSBlbGVtZW50cy5idXR0b25UZW1wbGF0ZS5jbG9uZU5vZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uZWxlbWVudC5pbm5lckhUTUwgPSBidXR0b24udGV4dDtcclxuICAgICAgICAgICAgICAgICAgICBpZih0eXBlb2YgYnV0dG9uLmNsYXNzTmFtZSA9PT0gJ3N0cmluZycgJiYgIGJ1dHRvbi5jbGFzc05hbWUgIT09ICcnKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkQ2xhc3MoYnV0dG9uLmVsZW1lbnQsIGJ1dHRvbi5jbGFzc05hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGtleSBpbiBidXR0b24uYXR0cnMpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihrZXkgIT09ICdjbGFzc05hbWUnICYmIGJ1dHRvbi5hdHRycy5oYXNPd25Qcm9wZXJ0eShrZXkpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5lbGVtZW50LnNldEF0dHJpYnV0ZShrZXksIGJ1dHRvbi5hdHRyc1trZXldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZihidXR0b24uc2NvcGUgPT09ICdhdXhpbGlhcnknKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMuYnV0dG9ucy5hdXhpbGlhcnkuYXBwZW5kQ2hpbGQoYnV0dG9uLmVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50cy5idXR0b25zLnByaW1hcnkuYXBwZW5kQ2hpbGQoYnV0dG9uLmVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vbWFrZSBlbGVtZW50cyBwdWJpY1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuZWxlbWVudHMgPSBlbGVtZW50cztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy9zYXZlIGV2ZW50IGhhbmRsZXJzIGRlbGVnYXRlc1xyXG4gICAgICAgICAgICAgICAgaW50ZXJuYWwucmVzZXRIYW5kbGVyID0gZGVsZWdhdGUoaW5zdGFuY2UsIG9uUmVzZXQpO1xyXG4gICAgICAgICAgICAgICAgaW50ZXJuYWwuYmVnaW5Nb3ZlSGFuZGxlciA9IGRlbGVnYXRlKGluc3RhbmNlLCBiZWdpbk1vdmUpO1xyXG4gICAgICAgICAgICAgICAgaW50ZXJuYWwuYmVnaW5SZXNpemVIYW5kbGVyID0gZGVsZWdhdGUoaW5zdGFuY2UsIGJlZ2luUmVzaXplKTtcclxuICAgICAgICAgICAgICAgIGludGVybmFsLmJyaW5nVG9Gcm9udEhhbmRsZXIgPSBkZWxlZ2F0ZShpbnN0YW5jZSwgYnJpbmdUb0Zyb250KTtcclxuICAgICAgICAgICAgICAgIGludGVybmFsLm1vZGFsQ2xpY2tIYW5kbGVyID0gZGVsZWdhdGUoaW5zdGFuY2UsIG1vZGFsQ2xpY2tIYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgIGludGVybmFsLmJ1dHRvbnNDbGlja0hhbmRsZXIgPSBkZWxlZ2F0ZShpbnN0YW5jZSwgYnV0dG9uc0NsaWNrSGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICBpbnRlcm5hbC5jb21tYW5kc0NsaWNrSGFuZGxlciA9IGRlbGVnYXRlKGluc3RhbmNlLCBjb21tYW5kc0NsaWNrSGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICBpbnRlcm5hbC50cmFuc2l0aW9uSW5IYW5kbGVyID0gZGVsZWdhdGUoaW5zdGFuY2UsIGhhbmRsZVRyYW5zaXRpb25JbkV2ZW50KTtcclxuICAgICAgICAgICAgICAgIGludGVybmFsLnRyYW5zaXRpb25PdXRIYW5kbGVyID0gZGVsZWdhdGUoaW5zdGFuY2UsIGhhbmRsZVRyYW5zaXRpb25PdXRFdmVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9zZXR0aW5nc1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBvcEtleSBpbiBpbnRlcm5hbC5vcHRpb25zKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihzZXR1cC5vcHRpb25zW29wS2V5XSAhPT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgZm91bmQgaW4gdXNlciBvcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLnNldChvcEtleSwgc2V0dXAub3B0aW9uc1tvcEtleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKGFsZXJ0aWZ5LmRlZmF1bHRzLmhhc093blByb3BlcnR5KG9wS2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlbHNlIGlmIGZvdW5kIGluIGRlZmF1bHRzIG9wdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2Uuc2V0KG9wS2V5LCBhbGVydGlmeS5kZWZhdWx0c1tvcEtleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKG9wS2V5ID09PSAndGl0bGUnICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlbHNlIGlmIHRpdGxlIGtleSwgdXNlIGFsZXJ0aWZ5LmRlZmF1bHRzLmdsb3NzYXJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLnNldChvcEtleSwgYWxlcnRpZnkuZGVmYXVsdHMuZ2xvc3Nhcnlbb3BLZXldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gYWxsb3cgZG9tIGN1c3RvbWl6YXRpb25cclxuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBpbnN0YW5jZS5idWlsZCA9PT0gJ2Z1bmN0aW9uJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuYnVpbGQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy9hZGQgdG8gdGhlIGVuZCBvZiB0aGUgRE9NIHRyZWUuXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaW5zdGFuY2UuZWxlbWVudHMucm9vdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIZWxwZXI6IG1haW50YWlucyBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhciBzY3JvbGxYLCBzY3JvbGxZO1xyXG4gICAgICAgIGZ1bmN0aW9uIHNhdmVTY3JvbGxQb3NpdGlvbigpe1xyXG4gICAgICAgICAgICBzY3JvbGxYID0gZ2V0U2Nyb2xsTGVmdCgpO1xyXG4gICAgICAgICAgICBzY3JvbGxZID0gZ2V0U2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlc3RvcmVTY3JvbGxQb3NpdGlvbigpe1xyXG4gICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oc2Nyb2xsWCwgc2Nyb2xsWSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIZWxwZXI6IGFkZHMvcmVtb3ZlcyBuby1vdmVyZmxvdyBjbGFzcyBmcm9tIGJvZHlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGVuc3VyZU5vT3ZlcmZsb3coKXtcclxuICAgICAgICAgICAgdmFyIHJlcXVpcmVzTm9PdmVyZmxvdyA9IDA7XHJcbiAgICAgICAgICAgIGZvcih2YXIgeD0wO3g8b3BlbkRpYWxvZ3MubGVuZ3RoO3grPTEpe1xyXG4gICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gb3BlbkRpYWxvZ3NbeF07XHJcbiAgICAgICAgICAgICAgICBpZihpbnN0YW5jZS5pc01vZGFsKCkgfHwgaW5zdGFuY2UuaXNNYXhpbWl6ZWQoKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZXNOb092ZXJmbG93Kz0xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHJlcXVpcmVzTm9PdmVyZmxvdyA9PT0gMCAmJiBkb2N1bWVudC5ib2R5LmNsYXNzTmFtZS5pbmRleE9mKGNsYXNzZXMubm9PdmVyZmxvdykgPj0gMCl7XHJcbiAgICAgICAgICAgICAgICAvL2xhc3Qgb3BlbiBtb2RhbCBvciBsYXN0IG1heGltaXplZCBvbmVcclxuICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGRvY3VtZW50LmJvZHksIGNsYXNzZXMubm9PdmVyZmxvdyk7XHJcbiAgICAgICAgICAgICAgICBwcmV2ZW50Qm9keVNoaWZ0KGZhbHNlKTtcclxuICAgICAgICAgICAgfWVsc2UgaWYocmVxdWlyZXNOb092ZXJmbG93ID4gMCAmJiBkb2N1bWVudC5ib2R5LmNsYXNzTmFtZS5pbmRleE9mKGNsYXNzZXMubm9PdmVyZmxvdykgPCAwKXtcclxuICAgICAgICAgICAgICAgIC8vZmlyc3Qgb3BlbiBtb2RhbCBvciBmaXJzdCBtYXhpbWl6ZWQgb25lXHJcbiAgICAgICAgICAgICAgICBwcmV2ZW50Qm9keVNoaWZ0KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgYWRkQ2xhc3MoZG9jdW1lbnQuYm9keSwgY2xhc3Nlcy5ub092ZXJmbG93KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdG9wID0gJycsIHRvcFNjcm9sbCA9IDA7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGVscGVyOiBwcmV2ZW50cyBib2R5IHNoaWZ0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gcHJldmVudEJvZHlTaGlmdChhZGQpe1xyXG4gICAgICAgICAgICBpZihhbGVydGlmeS5kZWZhdWx0cy5wcmV2ZW50Qm9keVNoaWZ0ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQgPiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KXtcclxuICAgICAgICAgICAgICAgIGlmKGFkZCApey8vJiYgb3BlbkRpYWxvZ3Nbb3BlbkRpYWxvZ3MubGVuZ3RoLTFdLmVsZW1lbnRzLmRpYWxvZy5jbGllbnRIZWlnaHQgPD0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wU2Nyb2xsID0gc2Nyb2xsWTtcclxuICAgICAgICAgICAgICAgICAgICB0b3AgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS50b3A7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkQ2xhc3MoZG9jdW1lbnQuYm9keSwgY2xhc3Nlcy5maXhlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS50b3AgPSAtc2Nyb2xsWSArICdweCc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFkgPSB0b3BTY3JvbGw7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS50b3AgPSB0b3A7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoZG9jdW1lbnQuYm9keSwgY2xhc3Nlcy5maXhlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdG9yZVNjcm9sbFBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblx0XHRcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXRzIHRoZSBuYW1lIG9mIHRoZSB0cmFuc2l0aW9uIHVzZWQgdG8gc2hvdy9oaWRlIHRoZSBkaWFsb2dcclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2UgVGhlIGRpbG9nIGluc3RhbmNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlVHJhbnNpdGlvbihpbnN0YW5jZSwgdmFsdWUsIG9sZFZhbHVlKXtcclxuICAgICAgICAgICAgaWYodHlwZW9mIG9sZFZhbHVlID09PSAnc3RyaW5nJyl7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyhpbnN0YW5jZS5lbGVtZW50cy5yb290LGNsYXNzZXMucHJlZml4ICsgIG9sZFZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhZGRDbGFzcyhpbnN0YW5jZS5lbGVtZW50cy5yb290LCBjbGFzc2VzLnByZWZpeCArIHZhbHVlKTtcclxuICAgICAgICAgICAgcmVmbG93ID0gaW5zdGFuY2UuZWxlbWVudHMucm9vdC5vZmZzZXRXaWR0aDtcclxuICAgICAgICB9XHJcblx0XHRcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUb2dnbGVzIHRoZSBkaWFsb2cgZGlzcGxheSBtb2RlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2UgVGhlIGRpbG9nIGluc3RhbmNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZURpc3BsYXlNb2RlKGluc3RhbmNlKXtcclxuICAgICAgICAgICAgaWYoaW5zdGFuY2UuZ2V0KCdtb2RhbCcpKXtcclxuXHJcbiAgICAgICAgICAgICAgICAvL21ha2UgbW9kYWxcclxuICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGluc3RhbmNlLmVsZW1lbnRzLnJvb3QsIGNsYXNzZXMubW9kZWxlc3MpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vb25seSBpZiBvcGVuXHJcbiAgICAgICAgICAgICAgICBpZihpbnN0YW5jZS5pc09wZW4oKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5iaW5kTW9kZWxlc3NFdmVudHMoaW5zdGFuY2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL2luIGNhc2UgYSBwaW5uZWQgbW9kbGVzcyBkaWFsb2cgd2FzIG1hZGUgbW9kYWwgd2hpbGUgb3Blbi5cclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVBYnNQb3NpdGlvbkZpeChpbnN0YW5jZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGVuc3VyZU5vT3ZlcmZsb3coKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAvL21ha2UgbW9kZWxzc1xyXG4gICAgICAgICAgICAgICAgYWRkQ2xhc3MoaW5zdGFuY2UuZWxlbWVudHMucm9vdCwgY2xhc3Nlcy5tb2RlbGVzcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9vbmx5IGlmIG9wZW5cclxuICAgICAgICAgICAgICAgIGlmKGluc3RhbmNlLmlzT3BlbigpKXtcclxuICAgICAgICAgICAgICAgICAgICBiaW5kTW9kZWxlc3NFdmVudHMoaW5zdGFuY2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL2luIGNhc2UgcGluL3VucGluIHdhcyBjYWxsZWQgd2hpbGUgYSBtb2RhbCBpcyBvcGVuXHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQWJzUG9zaXRpb25GaXgoaW5zdGFuY2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBlbnN1cmVOb092ZXJmbG93KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRvZ2dsZXMgdGhlIGRpYWxvZyBiYXNpYyB2aWV3IG1vZGUgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2UgVGhlIGRpbG9nIGluc3RhbmNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUJhc2ljTW9kZShpbnN0YW5jZSl7XHJcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZS5nZXQoJ2Jhc2ljJykpIHtcclxuICAgICAgICAgICAgICAgIC8vIGFkZCBjbGFzc1xyXG4gICAgICAgICAgICAgICAgYWRkQ2xhc3MoaW5zdGFuY2UuZWxlbWVudHMucm9vdCwgY2xhc3Nlcy5iYXNpYyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgY2xhc3NcclxuICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGluc3RhbmNlLmVsZW1lbnRzLnJvb3QsIGNsYXNzZXMuYmFzaWMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUb2dnbGVzIHRoZSBkaWFsb2cgZnJhbWVsZXNzIHZpZXcgbW9kZSBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0YW5jZSBUaGUgZGlsb2cgaW5zdGFuY2UuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlRnJhbWVsZXNzTW9kZShpbnN0YW5jZSl7XHJcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZS5nZXQoJ2ZyYW1lbGVzcycpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBhZGQgY2xhc3NcclxuICAgICAgICAgICAgICAgIGFkZENsYXNzKGluc3RhbmNlLmVsZW1lbnRzLnJvb3QsIGNsYXNzZXMuZnJhbWVsZXNzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBjbGFzc1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoaW5zdGFuY2UuZWxlbWVudHMucm9vdCwgY2xhc3Nlcy5mcmFtZWxlc3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cdFx0XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGVscGVyOiBCcmluZ3MgdGhlIG1vZGVsZXNzIGRpYWxvZyB0byBmcm9udCwgYXR0YWNoZWQgdG8gbW9kZWxlc3MgZGlhbG9ncy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IEZvY3VzIGV2ZW50XHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGluc3RhbmNlIFRoZSBkaWxvZyBpbnN0YW5jZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBicmluZ1RvRnJvbnQoZXZlbnQsIGluc3RhbmNlKXtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIERvIG5vdCBicmluZyB0byBmcm9udCBpZiBwcmVjZWVkZWQgYnkgYW4gb3BlbiBtb2RhbFxyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSBvcGVuRGlhbG9ncy5pbmRleE9mKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgZm9yKHZhciB4PWluZGV4KzE7eDxvcGVuRGlhbG9ncy5sZW5ndGg7eCs9MSl7XHJcbiAgICAgICAgICAgICAgICBpZihvcGVuRGlhbG9nc1t4XS5pc01vZGFsKCkpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cdFx0XHRcclxuICAgICAgICAgICAgLy8gQnJpbmcgdG8gZnJvbnQgYnkgbWFraW5nIGl0IHRoZSBsYXN0IGNoaWxkLlxyXG4gICAgICAgICAgICBpZihkb2N1bWVudC5ib2R5Lmxhc3RDaGlsZCAhPT0gaW5zdGFuY2UuZWxlbWVudHMucm9vdCl7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGluc3RhbmNlLmVsZW1lbnRzLnJvb3QpO1xyXG4gICAgICAgICAgICAgICAgLy9hbHNvIG1ha2Ugc3VyZSBpdHMgYXQgdGhlIGVuZCBvZiB0aGUgbGlzdFxyXG4gICAgICAgICAgICAgICAgb3BlbkRpYWxvZ3Muc3BsaWNlKG9wZW5EaWFsb2dzLmluZGV4T2YoaW5zdGFuY2UpLDEpO1xyXG4gICAgICAgICAgICAgICAgb3BlbkRpYWxvZ3MucHVzaChpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICBzZXRGb2N1cyhpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHRcdFx0XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblx0XHRcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIZWxwZXI6IHJlZmxlY3RzIGRpYWxvZ3Mgb3B0aW9ucyB1cGRhdGVzXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2UgVGhlIGRpbG9nIGluc3RhbmNlLlxyXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvcHRpb24gVGhlIHVwZGF0ZWQgb3B0aW9uIG5hbWUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuXHR7dW5kZWZpbmVkfVx0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gb3B0aW9uVXBkYXRlZChpbnN0YW5jZSwgb3B0aW9uLCBvbGRWYWx1ZSwgbmV3VmFsdWUpe1xyXG4gICAgICAgICAgICBzd2l0Y2gob3B0aW9uKXtcclxuICAgICAgICAgICAgY2FzZSAndGl0bGUnOlxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2Uuc2V0SGVhZGVyKG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdtb2RhbCc6XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVEaXNwbGF5TW9kZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnYmFzaWMnOlxyXG4gICAgICAgICAgICAgICAgdXBkYXRlQmFzaWNNb2RlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdmcmFtZWxlc3MnOlxyXG4gICAgICAgICAgICAgICAgdXBkYXRlRnJhbWVsZXNzTW9kZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAncGlubmVkJzpcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVBpbm5lZChpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnY2xvc2FibGUnOlxyXG4gICAgICAgICAgICAgICAgdXBkYXRlQ2xvc2FibGUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ21heGltaXphYmxlJzpcclxuICAgICAgICAgICAgICAgIHVwZGF0ZU1heGltaXphYmxlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdwaW5uYWJsZSc6XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVQaW5uYWJsZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbW92YWJsZSc6XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVNb3ZhYmxlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdyZXNpemFibGUnOlxyXG4gICAgICAgICAgICAgICAgdXBkYXRlUmVzaXphYmxlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICd0cmFuc2l0aW9uJzpcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVRyYW5zaXRpb24oaW5zdGFuY2UsbmV3VmFsdWUsIG9sZFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdwYWRkaW5nJzpcclxuICAgICAgICAgICAgICAgIGlmKG5ld1ZhbHVlKXtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyhpbnN0YW5jZS5lbGVtZW50cy5yb290LCBjbGFzc2VzLm5vUGFkZGluZyk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihpbnN0YW5jZS5lbGVtZW50cy5yb290LmNsYXNzTmFtZS5pbmRleE9mKGNsYXNzZXMubm9QYWRkaW5nKSA8IDApe1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZENsYXNzKGluc3RhbmNlLmVsZW1lbnRzLnJvb3QsIGNsYXNzZXMubm9QYWRkaW5nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdvdmVyZmxvdyc6XHJcbiAgICAgICAgICAgICAgICBpZihuZXdWYWx1ZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoaW5zdGFuY2UuZWxlbWVudHMucm9vdCwgY2xhc3Nlcy5ub092ZXJmbG93KTtcclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKGluc3RhbmNlLmVsZW1lbnRzLnJvb3QuY2xhc3NOYW1lLmluZGV4T2YoY2xhc3Nlcy5ub092ZXJmbG93KSA8IDApe1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZENsYXNzKGluc3RhbmNlLmVsZW1lbnRzLnJvb3QsIGNsYXNzZXMubm9PdmVyZmxvdyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAndHJhbnNpdGlvbic6XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVUcmFuc2l0aW9uKGluc3RhbmNlLG5ld1ZhbHVlLCBvbGRWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gaW50ZXJuYWwgb24gb3B0aW9uIHVwZGF0ZWQgZXZlbnRcclxuICAgICAgICAgICAgaWYodHlwZW9mIGluc3RhbmNlLmhvb2tzLm9udXBkYXRlID09PSAnZnVuY3Rpb24nKXtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmhvb2tzLm9udXBkYXRlLmNhbGwoaW5zdGFuY2UsIG9wdGlvbiwgb2xkVmFsdWUsIG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHRcdFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhlbHBlcjogcmVmbGVjdHMgZGlhbG9ncyBvcHRpb25zIHVwZGF0ZXNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0YW5jZSBUaGUgZGlsb2cgaW5zdGFuY2UuXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIHNldC9nZXQgYSB2YWx1ZSBvbi9mcm9tLlxyXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIFRoZSBjYWxsYmFjayBmdW5jdGlvbiB0byBjYWxsIGlmIHRoZSBrZXkgd2FzIGZvdW5kLlxyXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0ga2V5IEEgc3RyaW5nIHNwZWNpZnlpbmcgYSBwcm9wZXJ5IG5hbWUgb3IgYSBjb2xsZWN0aW9uIG9mIGtleSB2YWx1ZSBwYWlycy5cclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsdWUgT3B0aW9uYWwsIHRoZSB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggdGhlIGtleSAoaW4gY2FzZSBpdCB3YXMgYSBzdHJpbmcpLlxyXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvcHRpb24gVGhlIHVwZGF0ZWQgb3B0aW9uIG5hbWUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuXHR7T2JqZWN0fSByZXN1bHQgb2JqZWN0IFxyXG4gICAgICAgICAqXHRUaGUgcmVzdWx0IG9iamVjdHMgaGFzIGFuICdvcCcgcHJvcGVydHksIGluZGljYXRpbmcgb2YgdGhpcyBpcyBhIFNFVCBvciBHRVQgb3BlcmF0aW9uLlxyXG4gICAgICAgICAqXHRcdEdFVDogXHJcbiAgICAgICAgICpcdFx0LSBmb3VuZDogYSBmbGFnIGluZGljYXRpbmcgaWYgdGhlIGtleSB3YXMgZm91bmQgb3Igbm90LlxyXG4gICAgICAgICAqXHRcdC0gdmFsdWU6IHRoZSBwcm9wZXJ0eSB2YWx1ZS5cclxuICAgICAgICAgKlx0XHRTRVQ6XHJcbiAgICAgICAgICpcdFx0LSBpdGVtczogYSBsaXN0IG9mIGtleSB2YWx1ZSBwYWlycyBvZiB0aGUgcHJvcGVydGllcyBiZWluZyBzZXQuXHJcbiAgICAgICAgICpcdFx0XHRcdGVhY2ggY29udGFpbnM6XHJcbiAgICAgICAgICpcdFx0XHRcdFx0LSBmb3VuZDogYSBmbGFnIGluZGljYXRpbmcgaWYgdGhlIGtleSB3YXMgZm91bmQgb3Igbm90LlxyXG4gICAgICAgICAqXHRcdFx0XHRcdC0ga2V5OiB0aGUgcHJvcGVydHkga2V5LlxyXG4gICAgICAgICAqXHRcdFx0XHRcdC0gdmFsdWU6IHRoZSBwcm9wZXJ0eSB2YWx1ZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGUoaW5zdGFuY2UsIG9iaiwgY2FsbGJhY2ssIGtleSwgdmFsdWUpe1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0ge29wOnVuZGVmaW5lZCwgaXRlbXM6IFtdIH07XHJcbiAgICAgICAgICAgIGlmKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGtleSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIC8vZ2V0XHJcbiAgICAgICAgICAgICAgICByZXN1bHQub3AgPSAnZ2V0JztcclxuICAgICAgICAgICAgICAgIGlmKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKXtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC52YWx1ZSA9IG9ialtrZXldO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmZvdW5kID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnZhbHVlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9sZDtcclxuICAgICAgICAgICAgICAgIC8vc2V0XHJcbiAgICAgICAgICAgICAgICByZXN1bHQub3AgPSAnc2V0JztcclxuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBrZXkgPT09ICdvYmplY3QnKXtcclxuICAgICAgICAgICAgICAgICAgICAvL3NldCBtdWx0aXBsZVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0ga2V5O1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gYXJncykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihvYmpbcHJvcF0gIT09IGFyZ3NbcHJvcF0pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9sZCA9IG9ialtwcm9wXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpbcHJvcF0gPSBhcmdzW3Byb3BdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoaW5zdGFuY2UscHJvcCwgb2xkLCBhcmdzW3Byb3BdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5pdGVtcy5wdXNoKHsgJ2tleSc6IHByb3AsICd2YWx1ZSc6IGFyZ3NbcHJvcF0sICdmb3VuZCc6dHJ1ZX0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5pdGVtcy5wdXNoKHsgJ2tleSc6IHByb3AsICd2YWx1ZSc6IGFyZ3NbcHJvcF0sICdmb3VuZCc6ZmFsc2V9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGtleSA9PT0gJ3N0cmluZycpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vc2V0IHNpbmdsZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihvYmpba2V5XSAhPT0gdmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkICA9IG9ialtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoaW5zdGFuY2Usa2V5LCBvbGQsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuaXRlbXMucHVzaCh7J2tleSc6IGtleSwgJ3ZhbHVlJzogdmFsdWUgLCAnZm91bmQnOnRydWV9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5pdGVtcy5wdXNoKHsna2V5Jzoga2V5LCAndmFsdWUnOiB2YWx1ZSAsICdmb3VuZCc6ZmFsc2V9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vaW52YWxpZCBwYXJhbXNcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2FyZ3MgbXVzdCBiZSBhIHN0cmluZyBvciBvYmplY3QnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRyaWdnZXJzIGEgY2xvc2UgZXZlbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2VcdFRoZSBkaWxvZyBpbnN0YW5jZS5cclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gdHJpZ2dlckNsb3NlKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHZhciBmb3VuZDtcclxuICAgICAgICAgICAgdHJpZ2dlckNhbGxiYWNrKGluc3RhbmNlLCBmdW5jdGlvbiAoYnV0dG9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZm91bmQgPSAoYnV0dG9uLmludm9rZU9uQ2xvc2UgPT09IHRydWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy9ub25lIG9mIHRoZSBidXR0b25zIHJlZ2lzdGVyZWQgYXMgb25jbG9zZSBjYWxsYmFja1xyXG4gICAgICAgICAgICAvL2Nsb3NlIHRoZSBkaWFsb2dcclxuICAgICAgICAgICAgaWYgKCFmb3VuZCAmJiBpbnN0YW5jZS5pc09wZW4oKSkge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGlhbG9ncyBjb21tYW5kcyBldmVudCBoYW5kbGVyLCBhdHRhY2hlZCB0byB0aGUgZGlhbG9nIGNvbW1hbmRzIGVsZW1lbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFx0RE9NIGV2ZW50IG9iamVjdC5cclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2VcdFRoZSBkaWxvZyBpbnN0YW5jZS5cclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY29tbWFuZHNDbGlja0hhbmRsZXIoZXZlbnQsIGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBldmVudC5zcmNFbGVtZW50IHx8IGV2ZW50LnRhcmdldDtcclxuICAgICAgICAgICAgc3dpdGNoICh0YXJnZXQpIHtcclxuICAgICAgICAgICAgY2FzZSBpbnN0YW5jZS5lbGVtZW50cy5jb21tYW5kcy5waW46XHJcbiAgICAgICAgICAgICAgICBpZiAoIWluc3RhbmNlLmlzUGlubmVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwaW4oaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB1bnBpbihpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBpbnN0YW5jZS5lbGVtZW50cy5jb21tYW5kcy5tYXhpbWl6ZTpcclxuICAgICAgICAgICAgICAgIGlmICghaW5zdGFuY2UuaXNNYXhpbWl6ZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1heGltaXplKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdG9yZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBpbnN0YW5jZS5lbGVtZW50cy5jb21tYW5kcy5jbG9zZTpcclxuICAgICAgICAgICAgICAgIHRyaWdnZXJDbG9zZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIZWxwZXI6IHBpbnMgdGhlIG1vZGVsZXNzIGRpYWxvZy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0YW5jZVx0VGhlIGRpYWxvZyBpbnN0YW5jZS5cclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gcGluKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIC8vcGluIHRoZSBkaWFsb2dcclxuICAgICAgICAgICAgaW5zdGFuY2Uuc2V0KCdwaW5uZWQnLCB0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhlbHBlcjogdW5waW5zIHRoZSBtb2RlbGVzcyBkaWFsb2cuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2VcdFRoZSBkaWxvZyBpbnN0YW5jZS5cclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gdW5waW4oaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgLy91bnBpbiB0aGUgZGlhbG9nIFxyXG4gICAgICAgICAgICBpbnN0YW5jZS5zZXQoJ3Bpbm5lZCcsIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIZWxwZXI6IGVubGFyZ2VzIHRoZSBkaWFsb2cgdG8gZmlsbCB0aGUgZW50aXJlIHNjcmVlbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0YW5jZVx0VGhlIGRpbG9nIGluc3RhbmNlLlxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBtYXhpbWl6ZShpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAvLyBhbGxvdyBjdXN0b20gYG9ubWF4aW1pemVgIG1ldGhvZFxyXG4gICAgICAgICAgICBkaXNwYXRjaEV2ZW50KCdvbm1heGltaXplJywgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAvL21heGltaXplIHRoZSBkaWFsb2cgXHJcbiAgICAgICAgICAgIGFkZENsYXNzKGluc3RhbmNlLmVsZW1lbnRzLnJvb3QsIGNsYXNzZXMubWF4aW1pemVkKTtcclxuICAgICAgICAgICAgaWYgKGluc3RhbmNlLmlzT3BlbigpKSB7XHJcbiAgICAgICAgICAgICAgICBlbnN1cmVOb092ZXJmbG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gYWxsb3cgY3VzdG9tIGBvbm1heGltaXplZGAgbWV0aG9kXHJcbiAgICAgICAgICAgIGRpc3BhdGNoRXZlbnQoJ29ubWF4aW1pemVkJywgaW5zdGFuY2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGVscGVyOiByZXR1cm5zIHRoZSBkaWFsb2cgdG8gaXRzIGZvcm1lciBzaXplLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGluc3RhbmNlXHRUaGUgZGlsb2cgaW5zdGFuY2UuXHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHJlc3RvcmUoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgLy8gYWxsb3cgY3VzdG9tIGBvbnJlc3RvcmVgIG1ldGhvZFxyXG4gICAgICAgICAgICBkaXNwYXRjaEV2ZW50KCdvbnJlc3RvcmUnLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIC8vbWF4aW1pemUgdGhlIGRpYWxvZyBcclxuICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoaW5zdGFuY2UuZWxlbWVudHMucm9vdCwgY2xhc3Nlcy5tYXhpbWl6ZWQpO1xyXG4gICAgICAgICAgICBpZiAoaW5zdGFuY2UuaXNPcGVuKCkpIHtcclxuICAgICAgICAgICAgICAgIGVuc3VyZU5vT3ZlcmZsb3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBhbGxvdyBjdXN0b20gYG9ucmVzdG9yZWRgIG1ldGhvZFxyXG4gICAgICAgICAgICBkaXNwYXRjaEV2ZW50KCdvbnJlc3RvcmVkJywgaW5zdGFuY2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2hvdyBvciBoaWRlIHRoZSBtYXhpbWl6ZSBib3guXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2UgVGhlIGRpbG9nIGluc3RhbmNlLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gb24gVHJ1ZSB0byBhZGQgdGhlIGJlaGF2aW9yLCByZW1vdmVzIGl0IG90aGVyd2lzZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVQaW5uYWJsZShpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBpZiAoaW5zdGFuY2UuZ2V0KCdwaW5uYWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBhZGQgY2xhc3NcclxuICAgICAgICAgICAgICAgIGFkZENsYXNzKGluc3RhbmNlLmVsZW1lbnRzLnJvb3QsIGNsYXNzZXMucGlubmFibGUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGNsYXNzXHJcbiAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyhpbnN0YW5jZS5lbGVtZW50cy5yb290LCBjbGFzc2VzLnBpbm5hYmxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGVscGVyOiBGaXhlcyB0aGUgYWJzb2x1dGx5IHBvc2l0aW9uZWQgbW9kYWwgZGl2IHBvc2l0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGluc3RhbmNlIFRoZSBkaWFsb2cgaW5zdGFuY2UuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gYWRkQWJzUG9zaXRpb25GaXgoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgdmFyIHNjcm9sbExlZnQgPSBnZXRTY3JvbGxMZWZ0KCk7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmVsZW1lbnRzLm1vZGFsLnN0eWxlLm1hcmdpblRvcCA9IGdldFNjcm9sbFRvcCgpICsgJ3B4JztcclxuICAgICAgICAgICAgaW5zdGFuY2UuZWxlbWVudHMubW9kYWwuc3R5bGUubWFyZ2luTGVmdCA9IHNjcm9sbExlZnQgKyAncHgnO1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5lbGVtZW50cy5tb2RhbC5zdHlsZS5tYXJnaW5SaWdodCA9ICgtc2Nyb2xsTGVmdCkgKyAncHgnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGVscGVyOiBSZW1vdmVzIHRoZSBhYnNvbHV0bHkgcG9zaXRpb25lZCBtb2RhbCBkaXYgcG9zaXRpb24gZml4LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGluc3RhbmNlIFRoZSBkaWFsb2cgaW5zdGFuY2UuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQWJzUG9zaXRpb25GaXgoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgdmFyIG1hcmdpblRvcCA9IHBhcnNlSW50KGluc3RhbmNlLmVsZW1lbnRzLm1vZGFsLnN0eWxlLm1hcmdpblRvcCwgMTApO1xyXG4gICAgICAgICAgICB2YXIgbWFyZ2luTGVmdCA9IHBhcnNlSW50KGluc3RhbmNlLmVsZW1lbnRzLm1vZGFsLnN0eWxlLm1hcmdpbkxlZnQsIDEwKTtcclxuICAgICAgICAgICAgaW5zdGFuY2UuZWxlbWVudHMubW9kYWwuc3R5bGUubWFyZ2luVG9wID0gJyc7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmVsZW1lbnRzLm1vZGFsLnN0eWxlLm1hcmdpbkxlZnQgPSAnJztcclxuICAgICAgICAgICAgaW5zdGFuY2UuZWxlbWVudHMubW9kYWwuc3R5bGUubWFyZ2luUmlnaHQgPSAnJztcclxuXHJcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZS5pc09wZW4oKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRvcCA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA9IDBcclxuICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZS5lbGVtZW50cy5kaWFsb2cuc3R5bGUudG9wICE9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcCA9IHBhcnNlSW50KGluc3RhbmNlLmVsZW1lbnRzLmRpYWxvZy5zdHlsZS50b3AsIDEwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmVsZW1lbnRzLmRpYWxvZy5zdHlsZS50b3AgPSAodG9wICsgKG1hcmdpblRvcCAtIGdldFNjcm9sbFRvcCgpKSkgKyAncHgnO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZS5lbGVtZW50cy5kaWFsb2cuc3R5bGUubGVmdCAhPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gcGFyc2VJbnQoaW5zdGFuY2UuZWxlbWVudHMuZGlhbG9nLnN0eWxlLmxlZnQsIDEwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmVsZW1lbnRzLmRpYWxvZy5zdHlsZS5sZWZ0ID0gKGxlZnQgKyAobWFyZ2luTGVmdCAtIGdldFNjcm9sbExlZnQoKSkpICsgJ3B4JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIZWxwZXI6IEFkZHMvUmVtb3ZlcyB0aGUgYWJzb2x1dGx5IHBvc2l0aW9uZWQgbW9kYWwgZGl2IHBvc2l0aW9uIGZpeCBiYXNlZCBvbiBpdHMgcGlubmVkIHNldHRpbmcuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2UgVGhlIGRpYWxvZyBpbnN0YW5jZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVBYnNQb3NpdGlvbkZpeChpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAvLyBpZiBtb2RlbGVzcyBhbmQgdW5waW5uZWQgYWRkIGZpeFxyXG4gICAgICAgICAgICBpZiAoIWluc3RhbmNlLmdldCgnbW9kYWwnKSAmJiAhaW5zdGFuY2UuZ2V0KCdwaW5uZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgYWRkQWJzUG9zaXRpb25GaXgoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlQWJzUG9zaXRpb25GaXgoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRvZ2dsZXMgdGhlIGRpYWxvZyBwb3NpdGlvbiBsb2NrIHwgbW9kZWxlc3Mgb25seS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0YW5jZSBUaGUgZGlsb2cgaW5zdGFuY2UuXHJcbiAgICAgICAgICogQHBhcmFtIHtCb29sZWFufSBvbiBUcnVlIHRvIG1ha2UgaXQgbW9kYWwsIGZhbHNlIG90aGVyd2lzZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVQaW5uZWQoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgaWYgKGluc3RhbmNlLmdldCgncGlubmVkJykpIHtcclxuICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGluc3RhbmNlLmVsZW1lbnRzLnJvb3QsIGNsYXNzZXMudW5waW5uZWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlLmlzT3BlbigpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQWJzUG9zaXRpb25GaXgoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYWRkQ2xhc3MoaW5zdGFuY2UuZWxlbWVudHMucm9vdCwgY2xhc3Nlcy51bnBpbm5lZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UuaXNPcGVuKCkgJiYgIWluc3RhbmNlLmlzTW9kYWwoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZEFic1Bvc2l0aW9uRml4KGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2hvdyBvciBoaWRlIHRoZSBtYXhpbWl6ZSBib3guXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2UgVGhlIGRpbG9nIGluc3RhbmNlLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gb24gVHJ1ZSB0byBhZGQgdGhlIGJlaGF2aW9yLCByZW1vdmVzIGl0IG90aGVyd2lzZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVNYXhpbWl6YWJsZShpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBpZiAoaW5zdGFuY2UuZ2V0KCdtYXhpbWl6YWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBhZGQgY2xhc3NcclxuICAgICAgICAgICAgICAgIGFkZENsYXNzKGluc3RhbmNlLmVsZW1lbnRzLnJvb3QsIGNsYXNzZXMubWF4aW1pemFibGUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGNsYXNzXHJcbiAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyhpbnN0YW5jZS5lbGVtZW50cy5yb290LCBjbGFzc2VzLm1heGltaXphYmxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2hvdyBvciBoaWRlIHRoZSBjbG9zZSBib3guXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2UgVGhlIGRpbG9nIGluc3RhbmNlLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gb24gVHJ1ZSB0byBhZGQgdGhlIGJlaGF2aW9yLCByZW1vdmVzIGl0IG90aGVyd2lzZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVDbG9zYWJsZShpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBpZiAoaW5zdGFuY2UuZ2V0KCdjbG9zYWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBhZGQgY2xhc3NcclxuICAgICAgICAgICAgICAgIGFkZENsYXNzKGluc3RhbmNlLmVsZW1lbnRzLnJvb3QsIGNsYXNzZXMuY2xvc2FibGUpO1xyXG4gICAgICAgICAgICAgICAgYmluZENsb3NhYmxlRXZlbnRzKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBjbGFzc1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoaW5zdGFuY2UuZWxlbWVudHMucm9vdCwgY2xhc3Nlcy5jbG9zYWJsZSk7XHJcbiAgICAgICAgICAgICAgICB1bmJpbmRDbG9zYWJsZUV2ZW50cyhpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGZsYWcgdG8gY2FuY2VsIGNsaWNrIGV2ZW50IGlmIGFscmVhZHkgaGFuZGxlZCBieSBlbmQgcmVzaXplIGV2ZW50ICh0aGUgbW91c2Vkb3duLCBtb3VzZW1vdmUsIG1vdXNldXAgc2VxdWVuY2UgZmlyZXMgYSBjbGljayBldmVudC4pLlxyXG4gICAgICAgIHZhciBjYW5jZWxDbGljayA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIZWxwZXI6IGNsb3NlcyB0aGUgbW9kYWwgZGlhbG9nIHdoZW4gY2xpY2tpbmcgdGhlIG1vZGFsXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFx0RE9NIGV2ZW50IG9iamVjdC5cclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2UgVGhlIGRpbG9nIGluc3RhbmNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIG1vZGFsQ2xpY2tIYW5kbGVyKGV2ZW50LCBpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQuc3JjRWxlbWVudCB8fCBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgICAgIGlmICghY2FuY2VsQ2xpY2sgJiYgdGFyZ2V0ID09PSBpbnN0YW5jZS5lbGVtZW50cy5tb2RhbCAmJiBpbnN0YW5jZS5nZXQoJ2Nsb3NhYmxlQnlEaW1tZXInKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgdHJpZ2dlckNsb3NlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYW5jZWxDbGljayA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBmbGFnIHRvIGNhbmNlbCBrZXl1cCBldmVudCBpZiBhbHJlYWR5IGhhbmRsZWQgYnkgY2xpY2sgZXZlbnQgKHByZXNzaW5nIEVudGVyIG9uIGEgZm9jdXN0ZWQgYnV0dG9uKS5cclxuICAgICAgICB2YXIgY2FuY2VsS2V5dXAgPSBmYWxzZTtcclxuICAgICAgICAvKiogXHJcbiAgICAgICAgICogSGVscGVyOiB0cmlnZ2VycyBhIGJ1dHRvbiBjYWxsYmFja1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9XHRcdFRoZSBkaWxvZyBpbnN0YW5jZS5cclxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufVx0Q2FsbGJhY2sgdG8gY2hlY2sgd2hpY2ggYnV0dG9uIHRyaWdnZXJlZCB0aGUgZXZlbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gdHJpZ2dlckNhbGxiYWNrKGluc3RhbmNlLCBjaGVjaykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBpbnN0YW5jZS5fX2ludGVybmFsLmJ1dHRvbnMubGVuZ3RoOyBpZHggKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJ1dHRvbiA9IGluc3RhbmNlLl9faW50ZXJuYWwuYnV0dG9uc1tpZHhdO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFidXR0b24uZWxlbWVudC5kaXNhYmxlZCAmJiBjaGVjayhidXR0b24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNsb3NlRXZlbnQgPSBjcmVhdGVDbG9zZUV2ZW50KGlkeCwgYnV0dG9uKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGluc3RhbmNlLmNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmNhbGxiYWNrLmFwcGx5KGluc3RhbmNlLCBbY2xvc2VFdmVudF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvL2Nsb3NlIHRoZSBkaWFsb2cgb25seSBpZiBub3QgY2FuY2VsZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsb3NlRXZlbnQuY2FuY2VsID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2xpY2tzIGV2ZW50IGhhbmRsZXIsIGF0dGFjaGVkIHRvIHRoZSBkaWFsb2cgZm9vdGVyLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtFdmVudH1cdFx0RE9NIGV2ZW50IG9iamVjdC5cclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH1cdFx0VGhlIGRpbG9nIGluc3RhbmNlLlxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBidXR0b25zQ2xpY2tIYW5kbGVyKGV2ZW50LCBpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQuc3JjRWxlbWVudCB8fCBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgICAgIHRyaWdnZXJDYWxsYmFjayhpbnN0YW5jZSwgZnVuY3Rpb24gKGJ1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBidXR0b24gY2F1c2VkIHRoZSBjbGljaywgY2FuY2VsIGtleXVwIGV2ZW50XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYnV0dG9uLmVsZW1lbnQgPT09IHRhcmdldCAmJiAoY2FuY2VsS2V5dXAgPSB0cnVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBLZXl1cCBldmVudCBoYW5kbGVyLCBhdHRhY2hlZCB0byB0aGUgZG9jdW1lbnQuYm9keVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtFdmVudH1cdFx0RE9NIGV2ZW50IG9iamVjdC5cclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH1cdFx0VGhlIGRpbG9nIGluc3RhbmNlLlxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBrZXl1cEhhbmRsZXIoZXZlbnQpIHtcclxuICAgICAgICAgICAgLy9oaXR0aW5nIGVudGVyIHdoaWxlIGJ1dHRvbiBoYXMgZm9jdXMgd2lsbCB0cmlnZ2VyIGtleXVwIHRvby5cclxuICAgICAgICAgICAgLy9pZ25vcmUgaWYgaGFuZGxlZCBieSBjbGlja0hhbmRsZXJcclxuICAgICAgICAgICAgaWYgKGNhbmNlbEtleXVwKSB7XHJcbiAgICAgICAgICAgICAgICBjYW5jZWxLZXl1cCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IG9wZW5EaWFsb2dzW29wZW5EaWFsb2dzLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICB2YXIga2V5Q29kZSA9IGV2ZW50LmtleUNvZGU7XHJcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZS5fX2ludGVybmFsLmJ1dHRvbnMubGVuZ3RoID09PSAwICYmIGtleUNvZGUgPT09IGtleXMuRVNDICYmIGluc3RhbmNlLmdldCgnY2xvc2FibGUnKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgdHJpZ2dlckNsb3NlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfWVsc2UgaWYgKHVzZWRLZXlzLmluZGV4T2Yoa2V5Q29kZSkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgdHJpZ2dlckNhbGxiYWNrKGluc3RhbmNlLCBmdW5jdGlvbiAoYnV0dG9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJ1dHRvbi5rZXkgPT09IGtleUNvZGU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEtleWRvd24gZXZlbnQgaGFuZGxlciwgYXR0YWNoZWQgdG8gdGhlIGRvY3VtZW50LmJvZHlcclxuICAgICAgICAqXHJcbiAgICAgICAgKiBAcGFyYW0ge0V2ZW50fVx0XHRET00gZXZlbnQgb2JqZWN0LlxyXG4gICAgICAgICogQHBhcmFtIHtPYmplY3R9XHRcdFRoZSBkaWxvZyBpbnN0YW5jZS5cclxuICAgICAgICAqIFxyXG4gICAgICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24ga2V5ZG93bkhhbmRsZXIoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gb3BlbkRpYWxvZ3Nbb3BlbkRpYWxvZ3MubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgIHZhciBrZXlDb2RlID0gZXZlbnQua2V5Q29kZTtcclxuICAgICAgICAgICAgaWYgKGtleUNvZGUgPT09IGtleXMuTEVGVCB8fCBrZXlDb2RlID09PSBrZXlzLlJJR0hUKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYnV0dG9ucyA9IGluc3RhbmNlLl9faW50ZXJuYWwuYnV0dG9ucztcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgYnV0dG9ucy5sZW5ndGg7IHggKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBidXR0b25zW3hdLmVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChrZXlDb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2Uga2V5cy5MRUZUOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uc1soeCB8fCBidXR0b25zLmxlbmd0aCkgLSAxXS5lbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2Uga2V5cy5SSUdIVDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbnNbKHggKyAxKSAlIGJ1dHRvbnMubGVuZ3RoXS5lbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1lbHNlIGlmIChrZXlDb2RlIDwga2V5cy5GMTIgKyAxICYmIGtleUNvZGUgPiBrZXlzLkYxIC0gMSAmJiB1c2VkS2V5cy5pbmRleE9mKGtleUNvZGUpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIHRyaWdnZXJDYWxsYmFjayhpbnN0YW5jZSwgZnVuY3Rpb24gKGJ1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBidXR0b24ua2V5ID09PSBrZXlDb2RlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXRzIGZvY3VzIHRvIHByb3BlciBkaWFsb2cgZWxlbWVudFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGluc3RhbmNlIFRoZSBkaWxvZyBpbnN0YW5jZS5cclxuICAgICAgICAgKiBAcGFyYW0ge05vZGV9IFtyZXNldFRhcmdldD11bmRlZmluZWRdIERPTSBlbGVtZW50IHRvIHJlc2V0IGZvY3VzIHRvLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHNldEZvY3VzKGluc3RhbmNlLCByZXNldFRhcmdldCkge1xyXG4gICAgICAgICAgICAvLyByZXNldCB0YXJnZXQgaGFzIGFscmVhZHkgYmVlbiBkZXRlcm1pbmVkLlxyXG4gICAgICAgICAgICBpZiAocmVzZXRUYXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIHJlc2V0VGFyZ2V0LmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjdXJyZW50IGluc3RhbmNlIGZvY3VzIHNldHRpbmdzXHJcbiAgICAgICAgICAgICAgICB2YXIgZm9jdXMgPSBpbnN0YW5jZS5fX2ludGVybmFsLmZvY3VzO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhlIGZvY3VzIGVsZW1lbnQuXHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGZvY3VzLmVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlb2YgZm9jdXMuZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgLy8gYSBudW1iZXIgbWVhbnMgYSBidXR0b24gaW5kZXhcclxuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlLl9faW50ZXJuYWwuYnV0dG9ucy5sZW5ndGggPiBmb2N1cy5lbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaW4gYmFzaWMgdmlldywgc2tpcCBmb2N1c2luZyB0aGUgYnV0dG9ucy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlLmdldCgnYmFzaWMnKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGluc3RhbmNlLmVsZW1lbnRzLnJlc2V0WzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGluc3RhbmNlLl9faW50ZXJuYWwuYnV0dG9uc1tmb2N1cy5lbGVtZW50XS5lbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgLy8gYSBzdHJpbmcgbWVhbnMgcXVlcnlTZWxlY3RvciB0byBzZWxlY3QgZnJvbSBkaWFsb2cgYm9keSBjb250ZW50cy5cclxuICAgICAgICAgICAgICAgIGNhc2UgJ3N0cmluZyc6XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGluc3RhbmNlLmVsZW1lbnRzLmJvZHkucXVlcnlTZWxlY3Rvcihmb2N1cy5lbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIC8vIGEgZnVuY3Rpb24gc2hvdWxkIHJldHVybiB0aGUgZm9jdXMgZWxlbWVudC5cclxuICAgICAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID0gZm9jdXMuZWxlbWVudC5jYWxsKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gaWYgbm8gZm9jdXMgZWxlbWVudCwgZGVmYXVsdCB0byBmaXJzdCByZXNldCBlbGVtZW50LlxyXG4gICAgICAgICAgICAgICAgaWYgKCh0eXBlb2YgZWxlbWVudCA9PT0gJ3VuZGVmaW5lZCcgfHwgZWxlbWVudCA9PT0gbnVsbCkgJiYgaW5zdGFuY2UuX19pbnRlcm5hbC5idXR0b25zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBpbnN0YW5jZS5lbGVtZW50cy5yZXNldFswXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGZvY3VzXHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LmZvY3VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHNlbGVjdGFibGVcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9jdXMuc2VsZWN0ICYmIGVsZW1lbnQuc2VsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2VsZWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBGb2N1cyBldmVudCBoYW5kbGVyLCBhdHRhY2hlZCB0byBkb2N1bWVudC5ib2R5IGFuZCBkaWFsb2dzIG93biByZXNldCBsaW5rcy5cclxuICAgICAgICAgKiBoYW5kbGVzIHRoZSBmb2N1cyBmb3IgbW9kYWwgZGlhbG9ncyBvbmx5LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgRE9NIGZvY3VzIGV2ZW50IG9iamVjdC5cclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2UgVGhlIGRpbG9nIGluc3RhbmNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIG9uUmVzZXQoZXZlbnQsIGluc3RhbmNlKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBzaG91bGQgd29yayBvbiBsYXN0IG1vZGFsIGlmIHRyaWdnZXJlZCBmcm9tIGRvY3VtZW50LmJvZHkgXHJcbiAgICAgICAgICAgIGlmICghaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHggPSBvcGVuRGlhbG9ncy5sZW5ndGggLSAxOyB4ID4gLTE7IHggLT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcGVuRGlhbG9nc1t4XS5pc01vZGFsKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBvcGVuRGlhbG9nc1t4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGlmIG1vZGFsXHJcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZSAmJiBpbnN0YW5jZS5pc01vZGFsKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGRldGVybWluZSByZXNldCB0YXJnZXQgdG8gZW5hYmxlIGZvcndhcmQvYmFja3dhcmQgdGFiIGN5Y2xlLlxyXG4gICAgICAgICAgICAgICAgdmFyIHJlc2V0VGFyZ2V0LCB0YXJnZXQgPSBldmVudC5zcmNFbGVtZW50IHx8IGV2ZW50LnRhcmdldDtcclxuICAgICAgICAgICAgICAgIHZhciBsYXN0UmVzZXRFbGVtZW50ID0gdGFyZ2V0ID09PSBpbnN0YW5jZS5lbGVtZW50cy5yZXNldFsxXSB8fCAoaW5zdGFuY2UuX19pbnRlcm5hbC5idXR0b25zLmxlbmd0aCA9PT0gMCAmJiB0YXJnZXQgPT09IGRvY3VtZW50LmJvZHkpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGlmIGxhc3QgcmVzZXQgbGluaywgdGhlbiBnbyB0byBtYXhpbWl6ZSBvciBjbG9zZVxyXG4gICAgICAgICAgICAgICAgaWYgKGxhc3RSZXNldEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UuZ2V0KCdtYXhpbWl6YWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0VGFyZ2V0ID0gaW5zdGFuY2UuZWxlbWVudHMuY29tbWFuZHMubWF4aW1pemU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnN0YW5jZS5nZXQoJ2Nsb3NhYmxlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRUYXJnZXQgPSBpbnN0YW5jZS5lbGVtZW50cy5jb21tYW5kcy5jbG9zZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBpZiBubyByZXNldCB0YXJnZXQgZm91bmQsIHRyeSBmaW5kaW5nIHRoZSBiZXN0IGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc2V0VGFyZ2V0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGluc3RhbmNlLl9faW50ZXJuYWwuZm9jdXMuZWxlbWVudCA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnV0dG9uIGZvY3VzIGVsZW1lbnQsIGdvIHRvIGZpcnN0IGF2YWlsYWJsZSBidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gaW5zdGFuY2UuZWxlbWVudHMucmVzZXRbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0VGFyZ2V0ID0gaW5zdGFuY2UuZWxlbWVudHMuYnV0dG9ucy5hdXhpbGlhcnkuZmlyc3RDaGlsZCB8fCBpbnN0YW5jZS5lbGVtZW50cy5idXR0b25zLnByaW1hcnkuZmlyc3RDaGlsZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsYXN0UmVzZXRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3Jlc3RhcnQgdGhlIGN5Y2xlIGJ5IGdvaW5nIHRvIGZpcnN0IHJlc2V0IGxpbmtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0VGFyZ2V0ID0gaW5zdGFuY2UuZWxlbWVudHMucmVzZXRbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aWxsIHJlYWNoIGhlcmUgd2hlbiB0YXBwaW5nIGJhY2t3YXJkcywgc28gZ28gdG8gbGFzdCBjaGlsZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZm9jdXMgZWxlbWVudCBTSE9VTEQgTk9UIGJlIGEgYnV0dG9uIChsb2dpY2FsbHkhKS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gaW5zdGFuY2UuZWxlbWVudHMucmVzZXRbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0VGFyZ2V0ID0gaW5zdGFuY2UuZWxlbWVudHMuYnV0dG9ucy5wcmltYXJ5Lmxhc3RDaGlsZCB8fCBpbnN0YW5jZS5lbGVtZW50cy5idXR0b25zLmF1eGlsaWFyeS5sYXN0Q2hpbGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBmb2N1c1xyXG4gICAgICAgICAgICAgICAgc2V0Rm9jdXMoaW5zdGFuY2UsIHJlc2V0VGFyZ2V0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUcmFuc2l0aW9uIGluIHRyYW5zaXRpb25lbmQgZXZlbnQgaGFuZGxlci4gXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge0V2ZW50fVx0XHRUcmFuc2l0aW9uRW5kIGV2ZW50IG9iamVjdC5cclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH1cdFx0VGhlIGRpbG9nIGluc3RhbmNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVRyYW5zaXRpb25JbkV2ZW50KGV2ZW50LCBpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAvLyBjbGVhciB0aGUgdGltZXJcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGluc3RhbmNlLl9faW50ZXJuYWwudGltZXJJbik7XHJcblxyXG4gICAgICAgICAgICAvLyBvbmNlIHRyYW5zaXRpb24gaXMgY29tcGxldGUsIHNldCBmb2N1c1xyXG4gICAgICAgICAgICBzZXRGb2N1cyhpbnN0YW5jZSk7XHJcblxyXG4gICAgICAgICAgICAvL3Jlc3RvcmUgc2Nyb2xsIHRvIHByZXZlbnQgZG9jdW1lbnQganVtcFxyXG4gICAgICAgICAgICByZXN0b3JlU2Nyb2xsUG9zaXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGFsbG93IGhhbmRsaW5nIGtleSB1cCBhZnRlciB0cmFuc2l0aW9uIGVuZGVkLlxyXG4gICAgICAgICAgICBjYW5jZWxLZXl1cCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLy8gYWxsb3cgY3VzdG9tIGBvbmZvY3VzYCBtZXRob2RcclxuICAgICAgICAgICAgZGlzcGF0Y2hFdmVudCgnb25mb2N1cycsIGluc3RhbmNlKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHVuYmluZCB0aGUgZXZlbnRcclxuICAgICAgICAgICAgb2ZmKGluc3RhbmNlLmVsZW1lbnRzLmRpYWxvZywgdHJhbnNpdGlvbi50eXBlLCBpbnN0YW5jZS5fX2ludGVybmFsLnRyYW5zaXRpb25JbkhhbmRsZXIpO1xyXG5cclxuICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoaW5zdGFuY2UuZWxlbWVudHMucm9vdCwgY2xhc3Nlcy5hbmltYXRpb25Jbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUcmFuc2l0aW9uIG91dCB0cmFuc2l0aW9uZW5kIGV2ZW50IGhhbmRsZXIuIFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtFdmVudH1cdFx0VHJhbnNpdGlvbkVuZCBldmVudCBvYmplY3QuXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9XHRcdFRoZSBkaWxvZyBpbnN0YW5jZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVUcmFuc2l0aW9uT3V0RXZlbnQoZXZlbnQsIGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIC8vIGNsZWFyIHRoZSB0aW1lclxyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoaW5zdGFuY2UuX19pbnRlcm5hbC50aW1lck91dCk7XHJcbiAgICAgICAgICAgIC8vIHVuYmluZCB0aGUgZXZlbnRcclxuICAgICAgICAgICAgb2ZmKGluc3RhbmNlLmVsZW1lbnRzLmRpYWxvZywgdHJhbnNpdGlvbi50eXBlLCBpbnN0YW5jZS5fX2ludGVybmFsLnRyYW5zaXRpb25PdXRIYW5kbGVyKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHJlc2V0IG1vdmUgdXBkYXRlc1xyXG4gICAgICAgICAgICByZXNldE1vdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAvLyByZXNldCByZXNpemUgdXBkYXRlc1xyXG4gICAgICAgICAgICByZXNldFJlc2l6ZShpbnN0YW5jZSk7XHJcblxyXG4gICAgICAgICAgICAvLyByZXN0b3JlIGlmIG1heGltaXplZFxyXG4gICAgICAgICAgICBpZiAoaW5zdGFuY2UuaXNNYXhpbWl6ZWQoKSAmJiAhaW5zdGFuY2UuZ2V0KCdzdGFydE1heGltaXplZCcpKSB7XHJcbiAgICAgICAgICAgICAgICByZXN0b3JlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gcmV0dXJuIGZvY3VzIHRvIHRoZSBsYXN0IGFjdGl2ZSBlbGVtZW50XHJcbiAgICAgICAgICAgIGlmIChhbGVydGlmeS5kZWZhdWx0cy5tYWludGFpbkZvY3VzICYmIGluc3RhbmNlLl9faW50ZXJuYWwuYWN0aXZlRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuX19pbnRlcm5hbC5hY3RpdmVFbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5fX2ludGVybmFsLmFjdGl2ZUVsZW1lbnQgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvL2Rlc3RvcnkgdGhlIGluc3RhbmNlXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaW5zdGFuY2UuX19pbnRlcm5hbC5kZXN0cm95ID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5fX2ludGVybmFsLmRlc3Ryb3kuYXBwbHkoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qIENvbnRyb2xzIG1vdmluZyBhIGRpYWxvZyBhcm91bmQgKi9cclxuICAgICAgICAvL2hvbGRlIHRoZSBjdXJyZW50IG1vdmluZyBpbnN0YW5jZVxyXG4gICAgICAgIHZhciBtb3ZhYmxlID0gbnVsbCxcclxuICAgICAgICAgICAgLy9ob2xkcyB0aGUgY3VycmVudCBYIG9mZnNldCB3aGVuIG1vdmUgc3RhcnRzXHJcbiAgICAgICAgICAgIG9mZnNldFggPSAwLFxyXG4gICAgICAgICAgICAvL2hvbGRzIHRoZSBjdXJyZW50IFkgb2Zmc2V0IHdoZW4gbW92ZSBzdGFydHNcclxuICAgICAgICAgICAgb2Zmc2V0WSA9IDAsXHJcbiAgICAgICAgICAgIHhQcm9wID0gJ3BhZ2VYJyxcclxuICAgICAgICAgICAgeVByb3AgPSAncGFnZVknLFxyXG4gICAgICAgICAgICBib3VuZHMgPSBudWxsLFxyXG4gICAgICAgICAgICByZWZyZXNoVG9wID0gZmFsc2UsXHJcbiAgICAgICAgICAgIG1vdmVEZWxlZ2F0ZSA9IG51bGxcclxuICAgICAgICA7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhlbHBlcjogc2V0cyB0aGUgZWxlbWVudCB0b3AvbGVmdCBjb29yZGluYXRlc1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtFdmVudH0gZXZlbnRcdERPTSBldmVudCBvYmplY3QuXHJcbiAgICAgICAgICogQHBhcmFtIHtOb2RlfSBlbGVtZW50IFRoZSBlbGVtZW50IGJlaW5nIG1vdmVkLlxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBtb3ZlRWxlbWVudChldmVudCwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICB2YXIgbGVmdCA9IChldmVudFt4UHJvcF0gLSBvZmZzZXRYKSxcclxuICAgICAgICAgICAgICAgIHRvcCAgPSAoZXZlbnRbeVByb3BdIC0gb2Zmc2V0WSk7XHJcblxyXG4gICAgICAgICAgICBpZihyZWZyZXNoVG9wKXtcclxuICAgICAgICAgICAgICAgIHRvcCAtPSBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIFxyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmxlZnQgPSBsZWZ0ICsgJ3B4JztcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50b3AgPSB0b3AgKyAncHgnO1xyXG4gICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIZWxwZXI6IHNldHMgdGhlIGVsZW1lbnQgdG9wL2xlZnQgY29vcmRpbmF0ZXMgd2l0aGluIHNjcmVlbiBib3VuZHNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XHRET00gZXZlbnQgb2JqZWN0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Tm9kZX0gZWxlbWVudCBUaGUgZWxlbWVudCBiZWluZyBtb3ZlZC5cclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gbW92ZUVsZW1lbnRCb3VuZGVkKGV2ZW50LCBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBsZWZ0ID0gKGV2ZW50W3hQcm9wXSAtIG9mZnNldFgpLFxyXG4gICAgICAgICAgICAgICAgdG9wICA9IChldmVudFt5UHJvcF0gLSBvZmZzZXRZKTtcclxuXHJcbiAgICAgICAgICAgIGlmKHJlZnJlc2hUb3Ape1xyXG4gICAgICAgICAgICAgICAgdG9wIC09IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmxlZnQgPSBNYXRoLm1pbihib3VuZHMubWF4TGVmdCwgTWF0aC5tYXgoYm91bmRzLm1pbkxlZnQsIGxlZnQpKSArICdweCc7XHJcbiAgICAgICAgICAgIGlmKHJlZnJlc2hUb3Ape1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50b3AgPSBNYXRoLm1pbihib3VuZHMubWF4VG9wLCBNYXRoLm1heChib3VuZHMubWluVG9wLCB0b3ApKSArICdweCc7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50b3AgPSBNYXRoLm1heChib3VuZHMubWluVG9wLCB0b3ApICsgJ3B4JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAgICAgXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRyaWdnZXJzIHRoZSBzdGFydCBvZiBhIG1vdmUgZXZlbnQsIGF0dGFjaGVkIHRvIHRoZSBoZWFkZXIgZWxlbWVudCBtb3VzZSBkb3duIGV2ZW50LlxyXG4gICAgICAgICAqIEFkZHMgbm8tc2VsZWN0aW9uIGNsYXNzIHRvIHRoZSBib2R5LCBkaXNhYmxpbmcgc2VsZWN0aW9uIHdoaWxlIG1vdmluZy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XHRET00gZXZlbnQgb2JqZWN0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0YW5jZSBUaGUgZGlsb2cgaW5zdGFuY2UuXHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gZmFsc2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBiZWdpbk1vdmUoZXZlbnQsIGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXNpemFibGUgPT09IG51bGwgJiYgIWluc3RhbmNlLmlzTWF4aW1pemVkKCkgJiYgaW5zdGFuY2UuZ2V0KCdtb3ZhYmxlJykpIHtcclxuICAgICAgICAgICAgICAgIHZhciBldmVudFNyYywgbGVmdD0wLCB0b3A9MDtcclxuICAgICAgICAgICAgICAgIGlmIChldmVudC50eXBlID09PSAndG91Y2hzdGFydCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50U3JjID0gZXZlbnQudGFyZ2V0VG91Y2hlc1swXTtcclxuICAgICAgICAgICAgICAgICAgICB4UHJvcCA9ICdjbGllbnRYJztcclxuICAgICAgICAgICAgICAgICAgICB5UHJvcCA9ICdjbGllbnRZJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuYnV0dG9uID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRTcmMgPSBldmVudDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRTcmMpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBpbnN0YW5jZS5lbGVtZW50cy5kaWFsb2c7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkQ2xhc3MoZWxlbWVudCwgY2xhc3Nlcy5jYXB0dXJlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuc3R5bGUubGVmdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gcGFyc2VJbnQoZWxlbWVudC5zdHlsZS5sZWZ0LCAxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdHlsZS50b3ApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0gcGFyc2VJbnQoZWxlbWVudC5zdHlsZS50b3AsIDEwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0WCA9IGV2ZW50U3JjW3hQcm9wXSAtIGxlZnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0WSA9IGV2ZW50U3JjW3lQcm9wXSAtIHRvcDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoaW5zdGFuY2UuaXNNb2RhbCgpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0WSArPSBpbnN0YW5jZS5lbGVtZW50cy5tb2RhbC5zY3JvbGxUb3A7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoaW5zdGFuY2UuaXNQaW5uZWQoKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFkgLT0gZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGluc3RhbmNlLmdldCgnbW92ZUJvdW5kZWQnKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50ID0gZWxlbWVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldExlZnQgPSAtbGVmdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFRvcCA9IC10b3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NhbGMgb2Zmc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldExlZnQgKz0gY3VycmVudC5vZmZzZXRMZWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0VG9wICs9IGN1cnJlbnQub2Zmc2V0VG9wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IHdoaWxlIChjdXJyZW50ID0gY3VycmVudC5vZmZzZXRQYXJlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm91bmRzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4TGVmdCA6IG9mZnNldExlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5MZWZ0IDogLW9mZnNldExlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhUb3AgIDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCAtIGVsZW1lbnQuY2xpZW50SGVpZ2h0IC0gb2Zmc2V0VG9wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluVG9wICA6IC1vZmZzZXRUb3BcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZURlbGVnYXRlID0gbW92ZUVsZW1lbnRCb3VuZGVkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3VuZHMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlRGVsZWdhdGUgPSBtb3ZlRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWxsb3cgY3VzdG9tIGBvbm1vdmVgIG1ldGhvZFxyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoRXZlbnQoJ29ubW92ZScsIGluc3RhbmNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFRvcCA9ICFpbnN0YW5jZS5pc01vZGFsKCkgJiYgaW5zdGFuY2UuaXNQaW5uZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICBtb3ZhYmxlID0gaW5zdGFuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgbW92ZURlbGVnYXRlKGV2ZW50U3JjLCBlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBhZGRDbGFzcyhkb2N1bWVudC5ib2R5LCBjbGFzc2VzLm5vU2VsZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBhY3R1YWwgbW92ZSBoYW5kbGVyLCAgYXR0YWNoZWQgdG8gZG9jdW1lbnQuYm9keSBtb3VzZW1vdmUgZXZlbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFx0RE9NIGV2ZW50IG9iamVjdC5cclxuICAgICAgICAgKiBcclxuICAgICAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gbW92ZShldmVudCkge1xyXG4gICAgICAgICAgICBpZiAobW92YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGV2ZW50U3JjO1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICd0b3VjaG1vdmUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBldmVudFNyYyA9IGV2ZW50LnRhcmdldFRvdWNoZXNbMF07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50U3JjID0gZXZlbnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRTcmMpIHtcclxuICAgICAgICAgICAgICAgICAgICBtb3ZlRGVsZWdhdGUoZXZlbnRTcmMsIG1vdmFibGUuZWxlbWVudHMuZGlhbG9nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVHJpZ2dlcnMgdGhlIGVuZCBvZiBhIG1vdmUgZXZlbnQsICBhdHRhY2hlZCB0byBkb2N1bWVudC5ib2R5IG1vdXNldXAgZXZlbnQuXHJcbiAgICAgICAgICogUmVtb3ZlcyBuby1zZWxlY3Rpb24gY2xhc3MgZnJvbSBkb2N1bWVudC5ib2R5LCBhbGxvd2luZyBzZWxlY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZW5kTW92ZSgpIHtcclxuICAgICAgICAgICAgaWYgKG1vdmFibGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IG1vdmFibGU7XHJcbiAgICAgICAgICAgICAgICBtb3ZhYmxlID0gYm91bmRzID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGRvY3VtZW50LmJvZHksIGNsYXNzZXMubm9TZWxlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoaW5zdGFuY2UuZWxlbWVudHMuZGlhbG9nLCBjbGFzc2VzLmNhcHR1cmUpO1xyXG4gICAgICAgICAgICAgICAgLy8gYWxsb3cgY3VzdG9tIGBvbm1vdmVkYCBtZXRob2RcclxuICAgICAgICAgICAgICAgIGRpc3BhdGNoRXZlbnQoJ29ubW92ZWQnLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlc2V0cyBhbnkgY2hhbmdlcyBtYWRlIGJ5IG1vdmluZyB0aGUgZWxlbWVudCB0byBpdHMgb3JpZ2luYWwgc3RhdGUsXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2UgVGhlIGRpbG9nIGluc3RhbmNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHJlc2V0TW92ZShpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBtb3ZhYmxlID0gbnVsbDtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBpbnN0YW5jZS5lbGVtZW50cy5kaWFsb2c7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubGVmdCA9IGVsZW1lbnQuc3R5bGUudG9wID0gJyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVcGRhdGVzIHRoZSBkaWFsb2cgbW92ZSBiZWhhdmlvci5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0YW5jZSBUaGUgZGlsb2cgaW5zdGFuY2UuXHJcbiAgICAgICAgICogQHBhcmFtIHtCb29sZWFufSBvbiBUcnVlIHRvIGFkZCB0aGUgYmVoYXZpb3IsIHJlbW92ZXMgaXQgb3RoZXJ3aXNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZU1vdmFibGUoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgaWYgKGluc3RhbmNlLmdldCgnbW92YWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBhZGQgY2xhc3NcclxuICAgICAgICAgICAgICAgIGFkZENsYXNzKGluc3RhbmNlLmVsZW1lbnRzLnJvb3QsIGNsYXNzZXMubW92YWJsZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UuaXNPcGVuKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBiaW5kTW92YWJsZUV2ZW50cyhpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9yZXNldFxyXG4gICAgICAgICAgICAgICAgcmVzZXRNb3ZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBjbGFzc1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoaW5zdGFuY2UuZWxlbWVudHMucm9vdCwgY2xhc3Nlcy5tb3ZhYmxlKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZS5pc09wZW4oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVuYmluZE1vdmFibGVFdmVudHMoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBDb250cm9scyBtb3ZpbmcgYSBkaWFsb2cgYXJvdW5kICovXHJcbiAgICAgICAgLy9ob2xkZSB0aGUgY3VycmVudCBpbnN0YW5jZSBiZWluZyByZXNpemVkXHRcdFxyXG4gICAgICAgIHZhciByZXNpemFibGUgPSBudWxsLFxyXG4gICAgICAgICAgICAvL2hvbGRzIHRoZSBzdGFyaW5nIGxlZnQgb2Zmc2V0IHdoZW4gcmVzaXplIHN0YXJ0cy5cclxuICAgICAgICAgICAgc3RhcnRpbmdMZWZ0ID0gTnVtYmVyLk5hbixcclxuICAgICAgICAgICAgLy9ob2xkcyB0aGUgc3RhcmluZyB3aWR0aCB3aGVuIHJlc2l6ZSBzdGFydHMuXHJcbiAgICAgICAgICAgIHN0YXJ0aW5nV2lkdGggPSAwLFxyXG4gICAgICAgICAgICAvL2hvbGRzIHRoZSBpbml0aWFsIHdpZHRoIHdoZW4gcmVzaXplZCBmb3IgdGhlIGZpcnN0IHRpbWUuXHJcbiAgICAgICAgICAgIG1pbldpZHRoID0gMCxcclxuICAgICAgICAgICAgLy9ob2xkcyB0aGUgb2Zmc2V0IG9mIHRoZSByZXNpemUgaGFuZGxlLlxyXG4gICAgICAgICAgICBoYW5kbGVPZmZzZXQgPSAwXHJcbiAgICAgICAgO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIZWxwZXI6IHNldHMgdGhlIGVsZW1lbnQgd2lkdGgvaGVpZ2h0IGFuZCB1cGRhdGVzIGxlZnQgY29vcmRpbmF0ZSBpZiBuZWNjZXNzYXJ5LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtFdmVudH0gZXZlbnRcdERPTSBtb3VzZW1vdmUgZXZlbnQgb2JqZWN0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7Tm9kZX0gZWxlbWVudCBUaGUgZWxlbWVudCBiZWluZyBtb3ZlZC5cclxuICAgICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHBpbm5lZCBBIGZsYWcgaW5kaWNhdGluZyBpZiB0aGUgZWxlbWVudCBiZWluZyByZXNpemVkIGlzIHBpbm5lZCB0byB0aGUgc2NyZWVuLlxyXG4gICAgICAgICAqIFxyXG4gICAgICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiByZXNpemVFbGVtZW50KGV2ZW50LCBlbGVtZW50LCBwYWdlUmVsYXRpdmUpIHtcclxuXHJcbiAgICAgICAgICAgIC8vY2FsY3VsYXRlIG9mZnNldHMgZnJvbSAwLDBcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSBlbGVtZW50O1xyXG4gICAgICAgICAgICB2YXIgb2Zmc2V0TGVmdCA9IDA7XHJcbiAgICAgICAgICAgIHZhciBvZmZzZXRUb3AgPSAwO1xyXG4gICAgICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXRMZWZ0ICs9IGN1cnJlbnQub2Zmc2V0TGVmdDtcclxuICAgICAgICAgICAgICAgIG9mZnNldFRvcCArPSBjdXJyZW50Lm9mZnNldFRvcDtcclxuICAgICAgICAgICAgfSB3aGlsZSAoY3VycmVudCA9IGN1cnJlbnQub2Zmc2V0UGFyZW50KTtcclxuXHJcbiAgICAgICAgICAgIC8vIGRldGVybWluZSBYLFkgY29vcmRpbmF0ZXMuXHJcbiAgICAgICAgICAgIHZhciBYLCBZO1xyXG4gICAgICAgICAgICBpZiAocGFnZVJlbGF0aXZlID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBYID0gZXZlbnQucGFnZVg7XHJcbiAgICAgICAgICAgICAgICBZID0gZXZlbnQucGFnZVk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBYID0gZXZlbnQuY2xpZW50WDtcclxuICAgICAgICAgICAgICAgIFkgPSBldmVudC5jbGllbnRZO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHJ0bCBoYW5kbGluZ1xyXG4gICAgICAgICAgICB2YXIgaXNSVEwgPSBpc1JpZ2h0VG9MZWZ0KCk7XHJcbiAgICAgICAgICAgIGlmIChpc1JUTCkge1xyXG4gICAgICAgICAgICAgICAgLy8gcmV2ZXJzZSBYIFxyXG4gICAgICAgICAgICAgICAgWCA9IGRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGggLSBYO1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgaGFzIGEgc3RhcnRpbmcgbGVmdCwgY2FsY3VsYXRlIG9mZnNldFJpZ2h0XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHN0YXJ0aW5nTGVmdCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXRMZWZ0ID0gZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aCAtIG9mZnNldExlZnQgLSBlbGVtZW50Lm9mZnNldFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBzZXQgd2lkdGgvaGVpZ2h0XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gKFkgLSBvZmZzZXRUb3AgKyBoYW5kbGVPZmZzZXQpICsgJ3B4JztcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS53aWR0aCA9IChYIC0gb2Zmc2V0TGVmdCArIGhhbmRsZU9mZnNldCkgKyAncHgnO1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgdGhlIGVsZW1lbnQgYmVpbmcgcmVzaXplZCBoYXMgYSBzdGFydGluZyBsZWZ0LCBtYWludGFpbiBpdC5cclxuICAgICAgICAgICAgLy8gdGhlIGRpYWxvZyBpcyBjZW50ZXJlZCwgZGl2aWRlIGJ5IGhhbGYgdGhlIG9mZnNldCB0byBtYWludGFpbiB0aGUgbWFyZ2lucy5cclxuICAgICAgICAgICAgaWYgKCFpc05hTihzdGFydGluZ0xlZnQpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGlmZiA9IE1hdGguYWJzKGVsZW1lbnQub2Zmc2V0V2lkdGggLSBzdGFydGluZ1dpZHRoKSAqIDAuNTtcclxuICAgICAgICAgICAgICAgIGlmIChpc1JUTCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vbmVnYXRlIHRoZSBkaWZmLCB3aHk/XHJcbiAgICAgICAgICAgICAgICAgICAgLy93aGVuIGdyb3dpbmcgaXQgc2hvdWxkIGRlY3JlYXNlIGxlZnRcclxuICAgICAgICAgICAgICAgICAgICAvL3doZW4gc2hyaW5raW5nIGl0IHNob3VsZCBpbmNyZWFzZSBsZWZ0XHJcbiAgICAgICAgICAgICAgICAgICAgZGlmZiAqPSAtMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50Lm9mZnNldFdpZHRoID4gc3RhcnRpbmdXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vZ3Jvd2luZ1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubGVmdCA9IChzdGFydGluZ0xlZnQgKyBkaWZmKSArICdweCc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQub2Zmc2V0V2lkdGggPj0gbWluV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL3Nocmlua2luZ1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubGVmdCA9IChzdGFydGluZ0xlZnQgLSBkaWZmKSArICdweCc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRyaWdnZXJzIHRoZSBzdGFydCBvZiBhIHJlc2l6ZSBldmVudCwgYXR0YWNoZWQgdG8gdGhlIHJlc2l6ZSBoYW5kbGUgZWxlbWVudCBtb3VzZSBkb3duIGV2ZW50LlxyXG4gICAgICAgICAqIEFkZHMgbm8tc2VsZWN0aW9uIGNsYXNzIHRvIHRoZSBib2R5LCBkaXNhYmxpbmcgc2VsZWN0aW9uIHdoaWxlIG1vdmluZy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XHRET00gZXZlbnQgb2JqZWN0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0YW5jZSBUaGUgZGlsb2cgaW5zdGFuY2UuXHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gZmFsc2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBiZWdpblJlc2l6ZShldmVudCwgaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgaWYgKCFpbnN0YW5jZS5pc01heGltaXplZCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXZlbnRTcmM7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3RvdWNoc3RhcnQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBldmVudFNyYyA9IGV2ZW50LnRhcmdldFRvdWNoZXNbMF07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50U3JjID0gZXZlbnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRTcmMpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhbGxvdyBjdXN0b20gYG9ucmVzaXplYCBtZXRob2RcclxuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaEV2ZW50KCdvbnJlc2l6ZScsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICByZXNpemFibGUgPSBpbnN0YW5jZTtcclxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVPZmZzZXQgPSBpbnN0YW5jZS5lbGVtZW50cy5yZXNpemVIYW5kbGUub2Zmc2V0SGVpZ2h0IC8gMjtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGluc3RhbmNlLmVsZW1lbnRzLmRpYWxvZztcclxuICAgICAgICAgICAgICAgICAgICBhZGRDbGFzcyhlbGVtZW50LCBjbGFzc2VzLmNhcHR1cmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0aW5nTGVmdCA9IHBhcnNlSW50KGVsZW1lbnQuc3R5bGUubGVmdCwgMTApO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubWluSGVpZ2h0ID0gaW5zdGFuY2UuZWxlbWVudHMuaGVhZGVyLm9mZnNldEhlaWdodCArIGluc3RhbmNlLmVsZW1lbnRzLmZvb3Rlci5vZmZzZXRIZWlnaHQgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUud2lkdGggPSAoc3RhcnRpbmdXaWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGgpICsgJ3B4JztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuc3R5bGUubWF4V2lkdGggIT09ICdub25lJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLm1pbldpZHRoID0gKG1pbldpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aCkgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLm1heFdpZHRoID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZENsYXNzKGRvY3VtZW50LmJvZHksIGNsYXNzZXMubm9TZWxlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGFjdHVhbCByZXNpemUgaGFuZGxlciwgIGF0dGFjaGVkIHRvIGRvY3VtZW50LmJvZHkgbW91c2Vtb3ZlIGV2ZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtFdmVudH0gZXZlbnRcdERPTSBldmVudCBvYmplY3QuXHJcbiAgICAgICAgICogXHJcbiAgICAgICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHJlc2l6ZShldmVudCkge1xyXG4gICAgICAgICAgICBpZiAocmVzaXphYmxlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXZlbnRTcmM7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3RvdWNobW92ZScpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50U3JjID0gZXZlbnQudGFyZ2V0VG91Y2hlc1swXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuYnV0dG9uID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRTcmMgPSBldmVudDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChldmVudFNyYykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZUVsZW1lbnQoZXZlbnRTcmMsIHJlc2l6YWJsZS5lbGVtZW50cy5kaWFsb2csICFyZXNpemFibGUuZ2V0KCdtb2RhbCcpICYmICFyZXNpemFibGUuZ2V0KCdwaW5uZWQnKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRyaWdnZXJzIHRoZSBlbmQgb2YgYSByZXNpemUgZXZlbnQsICBhdHRhY2hlZCB0byBkb2N1bWVudC5ib2R5IG1vdXNldXAgZXZlbnQuXHJcbiAgICAgICAgICogUmVtb3ZlcyBuby1zZWxlY3Rpb24gY2xhc3MgZnJvbSBkb2N1bWVudC5ib2R5LCBhbGxvd2luZyBzZWxlY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZW5kUmVzaXplKCkge1xyXG4gICAgICAgICAgICBpZiAocmVzaXphYmxlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSByZXNpemFibGU7XHJcbiAgICAgICAgICAgICAgICByZXNpemFibGUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoZG9jdW1lbnQuYm9keSwgY2xhc3Nlcy5ub1NlbGVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyhpbnN0YW5jZS5lbGVtZW50cy5kaWFsb2csIGNsYXNzZXMuY2FwdHVyZSk7XHJcbiAgICAgICAgICAgICAgICBjYW5jZWxDbGljayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvLyBhbGxvdyBjdXN0b20gYG9ucmVzaXplZGAgbWV0aG9kXHJcbiAgICAgICAgICAgICAgICBkaXNwYXRjaEV2ZW50KCdvbnJlc2l6ZWQnLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlc2V0cyBhbnkgY2hhbmdlcyBtYWRlIGJ5IHJlc2l6aW5nIHRoZSBlbGVtZW50IHRvIGl0cyBvcmlnaW5hbCBzdGF0ZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0YW5jZSBUaGUgZGlsb2cgaW5zdGFuY2UuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzZXRSZXNpemUoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgcmVzaXphYmxlID0gbnVsbDtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBpbnN0YW5jZS5lbGVtZW50cy5kaWFsb2c7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50LnN0eWxlLm1heFdpZHRoID09PSAnbm9uZScpIHtcclxuICAgICAgICAgICAgICAgIC8vY2xlYXIgaW5saW5lIHN0eWxlcy5cclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubWF4V2lkdGggPSBlbGVtZW50LnN0eWxlLm1pbldpZHRoID0gZWxlbWVudC5zdHlsZS53aWR0aCA9IGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gZWxlbWVudC5zdHlsZS5taW5IZWlnaHQgPSBlbGVtZW50LnN0eWxlLmxlZnQgPSAnJztcclxuICAgICAgICAgICAgICAgIC8vcmVzZXQgdmFyaWFibGVzLlxyXG4gICAgICAgICAgICAgICAgc3RhcnRpbmdMZWZ0ID0gTnVtYmVyLk5hbjtcclxuICAgICAgICAgICAgICAgIHN0YXJ0aW5nV2lkdGggPSBtaW5XaWR0aCA9IGhhbmRsZU9mZnNldCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVcGRhdGVzIHRoZSBkaWFsb2cgbW92ZSBiZWhhdmlvci5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0YW5jZSBUaGUgZGlsb2cgaW5zdGFuY2UuXHJcbiAgICAgICAgICogQHBhcmFtIHtCb29sZWFufSBvbiBUcnVlIHRvIGFkZCB0aGUgYmVoYXZpb3IsIHJlbW92ZXMgaXQgb3RoZXJ3aXNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVJlc2l6YWJsZShpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBpZiAoaW5zdGFuY2UuZ2V0KCdyZXNpemFibGUnKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gYWRkIGNsYXNzXHJcbiAgICAgICAgICAgICAgICBhZGRDbGFzcyhpbnN0YW5jZS5lbGVtZW50cy5yb290LCBjbGFzc2VzLnJlc2l6YWJsZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UuaXNPcGVuKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBiaW5kUmVzaXphYmxlRXZlbnRzKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vcmVzZXRcclxuICAgICAgICAgICAgICAgIHJlc2V0UmVzaXplKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBjbGFzc1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoaW5zdGFuY2UuZWxlbWVudHMucm9vdCwgY2xhc3Nlcy5yZXNpemFibGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlLmlzT3BlbigpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5iaW5kUmVzaXphYmxlRXZlbnRzKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVzZXQgbW92ZS9yZXNpemUgb24gd2luZG93IHJlc2l6ZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XHR3aW5kb3cgcmVzaXplIGV2ZW50IG9iamVjdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiB3aW5kb3dSZXNpemUoLypldmVudCovKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgb3BlbkRpYWxvZ3MubGVuZ3RoOyB4ICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IG9wZW5EaWFsb2dzW3hdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlLmdldCgnYXV0b1Jlc2V0JykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNldE1vdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc2V0UmVzaXplKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBCaW5kIGRpYWxvZ3MgZXZlbnRzXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2UgVGhlIGRpbG9nIGluc3RhbmNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGJpbmRFdmVudHMoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgLy8gaWYgZmlyc3QgZGlhbG9nLCBob29rIGdsb2JhbCBoYW5kbGVyc1xyXG4gICAgICAgICAgICBpZiAob3BlbkRpYWxvZ3MubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAvL2dsb2JhbFxyXG4gICAgICAgICAgICAgICAgb24od2luZG93LCAncmVzaXplJywgd2luZG93UmVzaXplKTtcclxuICAgICAgICAgICAgICAgIG9uKGRvY3VtZW50LmJvZHksICdrZXl1cCcsIGtleXVwSGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICBvbihkb2N1bWVudC5ib2R5LCAna2V5ZG93bicsIGtleWRvd25IYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgIG9uKGRvY3VtZW50LmJvZHksICdmb2N1cycsIG9uUmVzZXQpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vbW92ZVxyXG4gICAgICAgICAgICAgICAgb24oZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCAnbW91c2Vtb3ZlJywgbW92ZSk7XHJcbiAgICAgICAgICAgICAgICBvbihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsICd0b3VjaG1vdmUnLCBtb3ZlKTtcclxuICAgICAgICAgICAgICAgIG9uKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgJ21vdXNldXAnLCBlbmRNb3ZlKTtcclxuICAgICAgICAgICAgICAgIG9uKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgJ3RvdWNoZW5kJywgZW5kTW92ZSk7XHJcbiAgICAgICAgICAgICAgICAvL3Jlc2l6ZVxyXG4gICAgICAgICAgICAgICAgb24oZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCAnbW91c2Vtb3ZlJywgcmVzaXplKTtcclxuICAgICAgICAgICAgICAgIG9uKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgJ3RvdWNobW92ZScsIHJlc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICBvbihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsICdtb3VzZXVwJywgZW5kUmVzaXplKTtcclxuICAgICAgICAgICAgICAgIG9uKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgJ3RvdWNoZW5kJywgZW5kUmVzaXplKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gY29tbW9uIGV2ZW50c1xyXG4gICAgICAgICAgICBvbihpbnN0YW5jZS5lbGVtZW50cy5jb21tYW5kcy5jb250YWluZXIsICdjbGljaycsIGluc3RhbmNlLl9faW50ZXJuYWwuY29tbWFuZHNDbGlja0hhbmRsZXIpO1xyXG4gICAgICAgICAgICBvbihpbnN0YW5jZS5lbGVtZW50cy5mb290ZXIsICdjbGljaycsIGluc3RhbmNlLl9faW50ZXJuYWwuYnV0dG9uc0NsaWNrSGFuZGxlcik7XHJcbiAgICAgICAgICAgIG9uKGluc3RhbmNlLmVsZW1lbnRzLnJlc2V0WzBdLCAnZm9jdXMnLCBpbnN0YW5jZS5fX2ludGVybmFsLnJlc2V0SGFuZGxlcik7XHJcbiAgICAgICAgICAgIG9uKGluc3RhbmNlLmVsZW1lbnRzLnJlc2V0WzFdLCAnZm9jdXMnLCBpbnN0YW5jZS5fX2ludGVybmFsLnJlc2V0SGFuZGxlcik7XHJcblxyXG4gICAgICAgICAgICAvL3ByZXZlbnQgaGFuZGxpbmcga2V5IHVwIHdoZW4gZGlhbG9nIGlzIGJlaW5nIG9wZW5lZCBieSBhIGtleSBzdHJva2UuXHJcbiAgICAgICAgICAgIGNhbmNlbEtleXVwID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy8gaG9vayBpbiB0cmFuc2l0aW9uIGhhbmRsZXJcclxuICAgICAgICAgICAgb24oaW5zdGFuY2UuZWxlbWVudHMuZGlhbG9nLCB0cmFuc2l0aW9uLnR5cGUsIGluc3RhbmNlLl9faW50ZXJuYWwudHJhbnNpdGlvbkluSGFuZGxlcik7XHJcblxyXG4gICAgICAgICAgICAvLyBtb2RlbHNzIG9ubHkgZXZlbnRzXHJcbiAgICAgICAgICAgIGlmICghaW5zdGFuY2UuZ2V0KCdtb2RhbCcpKSB7XHJcbiAgICAgICAgICAgICAgICBiaW5kTW9kZWxlc3NFdmVudHMoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyByZXNpemFibGVcclxuICAgICAgICAgICAgaWYgKGluc3RhbmNlLmdldCgncmVzaXphYmxlJykpIHtcclxuICAgICAgICAgICAgICAgIGJpbmRSZXNpemFibGVFdmVudHMoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBtb3ZhYmxlXHJcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZS5nZXQoJ21vdmFibGUnKSkge1xyXG4gICAgICAgICAgICAgICAgYmluZE1vdmFibGVFdmVudHMoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVbmJpbmQgZGlhbG9ncyBldmVudHNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0YW5jZSBUaGUgZGlsb2cgaW5zdGFuY2UuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gdW5iaW5kRXZlbnRzKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIC8vIGlmIGxhc3QgZGlhbG9nLCByZW1vdmUgZ2xvYmFsIGhhbmRsZXJzXHJcbiAgICAgICAgICAgIGlmIChvcGVuRGlhbG9ncy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIC8vZ2xvYmFsXHJcbiAgICAgICAgICAgICAgICBvZmYod2luZG93LCAncmVzaXplJywgd2luZG93UmVzaXplKTtcclxuICAgICAgICAgICAgICAgIG9mZihkb2N1bWVudC5ib2R5LCAna2V5dXAnLCBrZXl1cEhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgb2ZmKGRvY3VtZW50LmJvZHksICdrZXlkb3duJywga2V5ZG93bkhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgb2ZmKGRvY3VtZW50LmJvZHksICdmb2N1cycsIG9uUmVzZXQpO1xyXG4gICAgICAgICAgICAgICAgLy9tb3ZlXHJcbiAgICAgICAgICAgICAgICBvZmYoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCAnbW91c2Vtb3ZlJywgbW92ZSk7XHJcbiAgICAgICAgICAgICAgICBvZmYoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCAnbW91c2V1cCcsIGVuZE1vdmUpO1xyXG4gICAgICAgICAgICAgICAgLy9yZXNpemVcclxuICAgICAgICAgICAgICAgIG9mZihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsICdtb3VzZW1vdmUnLCByZXNpemUpO1xyXG4gICAgICAgICAgICAgICAgb2ZmKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgJ21vdXNldXAnLCBlbmRSZXNpemUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBjb21tb24gZXZlbnRzXHJcbiAgICAgICAgICAgIG9mZihpbnN0YW5jZS5lbGVtZW50cy5jb21tYW5kcy5jb250YWluZXIsICdjbGljaycsIGluc3RhbmNlLl9faW50ZXJuYWwuY29tbWFuZHNDbGlja0hhbmRsZXIpO1xyXG4gICAgICAgICAgICBvZmYoaW5zdGFuY2UuZWxlbWVudHMuZm9vdGVyLCAnY2xpY2snLCBpbnN0YW5jZS5fX2ludGVybmFsLmJ1dHRvbnNDbGlja0hhbmRsZXIpO1xyXG4gICAgICAgICAgICBvZmYoaW5zdGFuY2UuZWxlbWVudHMucmVzZXRbMF0sICdmb2N1cycsIGluc3RhbmNlLl9faW50ZXJuYWwucmVzZXRIYW5kbGVyKTtcclxuICAgICAgICAgICAgb2ZmKGluc3RhbmNlLmVsZW1lbnRzLnJlc2V0WzFdLCAnZm9jdXMnLCBpbnN0YW5jZS5fX2ludGVybmFsLnJlc2V0SGFuZGxlcik7XHJcblxyXG4gICAgICAgICAgICAvLyBob29rIG91dCB0cmFuc2l0aW9uIGhhbmRsZXJcclxuICAgICAgICAgICAgb24oaW5zdGFuY2UuZWxlbWVudHMuZGlhbG9nLCB0cmFuc2l0aW9uLnR5cGUsIGluc3RhbmNlLl9faW50ZXJuYWwudHJhbnNpdGlvbk91dEhhbmRsZXIpO1xyXG5cclxuICAgICAgICAgICAgLy8gbW9kZWxzcyBvbmx5IGV2ZW50c1xyXG4gICAgICAgICAgICBpZiAoIWluc3RhbmNlLmdldCgnbW9kYWwnKSkge1xyXG4gICAgICAgICAgICAgICAgdW5iaW5kTW9kZWxlc3NFdmVudHMoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBtb3ZhYmxlXHJcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZS5nZXQoJ21vdmFibGUnKSkge1xyXG4gICAgICAgICAgICAgICAgdW5iaW5kTW92YWJsZUV2ZW50cyhpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHJlc2l6YWJsZVxyXG4gICAgICAgICAgICBpZiAoaW5zdGFuY2UuZ2V0KCdyZXNpemFibGUnKSkge1xyXG4gICAgICAgICAgICAgICAgdW5iaW5kUmVzaXphYmxlRXZlbnRzKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEJpbmQgbW9kZWxlc3Mgc3BlY2lmaWMgZXZlbnRzXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2UgVGhlIGRpbG9nIGluc3RhbmNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGJpbmRNb2RlbGVzc0V2ZW50cyhpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBvbihpbnN0YW5jZS5lbGVtZW50cy5kaWFsb2csICdmb2N1cycsIGluc3RhbmNlLl9faW50ZXJuYWwuYnJpbmdUb0Zyb250SGFuZGxlciwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVbmJpbmQgbW9kZWxlc3Mgc3BlY2lmaWMgZXZlbnRzXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2UgVGhlIGRpbG9nIGluc3RhbmNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHVuYmluZE1vZGVsZXNzRXZlbnRzKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIG9mZihpbnN0YW5jZS5lbGVtZW50cy5kaWFsb2csICdmb2N1cycsIGluc3RhbmNlLl9faW50ZXJuYWwuYnJpbmdUb0Zyb250SGFuZGxlciwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEJpbmQgbW92YWJsZSBzcGVjaWZpYyBldmVudHNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0YW5jZSBUaGUgZGlsb2cgaW5zdGFuY2UuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gYmluZE1vdmFibGVFdmVudHMoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgb24oaW5zdGFuY2UuZWxlbWVudHMuaGVhZGVyLCAnbW91c2Vkb3duJywgaW5zdGFuY2UuX19pbnRlcm5hbC5iZWdpbk1vdmVIYW5kbGVyKTtcclxuICAgICAgICAgICAgb24oaW5zdGFuY2UuZWxlbWVudHMuaGVhZGVyLCAndG91Y2hzdGFydCcsIGluc3RhbmNlLl9faW50ZXJuYWwuYmVnaW5Nb3ZlSGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVbmJpbmQgbW92YWJsZSBzcGVjaWZpYyBldmVudHNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0YW5jZSBUaGUgZGlsb2cgaW5zdGFuY2UuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gdW5iaW5kTW92YWJsZUV2ZW50cyhpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBvZmYoaW5zdGFuY2UuZWxlbWVudHMuaGVhZGVyLCAnbW91c2Vkb3duJywgaW5zdGFuY2UuX19pbnRlcm5hbC5iZWdpbk1vdmVIYW5kbGVyKTtcclxuICAgICAgICAgICAgb2ZmKGluc3RhbmNlLmVsZW1lbnRzLmhlYWRlciwgJ3RvdWNoc3RhcnQnLCBpbnN0YW5jZS5fX2ludGVybmFsLmJlZ2luTW92ZUhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBCaW5kIHJlc2l6YWJsZSBzcGVjaWZpYyBldmVudHNcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0YW5jZSBUaGUgZGlsb2cgaW5zdGFuY2UuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gYmluZFJlc2l6YWJsZUV2ZW50cyhpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBvbihpbnN0YW5jZS5lbGVtZW50cy5yZXNpemVIYW5kbGUsICdtb3VzZWRvd24nLCBpbnN0YW5jZS5fX2ludGVybmFsLmJlZ2luUmVzaXplSGFuZGxlcik7XHJcbiAgICAgICAgICAgIG9uKGluc3RhbmNlLmVsZW1lbnRzLnJlc2l6ZUhhbmRsZSwgJ3RvdWNoc3RhcnQnLCBpbnN0YW5jZS5fX2ludGVybmFsLmJlZ2luUmVzaXplSGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVbmJpbmQgcmVzaXphYmxlIHNwZWNpZmljIGV2ZW50c1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGluc3RhbmNlIFRoZSBkaWxvZyBpbnN0YW5jZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiB1bmJpbmRSZXNpemFibGVFdmVudHMoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgb2ZmKGluc3RhbmNlLmVsZW1lbnRzLnJlc2l6ZUhhbmRsZSwgJ21vdXNlZG93bicsIGluc3RhbmNlLl9faW50ZXJuYWwuYmVnaW5SZXNpemVIYW5kbGVyKTtcclxuICAgICAgICAgICAgb2ZmKGluc3RhbmNlLmVsZW1lbnRzLnJlc2l6ZUhhbmRsZSwgJ3RvdWNoc3RhcnQnLCBpbnN0YW5jZS5fX2ludGVybmFsLmJlZ2luUmVzaXplSGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBCaW5kIGNsb3NhYmxlIGV2ZW50c1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGluc3RhbmNlIFRoZSBkaWxvZyBpbnN0YW5jZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBiaW5kQ2xvc2FibGVFdmVudHMoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgb24oaW5zdGFuY2UuZWxlbWVudHMubW9kYWwsICdjbGljaycsIGluc3RhbmNlLl9faW50ZXJuYWwubW9kYWxDbGlja0hhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVW5iaW5kIGNsb3NhYmxlIHNwZWNpZmljIGV2ZW50c1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGluc3RhbmNlIFRoZSBkaWxvZyBpbnN0YW5jZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiB1bmJpbmRDbG9zYWJsZUV2ZW50cyhpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBvZmYoaW5zdGFuY2UuZWxlbWVudHMubW9kYWwsICdjbGljaycsIGluc3RhbmNlLl9faW50ZXJuYWwubW9kYWxDbGlja0hhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBkaWFsb2cgQVBJXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgX19pbml0OmluaXRpYWxpemUsXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDaGVjayBpZiBkaWFsb2cgaXMgY3VycmVudGx5IG9wZW5cclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn1cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGlzT3BlbjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19pbnRlcm5hbC5pc09wZW47XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGlzTW9kYWw6IGZ1bmN0aW9uICgpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudHMucm9vdC5jbGFzc05hbWUuaW5kZXhPZihjbGFzc2VzLm1vZGVsZXNzKSA8IDA7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGlzTWF4aW1pemVkOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50cy5yb290LmNsYXNzTmFtZS5pbmRleE9mKGNsYXNzZXMubWF4aW1pemVkKSA+IC0xO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBpc1Bpbm5lZDpmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudHMucm9vdC5jbGFzc05hbWUuaW5kZXhPZihjbGFzc2VzLnVucGlubmVkKSA8IDA7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1heGltaXplOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBpZighdGhpcy5pc01heGltaXplZCgpKXtcclxuICAgICAgICAgICAgICAgICAgICBtYXhpbWl6ZSh0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByZXN0b3JlOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLmlzTWF4aW1pemVkKCkpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3RvcmUodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcGluOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBpZighdGhpcy5pc1Bpbm5lZCgpKXtcclxuICAgICAgICAgICAgICAgICAgICBwaW4odGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdW5waW46ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuaXNQaW5uZWQoKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5waW4odGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYnJpbmdUb0Zyb250OmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBicmluZ1RvRnJvbnQobnVsbCwgdGhpcyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIE1vdmUgdGhlIGRpYWxvZyB0byBhIHNwZWNpZmljIHgveSBjb29yZGluYXRlc1xyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0geCAgICBUaGUgbmV3IGRpYWxvZyB4IGNvb3JkaW5hdGUgaW4gcGl4ZWxzLlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0geSAgICBUaGUgbmV3IGRpYWxvZyB5IGNvb3JkaW5hdGUgaW4gcGl4ZWxzLlxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBkaWFsb2cgaW5zdGFuY2UuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBtb3ZlVG86ZnVuY3Rpb24oeCx5KXtcclxuICAgICAgICAgICAgICAgIGlmKCFpc05hTih4KSAmJiAhaXNOYU4oeSkpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFsbG93IGN1c3RvbSBgb25tb3ZlYCBtZXRob2RcclxuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaEV2ZW50KCdvbm1vdmUnLCB0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuZWxlbWVudHMuZGlhbG9nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gZWxlbWVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0TGVmdCA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFRvcCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy9zdWJ0cmFjdCBleGlzdGluZyBsZWZ0LHRvcFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnN0eWxlLmxlZnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0TGVmdCAtPSBwYXJzZUludChlbGVtZW50LnN0eWxlLmxlZnQsIDEwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuc3R5bGUudG9wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFRvcCAtPSBwYXJzZUludChlbGVtZW50LnN0eWxlLnRvcCwgMTApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvL2NhbGMgb2Zmc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRMZWZ0ICs9IGN1cnJlbnQub2Zmc2V0TGVmdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0VG9wICs9IGN1cnJlbnQub2Zmc2V0VG9wO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKGN1cnJlbnQgPSBjdXJyZW50Lm9mZnNldFBhcmVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vY2FsYyBsZWZ0LCB0b3BcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGVmdCA9ICh4IC0gb2Zmc2V0TGVmdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvcCAgPSAoeSAtIG9mZnNldFRvcCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vLy8gcnRsIGhhbmRsaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzUmlnaHRUb0xlZnQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0ICo9IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5sZWZ0ID0gbGVmdCArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50b3AgPSB0b3AgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFsbG93IGN1c3RvbSBgb25tb3ZlZGAgbWV0aG9kXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2hFdmVudCgnb25tb3ZlZCcsIHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBSZXNpemUgdGhlIGRpYWxvZyB0byBhIHNwZWNpZmljIHdpZHRoL2hlaWdodCAodGhlIGRpYWxvZyBtdXN0IGJlICdyZXNpemFibGUnKS5cclxuICAgICAgICAgICAgICogVGhlIGRpYWxvZyBjYW4gYmUgcmVzaXplZCB0bzpcclxuICAgICAgICAgICAgICogIEEgbWluaW11bSB3aWR0aCBlcXVhbCB0byB0aGUgaW5pdGlhbCBkaXNwbGF5IHdpZHRoXHJcbiAgICAgICAgICAgICAqICBBIG1pbmltdW0gaGVpZ2h0IGVxdWFsIHRvIHRoZSBzdW0gb2YgaGVhZGVyL2Zvb3RlciBoZWlnaHRzLlxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlciBvciBTdHJpbmd9IHdpZHRoICAgIFRoZSBuZXcgZGlhbG9nIHdpZHRoIGluIHBpeGVscyBvciBpbiBwZXJjZW50LlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlciBvciBTdHJpbmd9IGhlaWdodCAgIFRoZSBuZXcgZGlhbG9nIGhlaWdodCBpbiBwaXhlbHMgb3IgaW4gcGVyY2VudC5cclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQHJldHVybiB7T2JqZWN0fSBUaGUgZGlhbG9nIGluc3RhbmNlLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgcmVzaXplVG86ZnVuY3Rpb24od2lkdGgsaGVpZ2h0KXtcclxuICAgICAgICAgICAgICAgIHZhciB3ID0gcGFyc2VGbG9hdCh3aWR0aCksXHJcbiAgICAgICAgICAgICAgICAgICAgaCA9IHBhcnNlRmxvYXQoaGVpZ2h0KSxcclxuICAgICAgICAgICAgICAgICAgICByZWdleCA9IC8oXFxkKlxcLlxcZCt8XFxkKyklL1xyXG4gICAgICAgICAgICAgICAgO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCFpc05hTih3KSAmJiAhaXNOYU4oaCkgJiYgdGhpcy5nZXQoJ3Jlc2l6YWJsZScpID09PSB0cnVlKXtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBhbGxvdyBjdXN0b20gYG9ucmVzaXplYCBtZXRob2RcclxuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaEV2ZW50KCdvbnJlc2l6ZScsIHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCgnJyArIHdpZHRoKS5tYXRjaChyZWdleCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3ID0gdyAvIDEwMCAqIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZigoJycgKyBoZWlnaHQpLm1hdGNoKHJlZ2V4KSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGggPSBoIC8gMTAwICogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5lbGVtZW50cy5kaWFsb2c7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuc3R5bGUubWF4V2lkdGggIT09ICdub25lJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLm1pbldpZHRoID0gKG1pbldpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aCkgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLm1heFdpZHRoID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubWluSGVpZ2h0ID0gdGhpcy5lbGVtZW50cy5oZWFkZXIub2Zmc2V0SGVpZ2h0ICsgdGhpcy5lbGVtZW50cy5mb290ZXIub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gdyArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBoICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBhbGxvdyBjdXN0b20gYG9ucmVzaXplZGAgbWV0aG9kXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2hFdmVudCgnb25yZXNpemVkJywgdGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEdldHMgb3IgU2V0cyBkaWFsb2cgc2V0dGluZ3Mvb3B0aW9ucyBcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBrZXkgQSBzdHJpbmcgc3BlY2lmeWluZyBhIHByb3BlcnkgbmFtZSBvciBhIGNvbGxlY3Rpb24gb2Yga2V5L3ZhbHVlIHBhaXJzLlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsdWUgT3B0aW9uYWwsIHRoZSB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggdGhlIGtleSAoaW4gY2FzZSBpdCB3YXMgYSBzdHJpbmcpLlxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBzZXR0aW5nIDogZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB1cGRhdGUodGhpcywgdGhpcy5fX2ludGVybmFsLm9wdGlvbnMsIGZ1bmN0aW9uKGssbyxuKXsgb3B0aW9uVXBkYXRlZChzZWxmLGssbyxuKTsgfSwga2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHQub3AgPT09ICdnZXQnKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuZm91bmQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKHR5cGVvZiB0aGlzLnNldHRpbmdzICE9PSAndW5kZWZpbmVkJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGUodGhpcywgdGhpcy5zZXR0aW5ncywgdGhpcy5zZXR0aW5nVXBkYXRlZCB8fCBmdW5jdGlvbigpe30sIGtleSwgdmFsdWUpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKHJlc3VsdC5vcCA9PT0gJ3NldCcpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5pdGVtcy5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gdGhpcy5zZXR0aW5nVXBkYXRlZCB8fCBmdW5jdGlvbigpe307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgeD0wO3g8cmVzdWx0Lml0ZW1zLmxlbmd0aDt4Kz0xKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gcmVzdWx0Lml0ZW1zW3hdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWl0ZW0uZm91bmQgJiYgdHlwZW9mIHRoaXMuc2V0dGluZ3MgIT09ICd1bmRlZmluZWQnKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGUodGhpcywgdGhpcy5zZXR0aW5ncywgY2FsbGJhY2ssIGl0ZW0ua2V5LCBpdGVtLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFtBbGlhc10gU2V0cyBkaWFsb2cgc2V0dGluZ3Mvb3B0aW9ucyBcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHNldDpmdW5jdGlvbihrZXksIHZhbHVlKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZyhrZXksdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBbQWxpYXNdIEdldHMgZGlhbG9nIHNldHRpbmdzL29wdGlvbnMgXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBnZXQ6ZnVuY3Rpb24oa2V5KXtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldHRpbmcoa2V5KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICogU2V0cyBkaWFsb2cgaGVhZGVyXHJcbiAgICAgICAgICAgICogQGNvbnRlbnQge3N0cmluZyBvciBlbGVtZW50fVxyXG4gICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBzZXRIZWFkZXI6ZnVuY3Rpb24oY29udGVudCl7XHJcbiAgICAgICAgICAgICAgICBpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyQ29udGVudHModGhpcy5lbGVtZW50cy5oZWFkZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHMuaGVhZGVyLmlubmVySFRNTCA9IGNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZiAoY29udGVudCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MRWxlbWVudCAmJiB0aGlzLmVsZW1lbnRzLmhlYWRlci5maXJzdENoaWxkICE9PSBjb250ZW50KXtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhckNvbnRlbnRzKHRoaXMuZWxlbWVudHMuaGVhZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRzLmhlYWRlci5hcHBlbmRDaGlsZChjb250ZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgKiBTZXRzIGRpYWxvZyBjb250ZW50c1xyXG4gICAgICAgICAgICAqIEBjb250ZW50IHtzdHJpbmcgb3IgZWxlbWVudH1cclxuICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgc2V0Q29udGVudDpmdW5jdGlvbihjb250ZW50KXtcclxuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJDb250ZW50cyh0aGlzLmVsZW1lbnRzLmNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHMuY29udGVudC5pbm5lckhUTUwgPSBjb250ZW50O1xyXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYgKGNvbnRlbnQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTEVsZW1lbnQgJiYgdGhpcy5lbGVtZW50cy5jb250ZW50LmZpcnN0Q2hpbGQgIT09IGNvbnRlbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyQ29udGVudHModGhpcy5lbGVtZW50cy5jb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRzLmNvbnRlbnQuYXBwZW5kQ2hpbGQoY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFNob3cgdGhlIGRpYWxvZyBhcyBtb2RhbFxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHRoZSBkaWFsb2cgaW5zdGFuY2UuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBzaG93TW9kYWw6IGZ1bmN0aW9uKGNsYXNzTmFtZSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zaG93KHRydWUsIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBTaG93IHRoZSBkaWFsb2dcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQHJldHVybiB7T2JqZWN0fSB0aGUgZGlhbG9nIGluc3RhbmNlLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgc2hvdzogZnVuY3Rpb24gKG1vZGFsLCBjbGFzc05hbWUpIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gZW5zdXJlIGluaXRpYWxpemF0aW9uXHJcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggIXRoaXMuX19pbnRlcm5hbC5pc09wZW4gKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCB0byBvcGVuIGRpYWxvZ3NcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9faW50ZXJuYWwuaXNPcGVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBvcGVuRGlhbG9ncy5wdXNoKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBzYXZlIGxhc3QgZm9jdXNlZCBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYWxlcnRpZnkuZGVmYXVsdHMubWFpbnRhaW5Gb2N1cyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX19pbnRlcm5hbC5hY3RpdmVFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vYWxsb3cgY3VzdG9tIGRvbSBtYW5pcHVsYXRpb24gdXBkYXRlcyBiZWZvcmUgc2hvd2luZyB0aGUgZGlhbG9nLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiB0aGlzLnByZXBhcmUgPT09ICdmdW5jdGlvbicpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXBhcmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJpbmRFdmVudHModGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKG1vZGFsICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldCgnbW9kYWwnLCBtb2RhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL3NhdmUgc2Nyb2xsIHRvIHByZXZlbnQgZG9jdW1lbnQganVtcFxyXG4gICAgICAgICAgICAgICAgICAgIHNhdmVTY3JvbGxQb3NpdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBlbnN1cmVOb092ZXJmbG93KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFsbG93IGN1c3RvbSBkaWFsb2cgY2xhc3Mgb24gc2hvd1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBjbGFzc05hbWUgPT09ICdzdHJpbmcnICYmIGNsYXNzTmFtZSAhPT0gJycpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9faW50ZXJuYWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRDbGFzcyh0aGlzLmVsZW1lbnRzLnJvb3QsIGNsYXNzTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBtYXhpbWl6ZSBpZiBzdGFydCBtYXhpbWl6ZWRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaXMuZ2V0KCdzdGFydE1heGltaXplZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF4aW1pemUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZih0aGlzLmlzTWF4aW1pemVkKCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN0b3JlKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQWJzUG9zaXRpb25GaXgodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZWxlbWVudHMucm9vdCwgY2xhc3Nlcy5hbmltYXRpb25PdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZENsYXNzKHRoaXMuZWxlbWVudHMucm9vdCwgY2xhc3Nlcy5hbmltYXRpb25Jbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNldCAxcyBmYWxsYmFjayBpbiBjYXNlIHRyYW5zaXRpb24gZXZlbnQgZG9lc24ndCBmaXJlXHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KCB0aGlzLl9faW50ZXJuYWwudGltZXJJbik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX2ludGVybmFsLnRpbWVySW4gPSBzZXRUaW1lb3V0KCB0aGlzLl9faW50ZXJuYWwudHJhbnNpdGlvbkluSGFuZGxlciwgdHJhbnNpdGlvbi5zdXBwb3J0ZWQgPyAxMDAwIDogMTAwICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGlzU2FmYXJpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9yY2UgZGVza3RvcCBzYWZhcmkgcmVmbG93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByb290ID0gdGhpcy5lbGVtZW50cy5yb290O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb290LnN0eWxlLmRpc3BsYXkgID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cm9vdC5zdHlsZS5kaXNwbGF5ICA9ICdibG9jayc7fSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL3JlZmxvd1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZmxvdyA9IHRoaXMuZWxlbWVudHMucm9vdC5vZmZzZXRXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2hvdyBkaWFsb2dcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyh0aGlzLmVsZW1lbnRzLnJvb3QsIGNsYXNzZXMuaGlkZGVuKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaW50ZXJuYWwgb24gc2hvdyBldmVudFxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiB0aGlzLmhvb2tzLm9uc2hvdyA9PT0gJ2Z1bmN0aW9uJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaG9va3Mub25zaG93LmNhbGwodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBhbGxvdyBjdXN0b20gYG9uc2hvd2AgbWV0aG9kXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2hFdmVudCgnb25zaG93JywgdGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgbW92ZSB1cGRhdGVzXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzZXRNb3ZlKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IHJlc2l6ZSB1cGRhdGVzXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzZXRSZXNpemUodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2hha2UgdGhlIGRpYWxvZyB0byBpbmRpY2F0ZSBpdHMgYWxyZWFkeSBvcGVuXHJcbiAgICAgICAgICAgICAgICAgICAgYWRkQ2xhc3ModGhpcy5lbGVtZW50cy5kaWFsb2csIGNsYXNzZXMuc2hha2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKHNlbGYuZWxlbWVudHMuZGlhbG9nLCBjbGFzc2VzLnNoYWtlKTtcclxuICAgICAgICAgICAgICAgICAgICB9LDIwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENsb3NlIHRoZSBkaWFsb2dcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQHJldHVybiB7T2JqZWN0fSBUaGUgZGlhbG9nIGluc3RhbmNlXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBjbG9zZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX19pbnRlcm5hbC5pc09wZW4gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3VzdG9tIGBvbmNsb3NpbmdgIGV2ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZGlzcGF0Y2hFdmVudCgnb25jbG9zaW5nJywgdGhpcykgIT09IGZhbHNlKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuYmluZEV2ZW50cyh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZWxlbWVudHMucm9vdCwgY2xhc3Nlcy5hbmltYXRpb25Jbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZENsYXNzKHRoaXMuZWxlbWVudHMucm9vdCwgY2xhc3Nlcy5hbmltYXRpb25PdXQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IDFzIGZhbGxiYWNrIGluIGNhc2UgdHJhbnNpdGlvbiBldmVudCBkb2Vzbid0IGZpcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KCB0aGlzLl9faW50ZXJuYWwudGltZXJPdXQgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fX2ludGVybmFsLnRpbWVyT3V0ID0gc2V0VGltZW91dCggdGhpcy5fX2ludGVybmFsLnRyYW5zaXRpb25PdXRIYW5kbGVyLCB0cmFuc2l0aW9uLnN1cHBvcnRlZCA/IDEwMDAgOiAxMDAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGlkZSBkaWFsb2dcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkQ2xhc3ModGhpcy5lbGVtZW50cy5yb290LCBjbGFzc2VzLmhpZGRlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVmbG93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZmxvdyA9IHRoaXMuZWxlbWVudHMubW9kYWwub2Zmc2V0V2lkdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgY3VzdG9tIGRpYWxvZyBjbGFzcyBvbiBoaWRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5fX2ludGVybmFsLmNsYXNzTmFtZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5fX2ludGVybmFsLmNsYXNzTmFtZSAhPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZWxlbWVudHMucm9vdCwgdGhpcy5fX2ludGVybmFsLmNsYXNzTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGludGVybmFsIG9uIGNsb3NlIGV2ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiB0aGlzLmhvb2tzLm9uY2xvc2UgPT09ICdmdW5jdGlvbicpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ob29rcy5vbmNsb3NlLmNhbGwodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsbG93IGN1c3RvbSBgb25jbG9zZWAgbWV0aG9kXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoRXZlbnQoJ29uY2xvc2UnLCB0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVtb3ZlIGZyb20gb3BlbiBkaWFsb2dzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5EaWFsb2dzLnNwbGljZShvcGVuRGlhbG9ncy5pbmRleE9mKHRoaXMpLDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9faW50ZXJuYWwuaXNPcGVuID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnN1cmVOb092ZXJmbG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ2xvc2UgYWxsIG9wZW4gZGlhbG9ncyBleGNlcHQgdGhpcy5cclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgY2xvc2VPdGhlcnM6ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGFsZXJ0aWZ5LmNsb3NlQWxsKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEZXN0cm95cyB0aGlzIGRpYWxvZyBpbnN0YW5jZVxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBkZXN0cm95OmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fX2ludGVybmFsLmlzT3BlbiApIHtcclxuICAgICAgICAgICAgICAgICAgICAvL21hcmsgZGlhbG9nIGZvciBkZXN0cnVjdGlvbiwgdGhpcyB3aWxsIGJlIGNhbGxlZCBvbiB0cmFuaXN0aW9uT3V0IGV2ZW50LlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX19pbnRlcm5hbC5kZXN0cm95ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdHJ1Y3QodGhpcywgaW5pdGlhbGl6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAvL2Nsb3NlIHRoZSBkaWFsb2cgdG8gdW5iaW5kIGFsbCBldmVudHMuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVzdHJ1Y3QodGhpcywgaW5pdGlhbGl6ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG5cdH0gKCkgKTtcclxuICAgIHZhciBub3RpZmllciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlZmxvdyxcclxuICAgICAgICAgICAgZWxlbWVudCxcclxuICAgICAgICAgICAgb3Blbkluc3RhbmNlcyA9IFtdLFxyXG4gICAgICAgICAgICBjbGFzc2VzID0ge1xyXG4gICAgICAgICAgICAgICAgYmFzZTogJ2FsZXJ0aWZ5LW5vdGlmaWVyJyxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdhanMtbWVzc2FnZScsXHJcbiAgICAgICAgICAgICAgICB0b3A6ICdhanMtdG9wJyxcclxuICAgICAgICAgICAgICAgIHJpZ2h0OiAnYWpzLXJpZ2h0JyxcclxuICAgICAgICAgICAgICAgIGJvdHRvbTogJ2Fqcy1ib3R0b20nLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogJ2Fqcy1sZWZ0JyxcclxuICAgICAgICAgICAgICAgIGNlbnRlcjogJ2Fqcy1jZW50ZXInLFxyXG4gICAgICAgICAgICAgICAgdmlzaWJsZTogJ2Fqcy12aXNpYmxlJyxcclxuICAgICAgICAgICAgICAgIGhpZGRlbjogJ2Fqcy1oaWRkZW4nLFxyXG4gICAgICAgICAgICAgICAgY2xvc2U6ICdhanMtY2xvc2UnXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGVscGVyOiBpbml0aWFsaXplcyB0aGUgbm90aWZpZXIgaW5zdGFuY2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemUoaW5zdGFuY2UpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICghaW5zdGFuY2UuX19pbnRlcm5hbCkge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuX19pbnRlcm5hbCA9IHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWxlcnRpZnkuZGVmYXVsdHMubm90aWZpZXIucG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IGFsZXJ0aWZ5LmRlZmF1bHRzLm5vdGlmaWVyLmRlbGF5LFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnRElWJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdXBkYXRlUG9zaXRpb24oaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL2FkZCB0byBET00gdHJlZS5cclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQucGFyZW50Tm9kZSAhPT0gZG9jdW1lbnQuYm9keSkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcHVzaEluc3RhbmNlKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLl9faW50ZXJuYWwucHVzaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgb3Blbkluc3RhbmNlcy5wdXNoKGluc3RhbmNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gcG9wSW5zdGFuY2UoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgb3Blbkluc3RhbmNlcy5zcGxpY2Uob3Blbkluc3RhbmNlcy5pbmRleE9mKGluc3RhbmNlKSwgMSk7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLl9faW50ZXJuYWwucHVzaGVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhlbHBlcjogdXBkYXRlIHRoZSBub3RpZmllciBpbnN0YW5jZSBwb3NpdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlUG9zaXRpb24oaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc2VzLmJhc2U7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoaW5zdGFuY2UuX19pbnRlcm5hbC5wb3NpdGlvbikge1xyXG4gICAgICAgICAgICBjYXNlICd0b3AtcmlnaHQnOlxyXG4gICAgICAgICAgICAgICAgYWRkQ2xhc3MoZWxlbWVudCwgY2xhc3Nlcy50b3AgKyAnICcgKyBjbGFzc2VzLnJpZ2h0KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICd0b3AtbGVmdCc6XHJcbiAgICAgICAgICAgICAgICBhZGRDbGFzcyhlbGVtZW50LCBjbGFzc2VzLnRvcCArICcgJyArIGNsYXNzZXMubGVmdCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAndG9wLWNlbnRlcic6XHJcbiAgICAgICAgICAgICAgICBhZGRDbGFzcyhlbGVtZW50LCBjbGFzc2VzLnRvcCArICcgJyArIGNsYXNzZXMuY2VudGVyKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdib3R0b20tbGVmdCc6XHJcbiAgICAgICAgICAgICAgICBhZGRDbGFzcyhlbGVtZW50LCBjbGFzc2VzLmJvdHRvbSArICcgJyArIGNsYXNzZXMubGVmdCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnYm90dG9tLWNlbnRlcic6XHJcbiAgICAgICAgICAgICAgICBhZGRDbGFzcyhlbGVtZW50LCBjbGFzc2VzLmJvdHRvbSArICcgJyArIGNsYXNzZXMuY2VudGVyKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgY2FzZSAnYm90dG9tLXJpZ2h0JzpcclxuICAgICAgICAgICAgICAgIGFkZENsYXNzKGVsZW1lbnQsIGNsYXNzZXMuYm90dG9tICsgJyAnICsgY2xhc3Nlcy5yaWdodCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBjcmVhdGVzIGEgbmV3IG5vdGlmaWNhdGlvbiBtZXNzYWdlXHJcbiAgICAgICAgKlxyXG4gICAgICAgICogQHBhcmFtICB7RE9NRWxlbWVudH0gbWVzc2FnZVx0VGhlIG5vdGlmaWVyIG1lc3NhZ2UgZWxlbWVudFxyXG4gICAgICAgICogQHBhcmFtICB7TnVtYmVyfSB3YWl0ICAgVGltZSAoaW4gbXMpIHRvIHdhaXQgYmVmb3JlIHRoZSBtZXNzYWdlIGlzIGRpc21pc3NlZCwgYSB2YWx1ZSBvZiAwIG1lYW5zIGtlZXAgb3BlbiB0aWxsIGNsaWNrZWQuXHJcbiAgICAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gY2FsbGJhY2sgQSBjYWxsYmFjayBmdW5jdGlvbiB0byBiZSBpbnZva2VkIHdoZW4gdGhlIG1lc3NhZ2UgaXMgZGlzbWlzc2VkLlxyXG4gICAgICAgICpcclxuICAgICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZShkaXYsIGNhbGxiYWNrKSB7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjbGlja0RlbGVnYXRlKGV2ZW50LCBpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgaWYoIWluc3RhbmNlLl9faW50ZXJuYWwuY2xvc2VCdXR0b24gfHwgZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1jbG9zZScpID09PSAndHJ1ZScpe1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmRpc21pc3ModHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHRyYW5zaXRpb25Eb25lKGV2ZW50LCBpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gdW5iaW5kIGV2ZW50XHJcbiAgICAgICAgICAgICAgICBvZmYoaW5zdGFuY2UuZWxlbWVudCwgdHJhbnNpdGlvbi50eXBlLCB0cmFuc2l0aW9uRG9uZSk7XHJcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhlIG1lc3NhZ2VcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoaW5zdGFuY2UuZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemUoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICghaW5zdGFuY2UuX19pbnRlcm5hbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLl9faW50ZXJuYWwgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHB1c2hlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5IDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lcjogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGlja0hhbmRsZXI6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbkVuZEhhbmRsZXI6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvblRpbWVvdXQ6IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuX19pbnRlcm5hbC5jbGlja0hhbmRsZXIgPSBkZWxlZ2F0ZShpbnN0YW5jZSwgY2xpY2tEZWxlZ2F0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuX19pbnRlcm5hbC50cmFuc2l0aW9uRW5kSGFuZGxlciA9IGRlbGVnYXRlKGluc3RhbmNlLCB0cmFuc2l0aW9uRG9uZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gY2xlYXJUaW1lcnMoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChpbnN0YW5jZS5fX2ludGVybmFsLnRpbWVyKTtcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChpbnN0YW5jZS5fX2ludGVybmFsLnRyYW5zaXRpb25UaW1lb3V0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaW5pdGlhbGl6ZSh7XHJcbiAgICAgICAgICAgICAgICAvKiBub3RpZmljYXRpb24gRE9NIGVsZW1lbnQqL1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudDogZGl2LFxyXG4gICAgICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICAgICAqIFB1c2hlcyBhIG5vdGlmaWNhdGlvbiBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZyBvciBET01FbGVtZW50fSBjb250ZW50IFRoZSBub3RpZmljYXRpb24gbWVzc2FnZSBjb250ZW50XHJcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gd2FpdCBUaGUgdGltZSAoaW4gc2Vjb25kcykgdG8gd2FpdCBiZWZvcmUgdGhlIG1lc3NhZ2UgaXMgZGlzbWlzc2VkLCBhIHZhbHVlIG9mIDAgbWVhbnMga2VlcCBvcGVuIHRpbGwgY2xpY2tlZC5cclxuICAgICAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIHB1c2g6IGZ1bmN0aW9uIChfY29udGVudCwgX3dhaXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX19pbnRlcm5hbC5wdXNoZWQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHB1c2hJbnN0YW5jZSh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lcnModGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udGVudCwgd2FpdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQgPSB0aGlzLl9faW50ZXJuYWwuZGVsYXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAoX2NvbnRlbnQpID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQgPSBfY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IF9jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhaXQgPSB0aGlzLl9faW50ZXJuYWwuZGVsYXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IF9jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCA9IF93YWl0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fX2ludGVybmFsLmNsb3NlQnV0dG9uID0gYWxlcnRpZnkuZGVmYXVsdHMubm90aWZpZXIuY2xvc2VCdXR0b247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjb250ZW50c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENvbnRlbnQoY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXBwZW5kIG9yIGluc2VydFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90aWZpZXIuX19pbnRlcm5hbC5wb3NpdGlvbi5pbmRleE9mKCd0b3AnKSA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRoaXMuZWxlbWVudCwgZWxlbWVudC5maXJzdENoaWxkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWZsb3cgPSB0aGlzLmVsZW1lbnQub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZENsYXNzKHRoaXMuZWxlbWVudCwgY2xhc3Nlcy52aXNpYmxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXR0YWNoIGNsaWNrIGV2ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uKHRoaXMuZWxlbWVudCwgJ2NsaWNrJywgdGhpcy5fX2ludGVybmFsLmNsaWNrSGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlbGF5KHdhaXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgICoge0Z1bmN0aW9ufSBjYWxsYmFjayBmdW5jdGlvbiB0byBiZSBpbnZva2VkIGJlZm9yZSBkaXNtaXNzaW5nIHRoZSBub3RpZmljYXRpb24gbWVzc2FnZS5cclxuICAgICAgICAgICAgICAgICAqIFJlbWFya3M6IEEgcmV0dXJuIHZhbHVlID09PSAnZmFsc2UnIHdpbGwgY2FuY2VsIHRoZSBkaXNtaXNzYWxcclxuICAgICAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIG9uZGlzbWlzczogZnVuY3Rpb24gKCkgeyB9LFxyXG4gICAgICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICAgICAqIHtGdW5jdGlvbn0gY2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgaW52b2tlZCB3aGVuIHRoZSBtZXNzYWdlIGlzIGRpc21pc3NlZC5cclxuICAgICAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcclxuICAgICAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAgICAgKiBEaXNtaXNzZXMgdGhlIG5vdGlmaWNhdGlvbiBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGNsaWNrZWQgQSBmbGFnIGluZGljYXRpbmcgaWYgdGhlIGRpc21pc3NhbCB3YXMgY2F1c2VkIGJ5IGEgY2xpY2suXHJcbiAgICAgICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICBkaXNtaXNzOiBmdW5jdGlvbiAoY2xpY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9faW50ZXJuYWwucHVzaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZXJzKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0eXBlb2YgdGhpcy5vbmRpc21pc3MgPT09ICdmdW5jdGlvbicgJiYgdGhpcy5vbmRpc21pc3MuY2FsbCh0aGlzKSA9PT0gZmFsc2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2RldGFjaCBjbGljayBldmVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmKHRoaXMuZWxlbWVudCwgJ2NsaWNrJywgdGhpcy5fX2ludGVybmFsLmNsaWNrSGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbnN1cmUgZWxlbWVudCBleGlzdHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5lbGVtZW50ICE9PSAndW5kZWZpbmVkJyAmJiB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZSA9PT0gZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdHJhbnNpdGlvbiBlbmQgb3IgZmFsbGJhY2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9faW50ZXJuYWwudHJhbnNpdGlvblRpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMuX19pbnRlcm5hbC50cmFuc2l0aW9uRW5kSGFuZGxlciwgdHJhbnNpdGlvbi5zdXBwb3J0ZWQgPyAxMDAwIDogMTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyh0aGlzLmVsZW1lbnQsIGNsYXNzZXMudmlzaWJsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGN1c3RvbSBjYWxsYmFjayBvbiBkaXNtaXNzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsbGJhY2suY2FsbCh0aGlzLCBjbGlja2VkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3BJbnN0YW5jZSh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgICogRGVsYXlzIHRoZSBub3RpZmljYXRpb24gbWVzc2FnZSBkaXNtaXNzYWxcclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSB3YWl0IFRoZSB0aW1lIChpbiBzZWNvbmRzKSB0byB3YWl0IGJlZm9yZSB0aGUgbWVzc2FnZSBpcyBkaXNtaXNzZWQsIGEgdmFsdWUgb2YgMCBtZWFucyBrZWVwIG9wZW4gdGlsbCBjbGlja2VkLlxyXG4gICAgICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgZGVsYXk6IGZ1bmN0aW9uICh3YWl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lcnModGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX2ludGVybmFsLmRlbGF5ID0gdHlwZW9mIHdhaXQgIT09ICd1bmRlZmluZWQnICYmICFpc05hTigrd2FpdCkgPyArd2FpdCA6IG5vdGlmaWVyLl9faW50ZXJuYWwuZGVsYXk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX19pbnRlcm5hbC5kZWxheSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fX2ludGVybmFsLnRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHNlbGYuZGlzbWlzcygpOyB9LCB0aGlzLl9faW50ZXJuYWwuZGVsYXkgKiAxMDAwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICAgICAqIFNldHMgdGhlIG5vdGlmaWNhdGlvbiBtZXNzYWdlIGNvbnRlbnRzXHJcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZyBvciBET01FbGVtZW50fSBjb250ZW50IFRoZSBub3RpZmljYXRpb24gbWVzc2FnZSBjb250ZW50XHJcbiAgICAgICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICBzZXRDb250ZW50OiBmdW5jdGlvbiAoY29udGVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJDb250ZW50cyh0aGlzLmVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRlbnQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTEVsZW1lbnQgJiYgdGhpcy5lbGVtZW50LmZpcnN0Q2hpbGQgIT09IGNvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJDb250ZW50cyh0aGlzLmVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuX19pbnRlcm5hbC5jbG9zZUJ1dHRvbil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjbG9zZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkQ2xhc3MoY2xvc2UsIGNsYXNzZXMuY2xvc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtY2xvc2UnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGNsb3NlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICAgICAqIERpc21pc3NlcyBhbGwgb3BlbiBub3RpZmljYXRpb25zIGV4Y2VwdCB0aGlzLlxyXG4gICAgICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgZGlzbWlzc090aGVyczogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vdGlmaWVyLmRpc21pc3NBbGwodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9ub3RpZmllciBhcGlcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogR2V0cyBvciBTZXRzIG5vdGlmaWVyIHNldHRpbmdzLlxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBzZXR0aW5nIG5hbWVcclxuICAgICAgICAgICAgICogQHBhcmFtIHtWYXJpYW50fSB2YWx1ZSBUaGUgc2V0dGluZyB2YWx1ZS5cclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQHJldHVybiB7T2JqZWN0fVx0aWYgdGhlIGNhbGxlZCBhcyBhIHNldHRlciwgcmV0dXJuIHRoZSBub3RpZmllciBpbnN0YW5jZS5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHNldHRpbmc6IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAvL2Vuc3VyZSBpbml0XHJcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9nZXRcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fX2ludGVybmFsW2tleV07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdwb3NpdGlvbic6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX19pbnRlcm5hbC5wb3NpdGlvbiA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVQb3NpdGlvbih0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGVsYXknOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9faW50ZXJuYWwuZGVsYXkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBbQWxpYXNdIFNldHMgZGlhbG9nIHNldHRpbmdzL29wdGlvbnNcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHNldDpmdW5jdGlvbihrZXksdmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5nKGtleSx2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFtBbGlhc10gR2V0cyBkaWFsb2cgc2V0dGluZ3Mvb3B0aW9uc1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZ2V0OmZ1bmN0aW9uKGtleSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5nKGtleSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IG5vdGlmaWNhdGlvbiBtZXNzYWdlXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFRoZSB0eXBlIG9mIG5vdGlmaWNhdGlvbiBtZXNzYWdlIChzaW1wbHkgYSBDU1MgY2xhc3MgbmFtZSAnYWpzLXt0eXBlfScgdG8gYmUgYWRkZWQpLlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayAgQSBjYWxsYmFjayBmdW5jdGlvbiB0byBiZSBpbnZva2VkIHdoZW4gdGhlIG1lc3NhZ2UgaXMgZGlzbWlzc2VkLlxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAcmV0dXJuIHt1bmRlZmluZWR9XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uICh0eXBlLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgLy9lbnN1cmUgbm90aWZpZXIgaW5pdFxyXG4gICAgICAgICAgICAgICAgaW5pdGlhbGl6ZSh0aGlzKTtcclxuICAgICAgICAgICAgICAgIC8vY3JlYXRlIG5ldyBub3RpZmljYXRpb24gbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgZGl2LmNsYXNzTmFtZSA9IGNsYXNzZXMubWVzc2FnZSArICgodHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnICYmIHR5cGUgIT09ICcnKSA/ICcgYWpzLScgKyB0eXBlIDogJycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZShkaXYsIGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIERpc21pc3NlcyBhbGwgb3BlbiBub3RpZmljYXRpb25zLlxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gZXhjcGV0IFtvcHRpb25hbF0gVGhlIG5vdGlmaWNhdGlvbiBvYmplY3QgdG8gZXhjbHVkZSBmcm9tIGRpc21pc3NhbC5cclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGRpc21pc3NBbGw6IGZ1bmN0aW9uIChleGNlcHQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjbG9uZSA9IG9wZW5JbnN0YW5jZXMuc2xpY2UoMCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGNsb25lLmxlbmd0aDsgeCArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyICBpbnN0YW5jZSA9IGNsb25lW3hdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChleGNlcHQgPT09IHVuZGVmaW5lZCB8fCBleGNlcHQgIT09IGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmRpc21pc3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSkoKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFsZXJ0aWZ5IHB1YmxpYyBBUElcclxuICAgICAqIFRoaXMgY29udGFpbnMgZXZlcnl0aGluZyB0aGF0IGlzIGV4cG9zZWQgdGhyb3VnaCB0aGUgYWxlcnRpZnkgb2JqZWN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge09iamVjdH1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gQWxlcnRpZnkoKSB7XHJcblxyXG4gICAgICAgIC8vIGhvbGRzIGEgcmVmZXJlbmNlcyBvZiBjcmVhdGVkIGRpYWxvZ3NcclxuICAgICAgICB2YXIgZGlhbG9ncyA9IHt9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFeHRlbmRzIGEgZ2l2ZW4gcHJvdG90eXBlIGJ5IG1lcmdpbmcgcHJvcGVydGllcyBmcm9tIGJhc2UgaW50byBzdWIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAc3ViIHtPYmplY3R9IHN1YiBUaGUgcHJvdG90eXBlIGJlaW5nIG92ZXJ3cml0dGVuLlxyXG4gICAgICAgICAqIEBiYXNlIHtPYmplY3R9IGJhc2UgVGhlIHByb3RvdHlwZSBiZWluZyB3cml0dGVuLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7T2JqZWN0fSBUaGUgZXh0ZW5kZWQgcHJvdG90eXBlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGV4dGVuZChzdWIsIGJhc2UpIHtcclxuICAgICAgICAgICAgLy8gY29weSBkaWFsb2cgcG90b3R5cGUgb3ZlciBkZWZpbml0aW9uLlxyXG4gICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIGJhc2UpIHtcclxuICAgICAgICAgICAgICAgIGlmIChiYXNlLmhhc093blByb3BlcnR5KHByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3ViW3Byb3BdID0gYmFzZVtwcm9wXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc3ViO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogSGVscGVyOiByZXR1cm5zIGEgZGlhbG9nIGluc3RhbmNlIGZyb20gc2F2ZWQgZGlhbG9ncy5cclxuICAgICAgICAqIGFuZCBpbml0aWFsaXplcyB0aGUgZGlhbG9nIGlmIGl0cyBub3QgYWxyZWFkeSBpbml0aWFsaXplZC5cclxuICAgICAgICAqXHJcbiAgICAgICAgKiBAbmFtZSB7U3RyaW5nfSBuYW1lIFRoZSBkaWFsb2cgbmFtZS5cclxuICAgICAgICAqXHJcbiAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBkaWFsb2cgaW5zdGFuY2UuXHJcbiAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXRfZGlhbG9nKG5hbWUpIHtcclxuICAgICAgICAgICAgdmFyIGRpYWxvZyA9IGRpYWxvZ3NbbmFtZV0uZGlhbG9nO1xyXG4gICAgICAgICAgICAvL2luaXRpYWxpemUgdGhlIGRpYWxvZyBpZiBpdHMgbm90IGFscmVhZHkgaW5pdGlhbGl6ZWQuXHJcbiAgICAgICAgICAgIGlmIChkaWFsb2cgJiYgdHlwZW9mIGRpYWxvZy5fX2luaXQgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIGRpYWxvZy5fX2luaXQoZGlhbG9nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZGlhbG9nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGVscGVyOiAgcmVnaXN0ZXJzIGEgbmV3IGRpYWxvZyBkZWZpbml0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQG5hbWUge1N0cmluZ30gbmFtZSBUaGUgZGlhbG9nIG5hbWUuXHJcbiAgICAgICAgICogQEZhY3Rvcnkge0Z1bmN0aW9ufSBGYWN0b3J5IGEgZnVuY3Rpb24gcmVzcG9zaWJsZSBmb3IgY3JlYXRpbmcgZGlhbG9nIHByb3RvdHlwZS5cclxuICAgICAgICAgKiBAdHJhbnNpZW50IHtCb29sZWFufSB0cmFuc2llbnQgVHJ1ZSB0byBjcmVhdGUgYSBuZXcgZGlhbG9nIGluc3RhbmNlIGVhY2ggdGltZSB0aGUgZGlhbG9nIGlzIGludm9rZWQsIGZhbHNlIG90aGVyd2lzZS5cclxuICAgICAgICAgKiBAYmFzZSB7U3RyaW5nfSBiYXNlIHRoZSBuYW1lIG9mIGFub3RoZXIgZGlhbG9nIHRvIGluaGVyaXQgZnJvbS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge09iamVjdH0gVGhlIGRpYWxvZyBkZWZpbml0aW9uLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyKG5hbWUsIEZhY3RvcnksIHRyYW5zaWVudCwgYmFzZSkge1xyXG4gICAgICAgICAgICB2YXIgZGVmaW5pdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgIGRpYWxvZzogbnVsbCxcclxuICAgICAgICAgICAgICAgIGZhY3Rvcnk6IEZhY3RvcnlcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8vaWYgdGhpcyBpcyBiYXNlZCBvbiBhbiBleGlzdGluZyBkaWFsb2csIGNyZWF0ZSBhIG5ldyBkZWZpbml0aW9uXHJcbiAgICAgICAgICAgIC8vYnkgYXBwbHlpbmcgdGhlIG5ldyBwcm90b3lwZSBvdmVyIHRoZSBleGlzdGluZyBvbmUuXHJcbiAgICAgICAgICAgIGlmIChiYXNlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGRlZmluaXRpb24uZmFjdG9yeSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXh0ZW5kKG5ldyBkaWFsb2dzW2Jhc2VdLmZhY3RvcnkoKSwgbmV3IEZhY3RvcnkoKSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRyYW5zaWVudCkge1xyXG4gICAgICAgICAgICAgICAgLy9jcmVhdGUgYSBuZXcgZGVmaW5pdGlvbiBiYXNlZCBvbiBkaWFsb2dcclxuICAgICAgICAgICAgICAgIGRlZmluaXRpb24uZGlhbG9nID0gZXh0ZW5kKG5ldyBkZWZpbml0aW9uLmZhY3RvcnkoKSwgZGlhbG9nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZGlhbG9nc1tuYW1lXSA9IGRlZmluaXRpb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQWxlcnRpZnkgZGVmYXVsdHNcclxuICAgICAgICAgICAgICogXHJcbiAgICAgICAgICAgICAqIEB0eXBlIHtPYmplY3R9XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBkZWZhdWx0czogZGVmYXVsdHMsXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBEaWFsb2dzIGZhY3RvcnkgXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSAgICAgIERpYWxvZyBuYW1lLlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSAgICBBIERpYWxvZyBmYWN0b3J5IGZ1bmN0aW9uLlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59ICAgICBJbmRpY2F0ZXMgd2hldGhlciB0byBjcmVhdGUgYSBzaW5nbGV0b24gb3IgdHJhbnNpZW50IGRpYWxvZy5cclxuICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9ICAgICAgVGhlIG5hbWUgb2YgdGhlIGJhc2UgdHlwZSB0byBpbmhlcml0IGZyb20uXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBkaWFsb2c6IGZ1bmN0aW9uIChuYW1lLCBGYWN0b3J5LCB0cmFuc2llbnQsIGJhc2UpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBnZXQgcmVxdWVzdCwgY3JlYXRlIGEgbmV3IGluc3RhbmNlIGFuZCByZXR1cm4gaXQuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIEZhY3RvcnkgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0X2RpYWxvZyhuYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignYWxlcnRpZnkuZGlhbG9nOiBuYW1lIGFscmVhZHkgZXhpc3RzJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gcmVnaXN0ZXIgdGhlIGRpYWxvZ1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlZmluaXRpb24gPSByZWdpc3RlcihuYW1lLCBGYWN0b3J5LCB0cmFuc2llbnQsIGJhc2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0cmFuc2llbnQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBpdCBwdWJsaWNcclxuICAgICAgICAgICAgICAgICAgICB0aGlzW25hbWVdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lmIHBhc3NlZCB3aXRoIG5vIHBhcmFtcywgY29uc2lkZXIgaXQgYSBnZXQgcmVxdWVzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmluaXRpb24uZGlhbG9nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gZXh0ZW5kKG5ldyBkZWZpbml0aW9uLmZhY3RvcnkoKSwgZGlhbG9nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZW5zdXJlIGluaXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZSAmJiB0eXBlb2YgaW5zdGFuY2UuX19pbml0ID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuX19pbml0KGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlWydtYWluJ10uYXBwbHkoaW5zdGFuY2UsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5zdGFuY2VbJ3Nob3cnXS5hcHBseShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIGl0IHB1YmxpY1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNbbmFtZV0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZW5zdXJlIGluaXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlZmluaXRpb24uZGlhbG9nICYmIHR5cGVvZiBkZWZpbml0aW9uLmRpYWxvZy5fX2luaXQgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluaXRpb24uZGlhbG9nLl9faW5pdChkZWZpbml0aW9uLmRpYWxvZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiBwYXNzZWQgd2l0aCBubyBwYXJhbXMsIGNvbnNpZGVyIGl0IGEgZ2V0IHJlcXVlc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZpbml0aW9uLmRpYWxvZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaWFsb2cgPSBkZWZpbml0aW9uLmRpYWxvZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZ1snbWFpbiddLmFwcGx5KGRlZmluaXRpb24uZGlhbG9nLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRpYWxvZ1snc2hvdyddLmFwcGx5KGRlZmluaXRpb24uZGlhbG9nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDbG9zZSBhbGwgb3BlbiBkaWFsb2dzLlxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gZXhjcGV0IFtvcHRpb25hbF0gVGhlIGRpYWxvZyBvYmplY3QgdG8gZXhjbHVkZSBmcm9tIGNsb3NpbmcuXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGNsb3NlQWxsOiBmdW5jdGlvbiAoZXhjZXB0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2xvbmUgPSBvcGVuRGlhbG9ncy5zbGljZSgwKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgY2xvbmUubGVuZ3RoOyB4ICs9IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBjbG9uZVt4XTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXhjZXB0ID09PSB1bmRlZmluZWQgfHwgZXhjZXB0ICE9PSBpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEdldHMgb3IgU2V0cyBkaWFsb2cgc2V0dGluZ3Mvb3B0aW9ucy4gaWYgdGhlIGRpYWxvZyBpcyB0cmFuc2llbnQsIHRoaXMgY2FsbCBkb2VzIG5vdGhpbmcuXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBkaWFsb2cgbmFtZS5cclxuICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBrZXkgQSBzdHJpbmcgc3BlY2lmeWluZyBhIHByb3BlcnkgbmFtZSBvciBhIGNvbGxlY3Rpb24gb2Yga2V5L3ZhbHVlIHBhaXJzLlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1ZhcmlhbnR9IHZhbHVlIE9wdGlvbmFsLCB0aGUgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIHRoZSBrZXkgKGluIGNhc2UgaXQgd2FzIGEgc3RyaW5nKS5cclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgc2V0dGluZzogZnVuY3Rpb24gKG5hbWUsIGtleSwgdmFsdWUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gJ25vdGlmaWVyJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBub3RpZmllci5zZXR0aW5nKGtleSwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBkaWFsb2cgPSBnZXRfZGlhbG9nKG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpYWxvZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkaWFsb2cuc2V0dGluZyhrZXksIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFtBbGlhc10gU2V0cyBkaWFsb2cgc2V0dGluZ3Mvb3B0aW9ucyBcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24obmFtZSxrZXksdmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZyhuYW1lLCBrZXksdmFsdWUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogW0FsaWFzXSBHZXRzIGRpYWxvZyBzZXR0aW5ncy9vcHRpb25zIFxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbihuYW1lLCBrZXkpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZyhuYW1lLCBrZXkpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBub3RpZmljYXRpb24gbWVzc2FnZS5cclxuICAgICAgICAgICAgICogSWYgYSB0eXBlIGlzIHBhc3NlZCwgYSBjbGFzcyBuYW1lIFwiYWpzLXt0eXBlfVwiIHdpbGwgYmUgYWRkZWQuXHJcbiAgICAgICAgICAgICAqIFRoaXMgYWxsb3dzIGZvciBjdXN0b20gbG9vayBhbmQgZmVlbCBmb3IgdmFyaW91cyB0eXBlcyBvZiBub3RpZmljYXRpb25zLlxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtTdHJpbmcgfCBET01FbGVtZW50fSAgICBbbWVzc2FnZT11bmRlZmluZWRdXHRcdE1lc3NhZ2UgdGV4dFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgICAgICAgICAgICAgICBbdHlwZT0nJ11cdFx0XHRcdFR5cGUgb2YgbG9nIG1lc3NhZ2VcclxuICAgICAgICAgICAgICogQHBhcmFtICB7U3RyaW5nfSAgICAgICAgICAgICAgICAgW3dhaXQ9JyddXHRcdFx0XHRUaW1lIChpbiBzZWNvbmRzKSB0byB3YWl0IGJlZm9yZSBhdXRvLWNsb3NlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSAgICAgICAgICAgICAgIFtjYWxsYmFjaz11bmRlZmluZWRdXHRBIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGludm9rZWQgd2hlbiB0aGUgbG9nIGlzIGNsb3NlZC5cclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQHJldHVybiB7T2JqZWN0fSBOb3RpZmljYXRpb24gb2JqZWN0LlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgbm90aWZ5OiBmdW5jdGlvbiAobWVzc2FnZSwgdHlwZSwgd2FpdCwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBub3RpZmllci5jcmVhdGUodHlwZSwgY2FsbGJhY2spLnB1c2gobWVzc2FnZSwgd2FpdCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDcmVhdGVzIGEgbmV3IG5vdGlmaWNhdGlvbiBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtTdHJpbmd9XHRcdFttZXNzYWdlPXVuZGVmaW5lZF1cdFx0TWVzc2FnZSB0ZXh0XHJcbiAgICAgICAgICAgICAqIEBwYXJhbSAge1N0cmluZ30gICAgIFt3YWl0PScnXVx0XHRcdFx0VGltZSAoaW4gc2Vjb25kcykgdG8gd2FpdCBiZWZvcmUgYXV0by1jbG9zZVxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn1cdFtjYWxsYmFjaz11bmRlZmluZWRdXHRBIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGludm9rZWQgd2hlbiB0aGUgbG9nIGlzIGNsb3NlZC5cclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQHJldHVybiB7T2JqZWN0fSBOb3RpZmljYXRpb24gb2JqZWN0LlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgbWVzc2FnZTogZnVuY3Rpb24gKG1lc3NhZ2UsIHdhaXQsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm90aWZpZXIuY3JlYXRlKG51bGwsIGNhbGxiYWNrKS5wdXNoKG1lc3NhZ2UsIHdhaXQpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBub3RpZmljYXRpb24gbWVzc2FnZSBvZiB0eXBlICdzdWNjZXNzJy5cclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQHBhcmFtICB7U3RyaW5nfVx0XHRbbWVzc2FnZT11bmRlZmluZWRdXHRcdE1lc3NhZ2UgdGV4dFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgICBbd2FpdD0nJ11cdFx0XHRcdFRpbWUgKGluIHNlY29uZHMpIHRvIHdhaXQgYmVmb3JlIGF1dG8tY2xvc2VcclxuICAgICAgICAgICAgICogQHBhcmFtICB7RnVuY3Rpb259XHRbY2FsbGJhY2s9dW5kZWZpbmVkXVx0QSBjYWxsYmFjayBmdW5jdGlvbiB0byBiZSBpbnZva2VkIHdoZW4gdGhlIGxvZyBpcyBjbG9zZWQuXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIEByZXR1cm4ge09iamVjdH0gTm90aWZpY2F0aW9uIG9iamVjdC5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChtZXNzYWdlLCB3YWl0LCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vdGlmaWVyLmNyZWF0ZSgnc3VjY2VzcycsIGNhbGxiYWNrKS5wdXNoKG1lc3NhZ2UsIHdhaXQpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBub3RpZmljYXRpb24gbWVzc2FnZSBvZiB0eXBlICdlcnJvcicuXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSAge1N0cmluZ31cdFx0W21lc3NhZ2U9dW5kZWZpbmVkXVx0XHRNZXNzYWdlIHRleHRcclxuICAgICAgICAgICAgICogQHBhcmFtICB7U3RyaW5nfSAgICAgW3dhaXQ9JyddXHRcdFx0XHRUaW1lIChpbiBzZWNvbmRzKSB0byB3YWl0IGJlZm9yZSBhdXRvLWNsb3NlXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufVx0W2NhbGxiYWNrPXVuZGVmaW5lZF1cdEEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgaW52b2tlZCB3aGVuIHRoZSBsb2cgaXMgY2xvc2VkLlxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IE5vdGlmaWNhdGlvbiBvYmplY3QuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKG1lc3NhZ2UsIHdhaXQsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm90aWZpZXIuY3JlYXRlKCdlcnJvcicsIGNhbGxiYWNrKS5wdXNoKG1lc3NhZ2UsIHdhaXQpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ3JlYXRlcyBhIG5ldyBub3RpZmljYXRpb24gbWVzc2FnZSBvZiB0eXBlICd3YXJuaW5nJy5cclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQHBhcmFtICB7U3RyaW5nfVx0XHRbbWVzc2FnZT11bmRlZmluZWRdXHRcdE1lc3NhZ2UgdGV4dFxyXG4gICAgICAgICAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgICBbd2FpdD0nJ11cdFx0XHRcdFRpbWUgKGluIHNlY29uZHMpIHRvIHdhaXQgYmVmb3JlIGF1dG8tY2xvc2VcclxuICAgICAgICAgICAgICogQHBhcmFtICB7RnVuY3Rpb259XHRbY2FsbGJhY2s9dW5kZWZpbmVkXVx0QSBjYWxsYmFjayBmdW5jdGlvbiB0byBiZSBpbnZva2VkIHdoZW4gdGhlIGxvZyBpcyBjbG9zZWQuXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIEByZXR1cm4ge09iamVjdH0gTm90aWZpY2F0aW9uIG9iamVjdC5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHdhcm5pbmc6IGZ1bmN0aW9uIChtZXNzYWdlLCB3YWl0LCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vdGlmaWVyLmNyZWF0ZSgnd2FybmluZycsIGNhbGxiYWNrKS5wdXNoKG1lc3NhZ2UsIHdhaXQpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGlzbWlzc2VzIGFsbCBvcGVuIG5vdGlmaWNhdGlvbnNcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogQHJldHVybiB7dW5kZWZpbmVkfVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZGlzbWlzc0FsbDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgbm90aWZpZXIuZGlzbWlzc0FsbCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHZhciBhbGVydGlmeSA9IG5ldyBBbGVydGlmeSgpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgKiBBbGVydCBkaWFsb2cgZGVmaW5pdGlvblxyXG4gICAgKlxyXG4gICAgKiBpbnZva2VkIGJ5OlxyXG4gICAgKlx0YWxlcnRpZnkuYWxlcnQobWVzc2FnZSk7XHJcbiAgICAqXHRhbGVydGlmeS5hbGVydCh0aXRsZSwgbWVzc2FnZSk7XHJcbiAgICAqXHRhbGVydGlmeS5hbGVydChtZXNzYWdlLCBvbm9rKTtcclxuICAgICpcdGFsZXJ0aWZ5LmFsZXJ0KHRpdGxlLCBtZXNzYWdlLCBvbm9rKTtcclxuICAgICAqL1xyXG4gICAgYWxlcnRpZnkuZGlhbG9nKCdhbGVydCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtYWluOiBmdW5jdGlvbiAoX3RpdGxlLCBfbWVzc2FnZSwgX29ub2spIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aXRsZSwgbWVzc2FnZSwgb25vaztcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBfdGl0bGU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBfbWVzc2FnZSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gX3RpdGxlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbm9rID0gX21lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSBfdGl0bGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBfbWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSBfdGl0bGU7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IF9tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgIG9ub2sgPSBfb25vaztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0KCd0aXRsZScsIHRpdGxlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0KCdtZXNzYWdlJywgbWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldCgnb25vaycsIG9ub2spO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldHVwOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbnM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogYWxlcnRpZnkuZGVmYXVsdHMuZ2xvc3Nhcnkub2ssXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGtleXMuRVNDLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW52b2tlT25DbG9zZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogYWxlcnRpZnkuZGVmYXVsdHMudGhlbWUub2ssXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvY3VzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdDogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW1pemFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYnVpbGQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIG5vdGhpbmdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcHJlcGFyZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy9ub3RoaW5nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldE1lc3NhZ2U6IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldENvbnRlbnQobWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICBvbm9rOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICBsYWJlbDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXR0aW5nVXBkYXRlZDogZnVuY3Rpb24gKGtleSwgb2xkVmFsdWUsIG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGtleSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbWVzc2FnZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRNZXNzYWdlKG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2xhYmVsJzpcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fX2ludGVybmFsLmJ1dHRvbnNbMF0uZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9faW50ZXJuYWwuYnV0dG9uc1swXS5lbGVtZW50LmlubmVySFRNTCA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChjbG9zZUV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuZ2V0KCdvbm9rJykgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmV0dXJuVmFsdWUgPSB0aGlzLmdldCgnb25vaycpLmNhbGwodGhpcywgY2xvc2VFdmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXR1cm5WYWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VFdmVudC5jYW5jZWwgPSAhcmV0dXJuVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb25maXJtIGRpYWxvZyBvYmplY3RcclxuICAgICAqXHJcbiAgICAgKlx0YWxlcnRpZnkuY29uZmlybShtZXNzYWdlKTtcclxuICAgICAqXHRhbGVydGlmeS5jb25maXJtKG1lc3NhZ2UsIG9ub2spO1xyXG4gICAgICpcdGFsZXJ0aWZ5LmNvbmZpcm0obWVzc2FnZSwgb25vaywgb25jYW5jZWwpO1xyXG4gICAgICpcdGFsZXJ0aWZ5LmNvbmZpcm0odGl0bGUsIG1lc3NhZ2UsIG9ub2ssIG9uY2FuY2VsKTtcclxuICAgICAqL1xyXG4gICAgYWxlcnRpZnkuZGlhbG9nKCdjb25maXJtJywgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICB2YXIgYXV0b0NvbmZpcm0gPSB7XHJcbiAgICAgICAgICAgIHRpbWVyOiBudWxsLFxyXG4gICAgICAgICAgICBpbmRleDogbnVsbCxcclxuICAgICAgICAgICAgdGV4dDogbnVsbCxcclxuICAgICAgICAgICAgZHVyYXRpb246IG51bGwsXHJcbiAgICAgICAgICAgIHRhc2s6IGZ1bmN0aW9uIChldmVudCwgc2VsZikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuaXNPcGVuKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9faW50ZXJuYWwuYnV0dG9uc1thdXRvQ29uZmlybS5pbmRleF0uZWxlbWVudC5pbm5lckhUTUwgPSBhdXRvQ29uZmlybS50ZXh0ICsgJyAoJiM4MjA3OycgKyBhdXRvQ29uZmlybS5kdXJhdGlvbiArICcmIzgyMDc7KSAnO1xyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9Db25maXJtLmR1cmF0aW9uIC09IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF1dG9Db25maXJtLmR1cmF0aW9uID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhckF1dG9Db25maXJtKHNlbGYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnV0dG9uID0gc2VsZi5fX2ludGVybmFsLmJ1dHRvbnNbYXV0b0NvbmZpcm0uaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xvc2VFdmVudCA9IGNyZWF0ZUNsb3NlRXZlbnQoYXV0b0NvbmZpcm0uaW5kZXgsIGJ1dHRvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNlbGYuY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2FsbGJhY2suYXBwbHkoc2VsZiwgW2Nsb3NlRXZlbnRdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2Nsb3NlIHRoZSBkaWFsb2cuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbG9zZUV2ZW50LmNsb3NlICE9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhckF1dG9Db25maXJtKHNlbGYpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2xlYXJBdXRvQ29uZmlybShzZWxmKSB7XHJcbiAgICAgICAgICAgIGlmIChhdXRvQ29uZmlybS50aW1lciAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChhdXRvQ29uZmlybS50aW1lcik7XHJcbiAgICAgICAgICAgICAgICBhdXRvQ29uZmlybS50aW1lciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9faW50ZXJuYWwuYnV0dG9uc1thdXRvQ29uZmlybS5pbmRleF0uZWxlbWVudC5pbm5lckhUTUwgPSBhdXRvQ29uZmlybS50ZXh0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzdGFydEF1dG9Db25maXJtKHNlbGYsIGluZGV4LCBkdXJhdGlvbikge1xyXG4gICAgICAgICAgICBjbGVhckF1dG9Db25maXJtKHNlbGYpO1xyXG4gICAgICAgICAgICBhdXRvQ29uZmlybS5kdXJhdGlvbiA9IGR1cmF0aW9uO1xyXG4gICAgICAgICAgICBhdXRvQ29uZmlybS5pbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICBhdXRvQ29uZmlybS50ZXh0ID0gc2VsZi5fX2ludGVybmFsLmJ1dHRvbnNbaW5kZXhdLmVsZW1lbnQuaW5uZXJIVE1MO1xyXG4gICAgICAgICAgICBhdXRvQ29uZmlybS50aW1lciA9IHNldEludGVydmFsKGRlbGVnYXRlKHNlbGYsIGF1dG9Db25maXJtLnRhc2spLCAxMDAwKTtcclxuICAgICAgICAgICAgYXV0b0NvbmZpcm0udGFzayhudWxsLCBzZWxmKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtYWluOiBmdW5jdGlvbiAoX3RpdGxlLCBfbWVzc2FnZSwgX29ub2ssIF9vbmNhbmNlbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRpdGxlLCBtZXNzYWdlLCBvbm9rLCBvbmNhbmNlbDtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBfdGl0bGU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IF90aXRsZTtcclxuICAgICAgICAgICAgICAgICAgICBvbm9rID0gX21lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IF90aXRsZTtcclxuICAgICAgICAgICAgICAgICAgICBvbm9rID0gX21lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgb25jYW5jZWwgPSBfb25vaztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZSA9IF90aXRsZTtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gX21lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgb25vayA9IF9vbm9rO1xyXG4gICAgICAgICAgICAgICAgICAgIG9uY2FuY2VsID0gX29uY2FuY2VsO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoJ3RpdGxlJywgdGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoJ21lc3NhZ2UnLCBtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0KCdvbm9rJywgb25vayk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldCgnb25jYW5jZWwnLCBvbmNhbmNlbCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0dXA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uczogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBhbGVydGlmeS5kZWZhdWx0cy5nbG9zc2FyeS5vayxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleToga2V5cy5FTlRFUixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogYWxlcnRpZnkuZGVmYXVsdHMudGhlbWUub2ssXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGFsZXJ0aWZ5LmRlZmF1bHRzLmdsb3NzYXJ5LmNhbmNlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleToga2V5cy5FU0MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZva2VPbkNsb3NlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBhbGVydGlmeS5kZWZhdWx0cy50aGVtZS5jYW5jZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvY3VzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdDogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW1pemFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYnVpbGQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vbm90aGluZ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwcmVwYXJlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvL25vdGhpbmdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0TWVzc2FnZTogZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q29udGVudChtZXNzYWdlKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBsYWJlbHM6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBvbm9rOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgb25jYW5jZWw6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0Rm9jdXM6IG51bGwsXHJcbiAgICAgICAgICAgICAgICByZXZlcnNlQnV0dG9uczogbnVsbCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0dGluZ1VwZGF0ZWQ6IGZ1bmN0aW9uIChrZXksIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ21lc3NhZ2UnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TWVzc2FnZShuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdsYWJlbHMnOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgnb2snIGluIG5ld1ZhbHVlICYmIHRoaXMuX19pbnRlcm5hbC5idXR0b25zWzBdLmVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fX2ludGVybmFsLmJ1dHRvbnNbMF0udGV4dCA9IG5ld1ZhbHVlLm9rO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9faW50ZXJuYWwuYnV0dG9uc1swXS5lbGVtZW50LmlubmVySFRNTCA9IG5ld1ZhbHVlLm9rO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoJ2NhbmNlbCcgaW4gbmV3VmFsdWUgJiYgdGhpcy5fX2ludGVybmFsLmJ1dHRvbnNbMV0uZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9faW50ZXJuYWwuYnV0dG9uc1sxXS50ZXh0ID0gbmV3VmFsdWUuY2FuY2VsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9faW50ZXJuYWwuYnV0dG9uc1sxXS5lbGVtZW50LmlubmVySFRNTCA9IG5ld1ZhbHVlLmNhbmNlbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdyZXZlcnNlQnV0dG9ucyc6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHMuYnV0dG9ucy5wcmltYXJ5LmFwcGVuZENoaWxkKHRoaXMuX19pbnRlcm5hbC5idXR0b25zWzBdLmVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHMuYnV0dG9ucy5wcmltYXJ5LmFwcGVuZENoaWxkKHRoaXMuX19pbnRlcm5hbC5idXR0b25zWzFdLmVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2RlZmF1bHRGb2N1cyc6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX2ludGVybmFsLmZvY3VzLmVsZW1lbnQgPSBuZXdWYWx1ZSA9PT0gJ29rJyA/IDAgOiAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGNsb3NlRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFyQXV0b0NvbmZpcm0odGhpcyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmV0dXJuVmFsdWU7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGNsb3NlRXZlbnQuaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuZ2V0KCdvbm9rJykgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSB0aGlzLmdldCgnb25vaycpLmNhbGwodGhpcywgY2xvc2VFdmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmV0dXJuVmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUV2ZW50LmNhbmNlbCA9ICFyZXR1cm5WYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuZ2V0KCdvbmNhbmNlbCcpID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gdGhpcy5nZXQoJ29uY2FuY2VsJykuY2FsbCh0aGlzLCBjbG9zZUV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXR1cm5WYWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlRXZlbnQuY2FuY2VsID0gIXJldHVyblZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhdXRvT2s6IGZ1bmN0aW9uIChkdXJhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgc3RhcnRBdXRvQ29uZmlybSh0aGlzLCAwLCBkdXJhdGlvbik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYXV0b0NhbmNlbDogZnVuY3Rpb24gKGR1cmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBzdGFydEF1dG9Db25maXJtKHRoaXMsIDEsIGR1cmF0aW9uKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBQcm9tcHQgZGlhbG9nIG9iamVjdFxyXG4gICAgICpcclxuICAgICAqIGludm9rZWQgYnk6XHJcbiAgICAgKlx0YWxlcnRpZnkucHJvbXB0KG1lc3NhZ2UpO1xyXG4gICAgICpcdGFsZXJ0aWZ5LnByb21wdChtZXNzYWdlLCB2YWx1ZSk7XHJcbiAgICAgKlx0YWxlcnRpZnkucHJvbXB0KG1lc3NhZ2UsIHZhbHVlLCBvbm9rKTtcclxuICAgICAqXHRhbGVydGlmeS5wcm9tcHQobWVzc2FnZSwgdmFsdWUsIG9ub2ssIG9uY2FuY2VsKTtcclxuICAgICAqXHRhbGVydGlmeS5wcm9tcHQodGl0bGUsIG1lc3NhZ2UsIHZhbHVlLCBvbm9rLCBvbmNhbmNlbCk7XHJcbiAgICAgKi9cclxuICAgIGFsZXJ0aWZ5LmRpYWxvZygncHJvbXB0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0lOUFVUJyk7XHJcbiAgICAgICAgdmFyIHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdQJyk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbWFpbjogZnVuY3Rpb24gKF90aXRsZSwgX21lc3NhZ2UsIF92YWx1ZSwgX29ub2ssIF9vbmNhbmNlbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRpdGxlLCBtZXNzYWdlLCB2YWx1ZSwgb25vaywgb25jYW5jZWw7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gX3RpdGxlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBfdGl0bGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBfbWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gX3RpdGxlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gX21lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgb25vayA9IF92YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gX3RpdGxlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gX21lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgb25vayA9IF92YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBvbmNhbmNlbCA9IF9vbm9rO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlID0gX3RpdGxlO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBfbWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IF92YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBvbm9rID0gX29ub2s7XHJcbiAgICAgICAgICAgICAgICAgICAgb25jYW5jZWwgPSBfb25jYW5jZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldCgndGl0bGUnLCB0aXRsZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldCgnbWVzc2FnZScsIG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoJ3ZhbHVlJywgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoJ29ub2snLCBvbm9rKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0KCdvbmNhbmNlbCcsIG9uY2FuY2VsKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXR1cDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b25zOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGFsZXJ0aWZ5LmRlZmF1bHRzLmdsb3NzYXJ5Lm9rLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBrZXlzLkVOVEVSLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBhbGVydGlmeS5kZWZhdWx0cy50aGVtZS5vayxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogYWxlcnRpZnkuZGVmYXVsdHMuZ2xvc3NhcnkuY2FuY2VsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBrZXlzLkVTQyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludm9rZU9uQ2xvc2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGFsZXJ0aWZ5LmRlZmF1bHRzLnRoZW1lLmNhbmNlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgZm9jdXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogaW5wdXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbWl6YWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2l6YWJsZTogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBidWlsZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaW5wdXQuY2xhc3NOYW1lID0gYWxlcnRpZnkuZGVmYXVsdHMudGhlbWUuaW5wdXQ7XHJcbiAgICAgICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpO1xyXG4gICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSB0aGlzLmdldCgndmFsdWUnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHMuY29udGVudC5hcHBlbmRDaGlsZChwKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHMuY29udGVudC5hcHBlbmRDaGlsZChpbnB1dCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHByZXBhcmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vbm90aGluZ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXRNZXNzYWdlOiBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyQ29udGVudHMocCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcC5pbm5lckhUTUwgPSBtZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlIGluc3RhbmNlb2Ygd2luZG93LkhUTUxFbGVtZW50ICYmIHAuZmlyc3RDaGlsZCAhPT0gbWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyQ29udGVudHMocCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcC5hcHBlbmRDaGlsZChtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIGxhYmVsczogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgb25vazogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgb25jYW5jZWw6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiAnJyxcclxuICAgICAgICAgICAgICAgIHR5cGU6J3RleHQnLFxyXG4gICAgICAgICAgICAgICAgcmV2ZXJzZUJ1dHRvbnM6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0dGluZ1VwZGF0ZWQ6IGZ1bmN0aW9uIChrZXksIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ21lc3NhZ2UnOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TWVzc2FnZShuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICd2YWx1ZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3R5cGUnOlxyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICd0ZXh0JzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdjb2xvcic6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGF0ZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGF0ZXRpbWUtbG9jYWwnOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2VtYWlsJzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdtb250aCc6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdwYXNzd29yZCc6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2VhcmNoJzpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICd0ZWwnOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RpbWUnOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3dlZWsnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC50eXBlID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnR5cGUgPSAndGV4dCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2xhYmVscyc6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlLm9rICYmIHRoaXMuX19pbnRlcm5hbC5idXR0b25zWzBdLmVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fX2ludGVybmFsLmJ1dHRvbnNbMF0uZWxlbWVudC5pbm5lckhUTUwgPSBuZXdWYWx1ZS5vaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlLmNhbmNlbCAmJiB0aGlzLl9faW50ZXJuYWwuYnV0dG9uc1sxXS5lbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX19pbnRlcm5hbC5idXR0b25zWzFdLmVsZW1lbnQuaW5uZXJIVE1MID0gbmV3VmFsdWUuY2FuY2VsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3JldmVyc2VCdXR0b25zJzpcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3VmFsdWUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5idXR0b25zLnByaW1hcnkuYXBwZW5kQ2hpbGQodGhpcy5fX2ludGVybmFsLmJ1dHRvbnNbMF0uZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5idXR0b25zLnByaW1hcnkuYXBwZW5kQ2hpbGQodGhpcy5fX2ludGVybmFsLmJ1dHRvbnNbMV0uZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGNsb3NlRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZXR1cm5WYWx1ZTtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoY2xvc2VFdmVudC5pbmRleCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MudmFsdWUgPSBpbnB1dC52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuZ2V0KCdvbm9rJykgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSB0aGlzLmdldCgnb25vaycpLmNhbGwodGhpcywgY2xvc2VFdmVudCwgdGhpcy5zZXR0aW5ncy52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmV0dXJuVmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUV2ZW50LmNhbmNlbCA9ICFyZXR1cm5WYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuZ2V0KCdvbmNhbmNlbCcpID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblZhbHVlID0gdGhpcy5nZXQoJ29uY2FuY2VsJykuY2FsbCh0aGlzLCBjbG9zZUV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXR1cm5WYWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlRXZlbnQuY2FuY2VsID0gIXJldHVyblZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFjbG9zZUV2ZW50LmNhbmNlbCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gdGhpcy5zZXR0aW5ncy52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQ29tbW9uSlNcclxuICAgIGlmICggdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSAnb2JqZWN0JyApIHtcclxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGFsZXJ0aWZ5O1xyXG4gICAgLy8gQU1EXHJcbiAgICB9IGVsc2UgaWYgKCB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcclxuICAgICAgICBkZWZpbmUoIFtdLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhbGVydGlmeTtcclxuICAgICAgICB9ICk7XHJcbiAgICAvLyB3aW5kb3dcclxuICAgIH0gZWxzZSBpZiAoICF3aW5kb3cuYWxlcnRpZnkgKSB7XHJcbiAgICAgICAgd2luZG93LmFsZXJ0aWZ5ID0gYWxlcnRpZnk7XHJcbiAgICB9XHJcblxyXG59ICggdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0aGlzICkgKTtcclxuIiwiLypcbiogIENvbG9yIG9wdGlvbnMgKGFwcGxpZWQgb24gdGhlIG1hcCBhbmQgb24gdGhlIGNoYXJ0KTpcbiovXG5leHBvcnQgY29uc3QgY29sb3JfY291bnRyaWVzID0gJ3JnYigxNDcsIDE0NCwgMjUyKSc7IC8vIENvbG9yIGZvciBmZWF0dXJlcyB3aXRoaW4gdGhlIHN0dWR5IHpvbmUgYnV0IG5vdCBoaWdobGlnaHRlZFxuZXhwb3J0IGNvbnN0IGNvbG9yX2Rpc2FibGVkID0gJyNiZWJlY2QnOyAvLyBDb2xvciBmb3IgZmVhdHVyZXMgb3V0c2lkZSB0aGUgc3R1ZHkgem9uZSAvIHdpdGhvdXQgZGF0YVxuZXhwb3J0IGNvbnN0IGNvbG9yX3N1cCA9ICdncmVlbic7IC8vIENvbG9yIGZvciBzZWxlY3RlZCBmZWF0dXJlIHdpdGggXCJiZXR0ZXJcIiB2YWx1ZXMgdGhhbiB0aGUgcmVmZXJlbmNlIGZlYXR1cmVcbmV4cG9ydCBjb25zdCBjb2xvcl9pbmYgPSAncmVkJzsgLy8gQ29sb3IgZm9yIHNlbGVjdGVkIGZlYXR1cmUgd2l0aCBcIndvcnNlXCIgdmFsdWVzIHRoYW4gdGhlIHJlZmVyZW5jZSBmZWF0dXJlXG5leHBvcnQgY29uc3QgY29sb3JfaGlnaGxpZ2h0ID0gJ3llbGxvdyc7IC8vIENvbG9yIGZvciB0aGUgcmVmZXJlbmNlIGZlYXR1cmUgKFwiTWEgcsOpZ2lvblwiKVxuZXhwb3J0IGNvbnN0IGNvbG9yX2RlZmF1bHRfZGlzc2ltID0gJ2RhcmtyZWQnOyAgLy8gTmV1dHJhbCBjb2xvciBmb3Igc2VsZWN0ZWQgZmVhdHVyZXMgd2hlbiBncmVlbi9yZWQgY2FuJ3QgYmUgdXNlZFxuXG4vKlxuKiAgTWlzYy4gb3B0aW9uczpcbiovXG5leHBvcnQgY29uc3QgTUFYX1ZBUklBQkxFUyA9IDc7IC8vIFRoZSBtYXhpbXVtIG51bWJlciBvZiB2YXJpYWJsZXMgdGhhdCBjYW4gYmUgc2VsZWN0ZWQgc2ltdWx0YW5lb3VzbHkuXG5leHBvcnQgY29uc3QgUkFUSU9fV0hfTUFQID0gMC44Nzk7XG4iLCJpbXBvcnQgeyBjb2xvcl9pbmYsIGNvbG9yX3N1cCB9IGZyb20gJy4vb3B0aW9ucyc7XG5cbmNvbnN0IG1hdGhfcG93ID0gTWF0aC5wb3c7XG5jb25zdCBtYXRoX2FicyA9IE1hdGguYWJzO1xuY29uc3QgbWF0aF9yb3VuZCA9IE1hdGgucm91bmQ7XG5jb25zdCBtYXRoX21heCA9IE1hdGgubWF4O1xuY29uc3QgbWF0aF9zaW4gPSBNYXRoLnNpbjtcbmNvbnN0IG1hdGhfY29zID0gTWF0aC5jb3M7XG5jb25zdCBtYXRoX3NxcnQgPSBNYXRoLnNxcnQ7XG5jb25zdCBIQUxGX1BJID0gTWF0aC5QSSAvIDI7XG5cbmZ1bmN0aW9uIHByZXBhcmVUb29sdGlwKHBhcmVudF9zdmdfZWxlbSkge1xuICBjb25zdCB0b29sdGlwID0gcGFyZW50X3N2Z19lbGVtLmFwcGVuZCgnZycpXG4gICAgLmF0dHIoJ2NsYXNzJywgJ3Rvb2x0aXAnKVxuICAgIC5zdHlsZSgnZGlzcGxheScsICdub25lJyk7XG5cbiAgdG9vbHRpcC5hcHBlbmQoJ3JlY3QnKVxuICAgIC5hdHRycyh7IHg6IDE1LCB3aWR0aDogMCwgaGVpZ2h0OiAwLCBmaWxsOiAnYmVpZ2UnIH0pXG4gICAgLnN0eWxlKCdvcGFjaXR5JywgMC43NSk7XG5cbiAgdG9vbHRpcC5hcHBlbmQoJ3RleHQnKVxuICAgIC5hdHRycyh7IGNsYXNzOiAnaWRfZmVhdHVyZScsIHg6IDI1LCBkeTogJzEuMmVtJywgJ2ZvbnQtc2l6ZSc6ICcxNHB4JyB9KVxuICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCAnYm9sZCcpO1xuXG4gIHRvb2x0aXAuYXBwZW5kKCd0ZXh0JylcbiAgICAuYXR0cnMoe1xuICAgICAgY2xhc3M6ICd2YWx1ZV9mZWF0dXJlMScsXG4gICAgICB4OiAyNSxcbiAgICAgIGR5OiAnMi40ZW0nLFxuICAgICAgJ2ZvbnQtc2l6ZSc6ICcxNHB4JyxcbiAgICB9KTtcblxuICB0b29sdGlwLmFwcGVuZCgndGV4dCcpXG4gICAgLmF0dHJzKHtcbiAgICAgIGNsYXNzOiAndmFsdWVfZmVhdHVyZTInLFxuICAgICAgeDogMjUsXG4gICAgICBkeTogJzMuNWVtJyxcbiAgICAgICdmb250LXNpemUnOiAnMTRweCcsXG4gICAgfSk7XG5cbiAgdG9vbHRpcC5hcHBlbmQoJ3RleHQnKVxuICAgIC5hdHRycyh7XG4gICAgICBjbGFzczogJ3ZhbHVlX2ZlYXR1cmUzJyxcbiAgICAgIHg6IDI1LFxuICAgICAgZHk6ICc0LjZlbScsXG4gICAgICAnZm9udC1zaXplJzogJzE0cHgnLFxuICAgIH0pO1xuXG4gIHRvb2x0aXAuYXBwZW5kKCd0ZXh0JylcbiAgICAuYXR0cnMoe1xuICAgICAgY2xhc3M6ICd2YWx1ZV9mZWF0dXJlNCcsXG4gICAgICB4OiAyNSxcbiAgICAgIGR5OiAnNS43ZW0nLFxuICAgICAgJ2ZvbnQtc2l6ZSc6ICcxNHB4JyxcbiAgICB9KTtcblxuICB0b29sdGlwLmFwcGVuZCgndGV4dCcpXG4gICAgLmF0dHJzKHtcbiAgICAgIGNsYXNzOiAndmFsdWVfZmVhdHVyZTUnLFxuICAgICAgeDogMjUsXG4gICAgICBkeTogJzYuOGVtJyxcbiAgICAgICdmb250LXNpemUnOiAnMTRweCcsXG4gICAgfSk7XG5cbiAgcmV0dXJuIHRvb2x0aXA7XG59XG5cbmZ1bmN0aW9uIHByZXBhcmVUb29sdGlwMihwYXJlbnQsIGJlZm9yZSwgY2xhc3NuYW1lPSd0b29sdGlwJykge1xuICBjb25zdCB0ID0gcGFyZW50LnNlbGVjdCgnLnRvb2x0aXAnKTtcbiAgaWYgKHQubm9kZSgpKSB7XG4gICAgcmV0dXJuIHQ7XG4gIH1cbiAgY29uc3QgdG9vbHRpcCA9IHBhcmVudC5pbnNlcnQoJ2RpdicsIGJlZm9yZSlcbiAgICAuYXR0cignY2xhc3MnLCBjbGFzc25hbWUpXG4gICAgLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTtcblxuICB0b29sdGlwLmFwcGVuZCgncCcpLmF0dHIoJ2NsYXNzJywgJ3RpdGxlJyk7XG4gIHRvb2x0aXAuYXBwZW5kKCdwJykuYXR0cignY2xhc3MnLCAnY29udGVudCcpO1xuXG4gIHJldHVybiB0b29sdGlwO1xufVxuXG5cbmZ1bmN0aW9uIHVuYmluZFVJKCkge1xuICAvLyBSZW1vdmVzIHRoZSBjdXJyZW50IGJlaGF2aW9yIGNvcnJlc3BvbmRpbmcgdG8gY2xpY2tpbmcgb24gdGhlIGxlZnQgbWVudTpcbiAgZDMuc2VsZWN0QWxsKCdzcGFuLmZpbHRlcl92JylcbiAgICAub24oJ2NsaWNrJywgbnVsbCk7XG4gIGQzLnNlbGVjdEFsbCgnc3Bhbi50YXJnZXRfcmVnaW9uJylcbiAgICAub24oJ2NsaWNrJywgbnVsbCk7XG4gIGQzLnNlbGVjdEFsbCgnc3Bhbi5sYWJlbF9jaGsnKVxuICAgIC5vbignY2xpY2snLCBudWxsKTtcblxuICAvLyBSZW1vdmUgdGhlIHRhYmxlOlxuICBkMy5zZWxlY3QoJy5kYXRhVGFibGUtd3JhcHBlcicpLnJlbW92ZSgpO1xuXG4gIC8vIFVuYmluZCBidXR0b25zIG9uIHRoZSB0b3Agb2YgdGhlIG1hcDpcbiAgZDMuc2VsZWN0KCcjaGVhZGVyX21hcCcpXG4gICAgLnNlbGVjdEFsbCgnaW1nJylcbiAgICAub24oJ2NsaWNrJywgbnVsbCk7XG5cbiAgLy8gUmVtb3ZlIHRoZSBzZWxlY3Rpb24gbWVudSAob3IgYnV0dG9ucykgdW5kZXIgdGhlIGNoYXJ0OlxuICBkMy5zZWxlY3QoJyNiYXJfc2VjdGlvbiA+ICNtZW51X3NlbGVjdGlvbicpLnJlbW92ZSgpO1xuXG4gIC8vIFJlbW92ZXMgdGhlIGN1cnJlbnQgYmVoYXZpb3IgY29ycmVzcG9uZGluZyB0byBjbGlja2luZyBvbiB0aGUgdG9wIG1lbnU6XG4gIGQzLnNlbGVjdEFsbCgnLnR5cGVfY2hhcnQudGl0bGVfbWVudScpLm9uKCdjbGljaycsIG51bGwpO1xuXG4gIC8vIFJlbW92ZXMgdGhlIGN1cnJlbnQgYmVoYXZpb3IgY29ycmVzcG9uZGluZyB0byBwcmVzc2luZyB0aGUgQ29udHJvbCBrZXk6XG4gIGRvY3VtZW50Lm9ua2V5dXAgPSBudWxsO1xuICBkb2N1bWVudC5vbmtleWRvd24gPSBudWxsO1xufVxuXG4vKipcbiogRnVuY3Rpb24gdG8gY29tcGFyZSB0aGUgdmFsdWUgb2YgYSBmZWF0dXJlIHRvIHRoZSByZWZlcmVuY2UgdmFsdWUgKGkuZS4gdGhlIHZhbHVlIG9mIFwibXkgcmVnaW9uXCIpXG4qIGFuZCByZXR1cm4gdGhlIGFwcHJvcHJpYXRlIGNvbG9yIChzZXJpZSBtYXkgYmUgaW52ZXJzZWQpXG4qXG4qIEBwYXJhbSB7TnVtYmVyfSB0ZXN0X3ZhbHVlIC0gVGhlIHZhbHVlIHRvIGJlIGNvbXBhcmVkIHRvIHRoZSB2YWx1ZSBvZiBcIm15IHJlZ2lvblwiLlxuKiBAcGFyYW0ge051bWJlcn0gcmVmX3ZhbHVlIC0gVGhlIHZhbHVlIG9mIG15IHJlZ2lvbi5cbiogQHBhcmFtIHtCb29sZWFufSBzZXJpZV9pbnZlcnNlZCAtIFdoZXRoZXIgdGhlIHNlcmllIGlzIGludmVyc2VkIG9yIG5vdCBpbiB0aGUgY3VycmVudCBjaGFydC5cbiogQHJldHVybiB7U3RyaW5nfSAtIEEgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIGNvbG9yIHRvIGJlIHVzZWQgZm9yIHRoaXMgdmFsdWUuXG4qXG4qL1xuY29uc3QgY29tcCA9ICh0ZXN0X3ZhbHVlLCByZWZfdmFsdWUsIHNlcmllX2ludmVyc2VkKSA9PiB7XG4gIGlmICh0ZXN0X3ZhbHVlIDwgcmVmX3ZhbHVlKSB7XG4gICAgcmV0dXJuIHNlcmllX2ludmVyc2VkID8gY29sb3Jfc3VwIDogY29sb3JfaW5mO1xuICB9XG4gIHJldHVybiBzZXJpZV9pbnZlcnNlZCA/IGNvbG9yX2luZiA6IGNvbG9yX3N1cDtcbn07XG5cblxuLyoqXG4qIEZ1bmN0aW9uIHRvIGNvbXBhcmUgdGhlIHZhbHVlIG9mIGEgZmVhdHVyZSB0byB0aGUgcmVmZXJlbmNlIHZhbHVlIChpLmUuIHRoZSB2YWx1ZSBvZiBcIm15IHJlZ2lvblwiKVxuKiBhbmQgcmV0dXJuIHRoZSBhcHByb3ByaWF0ZSBjb2xvciAoc2VyaWUgbWF5IGJlIGludmVyc2VkKVxuKlxuKiBAcGFyYW0ge051bWJlcn0gdmFsMSAtIFRoZSB2YWx1ZSB0byBiZSBjb21wYXJlZCB0byB0aGUgdmFsdWUgb2YgXCJteSByZWdpb25cIiBmb3IgdGhlIDFzdCB2YXJpYWJsZS5cbiogQHBhcmFtIHtOdW1iZXJ9IHZhbDIgLSBUaGUgdmFsdWUgdG8gYmUgY29tcGFyZWQgdG8gdGhlIHZhbHVlIG9mIFwibXkgcmVnaW9uXCIgZm9yIHRoZSAybmQgdmFyaWFibGUuXG4qIEBwYXJhbSB7TnVtYmVyfSByZWZfdmFsMSAtIFRoZSB2YWx1ZSBvZiBteSByZWdpb24gZm9yIGhlIGZpcnN0IHZhcmlhYmxlLlxuKiBAcGFyYW0ge051bWJlcn0gcmVmX3ZhbDIgLSBUaGUgdmFsdWUgb2YgbXkgcmVnaW9uIGZvciB0aGUgc2Vjb25kIHZhcmlhYmxlLlxuKiBAcGFyYW0ge0Jvb2xlYW59IHhJbnZlcnNlZCAtIFdoZXRoZXIgdGhlIHNlcmllIGlzIGludmVyc2VkIG9uIHRoZSB4IGF4aXMgaW4gdGhlIGN1cnJlbnQgY2hhcnQuXG4qIEBwYXJhbSB7Qm9vbGVhbn0geUludmVyc2VkIC0gV2hldGhlciB0aGUgc2VyaWUgaXMgaW52ZXJzZWQgb24gdGhlIHkgYXhpcyBpbiB0aGUgY3VycmVudCBjaGFydC5cbiogQHJldHVybiB7U3RyaW5nfSAtIEEgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIGNvbG9yIHRvIGJlIHVzZWQgZm9yIHRoZXNlcyB2YWx1ZXMuXG4qXG4qL1xuY29uc3QgY29tcDIgPSAodmFsMSwgdmFsMiwgcmVmX3ZhbDEsIHJlZl92YWwyLCB4SW52ZXJzZWQsIHlJbnZlcnNlZCkgPT4ge1xuICBpZiAoKHZhbDEgPCByZWZfdmFsMSAmJiAheEludmVyc2VkKSB8fCAodmFsMSA+IHJlZl92YWwxICYmIHhJbnZlcnNlZCkpIHsgLy8gdmFsMSBpcyBpbmZlcmlvcjpcbiAgICBpZiAodmFsMiA8IHJlZl92YWwyKSB7XG4gICAgICByZXR1cm4geUludmVyc2VkID8gJ3JnYigxNjAsIDMwLCAxNjApJyA6IGNvbG9yX2luZjtcbiAgICB9XG4gICAgcmV0dXJuIHlJbnZlcnNlZCA/IGNvbG9yX2luZiA6ICdyZ2IoMTYwLCAzMCwgMTYwKSc7XG4gIH1cbiAgLy8gdmFsMSBpcyBzdXBlcmlvciA6XG4gIGlmICh2YWwyID4gcmVmX3ZhbDIpIHtcbiAgICByZXR1cm4gIXlJbnZlcnNlZCA/IGNvbG9yX3N1cCA6ICdvcmFuZ2UnO1xuICB9XG4gIHJldHVybiAheUludmVyc2VkID8gJ29yYW5nZScgOiBjb2xvcl9zdXA7XG59O1xuXG5jbGFzcyBSZWN0IHtcbiAgY29uc3RydWN0b3IodG9wbGVmdCwgYm90dG9tcmlnaHQpIHtcbiAgICB0aGlzLnhtaW4gPSB0b3BsZWZ0WzBdO1xuICAgIHRoaXMueG1heCA9IGJvdHRvbXJpZ2h0WzBdO1xuICAgIHRoaXMueW1pbiA9IHRvcGxlZnRbMV07XG4gICAgdGhpcy55bWF4ID0gYm90dG9tcmlnaHRbMV07XG4gIH1cblxuICBjb250YWlucyhwdCkge1xuICAgIGlmIChwdFswXSA+PSB0aGlzLnhtaW4gJiYgcHRbMF0gPD0gdGhpcy54bWF4XG4gICAgICAgICYmIHB0WzFdID49IHRoaXMueW1pbiAmJiBwdFsxXSA8PSB0aGlzLnltYXgpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuY29uc3QgUHJvcFNpemVyID0gZnVuY3Rpb24gUHJvcFNpemVyKGZpeGVkX3ZhbHVlLCBmaXhlZF9zaXplKSB7XG4gIHRoaXMuZml4ZWRfdmFsdWUgPSBmaXhlZF92YWx1ZTtcbiAgY29uc3Qgc3FydCA9IE1hdGguc3FydDtcbiAgY29uc3QgYWJzID0gTWF0aC5hYnM7XG4gIGNvbnN0IFBJID0gTWF0aC5QSTtcbiAgdGhpcy5zbWF4ID0gZml4ZWRfc2l6ZSAqIGZpeGVkX3NpemUgKiBQSTtcbiAgdGhpcy5zY2FsZSA9IHZhbCA9PiBzcXJ0KGFicyh2YWwpICogdGhpcy5zbWF4IC8gdGhpcy5maXhlZF92YWx1ZSkgLyBQSTtcbiAgLy8gdGhpcy5nZXRfdmFsdWUgPSBzaXplID0+ICgoc2l6ZSAqIFBJKSAqKiAyKSAvIHRoaXMuc21heCAqIHRoaXMuZml4ZWRfdmFsdWU7XG4gIC8vIFVzZSBNYXRoIHBvdyB0byBzdXBwb3J0IGJyb3dzZXIgd2l0aG91dCAqKiBvcGVyYXRvcjpcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtcHJvcGVydGllc1xuICB0aGlzLmdldF92YWx1ZSA9IHNpemUgPT4gTWF0aC5wb3coc2l6ZSAqIFBJLCAyKSAvIHRoaXMuc21heCAqIHRoaXMuZml4ZWRfdmFsdWU7XG59O1xuXG5jb25zdCByZW1vdmVEdXBsaWNhdGVzID0gZnVuY3Rpb24gcmVtb3ZlRHVwbGljYXRlcyhhcnIpIHtcbiAgY29uc3QgdG1wID0gW107XG4gIGZvciAobGV0IGkgPSAwLCBsZW5fYXJyID0gYXJyLmxlbmd0aDsgaSA8IGxlbl9hcnI7IGkrKykge1xuICAgIGlmICh0bXAuaW5kZXhPZihhcnJbaV0pID09PSAtMSkge1xuICAgICAgdG1wLnB1c2goYXJyW2ldKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRtcDtcbn07XG5cbmNvbnN0IGdldFN2Z1BhdGhUeXBlID0gKHBhdGgpID0+IHtcbiAgaWYgKHBhdGguaW5kZXhPZignTSAnKSA+IC0xICYmIHBhdGguaW5kZXhPZignIEwgJykgPiAtMSkge1xuICAgIHJldHVybiAyO1xuICB9XG4gIHJldHVybiAxO1xufTtcblxuY29uc3Qgc3ZnUGF0aFRvQ29vcmRzID0gKHBhdGgsIHR5cGVfcGF0aCkgPT4ge1xuICBpZiAodHlwZV9wYXRoID09PSAxKSB7XG4gICAgcmV0dXJuIHBhdGguc2xpY2UoMSkuc3BsaXQoJ0wnKS5tYXAocHQgPT4gcHQuc3BsaXQoJywnKS5tYXAoYSA9PiArYSkpO1xuICB9XG4gIHJldHVybiBwYXRoLnNsaWNlKDIpLnNwbGl0KCcgTCAnKS5tYXAocHQgPT4gcHQuc3BsaXQoJyAnKS5tYXAoYSA9PiArYSkpO1xufTtcblxuZnVuY3Rpb24gY29tcHV0ZVBlcmNlbnRpbGVSYW5rKG9iaiwgZmllbGRfbmFtZSwgcmVzdWx0X2ZpZWxkX25hbWUpIHtcbiAgY29uc3QgdmFsdWVzID0gb2JqLm1hcChkID0+IGRbZmllbGRfbmFtZV0pO1xuICBjb25zdCBsZW5fdmFsdWVzID0gdmFsdWVzLmxlbmd0aDtcbiAgY29uc3QgZ2V0UFIgPSAodikgPT4ge1xuICAgIGxldCBjb3VudCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5fdmFsdWVzOyBpKyspIHtcbiAgICAgIGlmICh2YWx1ZXNbaV0gPD0gdikge1xuICAgICAgICBjb3VudCArPSAxO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyByZXR1cm4gMTAwICogY291bnQgLyBsZW5fdmFsdWVzO1xuICAgIHJldHVybiAxMDAgKiAoY291bnQgLSAxKSAvIChsZW5fdmFsdWVzIC0gMSk7XG4gIH07XG4gIGZvciAobGV0IGl4ID0gMDsgaXggPCBsZW5fdmFsdWVzOyBpeCsrKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgb2JqW2l4XVtyZXN1bHRfZmllbGRfbmFtZV0gPSBnZXRQUih2YWx1ZXNbaXhdKTtcbiAgfVxufVxuXG5jb25zdCBfZ2V0UFIgPSAodiwgc2VyaWUpID0+IHtcbiAgbGV0IGNvdW50ID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXJpZS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzZXJpZVtpXSA8PSB2KSB7XG4gICAgICBjb3VudCArPSAxO1xuICAgIH1cbiAgfVxuICAvLyByZXR1cm4gMTAwICogY291bnQgLyBzZXJpZS5sZW5ndGg7XG4gIHJldHVybiAxMDAgKiAoY291bnQgLSAxKSAvIChzZXJpZS5sZW5ndGggLSAxKTtcbn07XG5cbmNvbnN0IGdldE1lYW4gPSAoc2VyaWUpID0+IHtcbiAgY29uc3QgbmJfdmFsdWVzID0gc2VyaWUubGVuZ3RoO1xuICBsZXQgc3VtID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYl92YWx1ZXM7IGkrKykge1xuICAgIHN1bSArPSBzZXJpZVtpXTtcbiAgfVxuICByZXR1cm4gc3VtIC8gbmJfdmFsdWVzO1xufTtcblxuY29uc3QgZ2V0U3RkRGV2ID0gKHNlcmllLCBtZWFuX3ZhbHVlKSA9PiB7XG4gIGNvbnN0IG5iX3ZhbHVlcyA9IHNlcmllLmxlbmd0aDtcbiAgaWYgKCFtZWFuX3ZhbHVlKSB7XG4gICAgbWVhbl92YWx1ZSA9IGdldE1lYW4oc2VyaWUpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gIH1cbiAgbGV0IHN1bSA9IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbmJfdmFsdWVzOyBpKyspIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1wcm9wZXJ0aWVzXG4gICAgc3VtICs9IG1hdGhfcG93KHNlcmllW2ldIC0gbWVhbl92YWx1ZSwgMik7XG4gIH1cbiAgcmV0dXJuIG1hdGhfc3FydCgoMSAvIG5iX3ZhbHVlcykgKiBzdW0pO1xufTtcblxuY29uc3QgZ2V0U3RhbmRhcmRpemVkTWVhblN0ZERldiA9IChzZXJpZSkgPT4ge1xuICBjb25zdCBtZWFuID0gZ2V0TWVhbihzZXJpZSk7XG4gIGNvbnN0IHN0ZGRldiA9IGdldFN0ZERldihzZXJpZSwgbWVhbik7XG4gIHJldHVybiBzZXJpZS5tYXAodmFsID0+ICh2YWwgLSBtZWFuKSAvIHN0ZGRldik7XG59O1xuXG5jb25zdCBzaHVmZmxlID0gKGFycmF5KSA9PiB7XG4gIGZvciAobGV0IGkgPSBhcnJheS5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XG4gICAgY29uc3QgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIFthcnJheVtpXSwgYXJyYXlbal1dID0gW2FycmF5W2pdLCBhcnJheVtpXV07XG4gIH1cbiAgcmV0dXJuIGFycmF5O1xufTtcblxuZnVuY3Rpb24gZXVjbGlkaWFuX2Rpc3RhbmNlKGZlYXR1cmUxLCBmZWF0dXJlMikge1xuICBjb25zdCBbeDEsIHkxXSA9IGZlYXR1cmUxLmdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuICBjb25zdCBbeDIsIHkyXSA9IGZlYXR1cmUyLmdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuICBjb25zdCBhID0geDEgLSB4MjtcbiAgY29uc3QgYiA9IHkxIC0geTI7XG4gIHJldHVybiBtYXRoX3NxcnQoYSAqIGEgKyBiICogYik7XG59XG5cbi8qKlxuKiBGdW5jdGlvbiB0byBzZWxlY3QgdGhlIGZpcnN0IHZhcmlhYmxlIG9uIHRoZSBsZWZ0IG1lbnVcbiogKHRyaWdnZXJlZCBhZnRlciBjaGFuZ2luZyByZWdpb24sIGlmIG5vIG1vcmUgdmFyaWFibGUgd2FzIHNlbGVjdGVkKVxuKlxuKiBAcmV0dXJuIHt2b2lkfVxuKi9cbmZ1bmN0aW9uIHNlbGVjdEZpcnN0QXZhaWxhYmxlVmFyKCkge1xuICBjb25zdCBtZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lbnUnKTtcbiAgY29uc3QgdiA9IG1lbnUucXVlcnlTZWxlY3RvckFsbCgnLnRhcmdldF92YXJpYWJsZScpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHYubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoIXZbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpKSB7XG4gICAgICB2W2ldLmNsYXNzTGlzdC5hZGQoJ2NoZWNrZWQnKTtcbiAgICAgIHJldHVybiB2W2ldLmdldEF0dHJpYnV0ZSgndmFsdWUnKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJlcGFyZUdlb21MYXllcklkKGxheWVyLCBpZF9maWVsZCkge1xuICBsYXllci5mZWF0dXJlcy5mb3JFYWNoKChmdCkgPT4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIGZ0LmlkID0gZnQucHJvcGVydGllc1tpZF9maWVsZF07XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRSYW5kb20oYXJyLCBmYWxzZV9sZW5ndGgpIHtcbiAgcmV0dXJuIGFycltNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAoZmFsc2VfbGVuZ3RoIHx8IGFyci5sZW5ndGgpKV07XG59XG5cbmV4cG9ydCB7XG4gIGNvbXAsXG4gIGNvbXAyLFxuICBtYXRoX2FicyxcbiAgbWF0aF9yb3VuZCxcbiAgbWF0aF9zaW4sXG4gIG1hdGhfY29zLFxuICBtYXRoX21heCxcbiAgbWF0aF9zcXJ0LFxuICBtYXRoX3BvdyxcbiAgSEFMRl9QSSxcbiAgUmVjdCxcbiAgUHJvcFNpemVyLFxuICB1bmJpbmRVSSxcbiAgcHJlcGFyZVRvb2x0aXAsXG4gIHByZXBhcmVUb29sdGlwMixcbiAgcmVtb3ZlRHVwbGljYXRlcyxcbiAgZ2V0U3ZnUGF0aFR5cGUsXG4gIHN2Z1BhdGhUb0Nvb3JkcyxcbiAgY29tcHV0ZVBlcmNlbnRpbGVSYW5rLFxuICBfZ2V0UFIsXG4gIGdldE1lYW4sXG4gIGdldFN0ZERldixcbiAgZ2V0U3RhbmRhcmRpemVkTWVhblN0ZERldixcbiAgc2h1ZmZsZSxcbiAgZXVjbGlkaWFuX2Rpc3RhbmNlLFxuICBzZWxlY3RGaXJzdEF2YWlsYWJsZVZhcixcbiAgcHJlcGFyZUdlb21MYXllcklkLFxuICBnZXRSYW5kb20sXG59O1xuIiwiaW1wb3J0IHsgcmVtb3ZlRHVwbGljYXRlcyB9IGZyb20gJy4vaGVscGVycyc7XG5cbmNvbnN0IGNyZWF0ZU1lbnUgPSBmdW5jdGlvbiBjcmVhdGVNZW51KG5hbWVzLCB2YXJpYWJsZXMsIHN0dWR5X3pvbmVzLCB0ZXJyaXRvcmlhbF9tZXNoKSB7XG4gIC8vIEZpcnN0IHNlY3Rpb24sIHJlZ2lvbnMgbmFtZXM6XG4gIGNvbnN0IHRpdGxlX3NlY3Rpb24xID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICB0aXRsZV9zZWN0aW9uMS5jbGFzc05hbWUgPSAndGl0bGVfbWVudSc7XG4gIHRpdGxlX3NlY3Rpb24xLmlubmVySFRNTCA9ICdNYSByw6lnaW9uJztcbiAgY29uc3Qgc2VjdGlvbjEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgc2VjdGlvbjEuY2xhc3NOYW1lID0gJ2JveCc7XG4gIHNlY3Rpb24xLnN0eWxlLm92ZXJmbG93ID0gJ2F1dG8nO1xuICBzZWN0aW9uMS5zdHlsZS5oZWlnaHQgPSAnMTUlJztcbiAgZm9yIChsZXQgaSA9IDAsIGxlbl9pID0gbmFtZXMubGVuZ3RoOyBpIDwgbGVuX2k7IGkrKykge1xuICAgIGNvbnN0IGlkID0gbmFtZXNbaV0uaWQ7XG4gICAgY29uc3QgbmFtZSA9IG5hbWVzW2ldLm5hbWU7XG4gICAgY29uc3QgZW50cnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgZW50cnkuaW5uZXJIVE1MID0gYDxzcGFuIHZhbHVlPVwiJHtpZH1cIiBjbGFzcz0ndGFyZ2V0X3JlZ2lvbiBzcXVhcmUnPjwvc3Bhbj48c3BhbiBjbGFzcz1cImxhYmVsX2Noa1wiPiR7bmFtZX08L3NwYW4+YDtcbiAgICBzZWN0aW9uMS5hcHBlbmRDaGlsZChlbnRyeSk7XG4gIH1cblxuICAvLyBTZWNvbmQgc2VjdGlvbiwgZ3JvdXBzIG9mIHZhcmlhYmxlczpcbiAgY29uc3QgdGl0bGVfc2VjdGlvbjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIHRpdGxlX3NlY3Rpb24yLmNsYXNzTmFtZSA9ICd0aXRsZV9tZW51JztcbiAgdGl0bGVfc2VjdGlvbjIuaW5uZXJIVE1MID0gJ0luZGljYXRldXJzJztcbiAgY29uc3Qgc2VjdGlvbjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgc2VjdGlvbjIuaWQgPSAnbWVudV92YXJpYWJsZXMnO1xuICBzZWN0aW9uMi5jbGFzc05hbWUgPSAnYm94JztcbiAgc2VjdGlvbjIuc3R5bGUub3ZlcmZsb3cgPSAnYXV0byc7XG4gIHNlY3Rpb24yLnN0eWxlLmhlaWdodCA9ICcyNSUnO1xuXG4gIC8vIEZpbHRlciB0aGUgXCJ2YXJpYWJsZXNcIiB2YXJpYWJsZSB0byBmZXRjaCB0aGUgZ3JvdXAgbmFtZXMgOlxuICBjb25zdCBncm91cHNfdmFyID0gcmVtb3ZlRHVwbGljYXRlcyh2YXJpYWJsZXMubWFwKGQgPT4gZC5ncm91cCkuZmlsdGVyKGQgPT4gZCAhPT0gJ051bS9kw6lub20nKSk7XG5cbiAgZm9yIChsZXQgaSA9IDAsIGxlbl9pID0gZ3JvdXBzX3Zhci5sZW5ndGg7IGkgPCBsZW5faTsgaSsrKSB7XG4gICAgY29uc3QgZ3BfbmFtZSA9IGdyb3Vwc192YXJbaV07XG4gICAgY29uc3QgZW50cnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgZW50cnkuY2xhc3NOYW1lID0gJ25hbWVfZ3JvdXBfdmFyJztcblxuICAgIGVudHJ5LmlubmVySFRNTCA9IChpID09PSAwKVxuICAgICAgPyBgPHNwYW4gY2xhc3M9J2Fycm93IGFycm93X3JpZ2h0Jz48L3NwYW4+PHNwYW4+JHtncF9uYW1lfTwvc3Bhbj5gXG4gICAgICA6IGA8c3BhbiBjbGFzcz0nYXJyb3cgYXJyb3dfZG93bic+PC9zcGFuPjxzcGFuPiR7Z3BfbmFtZX08L3NwYW4+YDtcbiAgICBzZWN0aW9uMi5hcHBlbmRDaGlsZChlbnRyeSk7XG4gICAgY29uc3QgZGl2X2dycCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRpdl9ncnAuc3R5bGUuZGlzcGxheSA9IGkgPT09IDAgPyBudWxsIDogJ25vbmUnO1xuICAgIGNvbnN0IHZhcl9uYW1lcyA9IHZhcmlhYmxlcy5maWx0ZXIoZCA9PiBkLmdyb3VwID09PSBncF9uYW1lKTtcbiAgICBmb3IgKGxldCBqID0gMCwgbGVuX2ogPSB2YXJfbmFtZXMubGVuZ3RoOyBqIDwgbGVuX2o7IGorKykge1xuICAgICAgY29uc3QgbmFtZV92YXIgPSB2YXJfbmFtZXNbal0ubmFtZTtcbiAgICAgIGNvbnN0IGNvZGVfdmFyID0gdmFyX25hbWVzW2pdLmlkO1xuICAgICAgY29uc3Qgc3ViX2VudHJ5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgc3ViX2VudHJ5LmNsYXNzTmFtZSA9ICdzbWFsbCc7XG4gICAgICBzdWJfZW50cnkuaW5uZXJIVE1MID0gYDxzcGFuIHZhbHVlPVwiJHtjb2RlX3Zhcn1cIiBjbGFzcz1cInRhcmdldF92YXJpYWJsZSBzbWFsbF9zcXVhcmVcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJsYWJlbF9jaGtcIj4ke25hbWVfdmFyfTwvc3Bhbj48c3BhbiBjbGFzcz1cImlfaW5mb1wiPmk8L3NwYW4+YDtcbiAgICAgIGRpdl9ncnAuYXBwZW5kQ2hpbGQoc3ViX2VudHJ5KTtcbiAgICB9XG4gICAgc2VjdGlvbjIuYXBwZW5kQ2hpbGQoZGl2X2dycCk7XG4gIH1cblxuICAvLyBUaGlyZCBzZWN0aW9uLCBzdHVkeSB6b25lOlxuICBjb25zdCB0aXRsZV9zZWN0aW9uMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgdGl0bGVfc2VjdGlvbjMuY2xhc3NOYW1lID0gJ3RpdGxlX21lbnUnO1xuICB0aXRsZV9zZWN0aW9uMy5pbm5lckhUTUwgPSAnRXNwYWNlIGRcXCfDqXR1ZGUnO1xuICBjb25zdCBzZWN0aW9uMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBzZWN0aW9uMy5pZCA9ICdtZW51X3N0dWR5em9uZSc7XG4gIHNlY3Rpb24zLmNsYXNzTmFtZSA9ICdib3gnO1xuICBzZWN0aW9uMy5zdHlsZS5vdmVyZmxvdyA9ICdhdXRvJztcbiAgc2VjdGlvbjMuc3R5bGUubWF4SGVpZ2h0ID0gJzI1JSc7XG4gIGZvciAobGV0IGkgPSAwLCBsZW5faSA9IHN0dWR5X3pvbmVzLmxlbmd0aDsgaSA8IGxlbl9pOyBpKyspIHtcbiAgICBjb25zdCBlbnRyeSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBjb25zdCB6b25lID0gc3R1ZHlfem9uZXNbaV07XG4gICAgaWYgKHpvbmUuaWQgPT09ICdmaWx0ZXJfZGlzdCcpIHtcbiAgICAgIGVudHJ5LmlubmVySFRNTCA9IGA8c3BhbiBmaWx0ZXItdmFsdWU9XCIke3pvbmUuaWR9XCIgZGlzcGxheV9sZXZlbD1cIiR7em9uZS5kaXNwbGF5X2xldmVsfVwiIGNsYXNzPSdmaWx0ZXJfdiBzcXVhcmUnPjwvc3Bhbj48c3BhbiBjbGFzcz1cImxhYmVsX2Noa1wiPiR7em9uZS5uYW1lfTwvc3Bhbj48aW5wdXQgdmFsdWU9XCI0NTBcIiBkaXNhYmxlZD1cImRpc2FibGVkXCIgc3R5bGU9XCJ3aWR0aDogNTVweDsgaGVpZ2h0OiAxM3B4O1wiIHR5cGU9XCJudW1iZXJcIiBtaW49XCIwXCIgbWF4PVwiMTAwMDAwXCIgaWQ9XCJkaXN0X2ZpbHRlclwiPjwvaW5wdXQ+PHNwYW4+IGttPC9zcGFuPjxzcGFuIGNsYXNzPVwiaV9pbmZvXCI+aTwvc3Bhbj5gO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbnRyeS5pbm5lckhUTUwgPSBgPHNwYW4gZmlsdGVyLXZhbHVlPVwiJHt6b25lLmlkfVwiIGRpc3BsYXlfbGV2ZWw9XCIke3pvbmUuZGlzcGxheV9sZXZlbH1cIiBjbGFzcz0nZmlsdGVyX3Ygc3F1YXJlJz48L3NwYW4+PHNwYW4gY2xhc3M9XCJsYWJlbF9jaGtcIj4ke3pvbmUubmFtZX08L3NwYW4+PHNwYW4gY2xhc3M9XCJpX2luZm9cIj5pPC9zcGFuPmA7XG4gICAgfVxuICAgIHNlY3Rpb24zLmFwcGVuZENoaWxkKGVudHJ5KTtcbiAgfVxuICAvLyBGb3VydGggc2VjdGlvbjpcbiAgY29uc3QgdGl0bGVfc2VjdGlvbjQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIHRpdGxlX3NlY3Rpb240LmNsYXNzTmFtZSA9ICd0aXRsZV9tZW51JztcbiAgdGl0bGVfc2VjdGlvbjQuaW5uZXJIVE1MID0gJ01haWxsYWdlIHRlcnJpdG9yaWFsIGRcXCdhbmFseXNlJztcbiAgY29uc3Qgc2VjdGlvbjQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgc2VjdGlvbjQuaWQgPSAnbWVudV90ZXJyaXRfbGV2ZWwnO1xuICBzZWN0aW9uNC5jbGFzc05hbWUgPSAnYm94JztcbiAgc2VjdGlvbjQuc3R5bGUub3ZlcmZsb3cgPSAnYXV0byc7XG4gIHNlY3Rpb240LnN0eWxlLm1heEhlaWdodCA9ICcyMCUnO1xuICBmb3IgKGxldCBpID0gMCwgbGVuX2kgPSB0ZXJyaXRvcmlhbF9tZXNoLmxlbmd0aDsgaSA8IGxlbl9pOyBpKyspIHtcbiAgICBjb25zdCBlbnRyeSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBjb25zdCB0ZXJyaXRfbGV2ZWwgPSB0ZXJyaXRvcmlhbF9tZXNoW2ldO1xuICAgIGVudHJ5LmlubmVySFRNTCA9IGA8c3BhbiB2YWx1ZT1cIiR7dGVycml0X2xldmVsLmlkfVwiIGNsYXNzPSd0ZXJyaXRfbGV2ZWwgc3F1YXJlJz48L3NwYW4+PHNwYW4gY2xhc3M9XCJsYWJlbF9jaGtcIj4ke3RlcnJpdF9sZXZlbC5uYW1lfTwvc3Bhbj48c3BhbiBjbGFzcz1cImlfaW5mb1wiPmk8L3NwYW4+YDtcbiAgICBzZWN0aW9uNC5hcHBlbmRDaGlsZChlbnRyeSk7XG4gIH1cblxuICAvLyBUaGUgYWN0dWFsIG1lbnUgY29udGFpbmluZyB0aGVzZSA0IHNlY3Rpb25zOlxuICBjb25zdCBtZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnUnKTtcbiAgbWVudS5pZCA9ICdtZW51JztcbiAgbWVudS5zdHlsZS5mbG9hdCA9ICdsZWZ0JztcbiAgbWVudS5hcHBlbmRDaGlsZCh0aXRsZV9zZWN0aW9uMSk7XG4gIG1lbnUuYXBwZW5kQ2hpbGQoc2VjdGlvbjEpO1xuICBtZW51LmFwcGVuZENoaWxkKHRpdGxlX3NlY3Rpb24yKTtcbiAgbWVudS5hcHBlbmRDaGlsZChzZWN0aW9uMik7XG4gIG1lbnUuYXBwZW5kQ2hpbGQodGl0bGVfc2VjdGlvbjMpO1xuICBtZW51LmFwcGVuZENoaWxkKHNlY3Rpb24zKTtcbiAgbWVudS5hcHBlbmRDaGlsZCh0aXRsZV9zZWN0aW9uNCk7XG4gIG1lbnUuYXBwZW5kQ2hpbGQoc2VjdGlvbjQpO1xufTtcblxuZXhwb3J0IHsgY3JlYXRlTWVudSB9O1xuIiwiaW1wb3J0IHRpbmdsZSBmcm9tICd0aW5nbGUuanMnO1xuaW1wb3J0IHsgYXBwIH0gZnJvbSAnLi8uLi9tYWluJztcblxuXG5leHBvcnQgZnVuY3Rpb24gbWFrZVRvcE1lbnUoKSB7XG4gIGNvbnN0IHRvcF9tZW51ID0gZDMuc2VsZWN0KCcjbWVudXRvcCcpXG4gICAgLnN0eWxlcyh7ICdmb250LWZhbWlseSc6IFwiJ1NpZ25pa2EnLCBzYW5zLXNlcmlmXCIsICdmb250LXNpemUnOiAnMC44MGVtJywgJ3RleHQtYWxpZ24nOiAnY2VudGVyJyB9KTtcbiAgY29uc3Qgd2lkdGhfbGVmdCA9IGAke2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZW51JykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggKyAyNX1weGA7XG4gIGNvbnN0IHdpZHRoX2NlbnRyYWxfY2hhcnQgPSBgJHtkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYmFyX3NlY3Rpb24nKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aH1weGA7XG4gIGNvbnN0IHdpZHRoX21hcCA9IGAke2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtYXBfc2VjdGlvbicpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIC0gNDB9cHhgO1xuXG4gIHRvcF9tZW51XG4gICAgLmFwcGVuZCgnZGl2JylcbiAgICAuYXR0cnMoeyBjbGFzczogJ3RpdGxlX3NlY3Rpb24gdDEnIH0pXG4gICAgLmh0bWwoJ1PDiUxFQ1RJT04nKTtcblxuICBjb25zdCB0eXBlX2NoYXJ0ID0gdG9wX21lbnVcbiAgICAuYXBwZW5kKCdkaXYnKVxuICAgIC5hdHRyKCdjbGFzcycsICd0b3Bfc2VjdGlvbiB0MicpXG4gICAgLnN0eWxlKCdkaXNwbGF5JywgJ2ZsZXgnKTtcblxuICBjb25zdCBwb3NpdGlvbiA9IHR5cGVfY2hhcnRcbiAgICAuYXBwZW5kKCdkaXYnKVxuICAgIC5hdHRyKCdjbGFzcycsICd0eXBlX2NvbXBhcmFpc29uJyk7XG5cbiAgcG9zaXRpb24uYXBwZW5kKCdwJylcbiAgICAuYXR0cignY2xhc3MnLCAndGl0bGVfdHlwZV9jb21wJylcbiAgICAuaHRtbCgnUE9TSVRJT04nKTtcblxuICBwb3NpdGlvbi5hcHBlbmQoJ3NwYW4nKVxuICAgIC5hdHRycyh7IGNsYXNzOiAndHlwZV9jaGFydCBjaGFydF90MSBzZWxlY3RlZCcsIHZhbHVlOiAnQmFyQ2hhcnQxJyB9KVxuICAgIC5odG1sKCcxIGluZC4nKTtcblxuICBwb3NpdGlvbi5hcHBlbmQoJ3NwYW4nKVxuICAgIC5hdHRycyh7IGNsYXNzOiAndHlwZV9jaGFydCBjaGFydF90MiBkaXNhYmxlZCcsIHZhbHVlOiAnU2NhdHRlclBsb3QyJyB9KVxuICAgIC5odG1sKCcyIGluZC4nKTtcblxuICBwb3NpdGlvbi5hcHBlbmQoJ3NwYW4nKVxuICAgIC5hdHRycyh7IGNsYXNzOiAndHlwZV9jaGFydCBjaGFydF90MyBkaXNhYmxlZCcsIHZhbHVlOiAnUmFkYXJDaGFydDMnIH0pXG4gICAgLmh0bWwoJyszIGluZC4nKTtcblxuICBjb25zdCByZXNzZW1ibGFuY2UgPSB0eXBlX2NoYXJ0XG4gICAgLmFwcGVuZCgnZGl2JylcbiAgICAuYXR0cignY2xhc3MnLCAndHlwZV9jb21wYXJhaXNvbicpO1xuXG4gIHJlc3NlbWJsYW5jZS5hcHBlbmQoJ3AnKVxuICAgIC5hdHRyKCdjbGFzcycsICd0aXRsZV90eXBlX2NvbXAnKVxuICAgIC5odG1sKCdSRVNTRU1CTEFOQ0VTJyk7XG5cbiAgcmVzc2VtYmxhbmNlLmFwcGVuZCgnc3BhbicpXG4gICAgLmF0dHJzKHsgY2xhc3M6ICd0eXBlX2NoYXJ0IGNoYXJ0X3QxJywgdmFsdWU6ICdTaW1pbGFyaXR5MXBsdXMnIH0pXG4gICAgLmh0bWwoJysxIGluZC4nKTtcblxuICB0b3BfbWVudVxuICAgIC5hcHBlbmQoJ2RpdicpXG4gICAgLmF0dHJzKHsgY2xhc3M6ICd0aXRsZV9zZWN0aW9uIHQzJyB9KVxuICAgIC5odG1sKCdRVUVMTEVTIFLDiUdJT05TID8nKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VIZWFkZXJNYXBTZWN0aW9uKCkge1xuICBjb25zdCBoZWFkZXJfbWFwX3NlY3Rpb24gPSBkMy5zZWxlY3QoJyNtYXBfc2VjdGlvbicpXG4gICAgLmluc2VydCgnZGl2JywgJyNzdmdfbWFwJylcbiAgICAuYXR0cignaWQnLCAnaGVhZGVyX21hcCcpO1xuXG4gIGhlYWRlcl9tYXBfc2VjdGlvbi5hcHBlbmQoJ2RpdicpXG4gICAgLmF0dHJzKHsgY2xhc3M6ICdmaWx0ZXJfaW5mbycsIHRpdGxlOiAnRXNwYWNlIGRcXCfDqXR1ZGUnIH0pO1xuXG4gIGNvbnN0IGNvbXBsZXR1ZGVfc2VjdGlvbiA9IGhlYWRlcl9tYXBfc2VjdGlvbi5hcHBlbmQoJ2RpdicpXG4gICAgLmF0dHJzKHsgY2xhc3M6ICdjb21wbGV0dWRlX3NlY3Rpb24nLCB0aXRsZTogJ0NvbXBsw6l0dWRlIGRlIGxcXCdpbmZvcm1hdGlvbicgfSk7XG5cbiAgY29tcGxldHVkZV9zZWN0aW9uLmFwcGVuZCgncCcpXG4gICAgLmF0dHIoJ2lkJywgJ2NvbXBsZXR1ZGVfZmVhdHVyZXMnKTtcblxuICBjb21wbGV0dWRlX3NlY3Rpb24uYXBwZW5kKCdwJylcbiAgICAuYXR0cignaWQnLCAnY29tcGxldHVkZV9wb3B1bGF0aW9uJyk7XG5cbiAgaGVhZGVyX21hcF9zZWN0aW9uLmluc2VydCgnaW1nJylcbiAgICAuYXR0cnMoe1xuICAgICAgY2xhc3M6ICdtYXBfYnV0dG9uIGFjdGl2ZScsXG4gICAgICB3aWR0aDogMjAsXG4gICAgICBoZWlnaHQ6IDIwLFxuICAgICAgc3JjOiAnaW1nL2dpbXAtdG9vbC1yZWN0LXNlbGVjdC5wbmcnLFxuICAgICAgaWQ6ICdpbWdfcmVjdF9zZWxlYycsXG4gICAgfSk7XG5cbiAgaGVhZGVyX21hcF9zZWN0aW9uLmluc2VydCgnaW1nJylcbiAgICAuYXR0cnMoe1xuICAgICAgY2xhc3M6ICdtYXBfYnV0dG9uJyxcbiAgICAgIHdpZHRoOiAyMCxcbiAgICAgIGhlaWdodDogMjAsXG4gICAgICBzcmM6ICdpbWcvZ2ltcC10b29sLXpvb20ucG5nJyxcbiAgICAgIGlkOiAnaW1nX21hcF96b29tJyxcbiAgICB9KTtcblxuICBoZWFkZXJfbWFwX3NlY3Rpb24uaW5zZXJ0KCdpbWcnKVxuICAgIC5hdHRycyh7XG4gICAgICBjbGFzczogJ21hcF9idXR0b24nLFxuICAgICAgd2lkdGg6IDIwLFxuICAgICAgaGVpZ2h0OiAyMCxcbiAgICAgIHNyYzogJ2ltZy9naW1wLWN1cnNvci5wbmcnLFxuICAgICAgaWQ6ICdpbWdfbWFwX3NlbGVjdCcsXG4gICAgfSk7XG5cbiAgaGVhZGVyX21hcF9zZWN0aW9uLmluc2VydCgnZGl2JylcbiAgICAuYXR0cnMoe1xuICAgICAgaWQ6ICd6b29tX2luJyxcbiAgICAgIGNsYXNzOiAndG9wX2hhbGZfY2lyY2xlJyxcbiAgICB9KVxuICAgIC5hcHBlbmQoJ3NwYW4nKVxuICAgIC50ZXh0KCcrJyk7XG5cbiAgaGVhZGVyX21hcF9zZWN0aW9uLmluc2VydCgnZGl2JylcbiAgICAuYXR0cnMoe1xuICAgICAgaWQ6ICd6b29tX291dCcsXG4gICAgICBjbGFzczogJ3RvcF9oYWxmX2NpcmNsZScsXG4gICAgfSlcbiAgICAuYXBwZW5kKCdzcGFuJylcbiAgICAudGV4dCgnLScpO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlSGVhZGVyQ2hhcnQoKSB7XG4gIGNvbnN0IGhlYWRlcl9iYXJfc2VjdGlvbiA9IGQzLnNlbGVjdCgnI2Jhcl9zZWN0aW9uJylcbiAgICAuaW5zZXJ0KCdwJywgJ3N2ZycpXG4gICAgLmF0dHIoJ2lkJywgJ2hlYWRlcl9jaGFydCcpXG4gICAgLnN0eWxlKCdtYXJnaW4tYm90dG9tJywgJzAnKVxuICAgIC5zdHlsZSgnY2xlYXInLCAnYm90aCcpO1xuXG4gIGhlYWRlcl9iYXJfc2VjdGlvbi5pbnNlcnQoJ2ltZycpXG4gICAgLmF0dHJzKHtcbiAgICAgIHdpZHRoOiAyMCxcbiAgICAgIGhlaWdodDogMjAsXG4gICAgICBzcmM6ICdpbWcvcGljdG9fZG93bmxvYWQyLnBuZycsXG4gICAgICBpZDogJ2ltZ190YWJsZScsXG4gICAgfSlcbiAgICAuc3R5bGVzKHsgbWFyZ2luOiAnM3B4JywgZmxvYXQ6ICdyaWdodCcgfSlcbiAgICAub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29sdW1ucyA9IE9iamVjdC5rZXlzKGFwcC5jdXJyZW50X2RhdGFbMF0pO1xuICAgICAgY29uc3QgY29udGVudCA9IFtcbiAgICAgICAgY29sdW1ucy5qb2luKCcsJyksICdcXHJcXG4nLFxuICAgICAgICBhcHAuY3VycmVudF9kYXRhLm1hcChkID0+IGNvbHVtbnMubWFwKGMgPT4gZFtjXSkuam9pbignLCcpKS5qb2luKCdcXHJcXG4nKSxcbiAgICAgIF0uam9pbignJyk7XG4gICAgICBjb25zdCBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBgZGF0YTp0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgsJHtlbmNvZGVVUklDb21wb25lbnQoY29udGVudCl9YCk7XG4gICAgICBlbGVtLnNldEF0dHJpYnV0ZSgnZG93bmxvYWQnLCAnUmVnaW92aXpfZXhwb3J0LmNzdicpO1xuICAgICAgZWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGVtKTtcbiAgICAgIGVsZW0uY2xpY2soKTtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWxlbSk7XG4gICAgICAvLyBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGFUYWJsZS13cmFwcGVyJykuc3R5bGUuZGlzcGxheSkge1xuICAgICAgLy8gICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3ZnX21hcCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAvLyAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdmdfbGVnZW5kJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgIC8vICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hlYWRlcl9tYXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgLy8gICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaGVhZGVyX3RhYmxlJykuc3R5bGUuZGlzcGxheSA9IG51bGw7XG4gICAgICAvLyAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYXRhVGFibGUtd3JhcHBlcicpLnN0eWxlLmRpc3BsYXkgPSBudWxsO1xuICAgICAgLy8gICB0aGlzLnN0eWxlLmZpbHRlciA9ICdpbnZlcnQoNzUlKSc7XG4gICAgICAvLyB9IGVsc2Uge1xuICAgICAgLy8gICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3ZnX21hcCcpLnN0eWxlLmRpc3BsYXkgPSBudWxsO1xuICAgICAgLy8gICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3ZnX2xlZ2VuZCcpLnN0eWxlLmRpc3BsYXkgPSBudWxsO1xuICAgICAgLy8gICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaGVhZGVyX21hcCcpLnN0eWxlLmRpc3BsYXkgPSBudWxsO1xuICAgICAgLy8gICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaGVhZGVyX3RhYmxlJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgIC8vICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGFUYWJsZS13cmFwcGVyJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgIC8vICAgdGhpcy5zdHlsZS5maWx0ZXIgPSBudWxsO1xuICAgICAgLy8gfVxuICAgIH0pO1xuXG4gIGhlYWRlcl9iYXJfc2VjdGlvbi5pbnNlcnQoJ2ltZycpXG4gICAgLmF0dHJzKHtcbiAgICAgIHdpZHRoOiAyMCxcbiAgICAgIGhlaWdodDogMjAsXG4gICAgICBzcmM6ICdpbWcvcGljdG9fcmVwb3J0Mi5wbmcnLFxuICAgICAgaWQ6ICdpbWdfcHJpbnRlcicsXG4gICAgfSlcbiAgICAuc3R5bGVzKHsgbWFyZ2luOiAnM3B4JywgZmxvYXQ6ICdyaWdodCcgfSlcbiAgICAub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGVudCA9IGA8ZGl2IGlkPVwicHJlcF9yYXBwb3J0XCI+PGgzPlJhcHBvcnQgZW4gY291cnMgZGUgcHLDqXBhcmF0aW9uLi4uPC9oMz5cbjxkaXYgY2xhc3M9XCJzcGlubmVyXCI+PGRpdiBjbGFzcz1cImN1YmUxXCI+PC9kaXY+PGRpdiBjbGFzcz1cImN1YmUyXCI+PC9kaXY+PC9kaXY+PC9kaXY+YDtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuZXctY2FwXG4gICAgICBjb25zdCBtb2RhbCA9IG5ldyB0aW5nbGUubW9kYWwoe1xuICAgICAgICBzdGlja3lGb290ZXI6IGZhbHNlLFxuICAgICAgICBjbG9zZU1ldGhvZHM6IFsnb3ZlcmxheScsICdlc2NhcGUnXSxcbiAgICAgICAgY2xvc2VMYWJlbDogJ0Nsb3NlJyxcbiAgICAgICAgb25PcGVuKCkge1xuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi50aW5nbGUtbW9kYWwudGluZ2xlLW1vZGFsLS12aXNpYmxlJykuc3R5bGUuYmFja2dyb3VuZCA9ICdyZ2JhKDAsMCwwLDAuNCknO1xuICAgICAgICB9LFxuICAgICAgICBvbkNsb3NlKCkge1xuICAgICAgICAgIG1vZGFsLmRlc3Ryb3koKTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgbW9kYWwuc2V0Q29udGVudChjb250ZW50KTtcbiAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBtb2RhbC5zZXRDb250ZW50KGA8ZGl2IGlkPVwicHJlcF9yYXBwb3J0XCI+XG48cD48YSBjbGFzcz1cImJ1dHRvbkRvd25sb2FkXCIgaHJlZj1cIiNcIj5Uw6lsw6ljaGFyZ2VyPC9hPiA8YSBjbGFzcz1cImJ1dHRvbkRvd25sb2FkXCIgaHJlZj1cIiNcIj5PdXZyaXI8L2E+PC9wPjwvZGl2PmApO1xuICAgICAgfSwgMjUwMCk7XG4gICAgfSk7XG5cbiAgaGVhZGVyX2Jhcl9zZWN0aW9uLmluc2VydCgnaW1nJylcbiAgICAuYXR0cnMoe1xuICAgICAgd2lkdGg6IDIwLFxuICAgICAgaGVpZ2h0OiAyMCxcbiAgICAgIHNyYzogJ2ltZy9waWN0b19pbmZvcm1hdGlvbjIucG5nJyxcbiAgICAgIGlkOiAnaW1nX2luZm8nLFxuICAgIH0pXG4gICAgLnN0eWxlcyh7IG1hcmdpbjogJzNweCcsIGZsb2F0OiAncmlnaHQnIH0pXG4gICAgLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgIGNvbnN0IGhlbHBfbWVzc2FnZSA9IGFwcC5jaGFydC5nZXRIZWxwTWVzc2FnZSgpLnNwbGl0KCdcXG4nKS5qb2luKCc8YnI+Jyk7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbmV3LWNhcFxuICAgICAgY29uc3QgbW9kYWwgPSBuZXcgdGluZ2xlLm1vZGFsKHtcbiAgICAgICAgc3RpY2t5Rm9vdGVyOiBmYWxzZSxcbiAgICAgICAgY2xvc2VNZXRob2RzOiBbJ292ZXJsYXknLCAnYnV0dG9uJywgJ2VzY2FwZSddLFxuICAgICAgICBjbG9zZUxhYmVsOiAnQ2xvc2UnLFxuICAgICAgICBvbk9wZW4oKSB7XG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LnRpbmdsZS1tb2RhbC50aW5nbGUtbW9kYWwtLXZpc2libGUnKS5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JnYmEoMCwwLDAsMC40KSc7XG4gICAgICAgIH0sXG4gICAgICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgICAgbW9kYWwuZGVzdHJveSgpO1xuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBtb2RhbC5zZXRDb250ZW50KGhlbHBfbWVzc2FnZSk7XG4gICAgICBtb2RhbC5vcGVuKCk7XG4gICAgfSk7XG59XG4iLCJpbXBvcnQgeyBjb2xvcl9oaWdobGlnaHQgfSBmcm9tICcuL29wdGlvbnMnO1xuaW1wb3J0IHsgdmFyaWFibGVzX2luZm8sIHN0dWR5X3pvbmVzLCB0ZXJyaXRvcmlhbF9tZXNoIH0gZnJvbSAnLi8uLi9tYWluJztcblxuLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cblxuLyoqXG4qIEF0dGFjaCB0aGUgZnVsbF9kYXRhc2V0IEFycmF5IHRvIHRoZSBhcHAgT2JqZWN0IGFuZCBjcmVhdGUgYSBkaWN0aW9ubmFyeVxuKiBhbGxvd2luZyB0byBvYnRhaW4gdGVycml0b3JpYWwgdW5pdHMgbmFtZSBmcm9tIHRoZWlyIElkLlxuKlxuKiBAcGFyYW0ge0FycmF5fSBmdWxsX2RhdGFzZXQgLSBUaGUgZGF0YXNldCBhcyBhbiBBcnJheSBvZiBPYmplY3RcbiogQHBhcmFtIHtPYmplY3R9IGFwcCAtIFRoZSB2YXJpYWJsZSBjb250YWluaW5nIHRoZSBnbG9iYWwgcGFyYW1ldGVycyBhYm91dFxuKiAgIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBhcHBsaWNhdGlvbi5cbiogQHJldHVybiB7dm9pZH1cbipcbiovXG5leHBvcnQgZnVuY3Rpb24gcHJlcGFyZV9kYXRhc2V0KGZ1bGxfZGF0YXNldCwgYXBwKSB7XG4gIGFwcC5mdWxsX2RhdGFzZXQgPSBmdWxsX2RhdGFzZXQ7XG4gIC8vIENyZWF0ZSBhbiBPYmplY3QgZmVhdHVyZV9pZCAtPiAgZmVhdHVyZV9uYW1lIGZvciBlYXNpZXIgbG9va3VwOlxuICBhcHAuZmVhdHVyZV9uYW1lcyA9IHt9O1xuICBmdWxsX2RhdGFzZXQuZm9yRWFjaCgoZWxlbSkgPT4ge1xuICAgIGFwcC5mZWF0dXJlX25hbWVzW2VsZW0uaWRdID0gZWxlbS5uYW1lO1xuICB9KTtcbn1cblxuXG4vKipcbipcbiogQHBhcmFtIHtPYmplY3R9IGFwcCAtIFRoZSB2YXJpYWJsZSBjb250YWluaW5nIHRoZSBnbG9iYWwgcGFyYW1ldGVycyBhYm91dFxuKiAgIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBhcHBsaWNhdGlvbi5cbiogQHJldHVybiB7QXJyYXl9IC0gVGhlIGZpbHRlcmVkIGRhdGEsIGNvbnRhaW5pbmcgb25seSB0aGUgcmVxdWVzdGVkIHZhcmlhYmxlc1xuKiAgIGZvciB0aGUgZmVhdHVyZSBvZiB0aGUgY3VycmVudCBzdHVkeSB6b25lLFxuKiAgICB3aXRob3V0IGZlYXR1cmVzIGNvbnRhaW5pbmcgZW1wdHkgcmF0aW9zLlxuKlxuKi9cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJMZXZlbFZhcihhcHApIHtcbiAgLy8gRmV0Y2ggdGhlIG5hbWUocykgb2YgdGhlIHJhdGlvIChhbmQgYXNzb2NpYXRlZCBudW0gYW5kIGRlbnVtIHZhcmlhYmxlKSxcbiAgLy8gdGhlIG5hbWUgb2YgdGhlIHRhcmdldGVkIHJlZ2lvbiBhbmQgdGhlIGN1cnJlbnQgbGV2ZWwgOlxuICBjb25zdCB7XG4gICAgbnVtLCBkZW51bSwgcmF0aW8sIGN1cnJlbnRfbGV2ZWwsIGlkX2ZpZWxkLCBmaWx0ZXJfa2V5LCBuYW1lX2ZpZWxkLCBteV9yZWdpb24sXG4gIH0gPSBhcHAuY3VycmVudF9jb25maWc7XG5cbiAgY29uc3QgYWxsX3ZhcmlhYmxlcyA9IHJhdGlvLmNvbmNhdChudW0pLmNvbmNhdChkZW51bSk7XG4gIC8vIFByZXBhcmUgdGhlIGRhdGE6XG4gIGxldCB0ZW1wO1xuICBpZiAoZmlsdGVyX2tleSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgdGVtcCA9IGFwcC5mdWxsX2RhdGFzZXRcbiAgICAgIC5maWx0ZXIoZnQgPT4gK2Z0W2N1cnJlbnRfbGV2ZWxdICYmIGZpbHRlcl9rZXkuaW5kZXhPZihmdFtpZF9maWVsZF0pID4gLTEpO1xuICAgIGFwcC5jdXJyZW50X2NvbmZpZy5teV9jYXRlZ29yeSA9IG51bGw7XG4gIH0gZWxzZSBpZiAoZmlsdGVyX2tleSkge1xuICAgIGNvbnN0IG15X2NhdGVnb3J5ID0gYXBwLmZ1bGxfZGF0YXNldC5maWx0ZXIoZnQgPT4gZnRbaWRfZmllbGRdID09PSBteV9yZWdpb24pWzBdW2ZpbHRlcl9rZXldO1xuICAgIHRlbXAgPSBhcHAuZnVsbF9kYXRhc2V0XG4gICAgICAuZmlsdGVyKGZ0ID0+ICtmdFtjdXJyZW50X2xldmVsXSAmJiBmdFtmaWx0ZXJfa2V5XSA9PT0gbXlfY2F0ZWdvcnkpO1xuICAgIGFwcC5jdXJyZW50X2NvbmZpZy5teV9jYXRlZ29yeSA9IG15X2NhdGVnb3J5O1xuICB9IGVsc2Uge1xuICAgIHRlbXAgPSBhcHAuZnVsbF9kYXRhc2V0XG4gICAgICAuZmlsdGVyKGZ0ID0+ICtmdFtjdXJyZW50X2xldmVsXSk7XG4gICAgYXBwLmN1cnJlbnRfY29uZmlnLm15X2NhdGVnb3J5ID0gbnVsbDtcbiAgfVxuICB0ZW1wID0gdGVtcC5tYXAoKGZ0KSA9PiB7XG4gICAgY29uc3QgcHJvcHNfZmVhdHVyZSA9IHtcbiAgICAgIGlkOiBmdFtpZF9maWVsZF0sXG4gICAgICBuYW1lOiBmdFtuYW1lX2ZpZWxkXSxcbiAgICB9O1xuICAgIGZvciAobGV0IGkgPSAwLCBsZW5faSA9IGFsbF92YXJpYWJsZXMubGVuZ3RoOyBpIDwgbGVuX2k7IGkrKykge1xuICAgICAgcHJvcHNfZmVhdHVyZVthbGxfdmFyaWFibGVzW2ldXSA9ICtmdFthbGxfdmFyaWFibGVzW2ldXTtcbiAgICB9XG4gICAgcmV0dXJuIHByb3BzX2ZlYXR1cmU7XG4gIH0pO1xuICBhcHAuY3VycmVudF9kYXRhID0gdGVtcDtcbn1cblxuXG4vKipcbiogVE9ET1xuKi9cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJMZXZlbEdlb20obnV0c19mZWF0dXJlcywgZmlsdGVyID0gJ04xJykge1xuICByZXR1cm4gbnV0c19mZWF0dXJlcy5maWx0ZXIoZCA9PiBkLnByb3BlcnRpZXNbZmlsdGVyXSA9PT0gMSk7XG59XG5cbi8qKlxuKiBGdW5jdGlvbiB0byBwcmVwYXJlIHRoZSBnbG9iYWwgXCJ2YXJpYWJsZXNfaW5mb1wiIEFycmF5IG9mIG9iamVjdHMgZnJvbSB0aGUgYXJyYXlcbiogY29udGFpbmluZyB0aGUgcmVhZGVkICdtZXRhZGF0YS5jc3YnIGZpbGUuXG4qXG4qIEBwYXJhbSB7QXJyYXl9IG1ldGFkYXRhX2luZGljYXRldXJzIC0gVGhlIGFycmF5IHJldHVybmVkIGJ5IGQzLmNzdi5cbiogQHJldHVybiB7dm9pZH1cbipcbiovXG5leHBvcnQgZnVuY3Rpb24gcHJlcGFyZVZhcmlhYmxlc0luZm8obWV0YWRhdGFfaW5kaWNhdGV1cnMpIHtcbiAgbWV0YWRhdGFfaW5kaWNhdGV1cnNcbiAgICAuZmlsdGVyKGZ0ID0+IGZ0LlJlZ2lvdml6X2l0ZW0gPT09ICdJbmRpY2F0ZXVyJyB8fCBmdC5SZWdpb3Zpel9pdGVtID09PSAnU3RvY2snKVxuICAgIC5mb3JFYWNoKChmdCkgPT4ge1xuICAgICAgdmFyaWFibGVzX2luZm8ucHVzaCh7XG4gICAgICAgIGlkOiBmdC5pZCxcbiAgICAgICAgaWQxOiBgJHtmdC5pZDF9YCxcbiAgICAgICAgaWQyOiBgJHtmdC5pZDJ9YCxcbiAgICAgICAgbmFtZTogYCR7ZnQuTmFtZX0gKCR7cGFyc2VJbnQoZnQuWWVhciwgMTApfSlgLFxuICAgICAgICB1bml0OiBgJHtmdC5Vbml0fWAsXG4gICAgICAgIGdyb3VwOiBmdC5UaGVtZSxcbiAgICAgICAgbWV0aG9kbzogZnQuTWV0aG9kb2xvZ3ksXG4gICAgICAgIHNvdXJjZTogZnQuRGF0YV9zb3VyY2UsXG4gICAgICAgIGxhc3RfdXBkYXRlOiBmdC5MYXN0X3VwZGF0ZSxcbiAgICAgICAgZm9ybXVsYTogZnQuRm9ybXVsYSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICBtZXRhZGF0YV9pbmRpY2F0ZXVyc1xuICAgIC5maWx0ZXIoZnQgPT4gZnQuUmVnaW92aXpfaXRlbSA9PT0gJ1N0dWR5IEFyZWEnKVxuICAgIC5mb3JFYWNoKChmdCkgPT4ge1xuICAgICAgc3R1ZHlfem9uZXMucHVzaCh7XG4gICAgICAgIG5hbWU6IGZ0Lk5hbWUsIGlkOiBmdC5pZCwgZGlzcGxheV9sZXZlbDogZnQuVGhlbWUsIG1ldGhvZG9sb2d5OiBmdC5NZXRob2RvbG9neSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICBtZXRhZGF0YV9pbmRpY2F0ZXVyc1xuICAgIC5maWx0ZXIoZnQgPT4gZnQuUmVnaW92aXpfaXRlbSA9PT0gJ1RlcnJpdG9yaWFsIGRpdmlzaW9uJylcbiAgICAuZm9yRWFjaCgoZnQpID0+IHtcbiAgICAgIHRlcnJpdG9yaWFsX21lc2gucHVzaCh7IG5hbWU6IGZ0Lk5hbWUsIGlkOiBmdC5pZCwgbWV0aG9kb2xvZ3k6IGZ0Lk1ldGhvZG9sb2d5IH0pO1xuICAgIH0pO1xufVxuXG4vKipcbiogU2V0IGFuZCBhcHBseSBhIG5ldyBmaWx0ZXIgKGllLiByZXN0cmljdCB0aGUgc3R1ZHkgem9uZSkgb24gdGhlIGRhdGFzZXQgdG8gYmUgdXNlZC5cbipcbiogQHBhcmFtIHtTdHJpbmd9IGZpbHRlcl90eXBlIC0gVGhlIG5hbWUgb2YgdGhlIGZpbHRlciB0byB1c2UuXG4qIEByZXR1cm4ge3ZvaWR9XG4qXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5RmlsdGVyKGFwcCwgZmlsdGVyX3R5cGUpIHtcbiAgaWYgKGZpbHRlcl90eXBlID09PSAnZmlsdGVyX2NvdW50cnknKSB7XG4gICAgYXBwLmN1cnJlbnRfY29uZmlnLmZpbHRlcl9rZXkgPSAnUGF5cyc7XG4gIH0gZWxzZSBpZiAoZmlsdGVyX3R5cGUgPT09ICdub19maWx0ZXInKSB7XG4gICAgYXBwLmN1cnJlbnRfY29uZmlnLmZpbHRlcl9rZXkgPSB1bmRlZmluZWQ7XG4gIH0gZWxzZSBpZiAoZmlsdGVyX3R5cGUgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgIGFwcC5jdXJyZW50X2NvbmZpZy5maWx0ZXJfa2V5ID0gZmlsdGVyX3R5cGU7XG4gIH0gZWxzZSB7XG4gICAgYXBwLmN1cnJlbnRfY29uZmlnLmZpbHRlcl9rZXkgPSBmaWx0ZXJfdHlwZTtcbiAgfVxuICBmaWx0ZXJMZXZlbFZhcihhcHApO1xuICBhcHAuY29sb3JzID0ge307XG4gIGFwcC5jb2xvcnNbYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbl0gPSBjb2xvcl9oaWdobGlnaHQ7XG59XG5cbi8vIFRPRE8gOiBEb2NcbmV4cG9ydCBmdW5jdGlvbiBjaGFuZ2VSZWdpb24oYXBwLCBpZF9yZWdpb24sIG1hcF9lbGVtKSB7XG4gIGFwcC5jdXJyZW50X2NvbmZpZy5teV9yZWdpb24gPSBpZF9yZWdpb247XG4gIGFwcC5jdXJyZW50X2NvbmZpZy5teV9yZWdpb25fcHJldHR5X25hbWUgPSBhcHAuZmVhdHVyZV9uYW1lc1thcHAuY3VycmVudF9jb25maWcubXlfcmVnaW9uXTtcbiAgaWYgKGFwcC5jdXJyZW50X2NvbmZpZy5maWx0ZXJfa2V5IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICBtYXBfZWxlbS5jb21wdXRlRGlzdE1hdCgpO1xuICAgIGFwcC5jdXJyZW50X2NvbmZpZy5maWx0ZXJfa2V5ID0gbWFwX2VsZW0uZ2V0VW5pdHNXaXRoaW4oK2QzLnNlbGVjdCgnI2Rpc3RfZmlsdGVyJykucHJvcGVydHkoJ3ZhbHVlJykpO1xuICAgIGZpbHRlckxldmVsVmFyKGFwcCk7XG4gIH0gZWxzZSBpZiAoYXBwLmN1cnJlbnRfY29uZmlnLmZpbHRlcl9rZXkpIHtcbiAgICBmaWx0ZXJMZXZlbFZhcihhcHApO1xuICB9XG4gIC8vIFJlc2V0IHRoZSBjb2xvciB0byB1c2Ugb24gdGhlIGNoYXJ0L21hcDpcbiAgYXBwLmNvbG9ycyA9IHt9O1xuICBhcHAuY29sb3JzW2FwcC5jdXJyZW50X2NvbmZpZy5teV9yZWdpb25dID0gY29sb3JfaGlnaGxpZ2h0O1xufVxuXG4vKipcbipcbiogQHBhcmFtIGFwcCAtXG4qIEBwYXJhbSBjb2RlX3JhdGlvIC0gVGhlIGNvZGUgb2YgdGhlIHZhcmlhYmxlIHRvIGJlIGFkZGVkLlxuKiBAcmV0dXJuIHt2b2lkfVxuKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRWYXJpYWJsZShhcHAsIGNvZGVfcmF0aW8pIHtcbiAgY29uc3QgdmFyaWFibGVfaW5mbyA9IHZhcmlhYmxlc19pbmZvLmZpbHRlcihkID0+IGQuaWQgPT09IGNvZGVfcmF0aW8pWzBdO1xuICBhcHAuY29sb3JzID0ge307XG4gIGFwcC5jb2xvcnNbYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbl0gPSBjb2xvcl9oaWdobGlnaHQ7XG4gIGFwcC5jdXJyZW50X2NvbmZpZy5udW0ucHVzaCh2YXJpYWJsZV9pbmZvLmlkMSk7XG4gIGFwcC5jdXJyZW50X2NvbmZpZy5kZW51bS5wdXNoKHZhcmlhYmxlX2luZm8uaWQyKTtcbiAgYXBwLmN1cnJlbnRfY29uZmlnLnJhdGlvLnB1c2godmFyaWFibGVfaW5mby5pZCk7XG4gIGFwcC5jdXJyZW50X2NvbmZpZy5yYXRpb19wcmV0dHlfbmFtZS5wdXNoKHZhcmlhYmxlX2luZm8ubmFtZSk7XG4gIGFwcC5jdXJyZW50X2NvbmZpZy5yYXRpb191bml0LnB1c2godmFyaWFibGVfaW5mby51bml0KTtcbiAgZmlsdGVyTGV2ZWxWYXIoYXBwKTtcbn1cblxuLyoqXG4qXG4qIEBwYXJhbSBhcHAgLVxuKiBAcGFyYW0gY29kZV9yYXRpbyAtIFRoZSBjb2RlIG9mIHRoZSB2YXJpYWJsZSB0byBiZSByZW1vdmUuXG4qIEByZXR1cm4ge3ZvaWR9XG4qL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVZhcmlhYmxlKGFwcCwgY29kZV9yYXRpbykge1xuICBjb25zdCBpeCA9IGFwcC5jdXJyZW50X2NvbmZpZy5yYXRpby5pbmRleE9mKGNvZGVfcmF0aW8pO1xuICBhcHAuY3VycmVudF9jb25maWcubnVtLnNwbGljZShpeCwgMSk7XG4gIGFwcC5jdXJyZW50X2NvbmZpZy5kZW51bS5zcGxpY2UoaXgsIDEpO1xuICBhcHAuY3VycmVudF9jb25maWcucmF0aW8uc3BsaWNlKGl4LCAxKTtcbiAgYXBwLmN1cnJlbnRfY29uZmlnLnJhdGlvX3ByZXR0eV9uYW1lLnNwbGljZShpeCwgMSk7XG4gIGFwcC5jdXJyZW50X2NvbmZpZy5yYXRpb191bml0LnNwbGljZShpeCwgMSk7XG4gIGZpbHRlckxldmVsVmFyKGFwcCk7XG59XG5cbi8qKlxuKiBSZXNldCB0aGUgY3VycmVudCB2YXJpYWJsZXMgaW4gdXNlLlxuKlxuKiBAcGFyYW0gYXBwIC1cbiogQHBhcmFtIGNvZGVzX3JhdGlvIC1cbiogQHJldHVybiB7dm9pZH1cbiovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRWYXJpYWJsZXMoYXBwLCBjb2Rlc19yYXRpbykge1xuICBhcHAuY29sb3JzID0ge307XG4gIGFwcC5jb2xvcnNbYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbl0gPSBjb2xvcl9oaWdobGlnaHQ7XG4gIGFwcC5jdXJyZW50X2NvbmZpZy5udW0gPSBbXTtcbiAgYXBwLmN1cnJlbnRfY29uZmlnLmRlbnVtID0gW107XG4gIGFwcC5jdXJyZW50X2NvbmZpZy5yYXRpbyA9IFtdO1xuICBhcHAuY3VycmVudF9jb25maWcucmF0aW9fcHJldHR5X25hbWUgPSBbXTtcbiAgYXBwLmN1cnJlbnRfY29uZmlnLnJhdGlvX3VuaXQgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGNvZGVzX3JhdGlvLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgY29uc3QgY29kZV9yYXRpbyA9IGNvZGVzX3JhdGlvW2ldO1xuICAgIGNvbnN0IHZhcmlhYmxlX2luZm8gPSB2YXJpYWJsZXNfaW5mby5maWx0ZXIoZCA9PiBkLmlkID09PSBjb2RlX3JhdGlvKVswXTtcbiAgICBhcHAuY3VycmVudF9jb25maWcubnVtLnB1c2godmFyaWFibGVfaW5mby5pZDEpO1xuICAgIGFwcC5jdXJyZW50X2NvbmZpZy5kZW51bS5wdXNoKHZhcmlhYmxlX2luZm8uaWQyKTtcbiAgICBhcHAuY3VycmVudF9jb25maWcucmF0aW8ucHVzaCh2YXJpYWJsZV9pbmZvLmlkKTtcbiAgICBhcHAuY3VycmVudF9jb25maWcucmF0aW9fcHJldHR5X25hbWUucHVzaCh2YXJpYWJsZV9pbmZvLm5hbWUpO1xuICAgIGFwcC5jdXJyZW50X2NvbmZpZy5yYXRpb191bml0LnB1c2godmFyaWFibGVfaW5mby51bml0KTtcbiAgfVxuICBmaWx0ZXJMZXZlbFZhcihhcHApO1xufVxuXG4vKipcbiogQ29tcHV0ZSB0aGUgcmF0aW8gb2YgYXZhaWxhYmxlICg9IG5vdCBlbXB0eSkgdmFsdWVzICh0aGUgXCJjb21wbMOpdHVkZVwiKSB3aXRoaW5cbiogdGhlIHN1YnNldCBjdXJyZW50bHkgaW4gdXNlIGZvciBhbGwgdGhlIHZhcmlhYmxlcyBpbiBcInZhcnNcIi5cbipcbiogQHBhcmFtIHtPYmplY3R9IGFwcCAtIFRoZSB2YXJpYWJsZSBjb250YWluaW5nIHRoZSBnbG9iYWwgcGFyYW1ldGVycyBhYm91dFxuKiAgIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBhcHBsaWNhdGlvbi5cbiogQHBhcmFtIHtBcnJheX0gdmFycyAtIEEgbGlzdCBvZiB2YXJpYWJsZSBuYW1lcyBmb3Igd2hpY2ggY29tcGxldGVuZXNzIHdpbGwgYmUgY2FsY3VsYXRlZC5cbiogQHBhcmFtIHtTdHJpbmd9IG91dHB1dCAtIFdoZXRoZXIgdG8gb3V0cHV0IHRoZSByZXN1bHQgYXMgYSBOdW1iZXIgb3IgYXMgYW4gQXJyYXlcbiogQHJldHVybiB7TnVtYmVyIG9yIEFycmF5fSAtIE51bWJlcjogVGhlIHJhdGlvcyBvZiBmZWF0dXJlcyB3aXRoIGF2YWlsYWJsZSB2YWx1ZXMgd2l0aGluXG4qICAgIHRoZSBzdHVkeSB6b25lIChpbiAlKSBvciwgQXJyYXkgOiB0aGUgbnVtYmVyIG9mIGZlYXR1cmVzIHdpdGggYXZhaWxhYmxlIHZhbHVlc1xuKiAgICBhbmQgdGhlIHRvdGFsIG51bWJlciBvZiBmZWF0dXJlcy5cbiovXG5leHBvcnQgZnVuY3Rpb24gY2FsY0NvbXBsZXR1ZGVTdWJzZXQoYXBwLCB2YXJzLCBvdXRwdXQgPSAncmF0aW8nKSB7XG4gIGNvbnN0IHtcbiAgICBjdXJyZW50X2xldmVsLCBpZF9maWVsZCwgZmlsdGVyX2tleSwgbXlfcmVnaW9uLFxuICB9ID0gYXBwLmN1cnJlbnRfY29uZmlnO1xuXG4gIC8vIENvbXB1dGUgdGhlIGxlbmd0aCBvZiB0aGUgZGF0YXNldCAod2l0aGluIHRoZSBcInN0dWR5IHpvbmVcIiBpZiBhbnkpOlxuICBsZXQgdGVtcDtcbiAgaWYgKGZpbHRlcl9rZXkgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgIHRlbXAgPSBhcHAuZnVsbF9kYXRhc2V0XG4gICAgICAuZmlsdGVyKGZ0ID0+ICEhK2Z0W2N1cnJlbnRfbGV2ZWxdICYmIGZpbHRlcl9rZXkuaW5kZXhPZihmdFtpZF9maWVsZF0pID4gLTEpO1xuICB9IGVsc2UgaWYgKGZpbHRlcl9rZXkpIHtcbiAgICBjb25zdCBteV9jYXRlZ29yeSA9IGFwcC5mdWxsX2RhdGFzZXQuZmluZChmdCA9PiBmdFtpZF9maWVsZF0gPT09IG15X3JlZ2lvbilbZmlsdGVyX2tleV07XG4gICAgdGVtcCA9IGFwcC5mdWxsX2RhdGFzZXRcbiAgICAgIC5maWx0ZXIoZnQgPT4gISErZnRbY3VycmVudF9sZXZlbF0gJiYgZnRbZmlsdGVyX2tleV0gPT09IG15X2NhdGVnb3J5KTtcbiAgfSBlbHNlIHtcbiAgICB0ZW1wID0gYXBwLmZ1bGxfZGF0YXNldFxuICAgICAgLmZpbHRlcihmdCA9PiAhIStmdFtjdXJyZW50X2xldmVsXSk7XG4gIH1cbiAgY29uc3QgdG90YWxfbGVuZ3RoID0gdGVtcC5sZW5ndGg7XG5cbiAgLy8gQ29tcHV0ZSB0aGUgbGVuZ3RoIG9mIHRoZSBkYXRhc2V0IGlmIHdlIGZpbHRlciBlbXB0eSBmZWF0dXJlc1xuICAvLyBvbiBhbGwgdGhlIHZhcmlhYmxlcyBvZiBcInZhcnNcIjpcbiAgdGVtcCA9IHRlbXAubWFwKChmdCkgPT4ge1xuICAgIGNvbnN0IHByb3BzX2ZlYXR1cmUgPSB7XG4gICAgICBpZDogZnRbaWRfZmllbGRdLFxuICAgIH07XG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbl9pID0gdmFycy5sZW5ndGg7IGkgPCBsZW5faTsgaSsrKSB7XG4gICAgICBwcm9wc19mZWF0dXJlW3ZhcnNbaV1dID0gK2Z0W3ZhcnNbaV1dO1xuICAgIH1cbiAgICByZXR1cm4gcHJvcHNfZmVhdHVyZTtcbiAgfSkuZmlsdGVyKGZ0ID0+IHZhcnMubWFwKHJhdGlvX25hbWUgPT4gISFmdFtyYXRpb19uYW1lXSkuZXZlcnkodiA9PiB2ID09PSB0cnVlKSk7XG4gIGNvbnN0IGZpbHRlcmVkX2xlbmd0aCA9IHRlbXAubGVuZ3RoO1xuXG4gIGlmICghKG91dHB1dCA9PT0gJ3JhdGlvJykpIHtcbiAgICAvLyBSZXR1cm4gdGhlIG51bWJlciBvZiBmZWF0dXJlcyB3aXRoIGF2YWlsYWJsZSB2YWx1ZXMgd2l0aGluXG4gICAgLy8gdGhlIHN0dWR5IHpvbmUsIGFuZCB0aGUgdG90YWwgbnVtYmVyIG9mIGZlYXR1cmVzIG9mIHRoZSBzdHVkeSB6b25lXG4gICAgcmV0dXJuIFtmaWx0ZXJlZF9sZW5ndGgsIHRvdGFsX2xlbmd0aF07XG4gIH1cbiAgLy8gUmV0dXJuIHRoZSByYXRpbyBvZiBhdmFpbGFibGUgdmFsdWVzIChcImNvbXBsw6l0dWRlXCIpIHdpdGhpblxuICAvLyB0aGUgc3R1ZHkgem9uZSBzZWxlY3RlZCBieSB0aGUgdXNlcjpcbiAgcmV0dXJuIE1hdGgucm91bmQoKGZpbHRlcmVkX2xlbmd0aCAvIHRvdGFsX2xlbmd0aCkgKiAxMDAwMCkgLyAxMDA7XG59XG5cbi8qKlxuKiBDb21wdXRlIHRoZSByYXRpbyBvZiBwb3B1bGF0aW9uIGNvdmVyZWQgYnkgZmVhdHVyZXMgb24gd2hpY2ggYWxsIHRoZSB2YXJpYWJsZXNcbiogb2YgXCJ2YXJzXCIgYXJlIGF2YWlsYWJsZS5cbipcbiogQHBhcmFtIHtPYmplY3R9IGFwcCAtVGhlIHZhcmlhYmxlIGNvbnRhaW5pbmcgdGhlIGdsb2JhbCBwYXJhbWV0ZXJzIGFib3V0XG4qICAgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGFwcGxpY2F0aW9uLlxuKiBAcGFyYW0ge0FycmF5fSB2YXJzIC0gQSBsaXN0IG9mIHZhcmlhYmxlIG5hbWVzIGZvciB3aGljaCBjb21wbGV0ZW5lc3Mgd2lsbCBiZSBjYWxjdWxhdGVkLlxuKiBAcmV0dXJuIHtOdW1iZXJ9IC0gVGhlIHJhdGlvIChpbiAlKSBvZiBwb3B1bGF0aW9uIGNvdmVyZWQgYnkgZmVhdHVyZXMgZm9yIHdoaWNoXG4qICAgYXJlIGF2YWlsYWJsZSB3aXRoaW4gdGhlIHN0dWR5IHpvbmUuXG4qXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGNQb3BDb21wbGV0dWRlU3Vic2V0KGFwcCwgdmFycykge1xuICBjb25zdCB7XG4gICAgY3VycmVudF9sZXZlbCwgaWRfZmllbGQsIGZpbHRlcl9rZXksIG15X3JlZ2lvbiwgcG9wX2ZpZWxkLFxuICB9ID0gYXBwLmN1cnJlbnRfY29uZmlnO1xuXG4gIC8vIENvbXB1dGUgdGhlIHRvdGFsIHBvcHVsYXRpb24gc3RvY2sgb2YgdGhlIGRhdGEgKHdpdGhpbiB0aGUgXCJzdHVkeSB6b25lXCIgaWYgYW55KTpcbiAgbGV0IHRlbXA7XG4gIGlmIChmaWx0ZXJfa2V5IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICB0ZW1wID0gYXBwLmZ1bGxfZGF0YXNldFxuICAgICAgLmZpbHRlcihmdCA9PiAhIStmdFtjdXJyZW50X2xldmVsXSAmJiBmaWx0ZXJfa2V5LmluZGV4T2YoZnRbaWRfZmllbGRdKSA+IC0xKTtcbiAgfSBlbHNlIGlmIChmaWx0ZXJfa2V5KSB7XG4gICAgY29uc3QgbXlfY2F0ZWdvcnkgPSBhcHAuZnVsbF9kYXRhc2V0LmZpbmQoZnQgPT4gZnRbaWRfZmllbGRdID09PSBteV9yZWdpb24pW2ZpbHRlcl9rZXldO1xuICAgIHRlbXAgPSBhcHAuZnVsbF9kYXRhc2V0XG4gICAgICAuZmlsdGVyKGZ0ID0+ICEhK2Z0W2N1cnJlbnRfbGV2ZWxdICYmIGZ0W2ZpbHRlcl9rZXldID09PSBteV9jYXRlZ29yeSk7XG4gIH0gZWxzZSB7XG4gICAgdGVtcCA9IGFwcC5mdWxsX2RhdGFzZXRcbiAgICAgIC5maWx0ZXIoZnQgPT4gISErZnRbY3VycmVudF9sZXZlbF0pO1xuICB9XG4gIGxldCB0b3RhbF9wb3AgPSAwO1xuICBmb3IgKGxldCBpID0gMCwgbGVuID0gdGVtcC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIHRvdGFsX3BvcCArPSBpc05hTigrdGVtcFtpXVtwb3BfZmllbGRdKSA/IDAgOiArdGVtcFtpXVtwb3BfZmllbGRdO1xuICB9XG4gIC8vIENvbXB1dGUgdGhlIHBvcHVsYXRpb24gc3RvY2sgb2YgdGhlIGRhdGFzZXQgaWYgd2UgZmlsdGVyIGVtcHR5IGZlYXR1cmVzXG4gIC8vIG9uIGFsbCB0aGUgdmFyaWFibGVzIG9mIFwidmFyc1wiOlxuICB0ZW1wID0gdGVtcC5tYXAoKGZ0KSA9PiB7XG4gICAgY29uc3QgcHJvcHNfZmVhdHVyZSA9IHtcbiAgICAgIGlkOiBmdFtpZF9maWVsZF0sXG4gICAgICBwb3A6ICtmdFtwb3BfZmllbGRdLFxuICAgIH07XG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbl9pID0gdmFycy5sZW5ndGg7IGkgPCBsZW5faTsgaSsrKSB7XG4gICAgICBwcm9wc19mZWF0dXJlW3ZhcnNbaV1dID0gK2Z0W3ZhcnNbaV1dO1xuICAgIH1cbiAgICByZXR1cm4gcHJvcHNfZmVhdHVyZTtcbiAgfSkuZmlsdGVyKGZ0ID0+IHZhcnMubWFwKHJhdGlvX25hbWUgPT4gISFmdFtyYXRpb19uYW1lXSkuZXZlcnkodiA9PiB2ID09PSB0cnVlKSk7XG4gIGxldCBzdWJzZXRfcG9wID0gMDtcbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHRlbXAubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBzdWJzZXRfcG9wICs9IGlzTmFOKHRlbXBbaV0ucG9wKSA/IDAgOiB0ZW1wW2ldLnBvcDtcbiAgfVxuICAvLyBSZXR1cm4gdGhlIHJhdGlvIG9mIHBvcHVsYXRpb24gdmFsdWVzIChcImNvbXBsw6l0dWRlXCIpIHdpdGhpblxuICAvLyB0aGUgc3R1ZHkgem9uZSBzZWxlY3RlZCBieSB0aGUgdXNlcjpcbiAgcmV0dXJuIE1hdGgucm91bmQoKHN1YnNldF9wb3AgLyB0b3RhbF9wb3ApICogMTAwMDApIC8gMTAwO1xufVxuLyogZXNsaW50LWVuYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqL1xuIiwiaW1wb3J0IHsgYXBwIH0gZnJvbSAnLi8uLi9tYWluJztcbmltcG9ydCB7IGNvbG9yX2Rpc2FibGVkLCBjb2xvcl9jb3VudHJpZXMsIGNvbG9yX3N1cCwgY29sb3JfaW5mLCBjb2xvcl9oaWdobGlnaHQsIGNvbG9yX2RlZmF1bHRfZGlzc2ltLCBSQVRJT19XSF9NQVAgfSBmcm9tICcuL29wdGlvbnMnO1xuaW1wb3J0IHsgZ2V0U3ZnUGF0aFR5cGUsIHN2Z1BhdGhUb0Nvb3JkcywgZXVjbGlkaWFuX2Rpc3RhbmNlLCBwcmVwYXJlVG9vbHRpcDIgfSBmcm9tICcuL2hlbHBlcnMnO1xuaW1wb3J0IHsgZmlsdGVyTGV2ZWxHZW9tIH0gZnJvbSAnLi9wcmVwYXJlX2RhdGEnO1xuXG4vLyBjb25zdCBzdmdfbWFwID0gZDMuc2VsZWN0KCdzdmcjc3ZnX21hcCcpLFxuLy8gICBtYXJnaW5fbWFwID0geyB0b3A6IDAsIHJpZ2h0OiAwLCBib3R0b206IDAsIGxlZnQ6IDAgfSxcbi8vICAgYmJveF9zdmcgPSBzdmdfbWFwLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbi8vICAgd2lkdGhfbWFwID0gK2Jib3hfc3ZnLndpZHRoIC0gbWFyZ2luX21hcC5sZWZ0IC0gbWFyZ2luX21hcC5yaWdodCxcbi8vICAgaGVpZ2h0X21hcCA9ICtiYm94X3N2Zy5oZWlnaHQgLSBtYXJnaW5fbWFwLnRvcCAtIG1hcmdpbl9tYXAuYm90dG9tO1xuXG5jb25zdCBzdmdfbWFwID0gZDMuc2VsZWN0KCdzdmcjc3ZnX21hcCcpO1xuY29uc3QgYmJveF9zdmcgPSBzdmdfbWFwLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbmNvbnN0IHdpZHRoX21hcCA9ICtiYm94X3N2Zy53aWR0aDtcbmNvbnN0IGhlaWdodF9tYXAgPSB3aWR0aF9tYXAgKiAoMSAvIFJBVElPX1dIX01BUCk7XG5zdmdfbWFwLmF0dHIoJ2hlaWdodCcsIGAke2hlaWdodF9tYXB9cHhgKTtcblxuY29uc3Qgc3R5bGVzID0ge1xuICBmcmFtZTogeyBpZDogJ2ZyYW1lJywgZmlsbDogJyNlOWY0ZmUnLCAnZmlsbC1vcGFjaXR5JzogMSB9LFxuICBjb3VudHJpZXM6IHsgaWQ6ICdjb3VudHJpZXMnLCBmaWxsOiAnI2Q2ZDZkNicsICdmaWxsLW9wYWNpdHknOiAxIH0sXG4gIGJveGVzOiB7IGlkOiAnYm94ZXMnLCBmaWxsOiAnI2U5ZjRmZScsICdmaWxsLW9wYWNpdHknOiAxIH0sXG4gIG51dHM6IHsgaWQ6ICdudXRzJywgZmlsbDogJyM5MzkwZmMnLCAnZmlsbC1vcGFjaXR5JzogMSwgJ3N0cm9rZS13aWR0aCc6IDAuNSwgc3Ryb2tlOiAnI2Y3ZmNmZScsICdzdHJva2Utb3BhY2l0eSc6IDAuOSwgdGFyZ2V0OiB0cnVlIH0sXG4gIGNvdW50cmllc19yZW1vdGU6IHsgaWQ6ICdjb3VudHJpZXNfcmVtb3RlJywgZmlsbDogJyNkNmQ2ZDYnLCAnZmlsbC1vcGFjaXR5JzogMSB9LFxuICBjeXBydXNfbm9uX2VzcG9uX3NwYWNlOiB7IGlkOiAnY3lwcnVzX25vbl9lc3Bvbl9zcGFjZScsIGZpbGw6ICcjZmZmZmZmJywgJ2ZpbGwtb3BhY2l0eSc6IDEgfSxcbiAgYm9yZGVyczogeyBpZDogJ2JvcmRlcnMnLCBmaWxsOiAnbm9uZScsICdzdHJva2Utd2lkdGgnOiAxLCBzdHJva2U6ICcjZmZmZmZmJyB9LFxuICBjb3VudHJpZXNfcmVtb3RlX2JvdW5kYXJpZXM6IHsgaWQ6ICdjb3VudHJpZXNfcmVtb3RlX2JvdW5kYXJpZXMnLCBmaWxsOiAnbm9uZScsICdzdHJva2Utd2lkdGgnOiAxLCBzdHJva2U6ICcjZmZmZmZmJyB9LFxuICBjb2FzdHM6IHsgaWQ6ICdjb2FzdHMnLCBmaWxsOiAnbm9uZScsIHN0cm9rZTogJyNkMmRiZWYnLCAnc3Ryb2tlLXdpZHRoJzogMC41IH0sXG4gIGNvYXN0c19yZW1vdGU6IHsgaWQ6ICdjb2FzdHNfcmVtb3RlJywgZmlsbDogJ25vbmUnLCBzdHJva2U6ICcjZDJkYmVmJywgJ3N0cm9rZS13aWR0aCc6IDAuNSB9LFxuICBib3hlczI6IHsgaWQ6ICdib3hlczInLCBzdHJva2U6ICcjN2E3YTdhJywgJ3N0cm9rZS13aWR0aCc6IDEsIGZpbGw6ICdub25lJyB9LFxuICBsaW5lOiB7IGlkOiAnbGluZScsIHN0cm9rZTogJyNkNmQ2ZDYnLCAnc3Ryb2tlLXdpZHRoJzogMS41LCBmaWxsOiAnbm9uZScgfSxcbn07XG5cbmxldCBwcm9qZWN0aW9uO1xubGV0IHBhdGg7XG5cbmZ1bmN0aW9uIGdldF9iYm94X2xheWVyX3BhdGgobmFtZSkge1xuICBjb25zdCBiYm94X2xheWVyID0gW1tJbmZpbml0eSwgSW5maW5pdHldLCBbLUluZmluaXR5LCAtSW5maW5pdHldXTtcbiAgc3ZnX21hcC5zZWxlY3QoYCMke25hbWV9YClcbiAgICAuc2VsZWN0QWxsKCdwYXRoJylcbiAgICAuZWFjaCgoZCkgPT4ge1xuICAgICAgY29uc3QgYmJveF9wYXRoID0gcGF0aC5ib3VuZHMoZC5nZW9tZXRyeSk7XG4gICAgICBiYm94X2xheWVyWzBdWzBdID0gYmJveF9wYXRoWzBdWzBdIDwgYmJveF9sYXllclswXVswXSA/IGJib3hfcGF0aFswXVswXSA6IGJib3hfbGF5ZXJbMF1bMF07XG4gICAgICBiYm94X2xheWVyWzBdWzFdID0gYmJveF9wYXRoWzBdWzFdIDwgYmJveF9sYXllclswXVsxXSA/IGJib3hfcGF0aFswXVsxXSA6IGJib3hfbGF5ZXJbMF1bMV07XG4gICAgICBiYm94X2xheWVyWzFdWzBdID0gYmJveF9wYXRoWzFdWzBdID4gYmJveF9sYXllclsxXVswXSA/IGJib3hfcGF0aFsxXVswXSA6IGJib3hfbGF5ZXJbMV1bMF07XG4gICAgICBiYm94X2xheWVyWzFdWzFdID0gYmJveF9wYXRoWzFdWzFdID4gYmJveF9sYXllclsxXVsxXSA/IGJib3hfcGF0aFsxXVsxXSA6IGJib3hfbGF5ZXJbMV1bMV07XG4gICAgfSk7XG4gIHJldHVybiBiYm94X2xheWVyO1xufVxuXG5mdW5jdGlvbiBmaXRMYXllcigpIHtcbiAgcHJvamVjdGlvbi5zY2FsZSgxKS50cmFuc2xhdGUoWzAsIDBdKTtcbiAgY29uc3QgYiA9IGdldF9iYm94X2xheWVyX3BhdGgoJ2ZyYW1lJyk7XG4gIGNvbnN0IHMgPSAxIC8gTWF0aC5tYXgoKGJbMV1bMF0gLSBiWzBdWzBdKSAvIHdpZHRoX21hcCwgKGJbMV1bMV0gLSBiWzBdWzFdKSAvIGhlaWdodF9tYXApO1xuICBjb25zdCB0ID0gWyh3aWR0aF9tYXAgLSBzICogKGJbMV1bMF0gKyBiWzBdWzBdKSkgLyAyLCAoaGVpZ2h0X21hcCAtIHMgKiAoYlsxXVsxXSArIGJbMF1bMV0pKSAvIDJdO1xuICBwcm9qZWN0aW9uLnNjYWxlKHMpLnRyYW5zbGF0ZSh0KTtcbiAgc3ZnX21hcC5zZWxlY3RBbGwoJ3BhdGgnKS5hdHRyKCdkJywgcGF0aCk7XG59XG5cbmZ1bmN0aW9uIG1hcF96b29tZWQoKSB7XG4gIGNvbnN0IHRyYW5zZm9ybSA9IGQzLmV2ZW50ID8gZDMuZXZlbnQudHJhbnNmb3JtIDogc3ZnX21hcC5ub2RlKCkuX196b29tO1xuICBpZiAodHJhbnNmb3JtLmsgPCAxKSB0cmFuc2Zvcm0uayA9IDE7XG4gIGlmICh0cmFuc2Zvcm0uayA9PT0gMSkge1xuICAgIHRyYW5zZm9ybS54ID0gMDtcbiAgICB0cmFuc2Zvcm0ueSA9IDA7XG4gIH1cbiAgY29uc3QgbGF5ZXJzID0gc3ZnX21hcC5zZWxlY3QoJyNsYXllcnMnKTtcbiAgY29uc3QgdCA9IGxheWVyc1xuICAgIC5zZWxlY3RBbGwoJ2cnKVxuICAgIC50cmFuc2l0aW9uKClcbiAgICAuZHVyYXRpb24oMjI1KTtcblxuICBsYXllcnMuc2VsZWN0QWxsKCdnJylcbiAgICAudHJhbnNpdGlvbih0KVxuICAgIC5zdHlsZSgnc3Ryb2tlLXdpZHRoJywgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGAke3N0eWxlc1t0aGlzLmlkXVsnc3Ryb2tlLXdpZHRoJ10gLyB0cmFuc2Zvcm0ua31weGA7XG4gICAgfSk7XG5cbiAgbGF5ZXJzLnNlbGVjdEFsbCgnZycpXG4gICAgLnRyYW5zaXRpb24odClcbiAgICAuYXR0cigndHJhbnNmb3JtJywgdHJhbnNmb3JtKTtcblxuICBzdmdfbWFwLnNlbGVjdCgnLmJydXNoX21hcCcpXG4gICAgLnRyYW5zaXRpb24odClcbiAgICAuYXR0cigndHJhbnNmb3JtJywgdHJhbnNmb3JtKTtcbn1cblxuZnVuY3Rpb24gaW50ZXJwb2xhdGVab29tKHRyYW5zbGF0ZSwgc2NhbGUpIHtcbiAgY29uc3Qgbm9kZV9zdmdfbWFwID0gc3ZnX21hcC5ub2RlKCk7XG4gIGNvbnN0IHRyYW5zZm9ybSA9IGQzLnpvb21UcmFuc2Zvcm0obm9kZV9zdmdfbWFwKTtcbiAgcmV0dXJuIGQzLnRyYW5zaXRpb24oKS5kdXJhdGlvbigyMjUpLnR3ZWVuKCd6b29tJywgKCkgPT4ge1xuICAgIGNvbnN0IGlUcmFuc2xhdGUgPSBkMy5pbnRlcnBvbGF0ZShbdHJhbnNmb3JtLngsIHRyYW5zZm9ybS55XSwgdHJhbnNsYXRlKTtcbiAgICBjb25zdCBpU2NhbGUgPSBkMy5pbnRlcnBvbGF0ZSh0cmFuc2Zvcm0uaywgc2NhbGUpO1xuICAgIHJldHVybiAodF92YWx1ZSkgPT4ge1xuICAgICAgbm9kZV9zdmdfbWFwLl9fem9vbS5rID0gaVNjYWxlKHRfdmFsdWUpO1xuICAgICAgY29uc3QgX3QgPSBpVHJhbnNsYXRlKHRfdmFsdWUpO1xuICAgICAgbm9kZV9zdmdfbWFwLl9fem9vbS54ID0gX3RbMF07XG4gICAgICBub2RlX3N2Z19tYXAuX196b29tLnkgPSBfdFsxXTtcbiAgICAgIG1hcF96b29tZWQoKTtcbiAgICB9O1xuICB9KTtcbn1cblxuZnVuY3Rpb24gem9vbUNsaWNrKCkge1xuICBjb25zdCBkaXJlY3Rpb24gPSAodGhpcy5pZCA9PT0gJ3pvb21faW4nKSA/IDEgOiAtMSxcbiAgICBmYWN0b3IgPSAwLjEsXG4gICAgY2VudGVyID0gW3dpZHRoX21hcCAvIDIsIGhlaWdodF9tYXAgLyAyXSxcbiAgICB0cmFuc2Zvcm0gPSBkMy56b29tVHJhbnNmb3JtKHN2Z19tYXAubm9kZSgpKSxcbiAgICB0cmFuc2xhdGUgPSBbdHJhbnNmb3JtLngsIHRyYW5zZm9ybS55XSxcbiAgICB2aWV3ID0geyB4OiB0cmFuc2xhdGVbMF0sIHk6IHRyYW5zbGF0ZVsxXSwgazogdHJhbnNmb3JtLmsgfTtcbiAgbGV0IHRhcmdldF96b29tID0gMSxcbiAgICB0cmFuc2xhdGUwID0gW10sXG4gICAgbCA9IFtdO1xuICBkMy5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB0YXJnZXRfem9vbSA9IHRyYW5zZm9ybS5rICogKDEgKyBmYWN0b3IgKiBkaXJlY3Rpb24pO1xuICB0cmFuc2xhdGUwID0gWyhjZW50ZXJbMF0gLSB2aWV3LngpIC8gdmlldy5rLCAoY2VudGVyWzFdIC0gdmlldy55KSAvIHZpZXcua107XG4gIHZpZXcuayA9IHRhcmdldF96b29tO1xuICBsID0gW3RyYW5zbGF0ZTBbMF0gKiB2aWV3LmsgKyB2aWV3LngsIHRyYW5zbGF0ZTBbMV0gKiB2aWV3LmsgKyB2aWV3LnldO1xuICB2aWV3LnggKz0gY2VudGVyWzBdIC0gbFswXTtcbiAgdmlldy55ICs9IGNlbnRlclsxXSAtIGxbMV07XG4gIGludGVycG9sYXRlWm9vbShbdmlldy54LCB2aWV3LnldLCB2aWV3LmspO1xufVxuXG5cbmZ1bmN0aW9uIG1ha2VNYXBMZWdlbmQobGVnZW5kX2VsZW1zLCBzaXplLCB0cmFuc2xhdGVZKSB7XG4gIGNvbnN0IHJlY3Rfc2l6ZSA9IDE0O1xuICBjb25zdCBzcGFjaW5nID0gNDtcbiAgY29uc3QgbGdkX2hlaWdodCA9IHJlY3Rfc2l6ZSArIHNwYWNpbmc7XG4gIGNvbnN0IG9mZnNldCA9IGxnZF9oZWlnaHQgKiBsZWdlbmRfZWxlbXMubGVuZ3RoIC8gMjtcblxuICBjb25zdCBncnBfbGdkID0gZDMuc2VsZWN0KCcjc3ZnX2xlZ2VuZCcpXG4gICAgLmF0dHIoJ2hlaWdodCcsIHNpemUpXG4gICAgLmFwcGVuZCgnZycpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoNTAsICR7dHJhbnNsYXRlWX0pYClcbiAgICAuc3R5bGVzKHsgJ2ZvbnQtc2l6ZSc6ICcxMXB4JywgJ2ZvbnQtZmFtaWx5JzogJ1xcJ1NpZ25pa2FcXCcsIHNhbnMtc2VyaWYnIH0pO1xuXG4gIGNvbnN0IGxlZ2VuZHMgPSBncnBfbGdkLnNlbGVjdEFsbCgnLmxlZ2VuZCcpXG4gICAgLmRhdGEobGVnZW5kX2VsZW1zKVxuICAgIC5lbnRlcigpXG4gICAgLmFwcGVuZCgnZycpXG4gICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZCcpXG4gICAgLmF0dHIoJ3RyYW5zZm9ybScsIChkLCBpKSA9PiB7XG4gICAgICBjb25zdCB0eCA9IC0yICogcmVjdF9zaXplO1xuICAgICAgY29uc3QgdHkgPSBpICogbGdkX2hlaWdodCAtIG9mZnNldDtcbiAgICAgIHJldHVybiBgdHJhbnNsYXRlKCR7W3R4LCB0eV19KWA7XG4gICAgfSk7XG5cbiAgbGVnZW5kcy5hcHBlbmQoJ3JlY3QnKVxuICAgIC5hdHRycyh7IHdpZHRoOiByZWN0X3NpemUsIGhlaWdodDogcmVjdF9zaXplIH0pXG4gICAgLnN0eWxlcyhkID0+ICh7IGZpbGw6IGQuY29sb3IsIHN0cm9rZTogZC5jb2xvciB9KSk7XG5cbiAgbGVnZW5kcy5hcHBlbmQoJ3RleHQnKVxuICAgIC5hdHRycyh7IHg6IHJlY3Rfc2l6ZSArIHNwYWNpbmcsIHk6IHJlY3Rfc2l6ZSAtIHNwYWNpbmcgfSlcbiAgICAudGV4dChkID0+IGQudGV4dCk7XG5cbiAgaWYgKGxlZ2VuZF9lbGVtc1tsZWdlbmRfZWxlbXMubGVuZ3RoIC0gMV0uY29sb3IgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgIGNvbnN0IGVsZW1zID0gZ3JwX2xnZC5zZWxlY3RBbGwoJ2cubGVnZW5kJykuX2dyb3Vwc1swXTtcbiAgICBjb25zdCBsYXN0X2VsZW0gPSBkMy5zZWxlY3QoZWxlbXNbZWxlbXMubGVuZ3RoIC0gMV0pO1xuICAgIGxhc3RfZWxlbS5hcHBlbmQoJ3BvbHlnb24nKVxuICAgICAgLmF0dHIoJ3BvaW50cycsIGAwLDAgJHtyZWN0X3NpemV9LCR7cmVjdF9zaXplfSAwLCR7cmVjdF9zaXplfWApXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCBsYXN0X2VsZW0ubm9kZSgpLl9fZGF0YV9fLmNvbG9yWzBdKTtcbiAgICBsYXN0X2VsZW0uYXBwZW5kKCdwb2x5Z29uJylcbiAgICAgIC5hdHRyKCdwb2ludHMnLCBgMCwwICR7cmVjdF9zaXplfSwwICR7cmVjdF9zaXplfSwke3JlY3Rfc2l6ZX1gKVxuICAgICAgLnN0eWxlKCdmaWxsJywgbGFzdF9lbGVtLm5vZGUoKS5fX2RhdGFfXy5jb2xvclsxXSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0TGVnZW5kRWxlbXModHlwZSkge1xuICBpZiAodHlwZSA9PT0gMCkge1xuICAgIHJldHVybiBbXG4gICAgICBbXG4gICAgICAgIHsgY29sb3I6IGNvbG9yX2hpZ2hsaWdodCwgdGV4dDogYE1hIHLDqWdpb24gOiAke2FwcC5jdXJyZW50X2NvbmZpZy5teV9yZWdpb25fcHJldHR5X25hbWV9YCB9LFxuICAgICAgICB7IGNvbG9yOiBjb2xvcl9jb3VudHJpZXMsIHRleHQ6ICdBdXRyZXMgcsOpZ2lvbnMgZGUgbFxcJ2VzcGFjZSBkXFwnw6l0dWRlJyB9LFxuICAgICAgICB7IGNvbG9yOiBjb2xvcl9zdXAsIHRleHQ6ICdSYW5nIHBsdXMgw6lsZXbDqSBxdWUgbWEgcsOpZ2lvbicgfSxcbiAgICAgICAgeyBjb2xvcjogY29sb3JfaW5mLCB0ZXh0OiAnUmFuZyBtb2lucyDDqWxldsOpIHF1ZSBtYSByw6lnaW9uJyB9LFxuICAgICAgXSxcbiAgICAgICc3NScsICc0MScsXG4gICAgXTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSAxKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIFtcbiAgICAgICAgeyBjb2xvcjogY29sb3JfaGlnaGxpZ2h0LCB0ZXh0OiBgTWEgcsOpZ2lvbiA6ICR7YXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbl9wcmV0dHlfbmFtZX1gIH0sXG4gICAgICAgIHsgY29sb3I6IGNvbG9yX2NvdW50cmllcywgdGV4dDogJ0F1dHJlcyByw6lnaW9ucyBkZSBsXFwnZXNwYWNlIGRcXCfDqXR1ZGUnIH0sXG4gICAgICAgIHsgY29sb3I6IGNvbG9yX3N1cCwgdGV4dDogJ1JhbmcgcGx1cyDDqWxldsOpIHF1ZSBtYSByw6lnaW9uICgyIGluZGljYXRldXJzKScgfSxcbiAgICAgICAgeyBjb2xvcjogY29sb3JfaW5mLCB0ZXh0OiAnUmFuZyBtb2lucyDDqWxldsOpIHF1ZSBtYSByw6lnaW9uICgyIGluZGljYXRldXJzKScgfSxcbiAgICAgICAgeyBjb2xvcjogWydvcmFuZ2UnLCAncmdiKDE2MCwgMzAsIDE2MCknXSwgdGV4dDogJ1JhbmcgcGx1cyDDqWxldsOpIHF1ZSBtYSByw6lnaW9uICgxIGluZGljYXRldXIgc3VyIDIpJyB9LFxuICAgICAgXSxcbiAgICAgICc5NScsICc1MCcsXG4gICAgXTtcbiAgfVxuICByZXR1cm4gW1xuICAgIFtcbiAgICAgIHsgY29sb3I6IGNvbG9yX2hpZ2hsaWdodCwgdGV4dDogYE1hIHLDqWdpb24gOiAke2FwcC5jdXJyZW50X2NvbmZpZy5teV9yZWdpb25fcHJldHR5X25hbWV9YCB9LFxuICAgICAgeyBjb2xvcjogY29sb3JfY291bnRyaWVzLCB0ZXh0OiAnQXV0cmVzIHLDqWdpb25zIGRlIGxcXCdlc3BhY2UgZFxcJ8OpdHVkZSwgc8OpbGVjdGlvbm5hYmxlcyBwb3VyIGxhIGNvbXBhcmFpc29uJyB9LFxuICAgIF0sXG4gICAgJzYwJywgJzIyLjUnLFxuICBdO1xufVxuXG5cbmNsYXNzIE1hcFNlbGVjdCB7XG4gIGNvbnN0cnVjdG9yKG51dHMsIG90aGVyX2xheWVycywgZmlsdGVyID0gJ04xJykge1xuICAgIGFwcC5tYXBEcmF3UmF0aW8gPSBhcHAucmF0aW9Ub1dpZGU7XG4gICAgcHJvamVjdGlvbiA9IGQzLmdlb0lkZW50aXR5KClcbiAgICAgIC5maXRFeHRlbnQoW1swLCAwXSwgW3dpZHRoX21hcCwgaGVpZ2h0X21hcF1dLCBvdGhlcl9sYXllcnMuZ2V0KCdmcmFtZScpKVxuICAgICAgLnJlZmxlY3RZKHRydWUpO1xuXG4gICAgcGF0aCA9IGQzLmdlb1BhdGgoKS5wcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuXG4gICAgY29uc3QgbGF5ZXJzID0gc3ZnX21hcC5hcHBlbmQoJ2cnKVxuICAgICAgLmF0dHIoJ2lkJywgJ2xheWVycycpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3NjYWxlKDEpJyk7XG4gICAgdGhpcy5udXRzID0gbnV0cztcbiAgICB0aGlzLnpvb21fbWFwID0gZDMuem9vbSgpXG4gICAgICAuc2NhbGVFeHRlbnQoWzEsIDVdKVxuICAgICAgLnRyYW5zbGF0ZUV4dGVudChbWzAsIDBdLCBbd2lkdGhfbWFwLCBoZWlnaHRfbWFwXV0pXG4gICAgICAub24oJ3pvb20nLCBtYXBfem9vbWVkKTtcblxuICAgIHN2Z19tYXAuY2FsbCh0aGlzLnpvb21fbWFwKTtcblxuICAgIGNvbnN0IGxheWVyX2xpc3QgPSBPYmplY3Qua2V5cyhzdHlsZXMpO1xuICAgIGZvciAobGV0IGkgPSAwLCBuX2xheWVyID0gbGF5ZXJfbGlzdC5sZW5ndGg7IGkgPCBuX2xheWVyOyBpKyspIHtcbiAgICAgIGNvbnN0IG5hbWVfbHlyID0gbGF5ZXJfbGlzdFtpXTtcbiAgICAgIGNvbnN0IHN0eWxlX2xheWVyID0gc3R5bGVzW25hbWVfbHlyXTtcbiAgICAgIGlmIChzdHlsZV9sYXllci50YXJnZXQgPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy50YXJnZXRfbGF5ZXIgPSBsYXllcnMuYXBwZW5kKCdnJylcbiAgICAgICAgICAuYXR0cnMoc3R5bGVfbGF5ZXIpO1xuICAgICAgICB0aGlzLnRhcmdldF9sYXllci5zZWxlY3RBbGwoJ3BhdGgnKVxuICAgICAgICAgIC5kYXRhKGZpbHRlckxldmVsR2VvbSh0aGlzLm51dHMuZmVhdHVyZXMsIGZpbHRlciksIGQgPT4gZC5pZClcbiAgICAgICAgICAuZW50ZXIoKVxuICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd0Z19mdCcpXG4gICAgICAgICAgLmF0dHIoJ3RpdGxlJywgZCA9PiBgJHtkLnByb3BlcnRpZXNbYXBwLmN1cnJlbnRfY29uZmlnLm5hbWVfZmllbGRdfSAoJHtkLmlkfSlgKVxuICAgICAgICAgIC5hdHRyKCdmaWxsJywgZCA9PiAoZC5pZCAhPT0gYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbiA/IGNvbG9yX2NvdW50cmllcyA6IGNvbG9yX2hpZ2hsaWdodCkpXG4gICAgICAgICAgLmF0dHIoJ2QnLCBwYXRoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxheWVycy5hcHBlbmQoJ2cnKVxuICAgICAgICAgIC5hdHRycyhzdHlsZV9sYXllcilcbiAgICAgICAgICAuc2VsZWN0QWxsKCdwYXRoJylcbiAgICAgICAgICAuZGF0YShvdGhlcl9sYXllcnMuZ2V0KG5hbWVfbHlyKS5mZWF0dXJlcylcbiAgICAgICAgICAuZW50ZXIoKVxuICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxuICAgICAgICAgIC5hdHRycyh7IGQ6IHBhdGggfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMubGF5ZXJzID0gbGF5ZXJzO1xuICAgIGZpdExheWVyKCk7XG4gICAgYXBwLnR5cGVfcGF0aCA9IGdldFN2Z1BhdGhUeXBlKHRoaXMudGFyZ2V0X2xheWVyLnNlbGVjdCgncGF0aCcpLm5vZGUoKS5nZXRBdHRyaWJ1dGUoJ2QnKSk7XG4gICAgdGhpcy50YXJnZXRfbGF5ZXIuc2VsZWN0QWxsKCdwYXRoJylcbiAgICAgIC5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fcHRzID0gc3ZnUGF0aFRvQ29vcmRzKHRoaXMuZ2V0QXR0cmlidXRlKCdkJyksIGFwcC50eXBlX3BhdGgpO1xuICAgICAgfSk7XG4gICAgdGhpcy50b29sdGlwID0gcHJlcGFyZVRvb2x0aXAyKGQzLnNlbGVjdChzdmdfbWFwLm5vZGUoKS5wYXJlbnRFbGVtZW50KSwgbnVsbCwgJ3Rvb2x0aXBfbWFwJyk7XG4gICAgdGhpcy5iaW5kVG9vbHRpcHMoKTtcbiAgfVxuXG4gIHVwZGF0ZUxldmVsUmVnaW9uKGZpbHRlciA9ICdOMScpIHtcbiAgICBjb25zdCBuZXdfc2VsZWN0aW9uID0gZmlsdGVyTGV2ZWxHZW9tKHRoaXMubnV0cy5mZWF0dXJlcywgZmlsdGVyKTtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSB0aGlzLnRhcmdldF9sYXllclxuICAgICAgLnNlbGVjdEFsbCgncGF0aCcpXG4gICAgICAuZGF0YShuZXdfc2VsZWN0aW9uLCBkID0+IGQuaWQpO1xuICAgIHNlbGVjdGlvbi5lbnRlcigpXG4gICAgICAuYXBwZW5kKCdwYXRoJylcbiAgICAgIC5hdHRycyhkID0+ICh7XG4gICAgICAgIHRpdGxlOiBgJHtkLnByb3BlcnRpZXNbYXBwLmN1cnJlbnRfY29uZmlnLm5hbWVfZmllbGRdfSAoJHtkLmlkfSlgLFxuICAgICAgICBmaWxsOiBkLmlkICE9PSBhcHAuY3VycmVudF9jb25maWcubXlfcmVnaW9uID8gY29sb3JfY291bnRyaWVzIDogY29sb3JfaGlnaGxpZ2h0LFxuICAgICAgICBkOiBwYXRoLFxuICAgICAgfSkpO1xuICAgIHNlbGVjdGlvblxuICAgICAgLmF0dHIoJ2QnLCBwYXRoKTtcbiAgICBzZWxlY3Rpb25cbiAgICAgIC5leGl0KClcbiAgICAgIC5yZW1vdmUoKTtcbiAgICB0aGlzLnJlc2V0Q29sb3JzKG5ld19zZWxlY3Rpb24ubWFwKGQgPT4gZC5pZCkpO1xuICAgIHRoaXMuY29tcHV0ZURpc3RNYXQoKTtcbiAgICB0aGlzLnRhcmdldF9sYXllci5zZWxlY3RBbGwoJ3BhdGgnKVxuICAgICAgLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9wdHMgPSB1bmRlZmluZWQ7XG4gICAgICB9KTtcbiAgICB0aGlzLmJpbmRUb29sdGlwcygpO1xuICB9XG5cbiAgYmluZFRvb2x0aXBzKCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIHRoaXMudGFyZ2V0X2xheWVyLnNlbGVjdEFsbCgncGF0aCcpXG4gICAgICAub24oJ21vdXNlb3ZlcicsICgpID0+IHtcbiAgICAgICAgLy8gY2xlYXJUaW1lb3V0KHQpO1xuICAgICAgICB0aGlzLnRvb2x0aXAuc3R5bGUoJ2Rpc3BsYXknLCBudWxsKTtcbiAgICAgIH0pXG4gICAgICAub24oJ21vdXNlb3V0JywgKCkgPT4ge1xuICAgICAgICAvLyBjbGVhclRpbWVvdXQodCk7XG4gICAgICAgIC8vIHQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy50b29sdGlwLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgIC8vIH0sIDI1MCk7XG4gICAgICB9KVxuICAgICAgLm9uKCdtb3VzZW1vdmUgbW91c2Vkb3duJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBjbGVhclRpbWVvdXQodCk7XG4gICAgICAgIHNlbGYudG9vbHRpcC5zZWxlY3QoJy50aXRsZScpLmh0bWwodGhpcy5nZXRBdHRyaWJ1dGUoJ3RpdGxlJykpO1xuICAgICAgICBjb25zdCBiID0gc2VsZi50b29sdGlwLnNlbGVjdCgnLnRpdGxlJykubm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCBsZWZ0ID0gZDMuZXZlbnQucGFnZVggPCAod2luZG93LmlubmVyV2lkdGggLSAoYi53aWR0aCArIDIwKSlcbiAgICAgICAgICA/IGQzLmV2ZW50LnBhZ2VYIC0gNVxuICAgICAgICAgIDogZDMuZXZlbnQucGFnZVggLSBiLndpZHRoO1xuICAgICAgICBzZWxmLnRvb2x0aXBcbiAgICAgICAgICAuc3R5bGVzKHtcbiAgICAgICAgICAgIGRpc3BsYXk6IG51bGwsXG4gICAgICAgICAgICBsZWZ0OiBgJHtsZWZ0fXB4YCxcbiAgICAgICAgICAgIHRvcDogYCR7ZDMuZXZlbnQucGFnZVkgLSBiLmhlaWdodCAtIDIwfXB4YCB9KTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcmVzZXRDb2xvcnMoY3VycmVudF9pZHMpIHtcbiAgICB0aGlzLnRhcmdldF9sYXllci5zZWxlY3RBbGwoJ3BhdGgnKVxuICAgICAgLmF0dHIoJ2ZpbGwnLCAoZCkgPT4ge1xuICAgICAgICBpZiAoZC5pZCA9PT0gYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbikge1xuICAgICAgICAgIHJldHVybiBjb2xvcl9oaWdobGlnaHQ7XG4gICAgICAgIH0gZWxzZSBpZiAoY3VycmVudF9pZHMuaW5kZXhPZihkLmlkKSA+IC0xKSB7XG4gICAgICAgICAgcmV0dXJuIGFwcC5jb2xvcnNbZC5pZF0gfHwgY29sb3JfY291bnRyaWVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2xvcl9kaXNhYmxlZDtcbiAgICAgIH0pO1xuICB9XG5cbiAgcmVzZXRab29tKCkge1xuICAgIHN2Z19tYXAudHJhbnNpdGlvbigpXG4gICAgICAuZHVyYXRpb24oMjUwKVxuICAgICAgLmNhbGwodGhpcy56b29tX21hcC50cmFuc2Zvcm0sIGQzLnpvb21JZGVudGl0eSk7XG4gIH1cblxuICB1cGRhdGVMZWdlbmQoKSB7XG4gICAgZDMuc2VsZWN0KCcjc3ZnX2xlZ2VuZCA+IGcgPiAubGVnZW5kID4gdGV4dCcpXG4gICAgICAudGV4dChgTWEgcsOpZ2lvbiA6ICR7YXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbl9wcmV0dHlfbmFtZX1gKTtcbiAgfVxuXG4gIHJlbW92ZVJlY3RCcnVzaCgpIHtcbiAgICBzdmdfbWFwLnNlbGVjdCgnLmJydXNoX21hcCcpLmNhbGwodGhpcy5icnVzaF9tYXAubW92ZSwgbnVsbCk7XG4gIH1cblxuICBjYWxsQnJ1c2goc2VsZWN0aW9uKSB7XG4gICAgc3ZnX21hcC5zZWxlY3QoJy5icnVzaF9tYXAnKS5jYWxsKHRoaXMuYnJ1c2hfbWFwLm1vdmUsIHNlbGVjdGlvbik7XG4gIH1cblxuICBiaW5kQnJ1c2hDbGljayhjaGFydCkge1xuICAgIGlmIChjaGFydC5oYW5kbGVDbGlja01hcCkge1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltZ19tYXBfc2VsZWN0JykuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWdfbWFwX3NlbGVjdCcpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1nX21hcF9zZWxlY3QnKS5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuICAgIH1cbiAgICBpZiAoY2hhcnQuaGFuZGxlX2JydXNoX21hcCkge1xuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1nX3JlY3Rfc2VsZWMnKS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltZ19yZWN0X3NlbGVjJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1nX21hcF96b29tJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1nX21hcF9zZWxlY3QnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIHRoaXMuYnJ1c2hfbWFwID0gZDMuYnJ1c2goKVxuICAgICAgICAuZXh0ZW50KFtbMCwgMF0sIFt3aWR0aF9tYXAsIGhlaWdodF9tYXBdXSlcbiAgICAgICAgLm9uKCdzdGFydCBicnVzaCcsICgpID0+IHtcbiAgICAgICAgICBjaGFydC5oYW5kbGVfYnJ1c2hfbWFwKGQzLmV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgICBzdmdfbWFwLmFwcGVuZCgnZycpXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdicnVzaF9tYXAnKVxuICAgICAgICAuY2FsbCh0aGlzLmJydXNoX21hcCk7XG5cbiAgICAgIHN2Z19tYXAuc2VsZWN0KCcuYnJ1c2hfbWFwJylcbiAgICAgICAgLm9uKCdtb3VzZW1vdmUgbW91c2Vkb3duJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNvbnN0IGVsZW1zID0gZG9jdW1lbnQuZWxlbWVudHNGcm9tUG9pbnQoZDMuZXZlbnQucGFnZVgsIGQzLmV2ZW50LnBhZ2VZKTtcbiAgICAgICAgICBjb25zdCBlbGVtID0gZWxlbXMuZmluZChlID0+IGUuY2xhc3NOYW1lLmJhc2VWYWwgPT09ICd0Z19mdCcpO1xuICAgICAgICAgIGlmIChlbGVtKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdfY2xpY2tfZXZlbnQgPSBuZXcgTW91c2VFdmVudCgnbW91c2Vtb3ZlJywge1xuICAgICAgICAgICAgICBwYWdlWDogZDMuZXZlbnQucGFnZVgsXG4gICAgICAgICAgICAgIHBhZ2VZOiBkMy5ldmVudC5wYWdlWSxcbiAgICAgICAgICAgICAgY2xpZW50WDogZDMuZXZlbnQuY2xpZW50WCxcbiAgICAgICAgICAgICAgY2xpZW50WTogZDMuZXZlbnQuY2xpZW50WSxcbiAgICAgICAgICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgdmlldzogd2luZG93IH0pO1xuICAgICAgICAgICAgZWxlbS5kaXNwYXRjaEV2ZW50KG5ld19jbGlja19ldmVudCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYudG9vbHRpcC5zdHlsZSgnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAub24oJ21vdXNlb3V0JywgKCkgPT4ge1xuICAgICAgICAgIHNlbGYudG9vbHRpcC5zdHlsZSgnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1nX3JlY3Rfc2VsZWMnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWdfcmVjdF9zZWxlYycpLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1nX21hcF96b29tJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1nX21hcF9zZWxlY3QnKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICB9XG4gICAgaWYgKGNoYXJ0LmhhbmRsZUNsaWNrTWFwICYmICFjaGFydC5oYW5kbGVfYnJ1c2hfbWFwKSB7XG4gICAgICB0aGlzLnRhcmdldF9sYXllci5zZWxlY3RBbGwoJ3BhdGgnKVxuICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICBjaGFydC5oYW5kbGVDbGlja01hcChkLCB0aGlzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0VW5pdHNXaXRoaW4oZGlzdF9rbSkge1xuICAgIGNvbnN0IGRpc3QgPSBkaXN0X2ttICogMTAwMDtcbiAgICBpZiAoIXRoaXMuZGlzdF90b19teV9yZWdpb24pIHRoaXMuY29tcHV0ZURpc3RNYXQoKTtcbiAgICByZXR1cm4gdGhpcy5kaXN0X3RvX215X3JlZ2lvbi5maWx0ZXIoZCA9PiBkLmRpc3QgPD0gZGlzdCkubWFwKGQgPT4gZC5pZCk7XG4gIH1cblxuICBjb21wdXRlRGlzdE1hdCgpIHtcbiAgICBjb25zdCBmZWF0dXJlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZVxuICAgICAgLmNhbGwodGhpcy50YXJnZXRfbGF5ZXIubm9kZSgpLnF1ZXJ5U2VsZWN0b3JBbGwoJ3BhdGgnKSk7XG4gICAgY29uc3QgbmJfZnQgPSBmZWF0dXJlcy5sZW5ndGg7XG4gICAgY29uc3QgbXlfcmVnaW9uX2dlb20gPSBmZWF0dXJlcy5maW5kKFxuICAgICAgZCA9PiBkLl9fZGF0YV9fLmlkID09PSBhcHAuY3VycmVudF9jb25maWcubXlfcmVnaW9uKS5fX2RhdGFfXy5nZW9tZXRyeTtcbiAgICBjb25zdCBteV9yZWdpb25fY2VudHJvaWQgPSB0dXJmLmNlbnRyb2lkKG15X3JlZ2lvbl9nZW9tKTtcbiAgICBjb25zdCByZXN1bHRfZGlzdCA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmJfZnQ7IGkrKykge1xuICAgICAgY29uc3QgaWQgPSBmZWF0dXJlc1tpXS5fX2RhdGFfXy5pZDtcbiAgICAgIGNvbnN0IGRpc3QgPSBldWNsaWRpYW5fZGlzdGFuY2UoXG4gICAgICAgIG15X3JlZ2lvbl9jZW50cm9pZCwgdHVyZi5jZW50cm9pZChmZWF0dXJlc1tpXS5fX2RhdGFfXy5nZW9tZXRyeSkpO1xuICAgICAgcmVzdWx0X2Rpc3QucHVzaCh7IGlkLCBkaXN0IH0pO1xuICAgIH1cbiAgICB0aGlzLmRpc3RfdG9fbXlfcmVnaW9uID0gcmVzdWx0X2Rpc3Q7XG4gIH1cblxuICB1bmJpbmRCcnVzaENsaWNrKCkge1xuICAgIHRoaXMuYnJ1c2hfbWFwID0gbnVsbDtcbiAgICBzdmdfbWFwLnNlbGVjdCgnLmJydXNoX21hcCcpXG4gICAgICAucmVtb3ZlKCk7XG4gIH1cblxuICBkaXNwbGF5TGVnZW5kKHR5cGUgPSAwKSB7XG4gICAgZDMuc2VsZWN0QWxsKCcjc3ZnX2xlZ2VuZCA+IGcnKS5yZW1vdmUoKTtcbiAgICBjb25zdCBbZWxlbXMsIHNpemUsIHR5XSA9IGdldExlZ2VuZEVsZW1zKHR5cGUpO1xuICAgIG1ha2VNYXBMZWdlbmQoZWxlbXMsIHNpemUsIHR5KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBtYWtlU291cmNlU2VjdGlvbigpIHtcbiAgY29uc3QgcGFyZW50ID0gc3ZnX21hcC5ub2RlKCkucGFyZW50RWxlbWVudDtcbiAgY29uc3QgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgZWxlbS5zdHlsZS5mb250U2l6ZSA9ICcwLjQ1ZW0nO1xuICBlbGVtLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgZWxlbS5pbm5lckhUTUwgPSAnRG9ubsOpZXMgOiBFdXJvc3RhdCAodMOpbMOpY2hhcmdlbWVudCA6IE9jdC4gMjAxNyktIExpbWl0ZSBhZG1pbmlzdHJhdGl2ZTogVU1TIFJJQVRFLCBDQy1CWS1TQSc7XG4gIHBhcmVudC5pbnNlcnRCZWZvcmUoZWxlbSwgcGFyZW50LnF1ZXJ5U2VsZWN0b3IoJyNoZWFkZXJfbWFwJykpO1xuICBlbGVtLnN0eWxlLmxlZnQgPSAnNDklJztcbiAgZWxlbS5zdHlsZS5wYWRkaW5nTGVmdCA9ICcyZW0nO1xuICBlbGVtLnN0eWxlLnRvcCA9ICczMiUnO1xuICBlbGVtLnN0eWxlLm1hcmdpbiA9ICdhdXRvJztcbiAgZWxlbS5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgZWxlbS5jbGFzc05hbWUgPSAncm90YXRlJztcbn1cblxuZXhwb3J0IHtcbiAgTWFwU2VsZWN0LFxuICBtYWtlU291cmNlU2VjdGlvbixcbiAgbWFrZU1hcExlZ2VuZCxcbiAgc3ZnX21hcCxcbiAgem9vbUNsaWNrLFxufTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFRhYmxlUmVzdW1lU3RhdCB7XG4gIGNvbnN0cnVjdG9yKHN1bW1hcnlfZmVhdHVyZXMsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGRvYyA9IGRvY3VtZW50O1xuICAgIGNvbnN0IG5iX2ZlYXR1cmVzID0gc3VtbWFyeV9mZWF0dXJlcy5sZW5ndGg7XG4gICAgY29uc3QgY29sdW1uX25hbWVzID0gWydWYXJpYWJsZScsICdNaW4nLCAnTW95JywgJ01lZCcsICdNYXgnLCAnTWEgcsOpZ2lvbiddO1xuICAgIGNvbnN0IG5iX2NvbHVtbnMgPSBjb2x1bW5fbmFtZXMubGVuZ3RoO1xuICAgIGNvbnN0IGNvbnRhaW5lcl9kaXYgPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3QgbXlUYWJsZSA9IGRvYy5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xuICAgIGNvbnN0IGhlYWRlcnMgPSBkb2MuY3JlYXRlRWxlbWVudCgndGhlYWQnKTtcbiAgICBjb25zdCB0YWJsZV9ib2R5ID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jyk7XG4gICAgY29uc3QgaGVhZGVyc19yb3cgPSBkb2MuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICBteVRhYmxlLmNsYXNzTmFtZSA9ICdtaW5pdGFibGUnO1xuICAgIGNvbnRhaW5lcl9kaXYuY2xhc3NOYW1lID0gJ21pbml0YWJsZV9jb250YWluZXInO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmJfY29sdW1uczsgaSsrKSB7XG4gICAgICBjb25zdCBjZWxsID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3RoJyk7XG4gICAgICBjZWxsLmlubmVySFRNTCA9IFsnVmFyaWFibGUnLCAnTWEgcsOpZ2lvbiddLmluZGV4T2YoY29sdW1uX25hbWVzW2ldKSA+IC0xXG4gICAgICAgID8gY29sdW1uX25hbWVzW2ldXG4gICAgICAgIDogY29sdW1uX25hbWVzW2ldICsgJy4nO1xuICAgICAgaGVhZGVyc19yb3cuYXBwZW5kQ2hpbGQoY2VsbCk7XG4gICAgfVxuICAgIGhlYWRlcnMuYXBwZW5kQ2hpbGQoaGVhZGVyc19yb3cpO1xuICAgIG15VGFibGUuYXBwZW5kQ2hpbGQoaGVhZGVycyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYl9mZWF0dXJlczsgaSsrKSB7XG4gICAgICBjb25zdCByb3cgPSBkb2MuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICAgIHJvdy5pZCA9IGByb3dfJHtzdW1tYXJ5X2ZlYXR1cmVzW2ldLmlkfWA7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG5iX2NvbHVtbnM7IGorKykge1xuICAgICAgICBjb25zdCBjZWxsID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgICAgIGNvbnN0IGNvbF9uYW1lID0gY29sdW1uX25hbWVzW2pdO1xuICAgICAgICBpZiAoY29sX25hbWUgIT09ICdWYXJpYWJsZScpIHtcbiAgICAgICAgICBjZWxsLmlubmVySFRNTCA9IE1hdGgucm91bmQoc3VtbWFyeV9mZWF0dXJlc1tpXVtjb2xfbmFtZV0gKiAxMCkgLyAxMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjZWxsLmlubmVySFRNTCA9IHN1bW1hcnlfZmVhdHVyZXNbaV1bY29sX25hbWVdO1xuICAgICAgICB9XG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZChjZWxsKTtcbiAgICAgIH1cbiAgICAgIHRhYmxlX2JvZHkuYXBwZW5kQ2hpbGQocm93KTtcbiAgICB9XG4gICAgbXlUYWJsZS5hcHBlbmRDaGlsZCh0YWJsZV9ib2R5KTtcbiAgICBteVRhYmxlLnNldEF0dHJpYnV0ZSgnaWQnLCBvcHRpb25zLmlkIHx8ICd0YWJsZV9zdW1tYXJ5Jyk7XG4gICAgY29udGFpbmVyX2Rpdi5hcHBlbmRDaGlsZChteVRhYmxlKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWFwX3NlY3Rpb24nKS5hcHBlbmRDaGlsZChjb250YWluZXJfZGl2KTtcbiAgICB0aGlzLm5iX2NvbHVtbnMgPSBuYl9jb2x1bW5zO1xuICAgIHRoaXMuY29sdW1uX25hbWVzID0gY29sdW1uX25hbWVzO1xuICAgIHRoaXMudGFibGVfYm9keSA9IHRhYmxlX2JvZHk7XG4gIH1cblxuICBhZGRGZWF0dXJlcyhzdW1tYXJ5X2ZlYXR1cmVzKSB7XG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHN1bW1hcnlfZmVhdHVyZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHRoaXMuYWRkRmVhdHVyZShzdW1tYXJ5X2ZlYXR1cmVzW2ldKTtcbiAgICB9XG4gIH1cblxuICBhZGRGZWF0dXJlKHN1bW1hcnkpIHtcbiAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgIHJvdy5pZCA9IGByb3dfJHtzdW1tYXJ5LmlkfWA7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLm5iX2NvbHVtbnM7IGorKykge1xuICAgICAgY29uc3QgY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgICBjb25zdCBjb2xfbmFtZSA9IHRoaXMuY29sdW1uX25hbWVzW2pdO1xuICAgICAgaWYgKGNvbF9uYW1lICE9PSAnVmFyaWFibGUnKSB7XG4gICAgICAgIGNlbGwuaW5uZXJIVE1MID0gTWF0aC5yb3VuZChzdW1tYXJ5W2NvbF9uYW1lXSAqIDEwKSAvIDEwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2VsbC5pbm5lckhUTUwgPSBzdW1tYXJ5W2NvbF9uYW1lXTtcbiAgICAgIH1cbiAgICAgIHJvdy5hcHBlbmRDaGlsZChjZWxsKTtcbiAgICB9XG4gICAgdGhpcy50YWJsZV9ib2R5LmFwcGVuZENoaWxkKHJvdyk7XG4gIH1cblxuICByZW1vdmVGZWF0dXJlKGlkX3ZhcmlhYmxlKSB7XG4gICAgY29uc3Qgcm93ID0gdGhpcy50YWJsZV9ib2R5LnF1ZXJ5U2VsZWN0b3IoYHRyI3Jvd18ke2lkX3ZhcmlhYmxlfWApO1xuICAgIGlmIChyb3cpIHJvdy5yZW1vdmUoKTtcbiAgfVxuXG4gIHJlbW92ZUFsbCgpIHtcbiAgICBjb25zdCByb3dzID0gdGhpcy50YWJsZV9ib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJyk7XG4gICAgZm9yIChsZXQgaSA9IHJvd3MubGVuZ3RoIC0gMTsgaSA+IC0xOyBpLS0pIHtcbiAgICAgIHJvd3NbaV0ucmVtb3ZlKCk7XG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlKCkge1xuICAgIHRoaXMudGFibGVfYm9keS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy50YWJsZV9ib2R5ID0gbnVsbDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tcGxldHVkZVNlY3Rpb24ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbXBsZXR1ZGVfcG9wdWxhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb21wbGV0dWRlX3NlY3Rpb24gPiAjY29tcGxldHVkZV9wb3B1bGF0aW9uJyk7XG4gICAgdGhpcy5jb21wbGV0dWRlX2ZlYXR1cmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbXBsZXR1ZGVfc2VjdGlvbiA+ICNjb21wbGV0dWRlX2ZlYXR1cmVzJyk7XG4gICAgdGhpcy5jb21wbGV0dWRlX2ZlYXR1cmVzLmNsYXNzTmFtZSA9ICdhY3RpdmUnO1xuICAgIHRoaXMuY29tcGxldHVkZV9wb3B1bGF0aW9uLmNsYXNzTmFtZSA9ICcnO1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuY29tcGxldHVkZV9mZWF0dXJlcy5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgIHNlbGYuY29tcGxldHVkZV9wb3B1bGF0aW9uLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIH07XG4gICAgdGhpcy5jb21wbGV0dWRlX3BvcHVsYXRpb24ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICBzZWxmLmNvbXBsZXR1ZGVfZmVhdHVyZXMuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgfTtcbiAgfVxuXG4gIHVwZGF0ZSh2YWx1ZV9mZWF0dXJlcywgdmFsdWVfcG9wKSB7XG4gICAgdGhpcy5jb21wbGV0dWRlX2ZlYXR1cmVzLmlubmVySFRNTCA9IGBEb25uw6llcyBkaXNwb25pYmxlcyBwb3VyICR7dmFsdWVfZmVhdHVyZXNbMF19LyR7dmFsdWVfZmVhdHVyZXNbMV19IHLDqWdpb25zLmA7XG4gICAgdGhpcy5jb21wbGV0dWRlX3BvcHVsYXRpb24uaW5uZXJIVE1MID0gYERvbm7DqWVzIGRpc3BvbmlibGVzIHBvdXIgJHt2YWx1ZV9wb3B9JSBkZSBsYSBwb3B1bGF0aW9uIGRlIGwnZXNwYWNlIGQnw6l0dWRlLmA7XG4gIH1cblxuICAvLyByZW1vdmUoKSB7XG4gIC8vICAgdGhpcy5zZWN0aW9uLnJlbW92ZSgpO1xuICAvLyAgIHRoaXMuc2VjdGlvbiA9IG51bGw7XG4gIC8vICAgdGhpcy5jb21wbGV0dWRlX3BvcHVsYXRpb24gPSBudWxsO1xuICAvLyAgIHRoaXMuY29tcGxldHVkZV9mZWF0dXJlcyA9IG51bGw7XG4gIC8vIH1cbn1cblxuXG4vLyBleHBvcnQgZGVmYXVsdCBjbGFzcyBDb21wbGV0dWRlU2VjdGlvbiB7XG4vLyAgIGNvbnN0cnVjdG9yKHBhcmVudCwgYmVmb3JlKSB7XG4vLyAgICAgdGhpcy5zZWN0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4vLyAgICAgdGhpcy5zZWN0aW9uLmNsYXNzTmFtZSA9ICdjb21wbGV0dWRlX3NlY3Rpb24nO1xuLy8gICAgIHRoaXMuY2F0ZWdvcnlfZmlsdGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuLy8gICAgIHRoaXMuY29tcGxldHVkZV9wb3B1bGF0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuLy8gICAgIHRoaXMuY29tcGxldHVkZV9mZWF0dXJlcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbi8vICAgICB0aGlzLmNvbXBsZXR1ZGVfZmVhdHVyZXMuY2xhc3NOYW1lID0gJ2FjdGl2ZSc7XG4vLyAgICAgdGhpcy5jYXRlZ29yeV9maWx0ZXIuc3R5bGUuZGlzcGxheSA9ICdpbml0aWFsJztcbi8vICAgICB0aGlzLnNlY3Rpb24uYXBwZW5kQ2hpbGQodGhpcy5jb21wbGV0dWRlX2ZlYXR1cmVzKTtcbi8vICAgICB0aGlzLnNlY3Rpb24uYXBwZW5kQ2hpbGQodGhpcy5jb21wbGV0dWRlX3BvcHVsYXRpb24pO1xuLy8gICAgIHRoaXMuc2VjdGlvbi5hcHBlbmRDaGlsZCh0aGlzLmNhdGVnb3J5X2ZpbHRlcik7XG4vLyAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4vLyAgICAgcGFyZW50Lmluc2VydEJlZm9yZSh0aGlzLnNlY3Rpb24sIGJlZm9yZSk7XG4vLyAgICAgdGhpcy5jb21wbGV0dWRlX2ZlYXR1cmVzLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4vLyAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuLy8gICAgICAgc2VsZi5jb21wbGV0dWRlX3BvcHVsYXRpb24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4vLyAgICAgfTtcbi8vICAgICB0aGlzLmNvbXBsZXR1ZGVfcG9wdWxhdGlvbi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuLy8gICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbi8vICAgICAgIHNlbGYuY29tcGxldHVkZV9mZWF0dXJlcy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbi8vICAgICB9O1xuLy8gICB9XG4vL1xuLy8gICB1cGRhdGUodmFsdWVfZmVhdHVyZXMsIHZhbHVlX3BvcCkge1xuLy8gICAgIHRoaXMuY29tcGxldHVkZV9mZWF0dXJlcy5pbm5lckhUTUwgPSBgRG9ubsOpZXMgZGlzcG9uaWJsZXMgcG91ciAke3ZhbHVlX2ZlYXR1cmVzWzBdfS8ke3ZhbHVlX2ZlYXR1cmVzWzFdfSByw6lnaW9ucy5gO1xuLy8gICAgIHRoaXMuY29tcGxldHVkZV9wb3B1bGF0aW9uLmlubmVySFRNTCA9IGBEb25uw6llcyBkaXNwb25pYmxlcyBwb3VyICR7dmFsdWVfcG9wfSUgZGUgbGEgcG9wdWxhdGlvbiBkZSBsJ2VzcGFjZSBkJ8OpdHVkZS5gO1xuLy8gICB9XG4vL1xuLy8gICB1cGRhdGVGaWx0ZXJJbmZvKHZhbHVlKSB7XG4vLyAgICAgdGhpcy5jYXRlZ29yeV9maWx0ZXIuaW5uZXJIVE1MID0gdmFsdWU7XG4vLyAgIH1cbi8vXG4vLyAgIHJlbW92ZSgpIHtcbi8vICAgICB0aGlzLnNlY3Rpb24ucmVtb3ZlKCk7XG4vLyAgICAgdGhpcy5zZWN0aW9uID0gbnVsbDtcbi8vICAgICB0aGlzLmNvbXBsZXR1ZGVfcG9wdWxhdGlvbiA9IG51bGw7XG4vLyAgICAgdGhpcy5jb21wbGV0dWRlX2ZlYXR1cmVzID0gbnVsbDtcbi8vICAgfVxuLy8gfVxuIiwiaW1wb3J0IHsgY29tcCwgbWF0aF9yb3VuZCwgbWF0aF9hYnMsIFJlY3QsIHByZXBhcmVUb29sdGlwMiwgZ2V0TWVhbiwgc3ZnUGF0aFRvQ29vcmRzLCBzZWxlY3RGaXJzdEF2YWlsYWJsZVZhciB9IGZyb20gJy4vLi4vaGVscGVycyc7XG5pbXBvcnQgeyBjb2xvcl9kaXNhYmxlZCwgY29sb3JfY291bnRyaWVzLCBjb2xvcl9zdXAsIGNvbG9yX2luZiwgY29sb3JfaGlnaGxpZ2h0IH0gZnJvbSAnLi8uLi9vcHRpb25zJztcbmltcG9ydCB7IGNhbGNQb3BDb21wbGV0dWRlU3Vic2V0LCBjYWxjQ29tcGxldHVkZVN1YnNldCwgYWRkVmFyaWFibGUgfSBmcm9tICcuLy4uL3ByZXBhcmVfZGF0YSc7XG5pbXBvcnQgeyBzdmdfbWFwIH0gZnJvbSAnLi8uLi9tYXAnO1xuaW1wb3J0IHsgYXBwLCByZXNldENvbG9ycywgdmFyaWFibGVzX2luZm8gfSBmcm9tICcuLy4uLy4uL21haW4nO1xuaW1wb3J0IFRhYmxlUmVzdW1lU3RhdCBmcm9tICcuLy4uL3RhYmxlUmVzdW1lU3RhdCc7XG5pbXBvcnQgQ29tcGxldHVkZVNlY3Rpb24gZnJvbSAnLi8uLi9jb21wbGV0dWRlJztcblxubGV0IHN2Z19iYXIgPSBkMy5zZWxlY3QoJ3N2ZyNzdmdfYmFyJyksXG4gIG1hcmdpbiA9IHsgdG9wOiAxMCwgcmlnaHQ6IDIwLCBib3R0b206IDEwMCwgbGVmdDogNDUgfSxcbiAgbWFyZ2luMiA9IHsgdG9wOiA0MzAsIHJpZ2h0OiAyMCwgYm90dG9tOiAxNSwgbGVmdDogNDUgfSxcbiAgYmJveF9zdmcgPSBzdmdfYmFyLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgd2lkdGggPSArYmJveF9zdmcud2lkdGggLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodCxcbiAgaGVpZ2h0ID0gK2Jib3hfc3ZnLmhlaWdodCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tLFxuICBoZWlnaHQyID0gK2Jib3hfc3ZnLmhlaWdodCAtIG1hcmdpbjIudG9wIC0gbWFyZ2luMi5ib3R0b20sXG4gIHN2Z19jb250YWluZXI7XG5cbmxldCBuYkZ0O1xubGV0IGN1cnJlbnRfcmFuZ2VfYnJ1c2ggPSBbMCwgMF07XG5sZXQgY3VycmVudF9yYW5nZSA9IFswLCAwXTtcbmxldCBkaXNwbGF5ZWQ7XG5cbmZ1bmN0aW9uIHVwZGF0ZURpbWVuc2lvbnMoKSB7XG4gIHN2Z19iYXIgPSBkMy5zZWxlY3QoJ3N2ZyNzdmdfYmFyJyk7XG4gIGJib3hfc3ZnID0gc3ZnX2Jhci5ub2RlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIG1hcmdpbiA9IHsgdG9wOiAxMCwgcmlnaHQ6IDIwLCBib3R0b206ICg1MDAgKiBhcHAucmF0aW9Ub1dpZGUpIC8gNSwgbGVmdDogNDUgfTtcbiAgbWFyZ2luMiA9IHsgdG9wOiAoNTAwICogYXBwLnJhdGlvVG9XaWRlKSAqIDAuODYsIHJpZ2h0OiAyMCwgYm90dG9tOiAoNTAwICogYXBwLnJhdGlvVG9XaWRlKSAvIDQwLCBsZWZ0OiA0NSB9O1xuICB3aWR0aCA9ICtiYm94X3N2Zy53aWR0aCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0O1xuICBoZWlnaHQgPSA1MDAgKiBhcHAucmF0aW9Ub1dpZGUgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTtcbiAgc3ZnX2Jhci5hdHRyKCdoZWlnaHQnLCBgJHs1MDAgKiBhcHAucmF0aW9Ub1dpZGV9cHhgKTtcbiAgaGVpZ2h0MiA9IDUwMCAqIGFwcC5yYXRpb1RvV2lkZSAtIG1hcmdpbjIudG9wIC0gbWFyZ2luMi5ib3R0b207XG4gIHN2Z19jb250YWluZXIgPSBzdmdfYmFyLmFwcGVuZCgnZycpLmF0dHIoJ2NsYXNzJywgJ2NvbnRhaW5lcicpO1xufVxuXG5mdW5jdGlvbiBnZXRNZWFuUmFuayhtZWFuX3ZhbHVlLCByYXRpb190b191c2UpIHtcbiAgbGV0IG1lYW5fcmFuayA9IGFwcC5jdXJyZW50X2RhdGEubWFwKFxuICAgIChkLCBpKSA9PiBbZFtyYXRpb190b191c2VdLCBtYXRoX2FicyhtZWFuX3ZhbHVlIC0gZFtyYXRpb190b191c2VdKSwgaV0pO1xuICBtZWFuX3Jhbmsuc29ydCgoYSwgYikgPT4gYVsxXSAtIGJbMV0pO1xuICBtZWFuX3JhbmsgPSBtZWFuX3JhbmtbMF07XG4gIGlmIChtZWFuX3JhbmtbMV0gPiBtZWFuX3ZhbHVlKSB7XG4gICAgbWVhbl9yYW5rID0gbWVhbl9yYW5rWzJdIC0gMTtcbiAgfSBlbHNlIHtcbiAgICBtZWFuX3JhbmsgPSBtZWFuX3JhbmtbMl07XG4gIH1cbiAgcmV0dXJuIG1lYW5fcmFuaztcbn1cblxubGV0IHQ7XG5cbmV4cG9ydCBjbGFzcyBCYXJDaGFydDEge1xuICBjb25zdHJ1Y3RvcihyZWZfZGF0YSkge1xuICAgIHRoaXMuYnJ1c2hlZCA9ICgpID0+IHtcbiAgICAgIGlmIChkMy5ldmVudC5zb3VyY2VFdmVudCAmJiBkMy5ldmVudC5zb3VyY2VFdmVudC50eXBlID09PSAnem9vbScpIHJldHVybjsgLy8gaWdub3JlIGJydXNoLWJ5LXpvb21cbiAgICAgIGlmICghdGhpcy54KSB7IGNvbnNvbGUubG9nKCdhJyk7IHJldHVybjsgfVxuICAgICAgY29uc3QgcyA9IGQzLmV2ZW50LnNlbGVjdGlvbiB8fCB0aGlzLngyLnJhbmdlKCk7XG4gICAgICBjb250ZXh0X2xlZnRfaGFuZGxlLmF0dHIoJ3gnLCBzWzBdIC0gMTIpO1xuICAgICAgY29udGV4dF9yaWdodF9oYW5kbGUuYXR0cigneCcsIHNbMV0gLSA3KTtcbiAgICAgIGN1cnJlbnRfcmFuZ2UgPSBbbWF0aF9yb3VuZChzWzBdIC8gKHdpZHRoIC8gbmJGdCkpLCBtYXRoX3JvdW5kKHNbMV0gLyAod2lkdGggLyBuYkZ0KSldO1xuICAgICAgdGhpcy54LmRvbWFpbih0aGlzLmRhdGEuc2xpY2UoY3VycmVudF9yYW5nZVswXSwgY3VycmVudF9yYW5nZVsxXSkubWFwKGZ0ID0+IGZ0LmlkKSk7XG4gICAgICBzdmdfY29udGFpbmVyLnNlbGVjdCgnLnpvb20nKS5jYWxsKHRoaXMuem9vbS50cmFuc2Zvcm0sIGQzLnpvb21JZGVudGl0eVxuICAgICAgICAuc2NhbGUod2lkdGggLyAoY3VycmVudF9yYW5nZVsxXSAtIGN1cnJlbnRfcmFuZ2VbMF0pKVxuICAgICAgICAudHJhbnNsYXRlKC1jdXJyZW50X3JhbmdlWzBdLCAwKSk7XG4gICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgdGhpcy51cGRhdGVDb250ZXh0KGN1cnJlbnRfcmFuZ2VbMF0sIGN1cnJlbnRfcmFuZ2VbMV0pO1xuICAgICAgc3ZnX2NvbnRhaW5lci5zZWxlY3QoJy5icnVzaF90b3AnKS5jYWxsKHRoaXMuYnJ1c2hfdG9wLm1vdmUsIG51bGwpO1xuICAgICAgLy8gdGhpcy5icnVzaGVkX3RvcCgpO1xuICAgIH07XG5cbiAgICB0aGlzLmJydXNoZWRfdG9wID0gKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLl9mb2N1cyB8fCAhdGhpcy5tYXBfZWxlbSkgcmV0dXJuO1xuXG4gICAgICBjb25zdCBkM19ldmVudCA9IGQzLmV2ZW50O1xuICAgICAgY29uc3QgcmF0aW9fdG9fdXNlID0gdGhpcy5yYXRpb190b191c2U7XG4gICAgICBjb25zdCByZWZfdmFsdWUgPSB0aGlzLnJlZl92YWx1ZTtcblxuICAgICAgLy8gY29uc3QgZWxlbXMgPSBkb2N1bWVudC5lbGVtZW50c0Zyb21Qb2ludChkM19ldmVudC5zb3VyY2VFdmVudC5wYWdlWCwgZDNfZXZlbnQuc291cmNlRXZlbnQucGFnZVkpO1xuICAgICAgLy8gY29uc3QgZWxlbSA9IGVsZW1zLmZpbmQoZSA9PiBlLmNsYXNzTmFtZS5iYXNlVmFsID09PSAnYmFyJyk7XG4gICAgICAvLyBpZiAoZWxlbSkge1xuICAgICAgLy8gICBjb25zdCBuZXdfY2xpY2tfZXZlbnQgPSBuZXcgTW91c2VFdmVudCgnbW91c2Vkb3duJywge1xuICAgICAgLy8gICAgIHBhZ2VYOiBkM19ldmVudC5zb3VyY2VFdmVudC5wYWdlWCxcbiAgICAgIC8vICAgICBwYWdlWTogZDNfZXZlbnQuc291cmNlRXZlbnQucGFnZVksXG4gICAgICAvLyAgICAgY2xpZW50WDogZDNfZXZlbnQuc291cmNlRXZlbnQuY2xpZW50WCxcbiAgICAgIC8vICAgICBjbGllbnRZOiBkM19ldmVudC5zb3VyY2VFdmVudC5jbGllbnRZLFxuICAgICAgLy8gICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAvLyAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgIC8vICAgICB2aWV3OiB3aW5kb3dcbiAgICAgIC8vICAgfSk7XG4gICAgICAvLyAgIGVsZW0uZGlzcGF0Y2hFdmVudChuZXdfY2xpY2tfZXZlbnQpO1xuICAgICAgLy8gfSBlbHNlIHtcbiAgICAgIGNsZWFyVGltZW91dCh0KTtcbiAgICAgIHQgPSBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy50b29sdGlwLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTsgfSwgNSk7XG4gICAgICAvLyB9XG5cbiAgICAgIC8vIGlmIChkM19ldmVudCAmJiBkM19ldmVudC5zZWxlY3Rpb25cbiAgICAgIC8vICAgICAgICYmIGQzX2V2ZW50LnNvdXJjZUV2ZW50ICYmIGQzX2V2ZW50LnNvdXJjZUV2ZW50LnRhcmdldCA9PT0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJydXNoX3RvcCA+IHJlY3Qub3ZlcmxheScpKSB7XG4gICAgICBpZiAoZDNfZXZlbnQgJiYgZDNfZXZlbnQuc2VsZWN0aW9uICYmIGQzX2V2ZW50LnNvdXJjZUV2ZW50ICYmIGQzX2V2ZW50LnNvdXJjZUV2ZW50LnRhcmdldCkge1xuICAgICAgICB0aGlzLm1hcF9lbGVtLnJlbW92ZVJlY3RCcnVzaCgpO1xuICAgICAgICBjb25zdCBzID0gZDNfZXZlbnQuc2VsZWN0aW9uO1xuICAgICAgICBjdXJyZW50X3JhbmdlX2JydXNoID0gW1xuICAgICAgICAgIGN1cnJlbnRfcmFuZ2VbMF0gKyBtYXRoX3JvdW5kKHNbMF0gLyAod2lkdGggLyBkaXNwbGF5ZWQpKSAtIDEsXG4gICAgICAgICAgY3VycmVudF9yYW5nZVswXSArIG1hdGhfcm91bmQoc1sxXSAvICh3aWR0aCAvIGRpc3BsYXllZCkpLFxuICAgICAgICBdO1xuICAgICAgICAvLyB0aGlzLnguZG9tYWluKHRoaXMuZGF0YS5zbGljZShjdXJyZW50X3JhbmdlX2JydXNoWzBdICsgMSwgY3VycmVudF9yYW5nZV9icnVzaFsxXSlcbiAgICAgICAgLy8gICAubWFwKGZ0ID0+IGZ0LmlkKSk7XG4gICAgICAgIGFwcC5jb2xvcnMgPSB7fTtcbiAgICAgICAgdGhpcy5fZm9jdXMuc2VsZWN0QWxsKCcuYmFyJylcbiAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCAoZCwgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKGQuaWQgPT09IGFwcC5jdXJyZW50X2NvbmZpZy5teV9yZWdpb24pIHtcbiAgICAgICAgICAgICAgYXBwLmNvbG9yc1tkLmlkXSA9IGNvbG9yX2hpZ2hsaWdodDtcbiAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yX2hpZ2hsaWdodDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA+IGN1cnJlbnRfcmFuZ2VfYnJ1c2hbMF0gJiYgaSA8IGN1cnJlbnRfcmFuZ2VfYnJ1c2hbMV0pIHtcbiAgICAgICAgICAgICAgY29uc3QgY29sb3IgPSBjb21wKGRbcmF0aW9fdG9fdXNlXSwgcmVmX3ZhbHVlLCB0aGlzLnNlcmllX2ludmVyc2VkKTtcbiAgICAgICAgICAgICAgYXBwLmNvbG9yc1tkLmlkXSA9IGNvbG9yO1xuICAgICAgICAgICAgICByZXR1cm4gY29sb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29sb3JfY291bnRyaWVzO1xuICAgICAgICAgIH0pO1xuICAgICAgICAvLyB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICBpZiAodGhpcy5yZXNldF9zdGF0ZV9idXR0b24gPT09IHRydWUpIHtcbiAgICAgICAgICBkMy5zZWxlY3RBbGwoJyNtZW51X3NlbGVjdGlvbiA+IGJ1dHRvbicpLmF0dHIoJ2NsYXNzJywgJ2J1dHRvbl9ibHVlJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVNYXBSZWdpbygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGQzX2V2ZW50ICYmICFkM19ldmVudC5zZWxlY3Rpb25cbiAgICAgICAgICAgICYmIGQzX2V2ZW50LnNvdXJjZUV2ZW50ICYmIGQzX2V2ZW50LnNvdXJjZUV2ZW50LmRldGFpbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGhpcy5tYXBfZWxlbS5yZW1vdmVSZWN0QnJ1c2goKTtcbiAgICAgICAgICBhcHAuY29sb3JzID0ge307XG4gICAgICAgICAgYXBwLmNvbG9yc1thcHAuY3VycmVudF9jb25maWcubXlfcmVnaW9uXSA9IGNvbG9yX2hpZ2hsaWdodDtcbiAgICAgICAgICB0aGlzLnVwZGF0ZU1hcFJlZ2lvKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZm9jdXMuc2VsZWN0QWxsKCcuYmFyJylcbiAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBkID0+IGFwcC5jb2xvcnNbZC5pZF0gfHwgY29sb3JfY291bnRyaWVzKTtcbiAgICAgICAgaWYgKHRoaXMucmVzZXRfc3RhdGVfYnV0dG9uID09PSB0cnVlKSB7XG4gICAgICAgICAgZDMuc2VsZWN0QWxsKCcjbWVudV9zZWxlY3Rpb24gPiBidXR0b24nKS5hdHRyKCdjbGFzcycsICdidXR0b25fYmx1ZScpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICB1cGRhdGVEaW1lbnNpb25zKCk7XG4gICAgYXBwLmNoYXJ0RHJhd1JhdGlvID0gYXBwLnJhdGlvVG9XaWRlO1xuICAgIC8vIFNldCB0aGUgbWluaW11bSBudW1iZXIgb2YgdmFyaWFibGVzIHRvIGtlZXAgc2VsZWN0ZWQgZm9yIHRoaXMga2luZCBvZiBjaGFydDpcbiAgICBhcHAuY3VycmVudF9jb25maWcubmJfdmFyID0gMTtcbiAgICBjb25zdCB4ID0gZDMuc2NhbGVCYW5kKCkucmFuZ2UoWzAsIHdpZHRoXSkucGFkZGluZygwLjEpLFxuICAgICAgeDIgPSBkMy5zY2FsZUJhbmQoKS5yYW5nZShbMCwgd2lkdGhdKS5wYWRkaW5nKDAuMSksXG4gICAgICB5ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbaGVpZ2h0LCAwXSksXG4gICAgICB5MiA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoW2hlaWdodDIsIDBdKTtcblxuICAgIGNvbnN0IHhBeGlzID0gZDMuYXhpc0JvdHRvbSh4KTtcbiAgICBjb25zdCB4QXhpczIgPSBkMy5heGlzQm90dG9tKHgyKTtcbiAgICBjb25zdCB5QXhpcyA9IGQzLmF4aXNMZWZ0KHkpO1xuXG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLngyID0geDI7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLnkyID0geTI7XG4gICAgdGhpcy54QXhpcyA9IHhBeGlzO1xuICAgIHRoaXMueUF4aXMgPSB5QXhpcztcbiAgICB0aGlzLnhBeGlzMiA9IHhBeGlzMjtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICBjb25zdCBhdmFpbGFibGVfcmF0aW9zID0gYXBwLmN1cnJlbnRfY29uZmlnLnJhdGlvO1xuICAgIGNvbnN0IHJhdGlvX3RvX3VzZSA9IGF2YWlsYWJsZV9yYXRpb3NbMF07XG4gICAgdGhpcy5yYXRpb190b191c2UgPSByYXRpb190b191c2U7XG4gICAgdGhpcy51bml0ID0gdmFyaWFibGVzX2luZm8uZmluZChmdCA9PiBmdC5pZCA9PT0gcmF0aW9fdG9fdXNlKS51bml0O1xuICAgIHRoaXMuZGF0YSA9IHJlZl9kYXRhLmZpbHRlcihmdCA9PiAhIWZ0W3JhdGlvX3RvX3VzZV0pO1xuICAgIHRoaXMuZGF0YS5zb3J0KChhLCBiKSA9PiBhW3JhdGlvX3RvX3VzZV0gLSBiW3JhdGlvX3RvX3VzZV0pO1xuICAgIHRoaXMuY3VycmVudF9pZHMgPSB0aGlzLmRhdGEubWFwKGQgPT4gZC5pZCk7XG4gICAgcmVzZXRDb2xvcnMoKTtcbiAgICB0aGlzLmN1cnJlbnRfcmFua3MgPSB0aGlzLmRhdGEubWFwKChkLCBpKSA9PiBpICsgMSk7XG4gICAgbmJGdCA9IHRoaXMuZGF0YS5sZW5ndGg7XG4gICAgdGhpcy5tZWFuX3ZhbHVlID0gZ2V0TWVhbih0aGlzLmRhdGEubWFwKGQgPT4gZFtyYXRpb190b191c2VdKSk7XG4gICAgdGhpcy5yZWZfdmFsdWUgPSB0aGlzLmRhdGEuZmlsdGVyKFxuICAgICAgZnQgPT4gZnQuaWQgPT09IGFwcC5jdXJyZW50X2NvbmZpZy5teV9yZWdpb24pWzBdW3JhdGlvX3RvX3VzZV07XG4gICAgc3ZnX2NvbnRhaW5lci5hcHBlbmQoJ2RlZnMnKVxuICAgICAgLmFwcGVuZCgnY2xpcFBhdGgnKVxuICAgICAgLmF0dHIoJ2lkJywgJ2NsaXAnKVxuICAgICAgLmFwcGVuZCgncmVjdCcpXG4gICAgICAuYXR0cnMoeyB3aWR0aCwgaGVpZ2h0IH0pO1xuXG4gICAgY29uc3QgZm9jdXMgPSBzdmdfY29udGFpbmVyLmFwcGVuZCgnZycpXG4gICAgICAuYXR0cnMoe1xuICAgICAgICBjbGFzczogJ2ZvY3VzJyxcbiAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlKCR7bWFyZ2luLmxlZnR9LCAke21hcmdpbi50b3B9KWAsXG4gICAgICB9KTtcblxuICAgIGNvbnN0IGNvbnRleHQgPSBzdmdfY29udGFpbmVyLmFwcGVuZCgnZycpXG4gICAgICAuYXR0cnMoe1xuICAgICAgICBjbGFzczogJ2NvbnRleHQnLFxuICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHttYXJnaW4yLmxlZnR9LCAke21hcmdpbjIudG9wfSlgLFxuICAgICAgfSk7XG5cbiAgICB0aGlzLl9mb2N1cyA9IGZvY3VzO1xuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG5cbiAgICB4LmRvbWFpbih0aGlzLmN1cnJlbnRfaWRzKTtcbiAgICB5LmRvbWFpbihbXG4gICAgICAwLFxuICAgICAgZDMubWF4KHRoaXMuZGF0YSwgZCA9PiBkW3JhdGlvX3RvX3VzZV0pLFxuICAgIF0pO1xuICAgIHgyLmRvbWFpbih4LmRvbWFpbigpKTtcbiAgICB5Mi5kb21haW4oeS5kb21haW4oKSk7XG5cbiAgICBjb25zdCBicnVzaF9ib3R0b20gPSBkMy5icnVzaFgoKVxuICAgICAgLmV4dGVudChbWzAsIDBdLCBbd2lkdGgsIGhlaWdodDJdXSlcbiAgICAgIC5vbignYnJ1c2ggZW5kJywgdGhpcy5icnVzaGVkKTtcblxuICAgIGNvbnN0IGJydXNoX3RvcCA9IGQzLmJydXNoWCgpXG4gICAgICAuZXh0ZW50KFtbMCwgMF0sIFt3aWR0aCwgaGVpZ2h0XV0pXG4gICAgICAub24oJ2JydXNoIGVuZCcsIHRoaXMuYnJ1c2hlZF90b3ApO1xuXG4gICAgY29uc3Qgem9vbSA9IGQzLnpvb20oKVxuICAgICAgLnNjYWxlRXh0ZW50KFsxLCBJbmZpbml0eV0pXG4gICAgICAudHJhbnNsYXRlRXh0ZW50KFtbMCwgMF0sIFt3aWR0aCwgaGVpZ2h0XV0pXG4gICAgICAuZXh0ZW50KFtbMCwgMF0sIFt3aWR0aCwgaGVpZ2h0XV0pO1xuICAgICAgLy8gLm9uKFwiem9vbVwiLCB6b29tZWQpO1xuICAgIHRoaXMuYnJ1c2hfdG9wID0gYnJ1c2hfdG9wO1xuICAgIHRoaXMuYnJ1c2hfYm90dG9tID0gYnJ1c2hfYm90dG9tO1xuICAgIHRoaXMuem9vbSA9IHpvb207XG5cbiAgICBmb2N1cy5hcHBlbmQoJ2cnKVxuICAgICAgLmF0dHJzKHsgY2xhc3M6ICdheGlzIGF4aXMtLXgnLCB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoMCwgJHtoZWlnaHR9KWAgfSlcbiAgICAgIC5jYWxsKHhBeGlzKTtcblxuICAgIGZvY3VzLnNlbGVjdCgnLmF4aXMtLXgnKVxuICAgICAgLnNlbGVjdEFsbCgndGV4dCcpXG4gICAgICAuc3R5bGUoJ3RleHQtYW5jaG9yJywgJ2VuZCcpXG4gICAgICAuYXR0cnMoeyBkeDogJy0wLjhlbScsIGR5OiAnMC4xNWVtJywgdHJhbnNmb3JtOiAncm90YXRlKC02NSknIH0pO1xuXG4gICAgZm9jdXMuYXBwZW5kKCdnJylcbiAgICAgIC5hdHRyKCdjbGFzcycsICdheGlzIGF4aXMtLXknKVxuICAgICAgLmNhbGwoeUF4aXMpO1xuXG4gICAgdGhpcy5nX2JhciA9IGZvY3VzLmFwcGVuZCgnZycpO1xuXG4gICAgY29uc3QgZ19icnVzaF90b3AgPSBmb2N1cy5hcHBlbmQoJ2cnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ2JydXNoX3RvcCcpXG4gICAgICAuY2FsbChicnVzaF90b3ApO1xuXG4gICAgY29uc3QgZ19icnVzaF9ib3R0b20gPSBjb250ZXh0LmFwcGVuZCgnZycpXG4gICAgICAuYXR0cignY2xhc3MnLCAnYnJ1c2hfYm90dG9tJylcbiAgICAgIC5jYWxsKGJydXNoX2JvdHRvbSk7XG5cbiAgICBjb25zdCBncm91cGVfbGluZV9tZWFuID0gZm9jdXMuYXBwZW5kKCdnJykuYXR0cignY2xhc3MnLCAnbWVhbicpO1xuICAgIGdyb3VwZV9saW5lX21lYW4uYXBwZW5kKCd0ZXh0JylcbiAgICAgIC5hdHRycyh7IHg6IDYwLCB5OiB5KHRoaXMubWVhbl92YWx1ZSkgKyAyMCB9KVxuICAgICAgLnN0eWxlcyh7XG4gICAgICAgIGRpc3BsYXk6ICdub25lJyxcbiAgICAgICAgZmlsbDogJ3JlZCcsXG4gICAgICAgICdmaWxsLW9wYWNpdHknOiAnMC44JyxcbiAgICAgICAgJ2ZvbnQtZmFtaWx5JzogJ1xcJ1NpZ25pa2FcXCcsIHNhbnMtc2VyaWYnLFxuICAgICAgfSlcbiAgICAgIC50ZXh0KGBWYWxldXIgbW95ZW5uZSA6ICR7TWF0aC5yb3VuZCh0aGlzLm1lYW5fdmFsdWUgKiAxMCkgLyAxMH0gJHt0aGlzLnVuaXR9YCk7XG5cbiAgICBncm91cGVfbGluZV9tZWFuLmFwcGVuZCgnbGluZScpXG4gICAgICAuYXR0cnMoe1xuICAgICAgICB4MTogMCxcbiAgICAgICAgeDI6IHdpZHRoLFxuICAgICAgICB5MTogeSh0aGlzLm1lYW5fdmFsdWUpLFxuICAgICAgICB5MjogeSh0aGlzLm1lYW5fdmFsdWUpLFxuICAgICAgICAnc3Ryb2tlLWRhc2hhcnJheSc6ICcxMCwgNScsXG4gICAgICAgICdzdHJva2Utd2lkdGgnOiAnMnB4JyxcbiAgICAgICAgY2xhc3M6ICdtZWFuX2xpbmUnLFxuICAgICAgfSlcbiAgICAgIC5zdHlsZSgnc3Ryb2tlJywgJ3JlZCcpO1xuXG4gICAgZ3JvdXBlX2xpbmVfbWVhbi5hcHBlbmQoJ2xpbmUnKVxuICAgICAgLmF0dHJzKHsgeDE6IDAsIHgyOiB3aWR0aCwgeTE6IHkodGhpcy5tZWFuX3ZhbHVlKSwgeTI6IHkodGhpcy5tZWFuX3ZhbHVlKSwgJ3N0cm9rZS13aWR0aCc6ICcxNHB4JywgY2xhc3M6ICd0cmFuc3BfbWVhbl9saW5lJyB9KVxuICAgICAgLnN0eWxlKCdzdHJva2UnLCAndHJhbnNwYXJlbnQnKVxuICAgICAgLm9uKCdtb3VzZW92ZXInLCAoKSA9PiB7XG4gICAgICAgIGdyb3VwZV9saW5lX21lYW4uc2VsZWN0KCd0ZXh0JylcbiAgICAgICAgICAuc3R5bGUoJ2Rpc3BsYXknLCAnaW5pdGlhbCcpO1xuICAgICAgfSlcbiAgICAgIC5vbignbW91c2VvdXQnLCAoKSA9PiB7XG4gICAgICAgIGdyb3VwZV9saW5lX21lYW4uc2VsZWN0KCd0ZXh0JylcbiAgICAgICAgICAuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgfSk7XG5cbiAgICB0aGlzLnVwZGF0ZU1pbmlCYXJzKCk7XG5cbiAgICBjb25zdCBjb250ZXh0X2xlZnRfaGFuZGxlID0gZ19icnVzaF9ib3R0b20uaW5zZXJ0KCdpbWFnZScsICcuaGFuZGxlJylcbiAgICAgIC5hdHRycyh7XG4gICAgICAgIHdpZHRoOiAyMCxcbiAgICAgICAgaGVpZ2h0OiBoZWlnaHQyLFxuICAgICAgICB4OiB4Mih0aGlzLmN1cnJlbnRfaWRzWzBdKSAtIDEyLFxuICAgICAgICAneGxpbms6aHJlZic6ICdpbWcvbGVmdC1oYW5kbGUucG5nJyxcbiAgICAgIH0pO1xuXG4gICAgY29uc3QgY29udGV4dF9yaWdodF9oYW5kbGUgPSBnX2JydXNoX2JvdHRvbS5pbnNlcnQoJ2ltYWdlJywgJy5oYW5kbGUnKVxuICAgICAgLmF0dHJzKHtcbiAgICAgICAgd2lkdGg6IDIwLFxuICAgICAgICBoZWlnaHQ6IGhlaWdodDIsXG4gICAgICAgIHg6IHgyKHRoaXMuY3VycmVudF9pZHNbdGhpcy5jdXJyZW50X2lkcy5sZW5ndGggLSAxXSkgLSA3LFxuICAgICAgICAneGxpbms6aHJlZic6ICdpbWcvcmlnaHQtaGFuZGxlLnBuZycsXG4gICAgICB9KTtcblxuICAgIGdfYnJ1c2hfdG9wLmNhbGwoYnJ1c2hfdG9wLm1vdmUsIG51bGwpO1xuICAgIGdfYnJ1c2hfYm90dG9tLmNhbGwoYnJ1c2hfYm90dG9tLm1vdmUsIHgucmFuZ2UoKSk7XG5cbiAgICB0aGlzLmNvbXBsZXR1ZGUgPSBuZXcgQ29tcGxldHVkZVNlY3Rpb24oKTtcbiAgICB0aGlzLmNvbXBsZXR1ZGUudXBkYXRlKFxuICAgICAgY2FsY0NvbXBsZXR1ZGVTdWJzZXQoYXBwLCBbdGhpcy5yYXRpb190b191c2VdLCAnYXJyYXknKSxcbiAgICAgIGNhbGNQb3BDb21wbGV0dWRlU3Vic2V0KGFwcCwgW3RoaXMucmF0aW9fdG9fdXNlXSkpO1xuXG4gICAgc3ZnX2NvbnRhaW5lci5hcHBlbmQoJ2ltYWdlJylcbiAgICAgIC5hdHRycyh7XG4gICAgICAgIHg6IHdpZHRoICsgbWFyZ2luLmxlZnQgKyA1LFxuICAgICAgICB5OiAzODUsXG4gICAgICAgIHdpZHRoOiAxNSxcbiAgICAgICAgaGVpZ2h0OiAxNSxcbiAgICAgICAgJ3hsaW5rOmhyZWYnOiAnaW1nL3JldmVyc2VfcGx1cy5wbmcnLFxuICAgICAgICBpZDogJ2ltZ19yZXZlcnNlJyxcbiAgICAgIH0pXG4gICAgICAub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAvLyB0aGlzLmRhdGEgPSBhcHAuY3VycmVudF9kYXRhLnNsaWNlKCk7XG4gICAgICAgIGlmICghdGhpcy5zZXJpZV9pbnZlcnNlZCkge1xuICAgICAgICAgIHRoaXMuZGF0YS5zb3J0KChhLCBiKSA9PiBiW3RoaXMucmF0aW9fdG9fdXNlXSAtIGFbdGhpcy5yYXRpb190b191c2VdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmRhdGEuc29ydCgoYSwgYikgPT4gYVt0aGlzLnJhdGlvX3RvX3VzZV0gLSBiW3RoaXMucmF0aW9fdG9fdXNlXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJyZW50X2lkcyA9IHRoaXMuZGF0YS5tYXAoZCA9PiBkLmlkKTtcbiAgICAgICAgdGhpcy5zZXJpZV9pbnZlcnNlZCA9ICF0aGlzLnNlcmllX2ludmVyc2VkO1xuICAgICAgICB4LmRvbWFpbih0aGlzLmRhdGEuc2xpY2UoY3VycmVudF9yYW5nZVswXSwgY3VycmVudF9yYW5nZVsxXSkubWFwKGZ0ID0+IGZ0LmlkKSk7XG4gICAgICAgIHgyLmRvbWFpbih0aGlzLmRhdGEubWFwKGZ0ID0+IGZ0LmlkKSk7XG4gICAgICAgIC8vIHN2Z19jb250YWluZXIuc2VsZWN0KFwiLnpvb21cIikuY2FsbCh6b29tLnRyYW5zZm9ybSwgZDMuem9vbUlkZW50aXR5XG4gICAgICAgIC8vICAgICAuc2NhbGUod2lkdGggLyAoY3VycmVudF9yYW5nZVsxXSAtIGN1cnJlbnRfcmFuZ2VbMF0pKVxuICAgICAgICAvLyAgICAgLnRyYW5zbGF0ZSgtY3VycmVudF9yYW5nZVswXSwgMCkpO1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAvLyB0aGlzLnVwZGF0ZU1pbmlCYXJzKCk7XG4gICAgICAgIHRoaXMudXBkYXRlQ29udGV4dChjdXJyZW50X3JhbmdlWzBdLCBjdXJyZW50X3JhbmdlWzFdKTtcbiAgICAgICAgc3ZnX2NvbnRhaW5lci5zZWxlY3QoJy5icnVzaF90b3AnKS5jYWxsKGJydXNoX3RvcC5tb3ZlLCBudWxsKTtcbiAgICAgICAgdGhpcy5tYXBfZWxlbS5yZW1vdmVSZWN0QnJ1c2goKTtcbiAgICAgICAgc3ZnX2NvbnRhaW5lci5zZWxlY3QoJy5icnVzaF9ib3R0b20nKS5jYWxsKGJydXNoX2JvdHRvbS5tb3ZlLCB4LnJhbmdlKCkpO1xuICAgICAgfSk7XG5cbiAgICAvLyBQcmVwYXJlIHRoZSB0b29sdGlwIGRpc3BsYXllZCBvbiBtb3VzZW92ZXI6XG4gICAgdGhpcy50b29sdGlwID0gcHJlcGFyZVRvb2x0aXAyKGQzLnNlbGVjdChzdmdfYmFyLm5vZGUoKS5wYXJlbnRFbGVtZW50KSwgbnVsbCk7XG5cbiAgICAvLyBEZWFjdGl2YXRlIHRoZSBicnVzaCByZWN0IHNlbGVjdGlvbiBvbiB0aGUgbWFwICsgb24gdGhlIGNoYXJ0XG4gICAgLy8gd2hlbiBoZSB1c2VyIHByZXNzIHRoZSBDdHJsIGtleTpcbiAgICBkb2N1bWVudC5vbmtleWRvd24gPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudCAmJiBldmVudC5rZXkgPT09ICdDb250cm9sJykge1xuICAgICAgICBzdmdfY29udGFpbmVyLnNlbGVjdCgnLmJydXNoX3RvcCcpXG4gICAgICAgICAgLnNlbGVjdEFsbCgnLnNlbGVjdGlvbiwgLm92ZXJsYXknKVxuICAgICAgICAgIC5zdHlsZSgnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgIHN2Z19tYXAuc2VsZWN0KCcuYnJ1c2hfbWFwJylcbiAgICAgICAgICAuc2VsZWN0QWxsKCcuc2VsZWN0aW9uLCAub3ZlcmxheScpXG4gICAgICAgICAgLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGRvY3VtZW50Lm9ua2V5dXAgPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudCAmJiBldmVudC5rZXkgPT09ICdDb250cm9sJykge1xuICAgICAgICBzdmdfY29udGFpbmVyLnNlbGVjdCgnLmJydXNoX3RvcCcpXG4gICAgICAgICAgLnNlbGVjdEFsbCgnLnNlbGVjdGlvbiwgLm92ZXJsYXknKVxuICAgICAgICAgIC5zdHlsZSgnZGlzcGxheScsIG51bGwpO1xuICAgICAgICBzdmdfbWFwLnNlbGVjdCgnLmJydXNoX21hcCcpXG4gICAgICAgICAgLnNlbGVjdEFsbCgnLnNlbGVjdGlvbiwgLm92ZXJsYXknKVxuICAgICAgICAgIC5zdHlsZSgnZGlzcGxheScsIG51bGwpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBoZWFkZXJfYmFyX3NlY3Rpb24gPSBkMy5zZWxlY3QoJyNoZWFkZXJfY2hhcnQnKTtcblxuICAgIHRoaXMuc2VsZWNfdmFyID0gaGVhZGVyX2Jhcl9zZWN0aW9uXG4gICAgICAuaW5zZXJ0KCdzZWxlY3QnLCAnI2ltZ190YWJsZScpXG4gICAgICAuYXR0cnMoeyBjbGFzczogJ3RpdGxlX3ZhcmlhYmxlJyB9KVxuICAgICAgLnN0eWxlcyh7XG4gICAgICAgICdmb250LWZhbWlseSc6ICdcXCdTaWduaWthXFwnLCBzYW5zLXNlcmlmJyxcbiAgICAgICAgJ2ZvbnQtc2l6ZSc6ICcwLjhlbScsXG4gICAgICAgICdtYXJnaW4tdG9wJzogJzEycHgnLFxuICAgICAgICAnbWFyZ2luLWxlZnQnOiAnNDBweCcsXG4gICAgICAgIGZsb2F0OiAnbGVmdCcsXG4gICAgICB9KTtcblxuICAgIGZvciAobGV0IGkgPSAwLCBsZW5faSA9IGF2YWlsYWJsZV9yYXRpb3MubGVuZ3RoOyBpIDwgbGVuX2k7IGkrKykge1xuICAgICAgY29uc3QgY29kZV92YXJpYWJsZSA9IGF2YWlsYWJsZV9yYXRpb3NbaV07XG4gICAgICBjb25zdCBuYW1lX3ZhcmlhYmxlID0gYXBwLmN1cnJlbnRfY29uZmlnLnJhdGlvX3ByZXR0eV9uYW1lW2ldO1xuICAgICAgY29uc3QgdW5pdCA9IHZhcmlhYmxlc19pbmZvLmZpbmQoZnQgPT4gZnQuaWQgPT09IGNvZGVfdmFyaWFibGUpLnVuaXQ7XG4gICAgICBjb25zdCB5ZWFyID0gbmFtZV92YXJpYWJsZS5tYXRjaCgvXFwoW14pXSpcXCkkLylbMF07XG4gICAgICBjb25zdCB1bml0X3llYXIgPSBgJHt5ZWFyLnNsaWNlKDAsIDEpfSR7dW5pdH0sICR7eWVhci5zbGljZSgxLCA2KX1gO1xuXG4gICAgICB0aGlzLnNlbGVjX3Zhci5hcHBlbmQoJ29wdGlvbicpXG4gICAgICAgIC5hdHRyKCd2YWx1ZScsIGB2XyR7Y29kZV92YXJpYWJsZX1gKVxuICAgICAgICAudGV4dChuYW1lX3ZhcmlhYmxlLnJlcGxhY2UoeWVhciwgdW5pdF95ZWFyKSk7XG4gICAgfVxuXG4gICAgdGhpcy5zZWxlY192YXIub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGNvZGVfdmFyaWFibGUgPSB0aGlzLnZhbHVlLnNsaWNlKDIpO1xuICAgICAgc2VsZi5jaGFuZ2VWYXJpYWJsZShjb2RlX3ZhcmlhYmxlKTtcbiAgICAgIHNlbGYuY2hhbmdlU3R1ZHlab25lKCk7XG4gICAgICBzZWxmLnVwZGF0ZUNvbXBsZXR1ZGUoKTtcbiAgICB9KTtcblxuICAgIC8vIENyZWF0ZSB0aGUgbWVudSB1bmRlciB0aGUgY2hhcnQgYWxsb3dpbmcgdG8gdXNlIHNvbWUgdXNlZnVsIHNlbGVjdGlvbnNcbiAgICAvLyAoYWJvdmUgb3IgYmVsb3cgdGhlIG1lYW4gdmFsdWUgYW5kIGFib3ZlIG9yIGJlbG93IG15X3JlZ2lvbilcbiAgICBjb25zdCBtZW51X3NlbGVjdGlvbiA9IGQzLnNlbGVjdCgnI2Jhcl9zZWN0aW9uJylcbiAgICAgIC5hcHBlbmQoJ2RpdicpXG4gICAgICAuYXR0cignaWQnLCAnbWVudV9zZWxlY3Rpb24nKVxuICAgICAgLnN0eWxlcyh7IHBhZGRpbmc6ICcwIDEwcHggMTBweCAxMHB4JywgJ3RleHQtYWxpZ24nOiAnY2VudGVyJywgY29sb3I6ICcjNGY4MWJkJyB9KTtcblxuICAgIG1lbnVfc2VsZWN0aW9uLmFwcGVuZCgncCcpXG4gICAgICAuYXR0cignaWQnLCAnc2VsZWN0aW9uX3N1YnRpdGxlJylcbiAgICAgIC5zdHlsZXMoeyBtYXJnaW46ICcxMHB4IDBweCAycHggMHB4JyB9KVxuICAgICAgLmh0bWwoJ1PDqWxlY3Rpb24gZGVzIHLDqWdpb25zIGF5YW50IGRlcyB2YWxldXJzLi4uJyk7XG5cbiAgICBtZW51X3NlbGVjdGlvbi5hcHBlbmQoJ2J1dHRvbicpXG4gICAgICAuYXR0cnMoeyBjbGFzczogJ2J1dHRvbl9ibHVlJywgaWQ6ICdidG5fYWJvdmVfbWVhbicgfSlcbiAgICAgIC50ZXh0KCdpbmbDqXJpZXVyZXMgw6AgbGEgbW95ZW5uZScpXG4gICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBtZW51X3NlbGVjdGlvbi5zZWxlY3RBbGwoJ2J1dHRvbicpLmF0dHIoJ2NsYXNzJywgJ2J1dHRvbl9ibHVlJyk7XG4gICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgncHJlc3NlZCcpO1xuICAgICAgICBzZWxmLnNlbGVjdEJlbG93TWVhbigpO1xuICAgICAgfSk7XG5cbiAgICBtZW51X3NlbGVjdGlvbi5hcHBlbmQoJ2J1dHRvbicpXG4gICAgICAuYXR0cnMoeyBjbGFzczogJ2J1dHRvbl9ibHVlJywgaWQ6ICdidG5fYWJvdmVfbXlfcmVnaW9uJyB9KVxuICAgICAgLnRleHQoJ2luZsOpcmlldXJzIMOgIG1hIHLDqWdpb24nKVxuICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbWVudV9zZWxlY3Rpb24uc2VsZWN0QWxsKCdidXR0b24nKS5hdHRyKCdjbGFzcycsICdidXR0b25fYmx1ZScpO1xuICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ3ByZXNzZWQnKTtcbiAgICAgICAgc2VsZi5zZWxlY3RCZWxvd015UmVnaW9uKCk7XG4gICAgICB9KTtcblxuICAgIG1lbnVfc2VsZWN0aW9uLmFwcGVuZCgnYnV0dG9uJylcbiAgICAgIC5hdHRycyh7IGNsYXNzOiAnYnV0dG9uX2JsdWUnLCBpZDogJ2J0bl9iZWxvd19tZWFuJyB9KVxuICAgICAgLnRleHQoJ3N1cMOpcmlldXJlcyDDoCBsYSBtb3llbm5lJylcbiAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG1lbnVfc2VsZWN0aW9uLnNlbGVjdEFsbCgnYnV0dG9uJykuYXR0cignY2xhc3MnLCAnYnV0dG9uX2JsdWUnKTtcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdwcmVzc2VkJyk7XG4gICAgICAgIHNlbGYuc2VsZWN0QWJvdmVNZWFuKCk7XG4gICAgICB9KTtcblxuICAgIG1lbnVfc2VsZWN0aW9uLmFwcGVuZCgnYnV0dG9uJylcbiAgICAgIC5hdHRycyh7IGNsYXNzOiAnYnV0dG9uX2JsdWUnLCBpZDogJ2J0bl9iZWxvd19teV9yZWdpb24nIH0pXG4gICAgICAudGV4dCgnc3Vww6lyaWV1cmVzIMOgIG1hIHLDqWdpb24nKVxuICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbWVudV9zZWxlY3Rpb24uc2VsZWN0QWxsKCdidXR0b24nKS5hdHRyKCdjbGFzcycsICdidXR0b25fYmx1ZScpO1xuICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ3ByZXNzZWQnKTtcbiAgICAgICAgc2VsZi5zZWxlY3RBYm92ZU15UmVnaW9uKCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMubWFrZVRhYmxlU3RhdCgpO1xuICB9XG5cbiAgdXBkYXRlQ29tcGxldHVkZSgpIHtcbiAgICB0aGlzLmNvbXBsZXR1ZGUudXBkYXRlKFxuICAgICAgY2FsY0NvbXBsZXR1ZGVTdWJzZXQoYXBwLCBbdGhpcy5yYXRpb190b191c2VdLCAnYXJyYXknKSxcbiAgICAgIGNhbGNQb3BDb21wbGV0dWRlU3Vic2V0KGFwcCwgW3RoaXMucmF0aW9fdG9fdXNlXSkpO1xuICB9XG5cbiAgdXBkYXRlQ29udGV4dChtaW4sIG1heCkge1xuICAgIHRoaXMuY29udGV4dC5zZWxlY3RBbGwoJy5iYXInKVxuICAgICAgIC5zdHlsZSgnZmlsbC1vcGFjaXR5JywgKF8sIGkpID0+IChpID49IG1pbiAmJiBpIDwgbWF4ID8gJzEnIDogJzAuMycpKTtcbiAgfVxuXG4gIHVwZGF0ZSgpIHtcbiAgICBkaXNwbGF5ZWQgPSAwO1xuICAgIGNvbnN0IHJhdGlvX3RvX3VzZSA9IHRoaXMucmF0aW9fdG9fdXNlO1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIGNvbnN0IGJhciA9IHRoaXMuZ19iYXIuc2VsZWN0QWxsKCcuYmFyJylcbiAgICAgIC5kYXRhKHRoaXMuZGF0YSk7XG5cbiAgICBpZiAodGhpcy5yZXNldF9zdGF0ZV9idXR0b24gPT09IHRydWUpIHtcbiAgICAgIGQzLnNlbGVjdEFsbCgnI21lbnVfc2VsZWN0aW9uID4gYnV0dG9uJykuYXR0cignY2xhc3MnLCAnYnV0dG9uX2JsdWUnKTtcbiAgICB9XG5cbiAgICBiYXJcbiAgICAgIC5hdHRycyhkID0+ICh7XG4gICAgICAgIHg6IHRoaXMueChkLmlkKSxcbiAgICAgICAgeTogdGhpcy55KGRbcmF0aW9fdG9fdXNlXSksXG4gICAgICAgIHdpZHRoOiB0aGlzLnguYmFuZHdpZHRoKCksXG4gICAgICAgIGhlaWdodDogaGVpZ2h0IC0gdGhpcy55KGRbcmF0aW9fdG9fdXNlXSksXG4gICAgICB9KSlcbiAgICAgIC5zdHlsZSgnZmlsbCcsIGQgPT4gYXBwLmNvbG9yc1tkLmlkXSB8fCBjb2xvcl9jb3VudHJpZXMpXG4gICAgICAuc3R5bGUoJ2Rpc3BsYXknLCAoZCkgPT4ge1xuICAgICAgICBjb25zdCB0b19kaXNwbGF5ID0gdGhpcy54KGQuaWQpICE9IG51bGw7XG4gICAgICAgIGlmICh0b19kaXNwbGF5KSB7XG4gICAgICAgICAgZGlzcGxheWVkICs9IDE7XG4gICAgICAgICAgcmV0dXJuICdpbml0aWFsJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJ25vbmUnO1xuICAgICAgfSk7XG5cbiAgICBiYXIuZW50ZXIoKVxuICAgICAgLmluc2VydCgncmVjdCcsICcubWVhbicpXG4gICAgICAuYXR0cnMoZCA9PiAoe1xuICAgICAgICBjbGFzczogJ2JhcicsXG4gICAgICAgIHg6IHRoaXMueChkLmlkKSxcbiAgICAgICAgeTogdGhpcy55KGRbcmF0aW9fdG9fdXNlXSksXG4gICAgICAgIHdpZHRoOiB0aGlzLnguYmFuZHdpZHRoKCksXG4gICAgICAgIGhlaWdodDogaGVpZ2h0IC0gdGhpcy55KGRbcmF0aW9fdG9fdXNlXSksXG4gICAgICB9KSk7XG5cbiAgICBiYXIuZXhpdCgpLnJlbW92ZSgpO1xuXG4gICAgdGhpcy5fZm9jdXMuc2VsZWN0KCcuYXhpcy0teScpXG4gICAgICAuY2FsbCh0aGlzLnlBeGlzKTtcblxuICAgIGNvbnN0IGF4aXNfeCA9IHRoaXMuX2ZvY3VzLnNlbGVjdCgnLmF4aXMtLXgnKVxuICAgICAgLmF0dHIoJ2ZvbnQtc2l6ZScsICgpID0+IChkaXNwbGF5ZWQgPiA3NSA/IDYgOiAxMCkpXG4gICAgICAuY2FsbCh0aGlzLnhBeGlzKTtcbiAgICBheGlzX3hcbiAgICAgIC5zZWxlY3RBbGwoJ3RleHQnKVxuICAgICAgLmF0dHJzKCgpID0+IHtcbiAgICAgICAgaWYgKGRpc3BsYXllZCA+IDEwMCkge1xuICAgICAgICAgIHJldHVybiB7IGR4OiAnLTAuOGVtJywgZHk6ICcwLjE1ZW0nLCB0cmFuc2Zvcm06ICdyb3RhdGUoLTY1KScgfTtcbiAgICAgICAgfSBlbHNlIGlmIChkaXNwbGF5ZWQgPiAyMCkge1xuICAgICAgICAgIHJldHVybiB7IGR4OiAnLTAuOGVtJywgZHk6ICcwLjE1ZW0nLCB0cmFuc2Zvcm06ICdyb3RhdGUoLTY1KScgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4geyBkeDogJzAnLCBkeTogJzAuNzFlbScsIHRyYW5zZm9ybTogbnVsbCB9O1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnN0eWxlKCd0ZXh0LWFuY2hvcicsICgpID0+IChkaXNwbGF5ZWQgPiAyMCA/ICdlbmQnIDogJ21pZGRsZScpKTtcblxuICAgIHRoaXMuZ19iYXIuc2VsZWN0QWxsKCcuYmFyJylcbiAgICAgIC5vbignbW91c2VvdmVyJywgKCkgPT4ge1xuICAgICAgICBjbGVhclRpbWVvdXQodCk7XG4gICAgICAgIHRoaXMudG9vbHRpcC5zdHlsZSgnZGlzcGxheScsIG51bGwpO1xuICAgICAgfSlcbiAgICAgIC5vbignbW91c2VvdXQnLCAoKSA9PiB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0KTtcbiAgICAgICAgdCA9IHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLnRvb2x0aXAuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpOyB9LCAyNTApO1xuICAgICAgfSlcbiAgICAgIC5vbignbW91c2Vtb3ZlIG1vdXNlZG93bicsIChkKSA9PiB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0KTtcbiAgICAgICAgc2VsZi50b29sdGlwLnNlbGVjdCgnLnRpdGxlJylcbiAgICAgICAgICAuaHRtbChbXG4gICAgICAgICAgICAnPGI+JywgZC5uYW1lLCAnICgnLCBkLmlkLCAnKScsICc8L2I+J10uam9pbignJykpO1xuICAgICAgICBzZWxmLnRvb2x0aXAuc2VsZWN0KCcuY29udGVudCcpXG4gICAgICAgICAgLmh0bWwoW1xuICAgICAgICAgICAgc2VsZi5yYXRpb190b191c2UsICcgOiAnLCBtYXRoX3JvdW5kKGRbc2VsZi5yYXRpb190b191c2VdICogMTApIC8gMTAsICcgJywgc2VsZi51bml0LCAnPGJyPicsXG4gICAgICAgICAgICAnUmFuZyA6ICcsIHNlbGYuY3VycmVudF9pZHMuaW5kZXhPZihkLmlkKSArIDEsICcvJywgc2VsZi5jdXJyZW50X2lkcy5sZW5ndGgsXG4gICAgICAgICAgXS5qb2luKCcnKSk7XG4gICAgICAgIHNlbGYudG9vbHRpcFxuICAgICAgICAgIC5zdHlsZXMoe1xuICAgICAgICAgICAgZGlzcGxheTogbnVsbCxcbiAgICAgICAgICAgIGxlZnQ6IGAke2QzLmV2ZW50LnBhZ2VYIC0gNX1weGAsXG4gICAgICAgICAgICB0b3A6IGAke2QzLmV2ZW50LnBhZ2VZIC0gODV9cHhgIH0pO1xuICAgICAgfSk7XG5cbiAgICBzdmdfY29udGFpbmVyLnNlbGVjdCgnLmJydXNoX3RvcCcpXG4gICAgICAub24oJ21vdXNlbW92ZSBtb3VzZWRvd24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IGVsZW1zID0gZG9jdW1lbnQuZWxlbWVudHNGcm9tUG9pbnQoZDMuZXZlbnQucGFnZVgsIGQzLmV2ZW50LnBhZ2VZKTtcbiAgICAgICAgY29uc3QgZWxlbSA9IGVsZW1zLmZpbmQoZSA9PiBlLmNsYXNzTmFtZS5iYXNlVmFsID09PSAnYmFyJyk7XG4gICAgICAgIGlmIChlbGVtKSB7XG4gICAgICAgICAgY29uc3QgbmV3X2NsaWNrX2V2ZW50ID0gbmV3IE1vdXNlRXZlbnQoJ21vdXNlbW92ZScsIHtcbiAgICAgICAgICAgIHBhZ2VYOiBkMy5ldmVudC5wYWdlWCxcbiAgICAgICAgICAgIHBhZ2VZOiBkMy5ldmVudC5wYWdlWSxcbiAgICAgICAgICAgIGNsaWVudFg6IGQzLmV2ZW50LmNsaWVudFgsXG4gICAgICAgICAgICBjbGllbnRZOiBkMy5ldmVudC5jbGllbnRZLFxuICAgICAgICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgICAgICAgIGNhbmNlbGFibGU6IHRydWUsXG4gICAgICAgICAgICB2aWV3OiB3aW5kb3cgfSk7XG4gICAgICAgICAgZWxlbS5kaXNwYXRjaEV2ZW50KG5ld19jbGlja19ldmVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHQpO1xuICAgICAgICAgIHQgPSBzZXRUaW1lb3V0KCgpID0+IHsgc2VsZi50b29sdGlwLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTsgfSwgMjUwKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5vbignbW91c2VvdXQnLCAoKSA9PiB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0KTtcbiAgICAgICAgdCA9IHNldFRpbWVvdXQoKCkgPT4geyBzZWxmLnRvb2x0aXAuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpOyB9LCAyNTApO1xuICAgICAgfSk7XG5cbiAgICB0aGlzLnVwZGF0ZU1pbmlCYXJzKCk7XG4gIH1cblxuXG4gIHVwZGF0ZU1pbmlCYXJzKCkge1xuICAgIGNvbnN0IHJhdGlvX3RvX3VzZSA9IHRoaXMucmF0aW9fdG9fdXNlO1xuICAgIGNvbnN0IG1pbmlfYmFycyA9IHRoaXMuY29udGV4dC5zZWxlY3RBbGwoJy5iYXInKVxuICAgICAgLmRhdGEodGhpcy5kYXRhKTtcblxuICAgIG1pbmlfYmFyc1xuICAgICAgLmF0dHJzKGQgPT4gKHtcbiAgICAgICAgeDogdGhpcy54MihkLmlkKSxcbiAgICAgICAgeTogdGhpcy55MihkW3JhdGlvX3RvX3VzZV0pLFxuICAgICAgICB3aWR0aDogdGhpcy54Mi5iYW5kd2lkdGgoKSxcbiAgICAgICAgaGVpZ2h0OiBoZWlnaHQyIC0gdGhpcy55MihkW3JhdGlvX3RvX3VzZV0pLFxuICAgICAgfSkpXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCBkID0+IChkLmlkICE9PSBhcHAuY3VycmVudF9jb25maWcubXlfcmVnaW9uID8gY29sb3JfY291bnRyaWVzIDogY29sb3JfaGlnaGxpZ2h0KSk7XG5cbiAgICBtaW5pX2JhcnNcbiAgICAgIC5lbnRlcigpXG4gICAgICAuaW5zZXJ0KCdyZWN0JylcbiAgICAgIC5hdHRycyhkID0+ICh7XG4gICAgICAgIGNsYXNzOiAnYmFyJyxcbiAgICAgICAgeDogdGhpcy54MihkLmlkKSxcbiAgICAgICAgeTogdGhpcy55MihkW3JhdGlvX3RvX3VzZV0pLFxuICAgICAgICB3aWR0aDogdGhpcy54Mi5iYW5kd2lkdGgoKSxcbiAgICAgICAgaGVpZ2h0OiBoZWlnaHQyIC0gdGhpcy55MihkW3JhdGlvX3RvX3VzZV0pLFxuICAgICAgfSkpXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCBkID0+IChkLmlkICE9PSBhcHAuY3VycmVudF9jb25maWcubXlfcmVnaW9uID8gY29sb3JfY291bnRyaWVzIDogY29sb3JfaGlnaGxpZ2h0KSk7XG4gICAgbWluaV9iYXJzLmV4aXQoKS5yZW1vdmUoKTtcbiAgfVxuXG4gIHVwZGF0ZU1hcFJlZ2lvKCkge1xuICAgIHRoaXMubWFwX2VsZW0udGFyZ2V0X2xheWVyLnNlbGVjdEFsbCgncGF0aCcpXG4gICAgICAuYXR0cignZmlsbCcsIGQgPT4gKHRoaXMuY3VycmVudF9pZHMuaW5kZXhPZihkLmlkKSA+IC0xXG4gICAgICAgID8gKGFwcC5jb2xvcnNbZC5pZF0gfHwgY29sb3JfY291bnRyaWVzKVxuICAgICAgICA6IGNvbG9yX2Rpc2FibGVkKSk7XG4gIH1cblxuICBzZWxlY3RBYm92ZU15UmVnaW9uKCkge1xuICAgIGNvbnN0IG15X3JhbmsgPSB0aGlzLmRhdGEubWFwKChkLCBpKSA9PiBbZC5pZCwgaV0pXG4gICAgICAuZmlsdGVyKGQgPT4gZFswXSA9PT0gYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbilbMF1bMV07XG4gICAgYXBwLmNvbG9ycyA9IHt9O1xuICAgIGFwcC5jb2xvcnNbYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbl0gPSBjb2xvcl9oaWdobGlnaHQ7XG4gICAgaWYgKCF0aGlzLnNlcmllX2ludmVyc2VkKSB7XG4gICAgICBjdXJyZW50X3JhbmdlX2JydXNoID0gW215X3JhbmssIHRoaXMuZGF0YS5sZW5ndGhdO1xuICAgICAgdGhpcy5kYXRhXG4gICAgICAgIC5maWx0ZXIoKGQsIGkpID0+IGkgPiBteV9yYW5rKVxuICAgICAgICAubWFwKGQgPT4gZC5pZClcbiAgICAgICAgLmZvckVhY2goKGZ0KSA9PiB7IGFwcC5jb2xvcnNbZnRdID0gY29sb3Jfc3VwOyB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudF9yYW5nZV9icnVzaCA9IFswLCBteV9yYW5rXTtcbiAgICAgIHRoaXMuZGF0YVxuICAgICAgICAuZmlsdGVyKChkLCBpKSA9PiBpIDwgbXlfcmFuaylcbiAgICAgICAgLm1hcChkID0+IGQuaWQpXG4gICAgICAgIC5mb3JFYWNoKChmdCkgPT4geyBhcHAuY29sb3JzW2Z0XSA9IGNvbG9yX2luZjsgfSk7XG4gICAgfVxuICAgIHRoaXMucmVzZXRfc3RhdGVfYnV0dG9uID0gZmFsc2U7XG4gICAgc3ZnX2NvbnRhaW5lci5zZWxlY3QoJy5icnVzaF9ib3R0b20nKS5jYWxsKFxuICAgICAgdGhpcy5icnVzaF9ib3R0b20ubW92ZSwgdGhpcy54Mi5yYW5nZSgpKTtcbiAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIC8vIHN2Z19jb250YWluZXIuc2VsZWN0KCcuYnJ1c2hfdG9wJykuY2FsbCh0aGlzLmJydXNoX3RvcC5tb3ZlLCBjdXJyZW50X3JhbmdlX2JydXNoLm1hcChkID0+IGQgKiAod2lkdGggLyBuYkZ0KSkpO1xuICAgIHRoaXMubWFwX2VsZW0ucmVtb3ZlUmVjdEJydXNoKCk7XG4gICAgdGhpcy51cGRhdGVNYXBSZWdpbygpO1xuICAgIHRoaXMucmVzZXRfc3RhdGVfYnV0dG9uID0gdHJ1ZTtcbiAgfVxuXG4gIHNlbGVjdEJlbG93TXlSZWdpb24oKSB7XG4gICAgY29uc3QgbXlfcmFuayA9IHRoaXMuZGF0YS5tYXAoKGQsIGkpID0+IFtkLmlkLCBpXSlcbiAgICAgIC5maWx0ZXIoZCA9PiBkWzBdID09PSBhcHAuY3VycmVudF9jb25maWcubXlfcmVnaW9uKVswXVsxXTtcblxuICAgIGFwcC5jb2xvcnMgPSB7fTtcbiAgICBhcHAuY29sb3JzW2FwcC5jdXJyZW50X2NvbmZpZy5teV9yZWdpb25dID0gY29sb3JfaGlnaGxpZ2h0O1xuICAgIGlmICghdGhpcy5zZXJpZV9pbnZlcnNlZCkge1xuICAgICAgY3VycmVudF9yYW5nZV9icnVzaCA9IFswLCBteV9yYW5rXTtcbiAgICAgIHRoaXMuZGF0YVxuICAgICAgICAuZmlsdGVyKChkLCBpKSA9PiBpIDwgbXlfcmFuaylcbiAgICAgICAgLm1hcChkID0+IGQuaWQpXG4gICAgICAgIC5mb3JFYWNoKChmdCkgPT4geyBhcHAuY29sb3JzW2Z0XSA9IGNvbG9yX2luZjsgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN1cnJlbnRfcmFuZ2VfYnJ1c2ggPSBbbXlfcmFuaywgdGhpcy5kYXRhLmxlbmd0aF07XG4gICAgICB0aGlzLmRhdGFcbiAgICAgICAgLmZpbHRlcigoZCwgaSkgPT4gaSA+IG15X3JhbmspXG4gICAgICAgIC5tYXAoZCA9PiBkLmlkKVxuICAgICAgICAuZm9yRWFjaCgoZnQpID0+IHsgYXBwLmNvbG9yc1tmdF0gPSBjb2xvcl9zdXA7IH0pO1xuICAgIH1cbiAgICB0aGlzLnJlc2V0X3N0YXRlX2J1dHRvbiA9IGZhbHNlO1xuICAgIHN2Z19jb250YWluZXIuc2VsZWN0KCcuYnJ1c2hfYm90dG9tJykuY2FsbChcbiAgICAgIHRoaXMuYnJ1c2hfYm90dG9tLm1vdmUsIHRoaXMueDIucmFuZ2UoKSk7XG4gICAgdGhpcy51cGRhdGUoKTtcbiAgICAvLyBzdmdfYmFyLnNlbGVjdCgnLmJydXNoX3RvcCcpLmNhbGwodGhpcy5icnVzaF90b3AubW92ZSwgY3VycmVudF9yYW5nZV9icnVzaC5tYXAoZCA9PiBkICogKHdpZHRoIC8gbmJGdCkpKTtcbiAgICB0aGlzLm1hcF9lbGVtLnJlbW92ZVJlY3RCcnVzaCgpO1xuICAgIHRoaXMudXBkYXRlTWFwUmVnaW8oKTtcbiAgICB0aGlzLnJlc2V0X3N0YXRlX2J1dHRvbiA9IHRydWU7XG4gIH1cblxuICBzZWxlY3RBYm92ZU1lYW4oKSB7XG4gICAgY29uc3QgbWVhbl9yYW5rID0gZ2V0TWVhblJhbmsodGhpcy5tZWFuX3ZhbHVlLCB0aGlzLnJhdGlvX3RvX3VzZSk7XG4gICAgY29uc3QgcmF0aW9fdG9fdXNlID0gdGhpcy5yYXRpb190b191c2U7XG4gICAgY29uc3QgcmVmX3ZhbHVlID0gdGhpcy5yZWZfdmFsdWU7XG5cbiAgICBhcHAuY29sb3JzID0ge307XG4gICAgYXBwLmNvbG9yc1thcHAuY3VycmVudF9jb25maWcubXlfcmVnaW9uXSA9IGNvbG9yX2hpZ2hsaWdodDtcbiAgICBpZiAoIXRoaXMuc2VyaWVfaW52ZXJzZWQpIHtcbiAgICAgIGN1cnJlbnRfcmFuZ2VfYnJ1c2ggPSBbbWVhbl9yYW5rLCB0aGlzLmRhdGEubGVuZ3RoXTtcbiAgICAgIHRoaXMuZGF0YS5maWx0ZXIoZCA9PiBkW3JhdGlvX3RvX3VzZV0gPiB0aGlzLm1lYW5fdmFsdWUpLmZvckVhY2goKGZ0KSA9PiB7XG4gICAgICAgIGlmIChmdFtyYXRpb190b191c2VdID4gcmVmX3ZhbHVlKSBhcHAuY29sb3JzW2Z0LmlkXSA9IGNvbG9yX3N1cDtcbiAgICAgICAgZWxzZSBhcHAuY29sb3JzW2Z0LmlkXSA9IGNvbG9yX2luZjtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50X3JhbmdlX2JydXNoID0gWzAsIG1lYW5fcmFuayArIDFdO1xuICAgICAgdGhpcy5kYXRhLmZpbHRlcihkID0+IGRbcmF0aW9fdG9fdXNlXSA+IHRoaXMubWVhbl92YWx1ZSkuZm9yRWFjaCgoZnQpID0+IHtcbiAgICAgICAgaWYgKGZ0W3JhdGlvX3RvX3VzZV0gPiByZWZfdmFsdWUpIGFwcC5jb2xvcnNbZnQuaWRdID0gY29sb3JfaW5mO1xuICAgICAgICBlbHNlIGFwcC5jb2xvcnNbZnQuaWRdID0gY29sb3Jfc3VwO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGFwcC5jb2xvcnNbYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbl0gPSBjb2xvcl9oaWdobGlnaHQ7XG4gICAgdGhpcy5yZXNldF9zdGF0ZV9idXR0b24gPSBmYWxzZTtcbiAgICBzdmdfYmFyLnNlbGVjdCgnLmJydXNoX2JvdHRvbScpLmNhbGwoXG4gICAgICB0aGlzLmJydXNoX2JvdHRvbS5tb3ZlLCB0aGlzLngyLnJhbmdlKCkpO1xuICAgIHRoaXMudXBkYXRlKCk7XG4gICAgdGhpcy5tYXBfZWxlbS5yZW1vdmVSZWN0QnJ1c2goKTtcbiAgICAvLyBzdmdfYmFyLnNlbGVjdCgnLmJydXNoX3RvcCcpLmNhbGwodGhpcy5icnVzaF90b3AubW92ZSwgY3VycmVudF9yYW5nZV9icnVzaC5tYXAoZCA9PiBkICogKHdpZHRoIC8gbmJGdCkpKTtcbiAgICB0aGlzLnVwZGF0ZU1hcFJlZ2lvKCk7XG4gICAgdGhpcy5yZXNldF9zdGF0ZV9idXR0b24gPSB0cnVlO1xuICB9XG5cbiAgc2VsZWN0QmVsb3dNZWFuKCkge1xuICAgIGNvbnN0IG1lYW5fcmFuayA9IGdldE1lYW5SYW5rKHRoaXMubWVhbl92YWx1ZSwgdGhpcy5yYXRpb190b191c2UpO1xuICAgIGNvbnN0IHJhdGlvX3RvX3VzZSA9IHRoaXMucmF0aW9fdG9fdXNlO1xuICAgIGNvbnN0IHJlZl92YWx1ZSA9IHRoaXMucmVmX3ZhbHVlO1xuICAgIGFwcC5jb2xvcnMgPSB7fTtcbiAgICBpZiAoIXRoaXMuc2VyaWVfaW52ZXJzZWQpIHtcbiAgICAgIGN1cnJlbnRfcmFuZ2VfYnJ1c2ggPSBbMCwgbWVhbl9yYW5rXTtcbiAgICAgIHRoaXMuZGF0YS5maWx0ZXIoZCA9PiBkW3JhdGlvX3RvX3VzZV0gPCB0aGlzLm1lYW5fdmFsdWUpLmZvckVhY2goKGZ0KSA9PiB7XG4gICAgICAgIGlmIChmdFtyYXRpb190b191c2VdIDwgcmVmX3ZhbHVlKSBhcHAuY29sb3JzW2Z0LmlkXSA9IGNvbG9yX2luZjtcbiAgICAgICAgZWxzZSBhcHAuY29sb3JzW2Z0LmlkXSA9IGNvbG9yX3N1cDtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50X3JhbmdlX2JydXNoID0gW21lYW5fcmFuayArIDEsIHRoaXMuZGF0YS5sZW5ndGhdO1xuICAgICAgdGhpcy5kYXRhLmZpbHRlcihkID0+IGRbcmF0aW9fdG9fdXNlXSA8IHRoaXMubWVhbl92YWx1ZSkuZm9yRWFjaCgoZnQpID0+IHtcbiAgICAgICAgaWYgKGZ0W3JhdGlvX3RvX3VzZV0gPCByZWZfdmFsdWUpIGFwcC5jb2xvcnNbZnQuaWRdID0gY29sb3Jfc3VwO1xuICAgICAgICBlbHNlIGFwcC5jb2xvcnNbZnQuaWRdID0gY29sb3JfaW5mO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGFwcC5jb2xvcnNbYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbl0gPSBjb2xvcl9oaWdobGlnaHQ7XG4gICAgdGhpcy5yZXNldF9zdGF0ZV9idXR0b24gPSBmYWxzZTtcbiAgICBzdmdfYmFyLnNlbGVjdCgnLmJydXNoX2JvdHRvbScpLmNhbGwoXG4gICAgICB0aGlzLmJydXNoX2JvdHRvbS5tb3ZlLCB0aGlzLngyLnJhbmdlKCkpO1xuICAgIHRoaXMudXBkYXRlKCk7XG4gICAgdGhpcy5tYXBfZWxlbS5yZW1vdmVSZWN0QnJ1c2goKTtcbiAgICAvLyBzdmdfYmFyLnNlbGVjdCgnLmJydXNoX3RvcCcpLmNhbGwodGhpcy5icnVzaF90b3AubW92ZSwgY3VycmVudF9yYW5nZV9icnVzaC5tYXAoZCA9PiBkICogKHdpZHRoIC8gbmJGdCkpKTtcbiAgICB0aGlzLnVwZGF0ZU1hcFJlZ2lvKCk7XG4gICAgdGhpcy5yZXNldF9zdGF0ZV9idXR0b24gPSB0cnVlO1xuICB9XG5cbiAgaGFuZGxlX2JydXNoX21hcChldmVudCkge1xuICAgIGlmICghZXZlbnQgfHwgIWV2ZW50LnNlbGVjdGlvbikge1xuICAgICAgdGhpcy5sYXN0X21hcF9zZWxlY3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMubWFwX2VsZW0udG9vbHRpcC5zdHlsZSgnZGlzcGxheScsICdub25lJyk7XG4gICAgY29uc3QgcmF0aW9fdG9fdXNlID0gdGhpcy5yYXRpb190b191c2U7XG4gICAgY29uc3QgcmVmX3ZhbHVlID0gdGhpcy5yZWZfdmFsdWU7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgc3ZnX2Jhci5zZWxlY3QoJy5icnVzaF90b3AnKS5jYWxsKHNlbGYuYnJ1c2hfdG9wLm1vdmUsIG51bGwpO1xuICAgIGNvbnN0IFt0b3BsZWZ0LCBib3R0b21yaWdodF0gPSBldmVudC5zZWxlY3Rpb247XG4gICAgdGhpcy5sYXN0X21hcF9zZWxlY3Rpb24gPSBbdG9wbGVmdCwgYm90dG9tcmlnaHRdO1xuICAgIC8vIGNvbnN0IHRyYW5zZm9ybSA9IHN2Z19tYXAubm9kZSgpLl9fem9vbTtcbiAgICAvLyB0b3BsZWZ0WzBdID0gKHRvcGxlZnRbMF0gLSB0cmFuc2Zvcm0ueCkgLyB0cmFuc2Zvcm0uaztcbiAgICAvLyB0b3BsZWZ0WzFdID0gKHRvcGxlZnRbMV0gLSB0cmFuc2Zvcm0ueSkgLyB0cmFuc2Zvcm0uaztcbiAgICAvLyBib3R0b21yaWdodFswXSA9IChib3R0b21yaWdodFswXSAtIHRyYW5zZm9ybS54KSAvIHRyYW5zZm9ybS5rO1xuICAgIC8vIGJvdHRvbXJpZ2h0WzFdID0gKGJvdHRvbXJpZ2h0WzFdIC0gdHJhbnNmb3JtLnkpIC8gdHJhbnNmb3JtLms7XG4gICAgY29uc3QgcmVjdCA9IG5ldyBSZWN0KHRvcGxlZnQsIGJvdHRvbXJpZ2h0KTtcbiAgICBhcHAuY29sb3JzID0ge307XG4gICAgc2VsZi5tYXBfZWxlbS50YXJnZXRfbGF5ZXIuc2VsZWN0QWxsKCdwYXRoJylcbiAgICAgIC5hdHRyKCdmaWxsJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgY29uc3QgaWQgPSBkLmlkO1xuICAgICAgICBpZiAoaWQgPT09IGFwcC5jdXJyZW50X2NvbmZpZy5teV9yZWdpb24pIHtcbiAgICAgICAgICBhcHAuY29sb3JzW2lkXSA9IGNvbG9yX2hpZ2hsaWdodDtcbiAgICAgICAgICByZXR1cm4gY29sb3JfaGlnaGxpZ2h0O1xuICAgICAgICB9IGVsc2UgaWYgKHNlbGYuY3VycmVudF9pZHMuaW5kZXhPZihpZCkgPCAwKSB7XG4gICAgICAgICAgcmV0dXJuIGNvbG9yX2Rpc2FibGVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fcHRzKSB7XG4gICAgICAgICAgdGhpcy5fcHRzID0gc3ZnUGF0aFRvQ29vcmRzKHRoaXMuZ2V0QXR0cmlidXRlKCdkJyksIGFwcC50eXBlX3BhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHB0cyA9IHRoaXMuX3B0cztcbiAgICAgICAgZm9yIChsZXQgaXggPSAwLCBuYl9wdHMgPSBwdHMubGVuZ3RoOyBpeCA8IG5iX3B0czsgaXgrKykge1xuICAgICAgICAgIGlmIChyZWN0LmNvbnRhaW5zKHB0c1tpeF0pKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGQucHJvcGVydGllc1tyYXRpb190b191c2VdO1xuICAgICAgICAgICAgY29uc3QgY29sb3IgPSBjb21wKHZhbHVlLCByZWZfdmFsdWUsIHRoaXMuc2VyaWVfaW52ZXJzZWQpO1xuICAgICAgICAgICAgYXBwLmNvbG9yc1tpZF0gPSBjb2xvcjtcbiAgICAgICAgICAgIHJldHVybiBjb2xvcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbG9yX2NvdW50cmllcztcbiAgICAgIH0pO1xuICAgIHNlbGYuX2ZvY3VzLnNlbGVjdEFsbCgnLmJhcicpXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCBkID0+IGFwcC5jb2xvcnNbZC5pZF0gfHwgY29sb3JfY291bnRyaWVzKTtcbiAgICBjb25zdCBpZHMgPSBPYmplY3Qua2V5cyhhcHAuY29sb3JzKTtcbiAgICBjb25zdCByYW5rcyA9IGlkcy5tYXAoZCA9PiB0aGlzLmN1cnJlbnRfaWRzLmluZGV4T2YoZC5pZCkgPiAtMSkubWFwKGQgPT4gdGhpcy5jdXJyZW50X3JhbmtzW2RdKTtcbiAgICBpZiAocmFua3MubGVuZ3RoID4gMSkge1xuICAgICAgY29uc3QgYzEgPSByYW5rc1swXSAtIDE7XG4gICAgICBjb25zdCBjMiA9IHJhbmtzW3JhbmtzLmxlbmd0aCAtIDFdO1xuICAgICAgaWYgKGMxIDwgY3VycmVudF9yYW5nZVswXSB8fCBjMiA+IGN1cnJlbnRfcmFuZ2VbMV0pIHtcbiAgICAgICAgY3VycmVudF9yYW5nZSA9IFtcbiAgICAgICAgICByYW5rc1swXSAtIDEsXG4gICAgICAgICAgcmFua3NbcmFua3MubGVuZ3RoIC0gMV0sXG4gICAgICAgIF07XG4gICAgICAgIHN2Z19iYXIuc2VsZWN0KCcuYnJ1c2hfYm90dG9tJykuY2FsbChcbiAgICAgICAgICBzZWxmLmJydXNoX2JvdHRvbS5tb3ZlLFxuICAgICAgICAgIFtjdXJyZW50X3JhbmdlWzBdICogKHdpZHRoIC8gbmJGdCksIGN1cnJlbnRfcmFuZ2VbMV0gKiAod2lkdGggLyBuYkZ0KV0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50X3JhbmdlID0gWzAsIHRoaXMuZGF0YS5sZW5ndGhdO1xuICAgICAgc3ZnX2Jhci5zZWxlY3QoJy5icnVzaF9ib3R0b20nKS5jYWxsKFxuICAgICAgICBzZWxmLmJydXNoX2JvdHRvbS5tb3ZlLCBzZWxmLngucmFuZ2UoKSk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlQ2xpY2tNYXAoZCwgcGFyZW50KSB7XG4gICAgY29uc3QgaWQgPSBkLmlkO1xuICAgIGlmICh0aGlzLmN1cnJlbnRfaWRzLmluZGV4T2YoaWQpIDwgMCB8fCBpZCA9PT0gYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbikgcmV0dXJuO1xuICAgIGlmIChhcHAuY29sb3JzW2lkXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBhcHAuY29sb3JzW2lkXSA9IHVuZGVmaW5lZDtcbiAgICAgIGQzLnNlbGVjdChwYXJlbnQpLmF0dHIoJ2ZpbGwnLCBjb2xvcl9jb3VudHJpZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjb2xvciA9IGNvbXAoXG4gICAgICAgIGQucHJvcGVydGllc1t0aGlzLnJhdGlvX3RvX3VzZV0sXG4gICAgICAgIHRoaXMucmVmX3ZhbHVlLFxuICAgICAgICB0aGlzLnNlcmllX2ludmVyc2VkKTtcbiAgICAgIGFwcC5jb2xvcnNbaWRdID0gY29sb3I7XG4gICAgICBkMy5zZWxlY3QocGFyZW50KS5hdHRyKCdmaWxsJywgY29sb3IpO1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZSgpO1xuICB9XG5cbiAgdXBkYXRlQ2hhbmdlUmVnaW9uKCkge1xuICAgIGlmIChhcHAuY3VycmVudF9jb25maWcuZmlsdGVyX2tleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmNoYW5nZVN0dWR5Wm9uZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlZl92YWx1ZSA9IHRoaXMuZGF0YS5maW5kKFxuICAgICAgICBmdCA9PiBmdC5pZCA9PT0gYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbilbdGhpcy5yYXRpb190b191c2VdO1xuICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgIHRoaXMudXBkYXRlQ29udGV4dCgwLCB0aGlzLmRhdGEubGVuZ3RoKTtcbiAgICAgIHRoaXMudXBkYXRlTWFwUmVnaW8oKTtcbiAgICAgIHRoaXMudXBkYXRlVGFibGVTdGF0cygpO1xuICAgICAgc3ZnX2Jhci5zZWxlY3QoJy5icnVzaF9ib3R0b20nKS5jYWxsKHRoaXMuYnJ1c2hfYm90dG9tLm1vdmUsIHRoaXMueC5yYW5nZSgpKTtcbiAgICAgIHRoaXMubWFwX2VsZW0ucmVtb3ZlUmVjdEJydXNoKCk7XG4gICAgICB0aGlzLm1hcF9lbGVtLnVwZGF0ZUxlZ2VuZCgpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZU1lYW5WYWx1ZSgpIHtcbiAgICBjb25zdCB5ID0gdGhpcy55O1xuICAgIGNvbnN0IHJhdGlvX3RvX3VzZSA9IHRoaXMucmF0aW9fdG9fdXNlO1xuICAgIGNvbnN0IGdycF9tZWFuID0gdGhpcy5fZm9jdXMuc2VsZWN0KCcubWVhbicpO1xuICAgIHRoaXMubWVhbl92YWx1ZSA9IGdldE1lYW4odGhpcy5kYXRhLm1hcChkID0+IGRbcmF0aW9fdG9fdXNlXSkpO1xuICAgIGdycF9tZWFuLnNlbGVjdCgndGV4dCcpXG4gICAgICAuYXR0cigneScsIHkodGhpcy5tZWFuX3ZhbHVlKSArIDIwKVxuICAgICAgLnRleHQoYFZhbGV1ciBtb3llbm5lIDogJHtNYXRoLnJvdW5kKHRoaXMubWVhbl92YWx1ZSAqIDEwKSAvIDEwfSAke3RoaXMudW5pdH1gKTtcbiAgICBncnBfbWVhbi5zZWxlY3QoJy5tZWFuX2xpbmUnKVxuICAgICAgLmF0dHJzKHsgeTE6IHkodGhpcy5tZWFuX3ZhbHVlKSwgeTI6IHkodGhpcy5tZWFuX3ZhbHVlKSB9KTtcbiAgICBncnBfbWVhbi5zZWxlY3QoJy50cmFuc3BfbWVhbl9saW5lJylcbiAgICAgIC5hdHRycyh7IHkxOiB5KHRoaXMubWVhbl92YWx1ZSksIHkyOiB5KHRoaXMubWVhbl92YWx1ZSkgfSk7XG4gIH1cblxuICBjaGFuZ2VTdHVkeVpvbmUoKSB7XG4gICAgY29uc3QgcmF0aW9fdG9fdXNlID0gdGhpcy5yYXRpb190b191c2U7XG4gICAgdGhpcy5kYXRhID0gYXBwLmN1cnJlbnRfZGF0YS5maWx0ZXIoZnQgPT4gISFmdFtyYXRpb190b191c2VdKTtcbiAgICB0aGlzLnJlZl92YWx1ZSA9IHRoaXMuZGF0YS5maW5kKFxuICAgICAgZnQgPT4gZnQuaWQgPT09IGFwcC5jdXJyZW50X2NvbmZpZy5teV9yZWdpb24pW3JhdGlvX3RvX3VzZV07XG4gICAgdGhpcy5jdXJyZW50X3JhbmtzID0gdGhpcy5kYXRhLm1hcCgoZCwgaSkgPT4gaSArIDEpO1xuICAgIGlmICh0aGlzLnNlcmllX2ludmVyc2VkKSB7XG4gICAgICB0aGlzLmRhdGEuc29ydCgoYSwgYikgPT4gYltyYXRpb190b191c2VdIC0gYVtyYXRpb190b191c2VdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kYXRhLnNvcnQoKGEsIGIpID0+IGFbcmF0aW9fdG9fdXNlXSAtIGJbcmF0aW9fdG9fdXNlXSk7XG4gICAgfVxuICAgIHRoaXMuY3VycmVudF9pZHMgPSB0aGlzLmRhdGEubWFwKGQgPT4gZC5pZCk7XG4gICAgbmJGdCA9IHRoaXMuZGF0YS5sZW5ndGg7XG4gICAgdGhpcy5yZWZfdmFsdWUgPSB0aGlzLmRhdGEuZmluZChcbiAgICAgIGZ0ID0+IGZ0LmlkID09PSBhcHAuY3VycmVudF9jb25maWcubXlfcmVnaW9uKVtyYXRpb190b191c2VdO1xuICAgIHRoaXMueC5kb21haW4odGhpcy5jdXJyZW50X2lkcyk7XG4gICAgbGV0IG1pbl9zZXJpZSA9IGQzLm1pbih0aGlzLmRhdGEsIGQgPT4gZFtyYXRpb190b191c2VdKTtcbiAgICBtaW5fc2VyaWUgPSBtaW5fc2VyaWUgPj0gMCA/IDAgOiBtaW5fc2VyaWUgKyBtaW5fc2VyaWUgLyAxMDtcbiAgICBjb25zdCBtYXhfc2VyaWUgPSBkMy5tYXgodGhpcy5kYXRhLCBkID0+IGRbcmF0aW9fdG9fdXNlXSk7XG4gICAgLy8gY29uc3Qgb2Zmc2V0X3kgPSAobWF4X3NlcmllIC0gbWluX3NlcmllKSAvIDIwO1xuICAgIHRoaXMueS5kb21haW4oW1xuICAgICAgLy8gbWluX3NlcmllIC0gb2Zmc2V0X3ksIG1heF9zZXJpZSxcbiAgICAgIG1pbl9zZXJpZSwgbWF4X3NlcmllLFxuICAgIF0pO1xuICAgIHRoaXMueDIuZG9tYWluKHRoaXMueC5kb21haW4oKSk7XG4gICAgdGhpcy55Mi5kb21haW4odGhpcy55LmRvbWFpbigpKTtcbiAgICB0aGlzLnVwZGF0ZU1lYW5WYWx1ZSgpO1xuICAgIHRoaXMudXBkYXRlKCk7XG4gICAgdGhpcy51cGRhdGVDb250ZXh0KDAsIHRoaXMuZGF0YS5sZW5ndGgpO1xuXG4gICAgc3ZnX2Jhci5zZWxlY3QoJy5icnVzaF9ib3R0b20nKS5jYWxsKHRoaXMuYnJ1c2hfYm90dG9tLm1vdmUsIHRoaXMueDIucmFuZ2UoKSk7XG4gICAgdGhpcy5tYXBfZWxlbS5yZW1vdmVSZWN0QnJ1c2goKTtcbiAgICBhcHAuY29sb3JzID0ge307XG4gICAgYXBwLmNvbG9yc1thcHAuY3VycmVudF9jb25maWcubXlfcmVnaW9uXSA9IGNvbG9yX2hpZ2hsaWdodDtcbiAgICB0aGlzLnVwZGF0ZVRhYmxlU3RhdHMoKTtcbiAgICB0aGlzLnVwZGF0ZUNvbXBsZXR1ZGUoKTtcbiAgICB0aGlzLnVwZGF0ZU1hcFJlZ2lvKCk7XG4gIH1cblxuICBhZGRWYXJpYWJsZShjb2RlX3ZhcmlhYmxlLCBuYW1lX3ZhcmlhYmxlKSB7XG4gICAgLy8gRmV0Y2ggdGhlIHVuaXQgZm9yIHRoaXMgaW5kaWNhdG9yOlxuICAgIGNvbnN0IHVuaXQgPSB2YXJpYWJsZXNfaW5mby5maW5kKGZ0ID0+IGZ0LmlkID09PSBjb2RlX3ZhcmlhYmxlKS51bml0O1xuICAgIGNvbnN0IHllYXIgPSBuYW1lX3ZhcmlhYmxlLm1hdGNoKC9cXChbXildKlxcKSQvKVswXTtcbiAgICBjb25zdCB1bml0X3llYXIgPSBgJHt5ZWFyLnNsaWNlKDAsIDEpfSR7dW5pdH0sICR7eWVhci5zbGljZSgxLCA2KX1gO1xuICAgIC8vIEFkZCB0aGUgdmFyaWFibGUgdG8gdGhlIGlucHV0IGVsZW1lbnQgYWxsb3dpbmcgdG8gY2hvb3NlIHZhcmlhYmxlczpcbiAgICB0aGlzLnNlbGVjX3Zhci5hcHBlbmQoJ29wdGlvbicpXG4gICAgICAuYXR0cigndmFsdWUnLCBgdl8ke2NvZGVfdmFyaWFibGV9YClcbiAgICAgIC50ZXh0KG5hbWVfdmFyaWFibGUucmVwbGFjZSh5ZWFyLCB1bml0X3llYXIpKTtcblxuICAgIC8vIEFuZCB1c2UgaXQgaW1tZWRpYXRseTpcbiAgICB0aGlzLnNlbGVjX3Zhci5ub2RlKCkudmFsdWUgPSBgdl8ke2NvZGVfdmFyaWFibGV9YDtcbiAgICB0aGlzLnNlbGVjX3Zhci5kaXNwYXRjaCgnY2hhbmdlJyk7XG4gIH1cblxuICByZW1vdmVWYXJpYWJsZShjb2RlX3ZhcmlhYmxlKSB7XG4gICAgLy8gQWRkIHRoZSB2YXJpYWJsZSB0byB0aGUgaW5wdXQgZWxlbWVudCBhbGxvd2luZyB0byBjaG9vc2UgdmFyaWFibGVzOlxuICAgIHRoaXMuc2VsZWNfdmFyLnNlbGVjdChgb3B0aW9uW3ZhbHVlPXZfJHtjb2RlX3ZhcmlhYmxlfV1gKS5yZW1vdmUoKTtcbiAgICBpZiAodGhpcy5yYXRpb190b191c2UgPT09IGNvZGVfdmFyaWFibGUpIHtcbiAgICAgIHRoaXMuc2VsZWNfdmFyLm5vZGUoKS52YWx1ZSA9IHRoaXMuc2VsZWNfdmFyLnNlbGVjdCgnb3B0aW9uJykubm9kZSgpLnZhbHVlO1xuICAgICAgdGhpcy5zZWxlY192YXIuZGlzcGF0Y2goJ2NoYW5nZScpO1xuICAgIH1cbiAgfVxuXG4gIGNoYW5nZVZhcmlhYmxlKGNvZGVfdmFyaWFibGUpIHtcbiAgICB0aGlzLnJhdGlvX3RvX3VzZSA9IGNvZGVfdmFyaWFibGU7XG4gICAgdGhpcy51bml0ID0gdmFyaWFibGVzX2luZm8uZmluZChmdCA9PiBmdC5pZCA9PT0gY29kZV92YXJpYWJsZSkudW5pdDtcbiAgfVxuXG4gIHJlbW92ZSgpIHtcbiAgICB0aGlzLl9mb2N1cy5yZW1vdmUoKTtcbiAgICB0aGlzLmNvbnRleHQucmVtb3ZlKCk7XG4gICAgdGhpcy5zZWxlY192YXIucmVtb3ZlKCk7XG4gICAgdGhpcy50YWJsZV9zdGF0cy5yZW1vdmUoKTtcbiAgICB0aGlzLnRhYmxlX3N0YXRzID0gbnVsbDtcbiAgICB0aGlzLm1hcF9lbGVtLnVuYmluZEJydXNoQ2xpY2soKTtcbiAgICB0aGlzLm1hcF9lbGVtID0gbnVsbDtcbiAgICBkMy5zZWxlY3QoJyNzdmdfYmFyJykuaHRtbCgnJyk7XG4gIH1cblxuICBiaW5kTWFwKG1hcF9lbGVtKSB7XG4gICAgdGhpcy5tYXBfZWxlbSA9IG1hcF9lbGVtO1xuICAgIHRoaXMubWFwX2VsZW0ucmVzZXRDb2xvcnModGhpcy5jdXJyZW50X2lkcyk7XG4gICAgdGhpcy5tYXBfZWxlbS5kaXNwbGF5TGVnZW5kKDApO1xuICB9XG5cbiAgdXBkYXRlVGFibGVTdGF0cygpIHtcbiAgICB0aGlzLnRhYmxlX3N0YXRzLnJlbW92ZUFsbCgpO1xuICAgIHRoaXMudGFibGVfc3RhdHMuYWRkRmVhdHVyZSh0aGlzLnByZXBhcmVUYWJsZVN0YXQoKSk7XG4gIH1cblxuICBwcmVwYXJlVGFibGVTdGF0KCkge1xuICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMuZGF0YS5tYXAoZCA9PiBkW3RoaXMucmF0aW9fdG9fdXNlXSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICdNaW4nOiBkMy5taW4odmFsdWVzKSxcbiAgICAgICdNYXgnOiBkMy5tYXgodmFsdWVzKSxcbiAgICAgICdNb3knOiBnZXRNZWFuKHZhbHVlcyksXG4gICAgICAnTWVkJzogZDMubWVkaWFuKHZhbHVlcyksXG4gICAgICBpZDogdGhpcy5yYXRpb190b191c2UsXG4gICAgICBWYXJpYWJsZTogdGhpcy5yYXRpb190b191c2UsXG4gICAgICAnTWEgcsOpZ2lvbic6IHRoaXMucmVmX3ZhbHVlLFxuICAgIH07XG4gIH1cblxuICBtYWtlVGFibGVTdGF0KCkge1xuICAgIGNvbnN0IGZlYXR1cmUgPSB0aGlzLnByZXBhcmVUYWJsZVN0YXQoKTtcbiAgICB0aGlzLnRhYmxlX3N0YXRzID0gbmV3IFRhYmxlUmVzdW1lU3RhdChbZmVhdHVyZV0pO1xuICB9XG5cbiAgZ2V0SGVscE1lc3NhZ2UoKSB7XG4gICAgcmV0dXJuIGBcbjxoMz5Qb3NpdGlvbiDigJMgMSBJbmRpY2F0ZXVyPC9oMz5cblxuPGI+QWlkZSBnw6luw6lyYWxlPC9iPlxuQ2UgZ3JhcGhpcXVlIHJlcHLDqXNlbnRlIGzigJlpbmRpY2F0ZXVyIHPDqWxlY3Rpb25uw6kgb3Jkb25uw6kgZGUgbGEgdmFsZXVyIG1pbmltYWxlIMOgIGxhIHZhbGV1ciBtYXhpbWFsZSAoYmFycmVzIGJsZXVlcykgcG91ciBs4oCZZXNwYWNlIGTigJnDqXR1ZGUgZXQgbGUgbWFpbGxhZ2UgdGVycml0b3JpYWwgZOKAmWFuYWx5c2Ugc8OpbGVjdGlvbm7DqS4gTGEgdmFsZXVyIGRlIGzigJl1bml0w6kgdGVycml0b3JpYWxlIHPDqWxlY3Rpb25uw6llIGFwcGFyYcOudCBlbiBzdXJicmlsbGFuY2UgKGphdW5lKS4gTGEgbGlnbmUgcmVwcsOpc2VudMOpZSBwYXIgdW4gdGlyZXTDqSByb3VnZSByZXByw6lzZW50ZSBsYSBtb3llbm5lIGRlIGzigJllc3BhY2UgZOKAmcOpdHVkZSAobm9uIHBvbmTDqXLDqWUpLlxuXG5TdXIgY2UgZ3JhcGhpcXVlLCBpbCBlc3QgcG9zc2libGUgZOKAmWludmVyc2VyIGzigJlvcmRyZSBkZSBjbGFzc2VtZW50IGRlIGzigJlpbmRpY2F0ZXVyIChhcHB1eWVyIHN1ciBsZSDCq8KgK8KgwrspLlxuXG5MYSBjYXJ0ZSBldCBsZSBncmFwaGlxdWUgc29udCBpbnRlcmFjdGlmcyBkYW5zIGxhIG1lc3VyZSBvw7kgbOKAmXV0aWxpc2F0ZXVyIHBldXQgY2hvaXNpciBkZSBzw6lsZWN0aW9ubmVyIGRlcyB1bml0w6lzIHRlcnJpdG9yaWFsZXMgKGNsaWMgZ2F1Y2hlIGFwcHV5w6kgZGUgbGEgc291cmlzKSBldCB2aXN1YWxpc2VyIGxldXIgcG9zaXRpb25uZW1lbnQgc2ltdWx0YW7DqW1lbnQgc3VyIGxhIGNhcnRlIChsb2NhbGlzYXRpb24gZ8Opb2dyYXBoaXF1ZSkgb3Ugc3VyIGxlIGRpYWdyYW1tZSBkZSBkaXN0cmlidXRpb24gKHBvc2l0aW9ubmVtZW50IHN0YXRpc3RpcXVlKS4gSWwgcGV1dCBhdXNzaSBlbiB1biBjbGljIGNob2lzaXIgZGUgdmlzdWFsaXNlciBsZXMgdW5pdMOpcyB0ZXJyaXRvcmlhbGVzIGF5YW50IGRlcyB2YWxldXJzIGluZsOpcmlldXJlcy9zdXDDqXJpZXVyZXMgw6AgbGEgbW95ZW5uZSBkZSBs4oCZZXNwYWNlIGTigJnDqXR1ZGUgb3UgaW5mw6lyaWV1cmVzL3N1cMOpcmlldXJlcyDDoCBsYSB2YWxldXIgZGUgbOKAmXVuaXTDqSB0ZXJyaXRvcmlhbGUgZGUgcsOpZsOpcmVuY2UgKMKrwqBtYSByw6lnaW9uwqDCuykuYDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgY29udGV4dE1lbnUge1xuICBjb25zdHJ1Y3RvcihpdGVtcykge1xuICAgIGlmIChpdGVtcykge1xuICAgICAgdGhpcy5zZXRJdGVtcyhpdGVtcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaXRlbXMgPSBbXTtcbiAgICB9XG4gIH1cblxuICBhZGRJdGVtKGl0ZW0pIHtcbiAgICB0aGlzLml0ZW1zLnB1c2goe1xuICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgYWN0aW9uOiBpdGVtLmFjdGlvbixcbiAgICB9KTtcbiAgfVxuXG4gIHJlbW92ZUl0ZW0obmFtZSkge1xuICAgIGZvciAobGV0IGkgPSB0aGlzLml0ZW1zLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcbiAgICAgIGlmICh0aGlzLml0ZW1zW2ldLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgdGhpcy5pdGVtcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNldEl0ZW1zKGl0ZW1zKSB7XG4gICAgdGhpcy5pdGVtcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwLCBuYl9pdGVtcyA9IGl0ZW1zLmxlbmd0aDsgaSA8IG5iX2l0ZW1zOyBpKyspIHtcbiAgICAgIGlmIChpdGVtc1tpXS5uYW1lICYmIGl0ZW1zW2ldLmFjdGlvbikge1xuICAgICAgICB0aGlzLmFkZEl0ZW0oaXRlbXNbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNob3dNZW51KGV2ZW50LCBwYXJlbnQsIGl0ZW1zLCBwb3NpdGlvbikge1xuICAgIGlmIChldmVudC5wcmV2ZW50RGVmYXVsdCkgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoZXZlbnQuc3RvcFByb3BhZ2F0aW9uKSBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBpZiAodGhpcy5ET01vYmopIHtcbiAgICAgIHRoaXMuaGlkZU1lbnUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGl0ZW1zKSB7XG4gICAgICB0aGlzLnNldEl0ZW1zKGl0ZW1zKTtcbiAgICB9XG5cbiAgICB0aGlzLmluaXRNZW51KHBhcmVudCk7XG4gICAgaWYgKCFwb3NpdGlvbikge1xuICAgICAgdGhpcy5ET01vYmouc3R5bGUudG9wID0gYCR7ZXZlbnQuY2xpZW50WSArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wfXB4YDtcbiAgICAgIHRoaXMuRE9Nb2JqLnN0eWxlLmxlZnQgPSBgJHtldmVudC5jbGllbnRYfXB4YDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ET01vYmouc3R5bGUudG9wID0gYCR7cG9zaXRpb25bMV19cHhgO1xuICAgICAgdGhpcy5ET01vYmouc3R5bGUubGVmdCA9IGAke3Bvc2l0aW9uWzBdfXB4YDtcbiAgICB9XG4gICAgdGhpcy5kaXNwbGF5ZWQgPSB0cnVlO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmhpZGVNZW51KCkpO1xuICAgIH0sIDE1MCk7XG4gIH1cblxuICBoaWRlTWVudSgpIHtcbiAgICBpZiAodGhpcy5ET01vYmogJiYgdGhpcy5ET01vYmoucGFyZW50RWxlbWVudCAmJiB0aGlzLkRPTW9iai5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKSB7XG4gICAgICB0aGlzLkRPTW9iai5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuRE9Nb2JqKTtcbiAgICAgIHRoaXMuRE9Nb2JqID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5kaXNwbGF5ZWQgPSBmYWxzZTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGlkZU1lbnUpO1xuICB9XG5cbiAgaW5pdE1lbnUocGFyZW50KSB7XG4gICAgaWYgKHRoaXMuRE9Nb2JqICYmIHRoaXMuRE9Nb2JqLnBhcmVudEVsZW1lbnQgJiYgdGhpcy5ET01vYmoucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCkge1xuICAgICAgdGhpcy5ET01vYmoucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLkRPTW9iaik7XG4gICAgICB0aGlzLkRPTW9iaiA9IG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIGNvbnN0IG1lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICBtZW51LmNsYXNzTmFtZSA9ICdjb250ZXh0LW1lbnUnO1xuICAgIG1lbnUuYXBwZW5kQ2hpbGQobGlzdCk7XG4gICAgZm9yIChsZXQgaSA9IDAsIG5iX2l0ZW0gPSB0aGlzLml0ZW1zLmxlbmd0aDsgaSA8IG5iX2l0ZW07IGkrKykge1xuICAgICAgY29uc3QgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICBpdGVtLnNldEF0dHJpYnV0ZSgnZGF0YS1pbmRleCcsIGkpO1xuICAgICAgaXRlbS5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJjb250ZXh0LW1lbnUtaXRlbS1uYW1lXCI+JHt0aGlzLml0ZW1zW2ldLm5hbWV9PC9zcGFuPmA7XG4gICAgICBsaXN0LmFwcGVuZENoaWxkKGl0ZW0pO1xuICAgICAgaXRlbS5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBpeCA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLWluZGV4Jyk7XG4gICAgICAgIHNlbGYuaXRlbXNbaXhdLmFjdGlvbigpO1xuICAgICAgfTtcbiAgICB9XG4gICAgdGhpcy5ET01vYmogPSBtZW51O1xuICAgIHBhcmVudC5hcHBlbmRDaGlsZChtZW51KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUmVjdCwgY29tcDIsIHByZXBhcmVUb29sdGlwMiwgc3ZnUGF0aFRvQ29vcmRzLCBfZ2V0UFIsIGNvbXB1dGVQZXJjZW50aWxlUmFuaywgZ2V0TWVhbiB9IGZyb20gJy4vLi4vaGVscGVycyc7XG5pbXBvcnQgeyBjb2xvcl9kaXNhYmxlZCwgY29sb3JfY291bnRyaWVzLCBjb2xvcl9oaWdobGlnaHQgfSBmcm9tICcuLy4uL29wdGlvbnMnO1xuaW1wb3J0IHsgY2FsY1BvcENvbXBsZXR1ZGVTdWJzZXQsIGNhbGNDb21wbGV0dWRlU3Vic2V0IH0gZnJvbSAnLi8uLi9wcmVwYXJlX2RhdGEnO1xuaW1wb3J0IHsgc3ZnX21hcCB9IGZyb20gJy4vLi4vbWFwJztcbmltcG9ydCB7IGFwcCwgdmFyaWFibGVzX2luZm8sIHJlc2V0Q29sb3JzIH0gZnJvbSAnLi8uLi8uLi9tYWluJztcbmltcG9ydCBDb250ZXh0TWVudSBmcm9tICcuLy4uL2NvbnRleHRNZW51JztcbmltcG9ydCBDb21wbGV0dWRlU2VjdGlvbiBmcm9tICcuLy4uL2NvbXBsZXR1ZGUnO1xuaW1wb3J0IFRhYmxlUmVzdW1lU3RhdCBmcm9tICcuLy4uL3RhYmxlUmVzdW1lU3RhdCc7XG5cbmxldCBzdmdfYmFyLCBtYXJnaW4sIGJib3hfc3ZnLCB3aWR0aCwgaGVpZ2h0LCBzdmdfY29udGFpbmVyLCB0O1xuXG5jb25zdCB1cGRhdGVEaW1lbnNpb25zID0gKCkgPT4ge1xuICBzdmdfYmFyID0gZDMuc2VsZWN0KCcjc3ZnX2JhcicpO1xuICBtYXJnaW4gPSB7IHRvcDogMjAsIHJpZ2h0OiAyMCwgYm90dG9tOiA0MCwgbGVmdDogNTAgfTtcbiAgYmJveF9zdmcgPSBzdmdfYmFyLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgd2lkdGggPSArYmJveF9zdmcud2lkdGggLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodDtcbiAgaGVpZ2h0ID0gNTAwICogYXBwLnJhdGlvVG9XaWRlIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XG4gIHN2Z19iYXIuYXR0cignaGVpZ2h0JywgYCR7NTAwICogYXBwLnJhdGlvVG9XaWRlfXB4YCk7XG4gIHN2Z19jb250YWluZXIgPSBzdmdfYmFyLmFwcGVuZCgnZycpLmF0dHIoJ2NsYXNzJywgJ2NvbnRhaW5lcicpO1xufTtcbi8qKiBDbGFzcyByZXByZXNlbnRpbmcgYSBzY2F0dGVycGxvdCAqL1xuZXhwb3J0IGNsYXNzIFNjYXR0ZXJQbG90MiB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSB0aGUgc2NhdHRlcnBsb3Qgb24gdGhlIGBzdmdfYmFyYCBzdmcgZWxlbWVudCBwcmV2aW91c2x5IGRlZmluZWRcbiAgICogQHBhcmFtIHtBcnJheX0gcmVmX2RhdGEgLSBBIHJlZmVyZW5jZSB0byB0aGUgc3Vic2V0IG9mIHRoZSBkYXRhc2V0IHRvIGJlIHVzZWRcbiAgICogdG8gY3JlYXRlIHRoZSBzY2F0dGVycGxvdCAoc2hvdWxkIGNvbnRhaW4gYXQgbGVhc3QgdHdvIGZpZWxkIGZsYWdnZWQgYXMgcmF0aW9cbiAgICogaW4gdGhlIGBhcHAuY3VycmVudF9jb25maWcucmF0aW9gIE9iamVjdCkuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihyZWZfZGF0YSkge1xuICAgIHRoaXMuYnJ1c2hlZCA9ICgpID0+IHtcbiAgICAgIGlmIChkMy5ldmVudCAmJiAhZDMuZXZlbnQuc2VsZWN0aW9uKSB7XG4gICAgICAgIGlmIChkMy5ldmVudC50eXBlID09PSAnZW5kJyAmJiBkMy5ldmVudC5zb3VyY2VFdmVudC50eXBlID09PSAnbW91c2V1cCcpIHtcbiAgICAgICAgICB0aGlzLm1hcF9lbGVtLnJlbW92ZVJlY3RCcnVzaCgpO1xuICAgICAgICB9XG4gICAgICAgIGFwcC5jb2xvcnMgPSB7fTtcbiAgICAgICAgYXBwLmNvbG9yc1thcHAuY3VycmVudF9jb25maWcubXlfcmVnaW9uXSA9IGNvbG9yX2hpZ2hsaWdodDtcbiAgICAgICAgdGhpcy51cGRhdGVMaWdodCgpO1xuICAgICAgICB0aGlzLnVwZGF0ZU1hcFJlZ2lvKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcmVzZXRDb2xvcnMoKTtcbiAgICAgIC8vIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgY29uc3QgW3RvcGxlZnQsIGJvdHRvbXJpZ2h0XSA9IGQzLmV2ZW50LnNlbGVjdGlvbjtcbiAgICAgIGNvbnN0IHJhbmdlX3ggPSBbXG4gICAgICAgIHRoaXMueC5pbnZlcnQodG9wbGVmdFswXSksXG4gICAgICAgIHRoaXMueC5pbnZlcnQoYm90dG9tcmlnaHRbMF0pLFxuICAgICAgXTtcbiAgICAgIGNvbnN0IHJhbmdlX3kgPSBbXG4gICAgICAgIHRoaXMueS5pbnZlcnQoYm90dG9tcmlnaHRbMV0pLFxuICAgICAgICB0aGlzLnkuaW52ZXJ0KHRvcGxlZnRbMV0pLFxuICAgICAgXTtcbiAgICAgIGlmICh0aGlzLnhJbnZlcnNlZCkgcmFuZ2VfeC5yZXZlcnNlKCk7XG4gICAgICBpZiAodGhpcy55SW52ZXJzZWQpIHJhbmdlX3kucmV2ZXJzZSgpO1xuICAgICAgcmFuZ2VfeFswXSAtPSAwLjU7XG4gICAgICByYW5nZV94WzFdICs9IDAuNTtcbiAgICAgIHJhbmdlX3lbMF0gLT0gMC41O1xuICAgICAgcmFuZ2VfeVsxXSArPSAwLjU7XG4gICAgICBsZXQgdDE7XG4gICAgICBsZXQgdDI7XG4gICAgICBpZiAodGhpcy50eXBlID09PSAndmFsdWUnKSB7XG4gICAgICAgIHQxID0gdGhpcy52YXJpYWJsZTE7XG4gICAgICAgIHQyID0gdGhpcy52YXJpYWJsZTI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0MSA9IHRoaXMucmFua192YXJpYWJsZTE7XG4gICAgICAgIHQyID0gdGhpcy5yYW5rX3ZhcmlhYmxlMjtcbiAgICAgIH1cblxuICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbl9pID0gdGhpcy5kYXRhLmxlbmd0aDsgaSA8IGxlbl9pOyBpKyspIHtcbiAgICAgICAgY29uc3QgZnQgPSB0aGlzLmRhdGFbaV07XG4gICAgICAgIGlmIChmdFt0MV0gPj0gcmFuZ2VfeFswXSAmJiBmdFt0MV0gPD0gcmFuZ2VfeFsxXVxuICAgICAgICAgICAgJiYgZnRbdDJdID49IHJhbmdlX3lbMF0gJiYgZnRbdDJdIDw9IHJhbmdlX3lbMV0pIHtcbiAgICAgICAgICBhcHAuY29sb3JzW2Z0LmlkXSA9IGNvbXAyKFxuICAgICAgICAgICAgZnRbdGhpcy52YXJpYWJsZTFdLCBmdFt0aGlzLnZhcmlhYmxlMl0sXG4gICAgICAgICAgICB0aGlzLnJlZl92YWx1ZTEsIHRoaXMucmVmX3ZhbHVlMixcbiAgICAgICAgICAgIHRoaXMueEludmVyc2VkLCB0aGlzLnlJbnZlcnNlZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGFwcC5jb2xvcnNbYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbl0gPSBjb2xvcl9oaWdobGlnaHQ7XG4gICAgICB0aGlzLnVwZGF0ZUxpZ2h0KCk7XG4gICAgICB0aGlzLnVwZGF0ZU1hcFJlZ2lvKCk7XG4gICAgICB0aGlzLm1hcF9lbGVtLnJlbW92ZVJlY3RCcnVzaCgpO1xuICAgIH07XG4gICAgdXBkYXRlRGltZW5zaW9ucygpO1xuICAgIGFwcC5jaGFydERyYXdSYXRpbyA9IGFwcC5yYXRpb1RvV2lkZTtcbiAgICAvLyBTZXQgdGhlIG1pbmltdW0gbnVtYmVyIG9mIHZhcmlhYmxlcyB0byBrZWVwIHNlbGVjdGVkIGZvciB0aGlzIGtpbmQgb2YgY2hhcnQ6XG4gICAgYXBwLmN1cnJlbnRfY29uZmlnLm5iX3ZhciA9IDI7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy50eXBlID0gJ3ZhbHVlJztcbiAgICB0aGlzLnZhcmlhYmxlMSA9IGFwcC5jdXJyZW50X2NvbmZpZy5yYXRpb1swXTtcbiAgICB0aGlzLnZhcmlhYmxlMiA9IGFwcC5jdXJyZW50X2NvbmZpZy5yYXRpb1sxXTtcbiAgICB0aGlzLnJhbmtfdmFyaWFibGUxID0gYHByXyR7dGhpcy52YXJpYWJsZTF9YDtcbiAgICB0aGlzLnJhbmtfdmFyaWFibGUyID0gYHByXyR7dGhpcy52YXJpYWJsZTJ9YDtcbiAgICB0aGlzLnVuaXQxID0gdmFyaWFibGVzX2luZm8uZmluZChmdCA9PiBmdC5pZCA9PT0gdGhpcy52YXJpYWJsZTEpLnVuaXQ7XG4gICAgdGhpcy51bml0MiA9IHZhcmlhYmxlc19pbmZvLmZpbmQoZnQgPT4gZnQuaWQgPT09IHRoaXMudmFyaWFibGUyKS51bml0O1xuICAgIHRoaXMucHJldHR5X25hbWUxID0gYXBwLmN1cnJlbnRfY29uZmlnLnJhdGlvX3ByZXR0eV9uYW1lWzBdO1xuICAgIHRoaXMucHJldHR5X25hbWUyID0gYXBwLmN1cnJlbnRfY29uZmlnLnJhdGlvX3ByZXR0eV9uYW1lWzFdO1xuICAgIHRoaXMuZGF0YSA9IHJlZl9kYXRhLmZpbHRlcihmdCA9PiAhIWZ0W3RoaXMudmFyaWFibGUxXSAmJiAhIWZ0W3RoaXMudmFyaWFibGUyXSlcbiAgICAgIC5tYXAoKGQpID0+IHtcbiAgICAgICAgY29uc3QgcmVzID0geyBpZDogZC5pZCwgbmFtZTogZC5uYW1lIH07XG4gICAgICAgIHJlc1t0aGlzLnZhcmlhYmxlMV0gPSBkW3RoaXMudmFyaWFibGUxXTtcbiAgICAgICAgcmVzW3RoaXMudmFyaWFibGUyXSA9IGRbdGhpcy52YXJpYWJsZTJdO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfSk7XG4gICAgdGhpcy5jdXJyZW50X2lkcyA9IHRoaXMuZGF0YS5tYXAoZCA9PiBkLmlkKTtcbiAgICByZXNldENvbG9ycyh0aGlzLmN1cnJlbnRfaWRzKTtcbiAgICB0aGlzLm5iRnQgPSB0aGlzLmRhdGEubGVuZ3RoO1xuICAgIGNvbXB1dGVQZXJjZW50aWxlUmFuayh0aGlzLmRhdGEsIHRoaXMudmFyaWFibGUxLCB0aGlzLnJhbmtfdmFyaWFibGUxKTtcbiAgICBjb21wdXRlUGVyY2VudGlsZVJhbmsodGhpcy5kYXRhLCB0aGlzLnZhcmlhYmxlMiwgdGhpcy5yYW5rX3ZhcmlhYmxlMik7XG5cbiAgICB0aGlzLnggPSBkMy5zY2FsZUxpbmVhcigpXG4gICAgICAucmFuZ2UoWzAsIHdpZHRoXSlcbiAgICAgIC5uaWNlKCk7XG4gICAgdGhpcy55ID0gZDMuc2NhbGVMaW5lYXIoKVxuICAgICAgLnJhbmdlKFtoZWlnaHQsIDBdKVxuICAgICAgLm5pY2UoKTtcbiAgICB0aGlzLnhBeGlzID0gZDMuYXhpc0JvdHRvbSh0aGlzLngpLnRpY2tzKDEyKTtcbiAgICB0aGlzLnlBeGlzID0gZDMuYXhpc0xlZnQodGhpcy55KS50aWNrcygxMiAqIGhlaWdodCAvIHdpZHRoKTtcbiAgICB0aGlzLnhBeGlzMiA9IGQzLmF4aXNCb3R0b20odGhpcy54KS50aWNrcygxMik7XG4gICAgdGhpcy55QXhpczIgPSBkMy5heGlzTGVmdCh0aGlzLnkpLnRpY2tzKDEyICogaGVpZ2h0IC8gd2lkdGgpO1xuXG4gICAgdGhpcy5icnVzaCA9IGQzLmJydXNoKClcbiAgICAgIC5leHRlbnQoW1swLCAwXSwgW3dpZHRoLCBoZWlnaHRdXSlcbiAgICAgIC5vbignYnJ1c2ggZW5kJywgdGhpcy5icnVzaGVkKTtcblxuICAgIHRoaXMueEludmVyc2VkID0gZmFsc2U7XG4gICAgdGhpcy55SW52ZXJzZWQgPSBmYWxzZTtcbiAgICB0aGlzLnJlZl92YWx1ZTEgPSB0aGlzLmRhdGEuZmluZChcbiAgICAgIGQgPT4gZC5pZCA9PT0gYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbilbdGhpcy52YXJpYWJsZTFdO1xuICAgIHRoaXMucmVmX3ZhbHVlMiA9IHRoaXMuZGF0YS5maW5kKFxuICAgICAgZCA9PiBkLmlkID09PSBhcHAuY3VycmVudF9jb25maWcubXlfcmVnaW9uKVt0aGlzLnZhcmlhYmxlMl07XG5cbiAgICB0aGlzLnBsb3QgPSBzdmdfY29udGFpbmVyLmFwcGVuZCgnZycpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke1ttYXJnaW4ubGVmdCwgbWFyZ2luLnRvcF19KWApO1xuXG4gICAgdGhpcy5wbG90LmFwcGVuZCgnZGVmcycpXG4gICAgICAuYXBwZW5kKCdzdmc6Y2xpcFBhdGgnKVxuICAgICAgLmF0dHIoJ2lkJywgJ2NsaXAnKVxuICAgICAgLmFwcGVuZCgnc3ZnOnJlY3QnKVxuICAgICAgLmF0dHJzKHtcbiAgICAgICAgd2lkdGgsXG4gICAgICAgIGhlaWdodCxcbiAgICAgICAgeDogMCxcbiAgICAgICAgeTogMCxcbiAgICAgIH0pO1xuXG4gICAgdGhpcy5zY2F0dGVyID0gdGhpcy5wbG90LmFwcGVuZCgnZycpXG4gICAgICAuYXR0cignaWQnLCAnc2NhdHRlcnBsb3QnKVxuICAgICAgLmF0dHIoJ2NsaXAtcGF0aCcsICd1cmwoI2NsaXApJyk7XG5cbiAgICB0aGlzLnNjYXR0ZXIuYXBwZW5kKCdnJylcbiAgICAgIC5hdHRyKCdjbGFzcycsICdicnVzaCcpXG4gICAgICAuY2FsbCh0aGlzLmJydXNoKTtcblxuICAgIHRoaXMubWFrZUdyaWQoKTtcblxuICAgIGNvbnN0IGdyb3VwZV9saW5lX21lYW4gPSB0aGlzLnBsb3QuYXBwZW5kKCdnJylcbiAgICAgIC5hdHRyKCdjbGlwLXBhdGgnLCAndXJsKCNjbGlwKScpXG4gICAgICAuYXR0cignY2xhc3MnLCAnbWVhbicpO1xuICAgIGdyb3VwZV9saW5lX21lYW4uYXBwZW5kKCdsaW5lJylcbiAgICAgIC5hdHRyKCdjbGlwLXBhdGgnLCAndXJsKCNjbGlwKScpXG4gICAgICAuYXR0cnMoe1xuICAgICAgICBpZDogJ21lYW5feCcsXG4gICAgICAgIHgxOiB0aGlzLngodGhpcy5tZWFuX3ZhcmlhYmxlMSksXG4gICAgICAgIHgyOiB0aGlzLngodGhpcy5tZWFuX3ZhcmlhYmxlMSksXG4gICAgICAgIHkxOiAwLFxuICAgICAgICB5Mjogd2lkdGgsXG4gICAgICAgICdzdHJva2UtZGFzaGFycmF5JzogJzEwLCA1JyxcbiAgICAgICAgJ3N0cm9rZS13aWR0aCc6ICcycHgnLFxuICAgICAgfSlcbiAgICAgIC5zdHlsZSgnc3Ryb2tlJywgJ3JlZCcpO1xuICAgIGdyb3VwZV9saW5lX21lYW4uYXBwZW5kKCdsaW5lJylcbiAgICAgIC5zdHlsZSgnc3Ryb2tlJywgJ3JlZCcpXG4gICAgICAuYXR0cnMoe1xuICAgICAgICBpZDogJ21lYW5feScsXG4gICAgICAgIHgxOiAwLFxuICAgICAgICB4Mjogd2lkdGgsXG4gICAgICAgIHkxOiB0aGlzLnkodGhpcy5tZWFuX3ZhcmlhYmxlMiksXG4gICAgICAgIHkyOiB0aGlzLnkodGhpcy5tZWFuX3ZhcmlhYmxlMiksXG4gICAgICAgICdjbGlwLXBhdGgnOiAndXJsKCNjbGlwKScsXG4gICAgICAgICdzdHJva2UtZGFzaGFycmF5JzogJzEwLCA1JyxcbiAgICAgICAgJ3N0cm9rZS13aWR0aCc6ICcycHgnLFxuICAgICAgfSk7XG5cbiAgICB0aGlzLnBsb3QuYXBwZW5kKCdnJylcbiAgICAgIC5hdHRycyh7XG4gICAgICAgIGNsYXNzOiAneCBheGlzJywgaWQ6ICdheGlzLS14JywgdHJhbnNmb3JtOiBgdHJhbnNsYXRlKDAsICR7aGVpZ2h0fSlgLFxuICAgICAgfSlcbiAgICAgIC5jYWxsKHRoaXMueEF4aXMpO1xuXG4gICAgdGhpcy5wbG90LmFwcGVuZCgnZycpXG4gICAgICAuYXR0cnMoeyBjbGFzczogJ3kgYXhpcycsIGlkOiAnYXhpcy0teScsIG9wYWNpdHk6IDAuOSB9KVxuICAgICAgLmNhbGwodGhpcy55QXhpcyk7XG5cbiAgICAvLyBQcmVwYXJlIHRoZSB0b29sdGlwIGRpc3BsYXllZCBvbiBtb3VzZW92ZXI6XG4gICAgdGhpcy50b29sdGlwID0gcHJlcGFyZVRvb2x0aXAyKGQzLnNlbGVjdChzdmdfYmFyLm5vZGUoKS5wYXJlbnRFbGVtZW50KSwgbnVsbCk7XG5cbiAgICB0aGlzLnByZXBhcmVUaXRsZUF4aXMoKTtcblxuICAgIHN2Z19jb250YWluZXIuYXBwZW5kKCdpbWFnZScpXG4gICAgICAuYXR0cnMoe1xuICAgICAgICB4OiBtYXJnaW4ubGVmdCArIHdpZHRoIC8gMiAtIDIwIC0gc3ZnX2NvbnRhaW5lci5zZWxlY3QoJyN0aXRsZS1heGlzLXgnKS5ub2RlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggLyAyLFxuICAgICAgICB5OiBtYXJnaW4udG9wICsgaGVpZ2h0ICsgbWFyZ2luLmJvdHRvbSAvIDIgKyA1LFxuICAgICAgICB3aWR0aDogMTUsXG4gICAgICAgIGhlaWdodDogMTUsXG4gICAgICAgICd4bGluazpocmVmJzogJ2ltZy9yZXZlcnNlX3BsdXMucG5nJyxcbiAgICAgICAgaWQ6ICdpbWdfcmV2ZXJzZV94JyxcbiAgICAgIH0pXG4gICAgICAub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICB0aGlzLnhJbnZlcnNlZCA9ICF0aGlzLnhJbnZlcnNlZDtcbiAgICAgICAgLy8gZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iRnQ7IGkrKykge1xuICAgICAgICAvLyAgIHNlbGYuZGF0YVtpXVtzZWxmLnJhbmtfdmFyaWFibGUxXSA9IDEwMCAtIHNlbGYuZGF0YVtpXVtzZWxmLnJhbmtfdmFyaWFibGUxXTtcbiAgICAgICAgLy8gfVxuICAgICAgICBzdmdfY29udGFpbmVyLnNlbGVjdCgnI3RpdGxlLWF4aXMteCcpLnN0eWxlKCdmaWxsJywgdGhpcy54SW52ZXJzZWQgPyAncmVkJyA6ICdibGFjaycpO1xuICAgICAgICBpZiAodGhpcy5sYXN0X21hcF9zZWxlY3Rpb24pIHtcbiAgICAgICAgICB0aGlzLm1hcF9lbGVtLmNhbGxCcnVzaCh0aGlzLmxhc3RfbWFwX3NlbGVjdGlvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICBzdmdfY29udGFpbmVyLmFwcGVuZCgnaW1hZ2UnKVxuICAgICAgLmF0dHJzKHtcbiAgICAgICAgeDogbWFyZ2luLmxlZnQgLyAyIC0gMjAsXG4gICAgICAgIHk6IG1hcmdpbi50b3AgKyAoaGVpZ2h0IC8gMikgKyBzdmdfY29udGFpbmVyLnNlbGVjdCgnI3RpdGxlLWF4aXMteScpLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgLyAyICsgNSxcbiAgICAgICAgd2lkdGg6IDE1LFxuICAgICAgICBoZWlnaHQ6IDE1LFxuICAgICAgICAneGxpbms6aHJlZic6ICdpbWcvcmV2ZXJzZV9wbHVzLnBuZycsXG4gICAgICAgIGlkOiAnaW1nX3JldmVyc2VfeScsXG4gICAgICB9KVxuICAgICAgLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgdGhpcy55SW52ZXJzZWQgPSAhdGhpcy55SW52ZXJzZWQ7XG4gICAgICAgIC8vIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5uYkZ0OyBpKyspIHtcbiAgICAgICAgLy8gICB0aGlzLmRhdGFbaV1bdGhpcy5yYW5rX3ZhcmlhYmxlMl0gPSAxMDAgLSB0aGlzLmRhdGFbaV1bdGhpcy5yYW5rX3ZhcmlhYmxlMl07XG4gICAgICAgIC8vIH1cbiAgICAgICAgc3ZnX2NvbnRhaW5lci5zZWxlY3QoJyN0aXRsZS1heGlzLXknKS5zdHlsZSgnZmlsbCcsIHRoaXMueUludmVyc2VkID8gJ3JlZCcgOiAnYmxhY2snKTtcbiAgICAgICAgaWYgKHRoaXMubGFzdF9tYXBfc2VsZWN0aW9uKSB7XG4gICAgICAgICAgdGhpcy5tYXBfZWxlbS5jYWxsQnJ1c2godGhpcy5sYXN0X21hcF9zZWxlY3Rpb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgdGhpcy5jb21wbGV0dWRlID0gbmV3IENvbXBsZXR1ZGVTZWN0aW9uKCk7XG4gICAgdGhpcy5jb21wbGV0dWRlLnVwZGF0ZShcbiAgICAgIGNhbGNDb21wbGV0dWRlU3Vic2V0KGFwcCwgW3RoaXMudmFyaWFibGUxLCB0aGlzLnZhcmlhYmxlMl0sICdhcnJheScpLFxuICAgICAgY2FsY1BvcENvbXBsZXR1ZGVTdWJzZXQoYXBwLCBbdGhpcy52YXJpYWJsZTEsIHRoaXMudmFyaWFibGUyXSkpO1xuXG4gICAgLy8gRGVhY3RpdmF0ZSB0aGUgcmVjdCBicnVzaCBzZWxlY3Rpb24gb24gdGhlIG1hcFxuICAgIC8vIHdoaWxlIHRoZSB1c2VyIHByZXNzIHRoZSBDdHJsIGtleTpcbiAgICBkb2N1bWVudC5vbmtleWRvd24gPSAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudCAmJiBldmVudC5rZXkgPT09ICdDb250cm9sJykge1xuICAgICAgICBzdmdfbWFwLnNlbGVjdCgnLmJydXNoX21hcCcpXG4gICAgICAgICAgLnNlbGVjdEFsbCgnLnNlbGVjdGlvbiwgLm92ZXJsYXknKVxuICAgICAgICAgIC5zdHlsZSgnZGlzcGxheScsICdub25lJyk7XG4gICAgICB9XG4gICAgfTtcbiAgICAvLyBSZWFjdGl2YXRlIHRoZSByZWN0IGJydXNoIHNlbGVjdGlvbiBvbiB0aGUgbWFwXG4gICAgLy8gd2hlbiB0aGUgdXNlciBkb2Vzbid0IHByZXNzIHRoZSBDdHJsIGtleSBhbnltb3JlXG4gICAgZG9jdW1lbnQub25rZXl1cCA9IChldmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50ICYmIGV2ZW50LmtleSA9PT0gJ0NvbnRyb2wnKSB7XG4gICAgICAgIHN2Z19tYXAuc2VsZWN0KCcuYnJ1c2hfbWFwJylcbiAgICAgICAgICAuc2VsZWN0QWxsKCcuc2VsZWN0aW9uLCAub3ZlcmxheScpXG4gICAgICAgICAgLnN0eWxlKCdkaXNwbGF5JywgbnVsbCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IG1lbnVfc2VsZWN0aW9uID0gZDMuc2VsZWN0KHN2Z19iYXIubm9kZSgpLnBhcmVudEVsZW1lbnQpXG4gICAgICAuYXBwZW5kKCdkaXYnKVxuICAgICAgLmF0dHIoJ2lkJywgJ21lbnVfc2VsZWN0aW9uJylcbiAgICAgIC5zdHlsZXMoeyBwb3NpdGlvbjogJ3JlbGF0aXZlJywgJ3RleHQtYWxpZ24nOiAnY2VudGVyJyB9KTtcblxuICAgIGNvbnN0IGNoYXJ0X3R5cGUgPSBtZW51X3NlbGVjdGlvbi5hcHBlbmQoJ3AnKTtcblxuICAgIGNoYXJ0X3R5cGUuYXBwZW5kKCdzcGFuJylcbiAgICAgIC5hdHRycyh7XG4gICAgICAgIGlkOiAnaW5kX3Jhd192YWx1ZXMnLFxuICAgICAgICBjbGFzczogJ2Nob2ljZV9pbmQgYWN0aXZlJyxcbiAgICAgIH0pXG4gICAgICAudGV4dCgnVmFsZXVycyBicnV0ZXMnKTtcblxuICAgIGNoYXJ0X3R5cGUuYXBwZW5kKCdzcGFuJylcbiAgICAgIC5hdHRycyh7XG4gICAgICAgIGlkOiAnaW5kX3JhbmtzJyxcbiAgICAgICAgY2xhc3M6ICdjaG9pY2VfaW5kJyxcbiAgICAgIH0pXG4gICAgICAudGV4dCgnUmFuZ3Mgbm9ybWFsaXPDqXMnKTtcblxuICAgIG1lbnVfc2VsZWN0aW9uLmFwcGVuZCgncCcpXG4gICAgICAuYXR0cignaWQnLCAnc2VsZWN0aW9uX3N1YnRpdGxlJylcbiAgICAgIC5zdHlsZXMoeyBtYXJnaW46ICcxMHB4IDBweCAycHggMHB4JyB9KVxuICAgICAgLmh0bWwoJ1PDqWxlY3Rpb24gZGVzIHLDqWdpb25zIGF5YW50IGRlcyB2YWxldXJzLi4uJyk7XG5cbiAgICBtZW51X3NlbGVjdGlvbi5hcHBlbmQoJ2J1dHRvbicpXG4gICAgICAuYXR0cnMoeyBjbGFzczogJ2J1dHRvbl9ibHVlJywgaWQ6ICdidG5fYWJvdmVfbWVhbicgfSlcbiAgICAgIC50ZXh0KCdpbmbDqXJpZXVyZXMgw6AgbGEgbW95ZW5uZScpXG4gICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBtZW51X3NlbGVjdGlvbi5zZWxlY3RBbGwoJ2J1dHRvbicpLmF0dHIoJ2NsYXNzJywgJ2J1dHRvbl9ibHVlJyk7XG4gICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgncHJlc3NlZCcpO1xuICAgICAgICBzZWxmLnNlbGVjdEJlbG93TWVhbigpO1xuICAgICAgfSk7XG5cbiAgICBtZW51X3NlbGVjdGlvbi5hcHBlbmQoJ2J1dHRvbicpXG4gICAgICAuYXR0cnMoeyBjbGFzczogJ2J1dHRvbl9ibHVlJywgaWQ6ICdidG5fYWJvdmVfbXlfcmVnaW9uJyB9KVxuICAgICAgLnRleHQoJ2luZsOpcmlldXJzIMOgIG1hIHLDqWdpb24nKVxuICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbWVudV9zZWxlY3Rpb24uc2VsZWN0QWxsKCdidXR0b24nKS5hdHRyKCdjbGFzcycsICdidXR0b25fYmx1ZScpO1xuICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ3ByZXNzZWQnKTtcbiAgICAgICAgc2VsZi5zZWxlY3RCZWxvd015UmVnaW9uKCk7XG4gICAgICB9KTtcblxuICAgIG1lbnVfc2VsZWN0aW9uLmFwcGVuZCgnYnV0dG9uJylcbiAgICAgIC5hdHRycyh7IGNsYXNzOiAnYnV0dG9uX2JsdWUnLCBpZDogJ2J0bl9iZWxvd19tZWFuJyB9KVxuICAgICAgLnRleHQoJ3N1cMOpcmlldXJlcyDDoCBsYSBtb3llbm5lJylcbiAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG1lbnVfc2VsZWN0aW9uLnNlbGVjdEFsbCgnYnV0dG9uJykuYXR0cignY2xhc3MnLCAnYnV0dG9uX2JsdWUnKTtcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdwcmVzc2VkJyk7XG4gICAgICAgIHNlbGYuc2VsZWN0QWJvdmVNZWFuKCk7XG4gICAgICB9KTtcblxuICAgIG1lbnVfc2VsZWN0aW9uLmFwcGVuZCgnYnV0dG9uJylcbiAgICAgIC5hdHRycyh7IGNsYXNzOiAnYnV0dG9uX2JsdWUnLCBpZDogJ2J0bl9iZWxvd19teV9yZWdpb24nIH0pXG4gICAgICAudGV4dCgnc3Vww6lyaWV1cmVzIMOgIG1hIHLDqWdpb24nKVxuICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbWVudV9zZWxlY3Rpb24uc2VsZWN0QWxsKCdidXR0b24nKS5hdHRyKCdjbGFzcycsICdidXR0b25fYmx1ZScpO1xuICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ3ByZXNzZWQnKTtcbiAgICAgICAgc2VsZi5zZWxlY3RBYm92ZU15UmVnaW9uKCk7XG4gICAgICB9KTtcblxuXG4gICAgdGhpcy5iaW5kTWVudSgpO1xuICAgIC8vIHRoaXMudXBkYXRlKCk7XG4gICAgdGhpcy5tYWtlVGFibGVTdGF0KCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIHRoZSB1bmRlcmx5aW5nIGdyZXkgZ3JpZFxuICAgKi9cbiAgbWFrZUdyaWQoKSB7XG4gICAgdGhpcy5wbG90Lmluc2VydCgnZycsICcjc2NhdHRlcnBsb3QnKVxuICAgICAgLmF0dHJzKHtcbiAgICAgICAgY2xhc3M6ICdncmlkIGdyaWQteCcsIHRyYW5zZm9ybTogYHRyYW5zbGF0ZSgwLCAke2hlaWdodH0pYCxcbiAgICAgIH0pXG4gICAgICAuY2FsbCh0aGlzLnhBeGlzMlxuICAgICAgICAudGlja1NpemUoLWhlaWdodClcbiAgICAgICAgLnRpY2tGb3JtYXQoJycpKTtcbiAgICB0aGlzLnBsb3QuaW5zZXJ0KCdnJywgJyNzY2F0dGVycGxvdCcpXG4gICAgICAuYXR0cignY2xhc3MnLCAnZ3JpZCBncmlkLXknKVxuICAgICAgLmNhbGwodGhpcy55QXhpczJcbiAgICAgICAgLnRpY2tTaXplKC13aWR0aClcbiAgICAgICAgLnRpY2tGb3JtYXQoJycpKTtcbiAgfVxuXG5cbiAgdXBkYXRlQXhpc0dyaWQoKSB7XG4gICAgdGhpcy5wbG90LnNlbGVjdCgnLmdyaWQteCcpXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuZHVyYXRpb24oMTI1KVxuICAgICAgLmNhbGwodGhpcy54QXhpczIudGlja1NpemUoLWhlaWdodCkudGlja0Zvcm1hdCgnJykpO1xuICAgIHRoaXMucGxvdC5zZWxlY3QoJy5ncmlkLXknKVxuICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgLmR1cmF0aW9uKDEyNSlcbiAgICAgIC5jYWxsKHRoaXMueUF4aXMyLnRpY2tTaXplKC13aWR0aCkudGlja0Zvcm1hdCgnJykpO1xuICAgIHRoaXMucGxvdC5zZWxlY3QoJyNheGlzLS14JylcbiAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgIC5kdXJhdGlvbigxMjUpXG4gICAgICAuY2FsbCh0aGlzLnhBeGlzKTtcbiAgICB0aGlzLnBsb3Quc2VsZWN0KCcjYXhpcy0teScpXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuZHVyYXRpb24oMTI1KVxuICAgICAgLmNhbGwodGhpcy55QXhpcyk7XG4gICAgdGhpcy5wbG90LnNlbGVjdEFsbCgnLmdyaWQnKVxuICAgICAgLnNlbGVjdEFsbCgnbGluZScpXG4gICAgICAuYXR0cignc3Ryb2tlJywgJ2xpZ2h0Z3JheScpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgdGl0bGUgb2YgdGhlIFggYW5kIFkgYXhpcyB3aXRoIHRoZSBhc3NvY2lhdGVkIGNvbnRleHQgbWVudVxuICAgKiBkaXNwbGF5ZWQgd2hlbiB0aGV5IGFyZSBjbGlja2VkIGFuZCBhbGxvd2luZyB0byBzZWxlY3QgYW4gb3RoZXIgdmFyaWFibGVcbiAgICogZm9yIHRoaXMgYXhpcy5cbiAgICovXG4gIHByZXBhcmVUaXRsZUF4aXMoKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5tZW51WCA9IG5ldyBDb250ZXh0TWVudSgpO1xuICAgIHRoaXMubWVudVkgPSBuZXcgQ29udGV4dE1lbnUoKTtcbiAgICB0aGlzLml0ZW1zWCA9IGFwcC5jdXJyZW50X2NvbmZpZy5yYXRpby5maWx0ZXIoZWxlbSA9PiBlbGVtICE9PSB0aGlzLnZhcmlhYmxlMilcbiAgICAgIC5tYXAoZWxlbSA9PiAoe1xuICAgICAgICBuYW1lOiBlbGVtLFxuICAgICAgICBhY3Rpb246ICgpID0+IHRoaXMuY2hhbmdlVmFyaWFibGVYKGVsZW0pLFxuICAgICAgfSkpO1xuICAgIHRoaXMuaXRlbXNZID0gYXBwLmN1cnJlbnRfY29uZmlnLnJhdGlvLmZpbHRlcihlbGVtID0+IGVsZW0gIT09IHRoaXMudmFyaWFibGUxKVxuICAgICAgLm1hcChlbGVtID0+ICh7XG4gICAgICAgIG5hbWU6IGVsZW0sXG4gICAgICAgIGFjdGlvbjogKCkgPT4gdGhpcy5jaGFuZ2VWYXJpYWJsZVkoZWxlbSksXG4gICAgICB9KSk7XG5cbiAgICBzdmdfY29udGFpbmVyLmFwcGVuZCgndGV4dCcpXG4gICAgICAuYXR0cnMoe1xuICAgICAgICBpZDogJ3RpdGxlLWF4aXMteCcsXG4gICAgICAgIGNsYXNzOiAndGl0bGUtYXhpcycsXG4gICAgICAgIHg6IG1hcmdpbi5sZWZ0ICsgd2lkdGggLyAyLFxuICAgICAgICB5OiBtYXJnaW4udG9wICsgaGVpZ2h0ICsgbWFyZ2luLmJvdHRvbSAvIDIgKyAxNSxcbiAgICAgIH0pXG4gICAgICAuaHRtbCh0aGlzLnZhcmlhYmxlMSArICcgJiN4MjVCRTsnKVxuICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3QgYmJveCA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGlmIChzZWxmLm1lbnVZLmRpc3BsYXllZCkge1xuICAgICAgICAgIHNlbGYubWVudVkuaGlkZU1lbnUoKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLm1lbnVYLnNob3dNZW51KGQzLmV2ZW50LCBkb2N1bWVudC5ib2R5LCBzZWxmLml0ZW1zWCwgW2Jib3gubGVmdCAtIDIwLCBiYm94LnRvcCArIDIwXSk7XG4gICAgICB9KTtcblxuICAgIHN2Z19jb250YWluZXIuYXBwZW5kKCd0ZXh0JylcbiAgICAgIC5hdHRycyh7XG4gICAgICAgIGlkOiAndGl0bGUtYXhpcy15JyxcbiAgICAgICAgY2xhc3M6ICd0aXRsZS1heGlzJyxcbiAgICAgICAgeDogbWFyZ2luLmxlZnQgLyAyLFxuICAgICAgICB5OiBtYXJnaW4udG9wICsgKGhlaWdodCAvIDIpIC0gMTAsXG4gICAgICAgIHRyYW5zZm9ybTogYHJvdGF0ZSgtOTAsICR7bWFyZ2luLmxlZnQgLyAyfSwgJHttYXJnaW4udG9wICsgKGhlaWdodCAvIDIpfSlgLFxuICAgICAgfSlcbiAgICAgIC5odG1sKHRoaXMudmFyaWFibGUyICsgJyAmI3gyNUJFOycpXG4gICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBiYm94ID0gdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgaWYgKHNlbGYubWVudVguZGlzcGxheWVkKSB7XG4gICAgICAgICAgc2VsZi5tZW51WC5oaWRlTWVudSgpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYubWVudVkuc2hvd01lbnUoZDMuZXZlbnQsIGRvY3VtZW50LmJvZHksIHNlbGYuaXRlbXNZLCBbYmJveC5sZWZ0LCBiYm94LmJvdHRvbSArIDEwXSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZUxpZ2h0KCkge1xuICAgIGNvbnN0IGRlZmF1bHRfY29sb3IgPSAnZ3JheSc7XG4gICAgdGhpcy5zY2F0dGVyLnNlbGVjdEFsbCgnLmRvdCcpXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuZHVyYXRpb24oMTI1KVxuICAgICAgLnN0eWxlcyhkID0+ICh7XG4gICAgICAgIGZpbGw6IGFwcC5jb2xvcnNbZC5pZF0gfHwgZGVmYXVsdF9jb2xvcixcbiAgICAgICAgc3Ryb2tlOiBhcHAuY29sb3JzW2QuaWRdID8gJ3JnYig5NywgOTcsIDk3KScgOiAncmdiKDIwNiwgMjA2LCAyMDYpJyxcbiAgICAgIH0pKTtcbiAgfVxuXG4gIHVwZGF0ZSgpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICBjb25zdCBkYXRhID0gc2VsZi5kYXRhO1xuICAgIGNvbnN0IGRvdHMgPSB0aGlzLnNjYXR0ZXIuc2VsZWN0QWxsKCcuZG90JylcbiAgICAgIC5kYXRhKGRhdGEsIGQgPT4gZC5pZCk7XG5cbiAgICBpZiAodGhpcy50eXBlID09PSAncmFuaycpIHtcbiAgICAgIGNvbnN0IHJhbmtfdmFyaWFibGUxID0gdGhpcy5yYW5rX3ZhcmlhYmxlMTtcbiAgICAgIGNvbnN0IHJhbmtfdmFyaWFibGUyID0gdGhpcy5yYW5rX3ZhcmlhYmxlMjtcbiAgICAgIGNvbnN0IHJhbmdlX3ggPSB0aGlzLnhJbnZlcnNlZFxuICAgICAgICA/IGQzLmV4dGVudCh0aGlzLmRhdGEsIGQgPT4gZFtyYW5rX3ZhcmlhYmxlMV0pLnJldmVyc2UoKVxuICAgICAgICA6IGQzLmV4dGVudCh0aGlzLmRhdGEsIGQgPT4gZFtyYW5rX3ZhcmlhYmxlMV0pO1xuICAgICAgY29uc3QgcmFuZ2VfeSA9IHRoaXMueUludmVyc2VkXG4gICAgICAgID8gZDMuZXh0ZW50KHRoaXMuZGF0YSwgZCA9PiBkW3JhbmtfdmFyaWFibGUyXSkucmV2ZXJzZSgpXG4gICAgICAgIDogZDMuZXh0ZW50KHRoaXMuZGF0YSwgZCA9PiBkW3JhbmtfdmFyaWFibGUyXSk7XG4gICAgICBjb25zdCBzZXJpZV94ID0gdGhpcy5kYXRhLm1hcChkID0+IGRbdGhpcy52YXJpYWJsZTFdKTtcbiAgICAgIGNvbnN0IHNlcmllX3kgPSB0aGlzLmRhdGEubWFwKGQgPT4gZFt0aGlzLnZhcmlhYmxlMl0pO1xuICAgICAgdGhpcy54LmRvbWFpbihyYW5nZV94KS5uaWNlKCk7XG4gICAgICB0aGlzLnkuZG9tYWluKHJhbmdlX3kpLm5pY2UoKTtcbiAgICAgIHRoaXMubWVhbl92YXJpYWJsZTEgPSBfZ2V0UFIoXG4gICAgICAgIGdldE1lYW4oc2VyaWVfeCksIHNlcmllX3gpO1xuICAgICAgdGhpcy5tZWFuX3ZhcmlhYmxlMiA9IF9nZXRQUihcbiAgICAgICAgZ2V0TWVhbihzZXJpZV95KSwgc2VyaWVfeSk7XG5cbiAgICAgIGNvbnN0IHggPSB0aGlzLng7XG4gICAgICBjb25zdCB5ID0gdGhpcy55O1xuICAgICAgY29uc3QgZGVmYXVsdF9jb2xvciA9ICdncmF5JztcblxuICAgICAgLy8gY29uc3QgZG90cyA9IHRoaXMuc2NhdHRlci5zZWxlY3RBbGwoJy5kb3QnKVxuICAgICAgLy8gICAuZGF0YShkYXRhLCBkID0+IGQuaWQpO1xuXG4gICAgICBkb3RzXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKDEyNSlcbiAgICAgICAgLmF0dHJzKGQgPT4gKHtcbiAgICAgICAgICByOiA1LFxuICAgICAgICAgIGN4OiB4KGRbcmFua192YXJpYWJsZTFdKSxcbiAgICAgICAgICBjeTogeShkW3JhbmtfdmFyaWFibGUyXSksXG4gICAgICAgIH0pKVxuICAgICAgICAuc3R5bGVzKGQgPT4gKHtcbiAgICAgICAgICBmaWxsOiBhcHAuY29sb3JzW2QuaWRdIHx8IGRlZmF1bHRfY29sb3IsXG4gICAgICAgICAgc3Ryb2tlOiBhcHAuY29sb3JzW2QuaWRdID8gJ3JnYig5NywgOTcsIDk3KScgOiAncmdiKDIwNiwgMjA2LCAyMDYpJyxcbiAgICAgICAgfSkpXG4gICAgICAgIC5vbignZW5kJywgKCkgPT4ge1xuICAgICAgICAgIHNlbGYuYmluZFRvb2x0aXBzKHRydWUpO1xuICAgICAgICB9KTtcblxuICAgICAgZG90cy5lbnRlcigpXG4gICAgICAgIC5pbnNlcnQoJ2NpcmNsZScpXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKDEyNSlcbiAgICAgICAgLnN0eWxlcyhkID0+ICh7XG4gICAgICAgICAgZmlsbDogYXBwLmNvbG9yc1tkLmlkXSB8fCBkZWZhdWx0X2NvbG9yLFxuICAgICAgICAgIHN0cm9rZTogYXBwLmNvbG9yc1tkLmlkXSA/ICdyZ2IoOTcsIDk3LCA5NyknIDogJ3JnYigyMDYsIDIwNiwgMjA2KScsXG4gICAgICAgIH0pKVxuICAgICAgICAuYXR0cnMoZCA9PiAoe1xuICAgICAgICAgIHI6IDUsXG4gICAgICAgICAgY3g6IHgoZFtyYW5rX3ZhcmlhYmxlMV0pLFxuICAgICAgICAgIGN5OiB5KGRbcmFua192YXJpYWJsZTJdKSxcbiAgICAgICAgICBjbGFzczogJ2RvdCcsXG4gICAgICAgIH0pKVxuICAgICAgICAub24oJ2VuZCcsICgpID0+IHtcbiAgICAgICAgICBzZWxmLmJpbmRUb29sdGlwcyh0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICBkb3RzLmV4aXQoKS50cmFuc2l0aW9uKCkuZHVyYXRpb24oMTI1KS5yZW1vdmUoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gJ3ZhbHVlJykge1xuICAgICAgY29uc3QgdmFyaWFibGUxID0gdGhpcy52YXJpYWJsZTE7XG4gICAgICBjb25zdCB2YXJpYWJsZTIgPSB0aGlzLnZhcmlhYmxlMjtcbiAgICAgIGNvbnN0IHNlcmllX3ggPSB0aGlzLmRhdGEubWFwKGQgPT4gZFt2YXJpYWJsZTFdKTtcbiAgICAgIGNvbnN0IHNlcmllX3kgPSB0aGlzLmRhdGEubWFwKGQgPT4gZFt2YXJpYWJsZTJdKTtcbiAgICAgIGNvbnN0IHJhbmdlX3ggPSB0aGlzLnhJbnZlcnNlZFxuICAgICAgICA/IGQzLmV4dGVudChzZXJpZV94KS5yZXZlcnNlKClcbiAgICAgICAgOiBkMy5leHRlbnQoc2VyaWVfeCk7XG4gICAgICBjb25zdCByYW5nZV95ID0gdGhpcy55SW52ZXJzZWRcbiAgICAgICAgPyBkMy5leHRlbnQoc2VyaWVfeSkucmV2ZXJzZSgpXG4gICAgICAgIDogZDMuZXh0ZW50KHNlcmllX3kpO1xuICAgICAgdGhpcy54LmRvbWFpbihyYW5nZV94KS5uaWNlKCk7XG4gICAgICB0aGlzLnkuZG9tYWluKHJhbmdlX3kpLm5pY2UoKTtcbiAgICAgIHRoaXMubWVhbl92YXJpYWJsZTEgPSBnZXRNZWFuKHNlcmllX3gpO1xuICAgICAgdGhpcy5tZWFuX3ZhcmlhYmxlMiA9IGdldE1lYW4oc2VyaWVfeSk7XG5cbiAgICAgIGNvbnN0IHggPSB0aGlzLng7XG4gICAgICBjb25zdCB5ID0gdGhpcy55O1xuICAgICAgY29uc3QgZGVmYXVsdF9jb2xvciA9ICdncmF5JztcblxuICAgICAgdGhpcy5wbG90LnNlbGVjdCgnI2F4aXMtLXgnKS50cmFuc2l0aW9uKCkuZHVyYXRpb24oMTI1KS5jYWxsKHRoaXMueEF4aXMpO1xuICAgICAgdGhpcy5wbG90LnNlbGVjdCgnI2F4aXMtLXknKS50cmFuc2l0aW9uKCkuZHVyYXRpb24oMTI1KS5jYWxsKHRoaXMueUF4aXMpO1xuXG4gICAgICAvLyBjb25zdCBkb3RzID0gdGhpcy5zY2F0dGVyLnNlbGVjdEFsbCgnLmRvdCcpXG4gICAgICAvLyAgIC5kYXRhKGRhdGEsIGQgPT4gZC5pZCk7XG5cbiAgICAgIGRvdHNcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oMTI1KVxuICAgICAgICAuYXR0cnMoZCA9PiAoe1xuICAgICAgICAgIHI6IDUsXG4gICAgICAgICAgY3g6IHgoZFt2YXJpYWJsZTFdKSxcbiAgICAgICAgICBjeTogeShkW3ZhcmlhYmxlMl0pLFxuICAgICAgICB9KSlcbiAgICAgICAgLnN0eWxlcyhkID0+ICh7XG4gICAgICAgICAgZmlsbDogYXBwLmNvbG9yc1tkLmlkXSB8fCBkZWZhdWx0X2NvbG9yLFxuICAgICAgICAgIHN0cm9rZTogYXBwLmNvbG9yc1tkLmlkXSA/ICdyZ2IoOTcsIDk3LCA5NyknIDogJ3JnYigyMDYsIDIwNiwgMjA2KScsXG4gICAgICAgIH0pKVxuICAgICAgICAub24oJ2VuZCcsICgpID0+IHtcbiAgICAgICAgICBzZWxmLmJpbmRUb29sdGlwcyhmYWxzZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICBkb3RzLmVudGVyKClcbiAgICAgICAgLmluc2VydCgnY2lyY2xlJylcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oMTI1KVxuICAgICAgICAuc3R5bGVzKGQgPT4gKHtcbiAgICAgICAgICBmaWxsOiBhcHAuY29sb3JzW2QuaWRdIHx8IGRlZmF1bHRfY29sb3IsXG4gICAgICAgICAgc3Ryb2tlOiBhcHAuY29sb3JzW2QuaWRdID8gJ3JnYig5NywgOTcsIDk3KScgOiAncmdiKDIwNiwgMjA2LCAyMDYpJyxcbiAgICAgICAgfSkpXG4gICAgICAgIC5hdHRycyhkID0+ICh7XG4gICAgICAgICAgcjogNSxcbiAgICAgICAgICBjeDogeChkW3ZhcmlhYmxlMV0pLFxuICAgICAgICAgIGN5OiB5KGRbdmFyaWFibGUyXSksXG4gICAgICAgICAgY2xhc3M6ICdkb3QnLFxuICAgICAgICB9KSlcbiAgICAgICAgLm9uKCdlbmQnLCAoKSA9PiB7XG4gICAgICAgICAgc2VsZi5iaW5kVG9vbHRpcHMoZmFsc2UpO1xuICAgICAgICB9KTtcblxuICAgICAgZG90cy5leGl0KCkudHJhbnNpdGlvbigpLmR1cmF0aW9uKDEyNSkucmVtb3ZlKCk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlTWVhblZhbHVlKCk7XG4gICAgdGhpcy51cGRhdGVBeGlzR3JpZCgpO1xuICB9XG5cbiAgdXBkYXRlQ29tcGxldHVkZSgpIHtcbiAgICB0aGlzLmNvbXBsZXR1ZGUudXBkYXRlKFxuICAgICAgY2FsY0NvbXBsZXR1ZGVTdWJzZXQoYXBwLCBbdGhpcy52YXJpYWJsZTEsIHRoaXMudmFyaWFibGUyXSwgJ2FycmF5JyksXG4gICAgICBjYWxjUG9wQ29tcGxldHVkZVN1YnNldChhcHAsIFt0aGlzLnZhcmlhYmxlMSwgdGhpcy52YXJpYWJsZTJdKSk7XG4gIH1cblxuICB1cGRhdGVNYXBSZWdpbygpIHtcbiAgICBpZiAoIXRoaXMubWFwX2VsZW0pIHJldHVybjtcbiAgICB0aGlzLm1hcF9lbGVtLnRhcmdldF9sYXllci5zZWxlY3RBbGwoJ3BhdGgnKVxuICAgICAgLmF0dHIoJ2ZpbGwnLCBkID0+ICh0aGlzLmN1cnJlbnRfaWRzLmluZGV4T2YoZC5pZCkgPiAtMVxuICAgICAgICA/IChhcHAuY29sb3JzW2QuaWRdIHx8IGNvbG9yX2NvdW50cmllcylcbiAgICAgICAgOiBjb2xvcl9kaXNhYmxlZCkpO1xuICB9XG5cbiAgaGFuZGxlX2JydXNoX21hcChldmVudCkge1xuICAgIGlmICghZXZlbnQgfHwgIWV2ZW50LnNlbGVjdGlvbikge1xuICAgICAgdGhpcy5sYXN0X21hcF9zZWxlY3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMubWFwX2VsZW0udG9vbHRpcC5zdHlsZSgnZGlzcGxheScsICdub25lJyk7XG4gICAgc3ZnX2NvbnRhaW5lci5zZWxlY3QoJy5icnVzaCcpLmNhbGwodGhpcy5icnVzaC5tb3ZlLCBudWxsKTtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICBjb25zdCBbdG9wbGVmdCwgYm90dG9tcmlnaHRdID0gZXZlbnQuc2VsZWN0aW9uO1xuICAgIHRoaXMubGFzdF9tYXBfc2VsZWN0aW9uID0gW3RvcGxlZnQsIGJvdHRvbXJpZ2h0XTtcbiAgICBjb25zdCByZWN0ID0gbmV3IFJlY3QodG9wbGVmdCwgYm90dG9tcmlnaHQpO1xuICAgIGFwcC5jb2xvcnMgPSB7fTtcbiAgICBzZWxmLm1hcF9lbGVtLnRhcmdldF9sYXllci5zZWxlY3RBbGwoJ3BhdGgnKVxuICAgICAgLmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICBjb25zdCBpZCA9IGQuaWQ7XG4gICAgICAgIGlmIChpZCA9PT0gYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbikge1xuICAgICAgICAgIGFwcC5jb2xvcnNbaWRdID0gY29sb3JfaGlnaGxpZ2h0O1xuICAgICAgICAgIHJldHVybiBjb2xvcl9oaWdobGlnaHQ7XG4gICAgICAgIH0gZWxzZSBpZiAoc2VsZi5jdXJyZW50X2lkcy5pbmRleE9mKGlkKSA8IDApIHtcbiAgICAgICAgICByZXR1cm4gY29sb3JfZGlzYWJsZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9wdHMpIHtcbiAgICAgICAgICB0aGlzLl9wdHMgPSBzdmdQYXRoVG9Db29yZHModGhpcy5nZXRBdHRyaWJ1dGUoJ2QnKSwgYXBwLnR5cGVfcGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHRzID0gdGhpcy5fcHRzO1xuICAgICAgICBmb3IgKGxldCBpeCA9IDAsIG5iX3B0cyA9IHB0cy5sZW5ndGg7IGl4IDwgbmJfcHRzOyBpeCsrKSB7XG4gICAgICAgICAgaWYgKHJlY3QuY29udGFpbnMocHRzW2l4XSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlMSA9IGQucHJvcGVydGllc1tzZWxmLnZhcmlhYmxlMV07XG4gICAgICAgICAgICBjb25zdCB2YWx1ZTIgPSBkLnByb3BlcnRpZXNbc2VsZi52YXJpYWJsZTJdO1xuICAgICAgICAgICAgY29uc3QgY29sb3IgPSBjb21wMihcbiAgICAgICAgICAgICAgdmFsdWUxLCB2YWx1ZTIsXG4gICAgICAgICAgICAgIHNlbGYucmVmX3ZhbHVlMSwgc2VsZi5yZWZfdmFsdWUyLFxuICAgICAgICAgICAgICBzZWxmLnhJbnZlcnNlZCwgc2VsZi55SW52ZXJzZWQpO1xuICAgICAgICAgICAgYXBwLmNvbG9yc1tpZF0gPSBjb2xvcjtcbiAgICAgICAgICAgIHJldHVybiBjb2xvcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbG9yX2NvdW50cmllcztcbiAgICAgIH0pO1xuICAgIHNlbGYudXBkYXRlTGlnaHQoKTtcbiAgfVxuXG4gIGJpbmRUb29sdGlwcyh3aXRoX3JhbmspIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICB0aGlzLnNjYXR0ZXIuc2VsZWN0QWxsKCcuZG90JylcbiAgICAgIC5vbignbW91c2VvdmVyLnRvb2x0aXAnLCAoKSA9PiB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0KTtcbiAgICAgICAgc2VsZi50b29sdGlwLnN0eWxlKCdkaXNwbGF5JywgbnVsbCk7XG4gICAgICB9KVxuICAgICAgLm9uKCdtb3VzZW1vdmUudG9vbHRpcCcsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0KTtcbiAgICAgICAgc2VsZi50b29sdGlwLnNlbGVjdCgnLnRpdGxlJylcbiAgICAgICAgICAuaHRtbChbXG4gICAgICAgICAgICAnPGI+JywgZC5uYW1lLCAnICgnLCBkLmlkLCAnKScsICc8L2I+J10uam9pbignJykpO1xuICAgICAgICBsZXQgeW9mZnNldDtcbiAgICAgICAgaWYgKHdpdGhfcmFuaykge1xuICAgICAgICAgIHNlbGYudG9vbHRpcC5zZWxlY3QoJy5jb250ZW50JylcbiAgICAgICAgICAgIC5odG1sKFtcbiAgICAgICAgICAgICAgYCR7c2VsZi52YXJpYWJsZTF9IChyYW5nKSA6ICR7TWF0aC5yb3VuZChkW3NlbGYucmFua192YXJpYWJsZTFdICogMTApIC8gMTB9LzEwMGAsXG4gICAgICAgICAgICAgIGAke3NlbGYudmFyaWFibGUxfSAodmFsZXVyKSA6ICR7TWF0aC5yb3VuZChkW3NlbGYudmFyaWFibGUxXSAqIDEwKSAvIDEwfSAke3NlbGYudW5pdDF9YCxcbiAgICAgICAgICAgICAgYCR7c2VsZi52YXJpYWJsZTJ9IChyYW5nKSA6ICR7TWF0aC5yb3VuZChkW3NlbGYucmFua192YXJpYWJsZTJdICogMTApIC8gMTB9LzEwMGAsXG4gICAgICAgICAgICAgIGAke3NlbGYudmFyaWFibGUyfSAodmFsZXVyKSA6ICR7TWF0aC5yb3VuZChkW3NlbGYudmFyaWFibGUyXSAqIDEwKSAvIDEwfSAke3NlbGYudW5pdDJ9YCxcbiAgICAgICAgICAgIF0uam9pbignPGJyPicpKTtcbiAgICAgICAgICB5b2Zmc2V0ID0gMTIwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYudG9vbHRpcC5zZWxlY3QoJy5jb250ZW50JylcbiAgICAgICAgICAgIC5odG1sKFtcbiAgICAgICAgICAgICAgYCR7c2VsZi52YXJpYWJsZTF9ICh2YWxldXIpIDogJHtNYXRoLnJvdW5kKGRbc2VsZi52YXJpYWJsZTFdICogMTApIC8gMTB9ICR7c2VsZi51bml0MX1gLFxuICAgICAgICAgICAgICBgJHtzZWxmLnZhcmlhYmxlMn0gKHZhbGV1cikgOiAke01hdGgucm91bmQoZFtzZWxmLnZhcmlhYmxlMl0gKiAxMCkgLyAxMH0gJHtzZWxmLnVuaXQyfWAsXG4gICAgICAgICAgICBdLmpvaW4oJzxicj4nKSk7XG4gICAgICAgICAgeW9mZnNldCA9IDg1O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGIgPSBzZWxmLnRvb2x0aXAubm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBzZWxmLnRvb2x0aXBcbiAgICAgICAgICAuc3R5bGVzKHtcbiAgICAgICAgICAgIGRpc3BsYXk6IG51bGwsXG4gICAgICAgICAgICBsZWZ0OiBgJHtkMy5ldmVudC5wYWdlWCAtIDV9cHhgLFxuICAgICAgICAgICAgdG9wOiBgJHtkMy5ldmVudC5wYWdlWSAtIHlvZmZzZXR9cHhgIH0pO1xuICAgICAgfSlcbiAgICAgIC5vbignbW91c2VvdXQudG9vbHRpcCcsICgpID0+IHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHQpO1xuICAgICAgICB0ID0gc2V0VGltZW91dCgoKSA9PiB7IHRoaXMudG9vbHRpcC5zdHlsZSgnZGlzcGxheScsICdub25lJyk7IH0sIDI1MCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIGhhbmRsZUNsaWNrTWFwKGQsIHBhcmVudCkge1xuICAgIGNvbnN0IGlkID0gZC5pZDtcbiAgICBpZiAodGhpcy5jdXJyZW50X2lkcy5pbmRleE9mKGlkKSA8IDAgfHwgaWQgPT09IGFwcC5jdXJyZW50X2NvbmZpZy5teV9yZWdpb24pIHJldHVybjtcbiAgICBpZiAoYXBwLmNvbG9yc1tpZF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gQ2hhbmdlIGl0cyBjb2xvciBpbiB0aGUgZ2xvYmFsIGNvbG9ycyBvYmplY3Q6XG4gICAgICBhcHAuY29sb3JzW2lkXSA9IHVuZGVmaW5lZDtcbiAgICAgIC8vIENoYW5nZSB0aGUgY29sb3Igb24gdGhlIG1hcDpcbiAgICAgIGQzLnNlbGVjdChwYXJlbnQpLmF0dHIoJ2ZpbGwnLCBjb2xvcl9jb3VudHJpZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB2YWx1ZTEgPSBkLnByb3BlcnRpZXNbdGhpcy52YXJpYWJsZTFdO1xuICAgICAgY29uc3QgdmFsdWUyID0gZC5wcm9wZXJ0aWVzW3RoaXMudmFyaWFibGUyXTtcbiAgICAgIGNvbnN0IGNvbG9yID0gY29tcDIoXG4gICAgICAgIHZhbHVlMSwgdmFsdWUyLFxuICAgICAgICB0aGlzLnJlZl92YWx1ZTEsIHRoaXMucmVmX3ZhbHVlMixcbiAgICAgICAgdGhpcy54SW52ZXJzZWQsIHRoaXMueUludmVyc2VkKTtcbiAgICAgIGFwcC5jb2xvcnNbaWRdID0gY29sb3I7XG4gICAgICAvLyBDaGFuZ2UgdGhlIGNvbG9yIG9uIHRoZSBtYXA6XG4gICAgICBkMy5zZWxlY3QocGFyZW50KS5hdHRyKCdmaWxsJywgY29sb3IpO1xuICAgICAgLy8gQWRkIHRoZSBjbGlja2VkIGZlYXR1cmUgb24gdGhlIGNvbG9yZWQgc2VsZWN0aW9uIG9uIHRoZSBjaGFydDpcbiAgICB9XG4gICAgdGhpcy51cGRhdGVMaWdodCgpO1xuICB9XG5cbiAgdXBkYXRlTWVhblZhbHVlKCkge1xuICAgIGlmICh0aGlzLnR5cGUgPT09ICd2YWx1ZScpIHtcbiAgICAgIHRoaXMubWVhbl92YXJpYWJsZTEgPSBnZXRNZWFuKHRoaXMuZGF0YS5tYXAoZCA9PiBkW3RoaXMudmFyaWFibGUxXSkpO1xuICAgICAgdGhpcy5tZWFuX3ZhcmlhYmxlMiA9IGdldE1lYW4odGhpcy5kYXRhLm1hcChkID0+IGRbdGhpcy52YXJpYWJsZTJdKSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT09ICdyYW5rJykge1xuICAgICAgdGhpcy5tZWFuX3ZhcmlhYmxlMSA9IF9nZXRQUihcbiAgICAgICAgZ2V0TWVhbih0aGlzLmRhdGEubWFwKGQgPT4gZFt0aGlzLnZhcmlhYmxlMV0pKSwgdGhpcy5kYXRhLm1hcChkID0+IGRbdGhpcy52YXJpYWJsZTFdKSk7XG4gICAgICB0aGlzLm1lYW5fdmFyaWFibGUyID0gX2dldFBSKFxuICAgICAgICBnZXRNZWFuKHRoaXMuZGF0YS5tYXAoZCA9PiBkW3RoaXMudmFyaWFibGUyXSkpLCB0aGlzLmRhdGEubWFwKGQgPT4gZFt0aGlzLnZhcmlhYmxlMl0pKTtcbiAgICB9XG4gICAgY29uc3QgZ3JwX21lYW4gPSB0aGlzLnBsb3Quc2VsZWN0KCdnLm1lYW4nKTtcbiAgICBncnBfbWVhbi5zZWxlY3QoJyNtZWFuX3gnKVxuICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgLmR1cmF0aW9uKDEyNSlcbiAgICAgIC5hdHRycyh7XG4gICAgICAgIHgxOiB0aGlzLngodGhpcy5tZWFuX3ZhcmlhYmxlMSksXG4gICAgICAgIHgyOiB0aGlzLngodGhpcy5tZWFuX3ZhcmlhYmxlMSksXG4gICAgICB9KTtcbiAgICBncnBfbWVhbi5zZWxlY3QoJyNtZWFuX3knKVxuICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgLmR1cmF0aW9uKDEyNSlcbiAgICAgIC5hdHRycyh7XG4gICAgICAgIHkxOiB0aGlzLnkodGhpcy5tZWFuX3ZhcmlhYmxlMiksXG4gICAgICAgIHkyOiB0aGlzLnkodGhpcy5tZWFuX3ZhcmlhYmxlMiksXG4gICAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZUNoYW5nZVJlZ2lvbigpIHtcbiAgICBpZiAoYXBwLmN1cnJlbnRfY29uZmlnLmZpbHRlcl9rZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5jaGFuZ2VTdHVkeVpvbmUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZWZfdmFsdWUxID0gdGhpcy5kYXRhLmZpbmQoXG4gICAgICAgIGQgPT4gZC5pZCA9PT0gYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbilbdGhpcy52YXJpYWJsZTFdO1xuICAgICAgdGhpcy5yZWZfdmFsdWUyID0gdGhpcy5kYXRhLmZpbmQoXG4gICAgICAgIGQgPT4gZC5pZCA9PT0gYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbilbdGhpcy52YXJpYWJsZTJdO1xuICAgICAgdGhpcy5tYXBfZWxlbS5yZW1vdmVSZWN0QnJ1c2goKTtcbiAgICAgIHRoaXMubWFwX2VsZW0udXBkYXRlTGVnZW5kKCk7XG4gICAgICB0aGlzLm1hcF9lbGVtLnJlc2V0Q29sb3JzKHRoaXMuY3VycmVudF9pZHMpO1xuICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICB9XG4gIH1cblxuICBjaGFuZ2VTdHVkeVpvbmUoKSB7XG4gICAgdGhpcy5kYXRhID0gYXBwLmN1cnJlbnRfZGF0YS5maWx0ZXIoZnQgPT4gISFmdFt0aGlzLnZhcmlhYmxlMV0gJiYgISFmdFt0aGlzLnZhcmlhYmxlMl0pXG4gICAgICAubWFwKChkKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlcyA9IHsgaWQ6IGQuaWQsIG5hbWU6IGQubmFtZSB9O1xuICAgICAgICByZXNbdGhpcy52YXJpYWJsZTFdID0gZFt0aGlzLnZhcmlhYmxlMV07XG4gICAgICAgIHJlc1t0aGlzLnZhcmlhYmxlMl0gPSBkW3RoaXMudmFyaWFibGUyXTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgIH0pO1xuICAgIHRoaXMuY3VycmVudF9pZHMgPSB0aGlzLmRhdGEubWFwKGQgPT4gZC5pZCk7XG4gICAgcmVzZXRDb2xvcnMoKTtcbiAgICB0aGlzLm5iRnQgPSB0aGlzLmRhdGEubGVuZ3RoO1xuICAgIGNvbXB1dGVQZXJjZW50aWxlUmFuayh0aGlzLmRhdGEsIHRoaXMudmFyaWFibGUxLCB0aGlzLnJhbmtfdmFyaWFibGUxKTtcbiAgICBjb21wdXRlUGVyY2VudGlsZVJhbmsodGhpcy5kYXRhLCB0aGlzLnZhcmlhYmxlMiwgdGhpcy5yYW5rX3ZhcmlhYmxlMik7XG5cbiAgICB0aGlzLnhJbnZlcnNlZCA9IGZhbHNlO1xuICAgIHRoaXMueUludmVyc2VkID0gZmFsc2U7XG4gICAgY29uc3QgdG1wX215X3JlZ2lvbiA9IHRoaXMuZGF0YS5maWx0ZXIoZCA9PiBkLmlkID09PSBhcHAuY3VycmVudF9jb25maWcubXlfcmVnaW9uKVswXTtcbiAgICB0aGlzLnJlZl92YWx1ZTEgPSB0bXBfbXlfcmVnaW9uW3RoaXMudmFyaWFibGUxXTtcbiAgICB0aGlzLnJlZl92YWx1ZTIgPSB0bXBfbXlfcmVnaW9uW3RoaXMudmFyaWFibGUyXTtcblxuICAgIHRoaXMubWFwX2VsZW0ucmVtb3ZlUmVjdEJydXNoKCk7XG4gICAgdGhpcy51cGRhdGVJdGVtc0N0eE1lbnUoKTtcbiAgICB0aGlzLnVwZGF0ZU1hcFJlZ2lvKCk7XG4gICAgdGhpcy51cGRhdGVUYWJsZVN0YXQoKTtcbiAgICB0aGlzLnVwZGF0ZUNvbXBsZXR1ZGUoKTtcbiAgICB0aGlzLnVwZGF0ZSgpO1xuICB9XG5cbiAgY2hhbmdlVmFyaWFibGVYKGNvZGVfdmFyaWFibGUpIHtcbiAgICB0aGlzLnZhcmlhYmxlMSA9IGNvZGVfdmFyaWFibGU7XG4gICAgdGhpcy5yYW5rX3ZhcmlhYmxlMSA9IGBwcl8ke3RoaXMudmFyaWFibGUxfWA7XG4gICAgY29uc3QgdmFyX2luZm8gPSB2YXJpYWJsZXNfaW5mby5maW5kKGZ0ID0+IGZ0LmlkID09PSBjb2RlX3ZhcmlhYmxlKTtcbiAgICB0aGlzLnByZXR0eV9uYW1lMSA9IHZhcl9pbmZvLm5hbWU7XG4gICAgdGhpcy51bml0MSA9IHZhcl9pbmZvLnVuaXQ7XG4gICAgc3ZnX2NvbnRhaW5lci5zZWxlY3QoJyN0aXRsZS1heGlzLXgnKVxuICAgICAgLmh0bWwoY29kZV92YXJpYWJsZSArICcgJiN4MjVCRTsnKTtcbiAgICAvLyBUT0RPOiBBbHNvIGNoYW5nZSB0aGUgcG9zaXRpb24gb2YgdGhlIGJ1dHRvbiBhbG93aW5nIHRvIGludmVyc2UgdGhlIHNlcmllXG4gICAgdGhpcy51cGRhdGVJdGVtc0N0eE1lbnUoKTtcbiAgICB0aGlzLmRhdGEgPSBhcHAuY3VycmVudF9kYXRhLmZpbHRlcihmdCA9PiAhIWZ0W3RoaXMudmFyaWFibGUxXSAmJiAhIWZ0W3RoaXMudmFyaWFibGUyXSlcbiAgICAgIC5tYXAoKGQpID0+IHtcbiAgICAgICAgY29uc3QgcmVzID0geyBpZDogZC5pZCwgbmFtZTogZC5uYW1lIH07XG4gICAgICAgIHJlc1t0aGlzLnZhcmlhYmxlMV0gPSBkW3RoaXMudmFyaWFibGUxXTtcbiAgICAgICAgcmVzW3RoaXMudmFyaWFibGUyXSA9IGRbdGhpcy52YXJpYWJsZTJdO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfSk7XG4gICAgdGhpcy5jdXJyZW50X2lkcyA9IHRoaXMuZGF0YS5tYXAoZCA9PiBkLmlkKTtcbiAgICByZXNldENvbG9ycygpO1xuICAgIHRoaXMubmJGdCA9IHRoaXMuZGF0YS5sZW5ndGg7XG4gICAgY29tcHV0ZVBlcmNlbnRpbGVSYW5rKHRoaXMuZGF0YSwgdGhpcy52YXJpYWJsZTEsIHRoaXMucmFua192YXJpYWJsZTEpO1xuICAgIGNvbXB1dGVQZXJjZW50aWxlUmFuayh0aGlzLmRhdGEsIHRoaXMudmFyaWFibGUyLCB0aGlzLnJhbmtfdmFyaWFibGUyKTtcbiAgICB0aGlzLnJlZl92YWx1ZTEgPSB0aGlzLmRhdGEuZmluZChcbiAgICAgIGQgPT4gZC5pZCA9PT0gYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbilbdGhpcy52YXJpYWJsZTFdO1xuICAgIHRoaXMudXBkYXRlQ29tcGxldHVkZSgpO1xuICAgIHRoaXMudXBkYXRlTWFwUmVnaW8oKTtcbiAgICB0aGlzLnVwZGF0ZVRhYmxlU3RhdCgpO1xuICAgIHRoaXMudXBkYXRlKCk7XG4gIH1cblxuICBjaGFuZ2VWYXJpYWJsZVkoY29kZV92YXJpYWJsZSkge1xuICAgIHRoaXMudmFyaWFibGUyID0gY29kZV92YXJpYWJsZTtcbiAgICB0aGlzLnJhbmtfdmFyaWFibGUyID0gYHByXyR7dGhpcy52YXJpYWJsZTJ9YDtcbiAgICBjb25zdCB2YXJfaW5mbyA9IHZhcmlhYmxlc19pbmZvLmZpbmQoZnQgPT4gZnQuaWQgPT09IGNvZGVfdmFyaWFibGUpO1xuICAgIHRoaXMucHJldHR5X25hbWUyID0gdmFyX2luZm8ubmFtZTtcbiAgICB0aGlzLnVuaXQyID0gdmFyX2luZm8udW5pdDtcbiAgICBzdmdfY29udGFpbmVyLnNlbGVjdCgnI3RpdGxlLWF4aXMteScpXG4gICAgICAuaHRtbChjb2RlX3ZhcmlhYmxlICsgJyAmI3gyNUJFOycpO1xuICAgIC8vIFRPRE86IEFsc28gY2hhbmdlIHRoZSBwb3NpdGlvbiBvZiB0aGUgYnV0dG9uIGFsb3dpbmcgdG8gaW52ZXJzZSB0aGUgc2VyaWVcbiAgICB0aGlzLnVwZGF0ZUl0ZW1zQ3R4TWVudSgpO1xuICAgIHRoaXMuZGF0YSA9IGFwcC5jdXJyZW50X2RhdGEuZmlsdGVyKGZ0ID0+ICEhZnRbdGhpcy52YXJpYWJsZTFdICYmICEhZnRbdGhpcy52YXJpYWJsZTJdKVxuICAgICAgLm1hcCgoZCkgPT4ge1xuICAgICAgICBjb25zdCByZXMgPSB7IGlkOiBkLmlkLCBuYW1lOiBkLm5hbWUgfTtcbiAgICAgICAgcmVzW3RoaXMudmFyaWFibGUxXSA9IGRbdGhpcy52YXJpYWJsZTFdO1xuICAgICAgICByZXNbdGhpcy52YXJpYWJsZTJdID0gZFt0aGlzLnZhcmlhYmxlMl07XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgICB9KTtcbiAgICB0aGlzLmN1cnJlbnRfaWRzID0gdGhpcy5kYXRhLm1hcChkID0+IGQuaWQpO1xuICAgIHJlc2V0Q29sb3JzKCk7XG4gICAgdGhpcy5uYkZ0ID0gdGhpcy5kYXRhLmxlbmd0aDtcbiAgICBjb21wdXRlUGVyY2VudGlsZVJhbmsodGhpcy5kYXRhLCB0aGlzLnZhcmlhYmxlMSwgdGhpcy5yYW5rX3ZhcmlhYmxlMSk7XG4gICAgY29tcHV0ZVBlcmNlbnRpbGVSYW5rKHRoaXMuZGF0YSwgdGhpcy52YXJpYWJsZTIsIHRoaXMucmFua192YXJpYWJsZTIpO1xuICAgIHRoaXMucmVmX3ZhbHVlMiA9IHRoaXMuZGF0YS5maW5kKFxuICAgICAgZCA9PiBkLmlkID09PSBhcHAuY3VycmVudF9jb25maWcubXlfcmVnaW9uKVt0aGlzLnZhcmlhYmxlMl07XG4gICAgdGhpcy51cGRhdGVDb21wbGV0dWRlKCk7XG4gICAgdGhpcy51cGRhdGVNYXBSZWdpbygpO1xuICAgIHRoaXMudXBkYXRlVGFibGVTdGF0KCk7XG4gICAgdGhpcy51cGRhdGUoKTtcbiAgfVxuXG4gIHVwZGF0ZUl0ZW1zQ3R4TWVudSgpIHtcbiAgICB0aGlzLml0ZW1zWCA9IGFwcC5jdXJyZW50X2NvbmZpZy5yYXRpby5maWx0ZXIoZWxlbSA9PiBlbGVtICE9PSB0aGlzLnZhcmlhYmxlMilcbiAgICAgIC5tYXAoZWxlbSA9PiAoe1xuICAgICAgICBuYW1lOiBlbGVtLFxuICAgICAgICBhY3Rpb246ICgpID0+IHRoaXMuY2hhbmdlVmFyaWFibGVYKGVsZW0pLFxuICAgICAgfSkpO1xuICAgIHRoaXMuaXRlbXNZID0gYXBwLmN1cnJlbnRfY29uZmlnLnJhdGlvLmZpbHRlcihlbGVtID0+IGVsZW0gIT09IHRoaXMudmFyaWFibGUxKVxuICAgICAgLm1hcChlbGVtID0+ICh7XG4gICAgICAgIG5hbWU6IGVsZW0sXG4gICAgICAgIGFjdGlvbjogKCkgPT4gdGhpcy5jaGFuZ2VWYXJpYWJsZVkoZWxlbSksXG4gICAgICB9KSk7XG4gIH1cblxuICBhZGRWYXJpYWJsZShjb2RlX3ZhcmlhYmxlLCBuYW1lX3ZhcmlhYmxlKSB7XG4gICAgdGhpcy5pdGVtc1gucHVzaCh7XG4gICAgICBuYW1lOiBjb2RlX3ZhcmlhYmxlLFxuICAgICAgYWN0aW9uOiAoKSA9PiB0aGlzLmNoYW5nZVZhcmlhYmxlWChjb2RlX3ZhcmlhYmxlKSxcbiAgICB9KTtcbiAgICB0aGlzLml0ZW1zWS5wdXNoKHtcbiAgICAgIG5hbWU6IGNvZGVfdmFyaWFibGUsXG4gICAgICBhY3Rpb246ICgpID0+IHRoaXMuY2hhbmdlVmFyaWFibGVZKGNvZGVfdmFyaWFibGUpLFxuICAgIH0pO1xuICB9XG5cbiAgcmVtb3ZlVmFyaWFibGUoY29kZV92YXJpYWJsZSkge1xuICAgIC8vIFJlbW92ZSB0aGUgdmFyaWFibGUgZnJvbSB0aGUgWCBhbmQgWSBsaXN0IG9mIGl0ZW1zOlxuICAgIGZvciAobGV0IGkgPSB0aGlzLml0ZW1zWC5sZW5ndGggLSAxOyBpID4gLTE7IGktLSkge1xuICAgICAgaWYgKHRoaXMuaXRlbXNYW2ldLm5hbWUgPT09IGNvZGVfdmFyaWFibGUpIHtcbiAgICAgICAgdGhpcy5pdGVtc1guc3BsaWNlKGksIDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IHRoaXMuaXRlbXNZLmxlbmd0aCAtIDE7IGkgPiAtMTsgaS0tKSB7XG4gICAgICBpZiAodGhpcy5pdGVtc1lbaV0ubmFtZSA9PT0gY29kZV92YXJpYWJsZSkge1xuICAgICAgICB0aGlzLml0ZW1zWS5zcGxpY2UoaSwgMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHRoZSB2YXJpYWJsZSB0byByZW1vdmUgd2FzIGN1cnJlbnRseSB1c2VkIGZvciBkcmF3aW5nIHRoaXMgY2hhcnQsXG4gICAgLy8gc2V0IGEgbmV3IHZhcmlhYmxlIGZvciB0aGlzIGF4aXMgYW5kIHJlZHJhdyB0aGUgY2hhcnQ6XG4gICAgaWYgKGNvZGVfdmFyaWFibGUgPT09IHRoaXMudmFyaWFibGUxKSB7XG4gICAgICBjb25zdCBuZXdfdmFyX3ggPSB0aGlzLml0ZW1zWC5maWx0ZXIoZnQgPT4gZnQubmFtZSAhPT0gdGhpcy52YXJpYWJsZTIpWzBdLm5hbWU7XG4gICAgICB0aGlzLmNoYW5nZVZhcmlhYmxlWChuZXdfdmFyX3gpO1xuICAgIH0gZWxzZSBpZiAoY29kZV92YXJpYWJsZSA9PT0gdGhpcy52YXJpYWJsZTIpIHtcbiAgICAgIGNvbnN0IG5ld192YXJfeSA9IHRoaXMuaXRlbXNZLmZpbHRlcihmdCA9PiBmdC5uYW1lICE9PSB0aGlzLnZhcmlhYmxlMSlbMF0ubmFtZTtcbiAgICAgIHRoaXMuY2hhbmdlVmFyaWFibGVZKG5ld192YXJfeSk7XG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlKCkge1xuICAgIHRoaXMudGFibGVfc3RhdHMucmVtb3ZlKCk7XG4gICAgdGhpcy5tYXBfZWxlbS51bmJpbmRCcnVzaENsaWNrKCk7XG4gICAgdGhpcy5tYXBfZWxlbSA9IG51bGw7XG4gICAgc3ZnX2Jhci5odG1sKCcnKTtcbiAgfVxuXG4gIGJpbmRNYXAobWFwX2VsZW0pIHtcbiAgICB0aGlzLm1hcF9lbGVtID0gbWFwX2VsZW07XG4gICAgdGhpcy5tYXBfZWxlbS5kaXNwbGF5TGVnZW5kKDEpO1xuICAgIHRoaXMudXBkYXRlTWFwUmVnaW8oKTtcbiAgICB0aGlzLnVwZGF0ZSgpO1xuICB9XG5cbiAgYmluZE1lbnUoKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgY29uc3QgbWVudSA9IGQzLnNlbGVjdCgnI21lbnVfc2VsZWN0aW9uJyk7XG5cbiAgICBtZW51LnNlbGVjdCgnI2luZF9yYXdfdmFsdWVzJylcbiAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi50eXBlID0gJ3ZhbHVlJztcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgbWVudS5zZWxlY3QoJyNpbmRfcmFua3MnKVxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdjaG9pY2VfaW5kJyk7XG4gICAgICAgIHNlbGYudXBkYXRlKCk7XG4gICAgICB9KTtcblxuICAgIG1lbnUuc2VsZWN0KCcjaW5kX3JhbmtzJylcbiAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi50eXBlID0gJ3JhbmsnO1xuICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICBtZW51LnNlbGVjdCgnI2luZF9yYXdfdmFsdWVzJylcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAnY2hvaWNlX2luZCcpO1xuICAgICAgICBzZWxmLnVwZGF0ZSgpO1xuICAgICAgfSk7XG4gIH1cblxuICBzZWxlY3RCZWxvd01lYW4oKSB7XG4gICAgY29uc3QgbWVhbjEgPSBnZXRNZWFuKHRoaXMuZGF0YS5tYXAoZnQgPT4gZnRbdGhpcy52YXJpYWJsZTFdKSk7XG4gICAgY29uc3QgbWVhbjIgPSBnZXRNZWFuKHRoaXMuZGF0YS5tYXAoZnQgPT4gZnRbdGhpcy52YXJpYWJsZTJdKSk7XG4gICAgc3ZnX2NvbnRhaW5lci5zZWxlY3QoJy5icnVzaCcpLmNhbGwodGhpcy5icnVzaC5tb3ZlLCBudWxsKTtcbiAgICBhcHAuY29sb3JzID0ge307XG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbl9pID0gdGhpcy5kYXRhLmxlbmd0aDsgaSA8IGxlbl9pOyBpKyspIHtcbiAgICAgIGNvbnN0IGZ0ID0gdGhpcy5kYXRhW2ldO1xuICAgICAgaWYgKGZ0W3RoaXMudmFyaWFibGUxXSA8PSBtZWFuMSAmJiBmdFt0aGlzLnZhcmlhYmxlMl0gPD0gbWVhbjIpIHtcbiAgICAgICAgYXBwLmNvbG9yc1tmdC5pZF0gPSBjb21wMihcbiAgICAgICAgICBmdFt0aGlzLnZhcmlhYmxlMV0sIGZ0W3RoaXMudmFyaWFibGUyXSxcbiAgICAgICAgICB0aGlzLnJlZl92YWx1ZTEsIHRoaXMucmVmX3ZhbHVlMixcbiAgICAgICAgICB0aGlzLnhJbnZlcnNlZCwgdGhpcy55SW52ZXJzZWQpO1xuICAgICAgfVxuICAgIH1cbiAgICBhcHAuY29sb3JzW2FwcC5jdXJyZW50X2NvbmZpZy5teV9yZWdpb25dID0gY29sb3JfaGlnaGxpZ2h0O1xuICAgIHRoaXMudXBkYXRlTGlnaHQoKTtcbiAgICB0aGlzLnVwZGF0ZU1hcFJlZ2lvKCk7XG4gICAgdGhpcy5tYXBfZWxlbS5yZW1vdmVSZWN0QnJ1c2goKTtcbiAgfVxuXG4gIHNlbGVjdEJlbG93TXlSZWdpb24oKSB7XG4gICAgc3ZnX2NvbnRhaW5lci5zZWxlY3QoJy5icnVzaCcpLmNhbGwodGhpcy5icnVzaC5tb3ZlLCBudWxsKTtcbiAgICBhcHAuY29sb3JzID0ge307XG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbl9pID0gdGhpcy5kYXRhLmxlbmd0aDsgaSA8IGxlbl9pOyBpKyspIHtcbiAgICAgIGNvbnN0IGZ0ID0gdGhpcy5kYXRhW2ldO1xuICAgICAgaWYgKGZ0W3RoaXMudmFyaWFibGUxXSA8PSB0aGlzLnJlZl92YWx1ZTEgJiYgZnRbdGhpcy52YXJpYWJsZTJdIDw9IHRoaXMucmVmX3ZhbHVlMikge1xuICAgICAgICBhcHAuY29sb3JzW2Z0LmlkXSA9IGNvbXAyKFxuICAgICAgICAgIGZ0W3RoaXMudmFyaWFibGUxXSwgZnRbdGhpcy52YXJpYWJsZTJdLFxuICAgICAgICAgIHRoaXMucmVmX3ZhbHVlMSwgdGhpcy5yZWZfdmFsdWUyLFxuICAgICAgICAgIHRoaXMueEludmVyc2VkLCB0aGlzLnlJbnZlcnNlZCk7XG4gICAgICB9XG4gICAgfVxuICAgIGFwcC5jb2xvcnNbYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbl0gPSBjb2xvcl9oaWdobGlnaHQ7XG4gICAgdGhpcy51cGRhdGVMaWdodCgpO1xuICAgIHRoaXMudXBkYXRlTWFwUmVnaW8oKTtcbiAgICB0aGlzLm1hcF9lbGVtLnJlbW92ZVJlY3RCcnVzaCgpO1xuICB9XG5cbiAgc2VsZWN0QWJvdmVNZWFuKCkge1xuICAgIGNvbnN0IG1lYW4xID0gZ2V0TWVhbih0aGlzLmRhdGEubWFwKGZ0ID0+IGZ0W3RoaXMudmFyaWFibGUxXSkpO1xuICAgIGNvbnN0IG1lYW4yID0gZ2V0TWVhbih0aGlzLmRhdGEubWFwKGZ0ID0+IGZ0W3RoaXMudmFyaWFibGUyXSkpO1xuICAgIHN2Z19jb250YWluZXIuc2VsZWN0KCcuYnJ1c2gnKS5jYWxsKHRoaXMuYnJ1c2gubW92ZSwgbnVsbCk7XG4gICAgYXBwLmNvbG9ycyA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwLCBsZW5faSA9IHRoaXMuZGF0YS5sZW5ndGg7IGkgPCBsZW5faTsgaSsrKSB7XG4gICAgICBjb25zdCBmdCA9IHRoaXMuZGF0YVtpXTtcbiAgICAgIGlmIChmdFt0aGlzLnZhcmlhYmxlMV0gPj0gbWVhbjEgJiYgZnRbdGhpcy52YXJpYWJsZTJdID49IG1lYW4yKSB7XG4gICAgICAgIGFwcC5jb2xvcnNbZnQuaWRdID0gY29tcDIoXG4gICAgICAgICAgZnRbdGhpcy52YXJpYWJsZTFdLCBmdFt0aGlzLnZhcmlhYmxlMl0sXG4gICAgICAgICAgdGhpcy5yZWZfdmFsdWUxLCB0aGlzLnJlZl92YWx1ZTIsXG4gICAgICAgICAgdGhpcy54SW52ZXJzZWQsIHRoaXMueUludmVyc2VkKTtcbiAgICAgIH1cbiAgICB9XG4gICAgYXBwLmNvbG9yc1thcHAuY3VycmVudF9jb25maWcubXlfcmVnaW9uXSA9IGNvbG9yX2hpZ2hsaWdodDtcbiAgICB0aGlzLnVwZGF0ZUxpZ2h0KCk7XG4gICAgdGhpcy51cGRhdGVNYXBSZWdpbygpO1xuICAgIHRoaXMubWFwX2VsZW0ucmVtb3ZlUmVjdEJydXNoKCk7XG4gIH1cblxuICBzZWxlY3RBYm92ZU15UmVnaW9uKCkge1xuICAgIHN2Z19jb250YWluZXIuc2VsZWN0KCcuYnJ1c2gnKS5jYWxsKHRoaXMuYnJ1c2gubW92ZSwgbnVsbCk7XG4gICAgYXBwLmNvbG9ycyA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwLCBsZW5faSA9IHRoaXMuZGF0YS5sZW5ndGg7IGkgPCBsZW5faTsgaSsrKSB7XG4gICAgICBjb25zdCBmdCA9IHRoaXMuZGF0YVtpXTtcbiAgICAgIGlmIChmdFt0aGlzLnZhcmlhYmxlMV0gPj0gdGhpcy5yZWZfdmFsdWUxICYmIGZ0W3RoaXMudmFyaWFibGUyXSA+PSB0aGlzLnJlZl92YWx1ZTIpIHtcbiAgICAgICAgYXBwLmNvbG9yc1tmdC5pZF0gPSBjb21wMihcbiAgICAgICAgICBmdFt0aGlzLnZhcmlhYmxlMV0sIGZ0W3RoaXMudmFyaWFibGUyXSxcbiAgICAgICAgICB0aGlzLnJlZl92YWx1ZTEsIHRoaXMucmVmX3ZhbHVlMixcbiAgICAgICAgICB0aGlzLnhJbnZlcnNlZCwgdGhpcy55SW52ZXJzZWQpO1xuICAgICAgfVxuICAgIH1cbiAgICBhcHAuY29sb3JzW2FwcC5jdXJyZW50X2NvbmZpZy5teV9yZWdpb25dID0gY29sb3JfaGlnaGxpZ2h0O1xuICAgIHRoaXMudXBkYXRlTGlnaHQoKTtcbiAgICB0aGlzLnVwZGF0ZU1hcFJlZ2lvKCk7XG4gICAgdGhpcy5tYXBfZWxlbS5yZW1vdmVSZWN0QnJ1c2goKTtcbiAgfVxuXG4gIHByZXBhcmVUYWJsZVN0YXQoKSB7XG4gICAgY29uc3QgdmFsdWVzMSA9IHRoaXMuZGF0YS5tYXAoZCA9PiBkW3RoaXMudmFyaWFibGUxXSk7XG4gICAgY29uc3QgdmFsdWVzMiA9IHRoaXMuZGF0YS5tYXAoZCA9PiBkW3RoaXMudmFyaWFibGUyXSk7XG4gICAgY29uc3QgZmVhdHVyZXMgPSBbXG4gICAgICB7XG4gICAgICAgIE1pbjogZDMubWluKHZhbHVlczEpLFxuICAgICAgICBNYXg6IGQzLm1heCh2YWx1ZXMxKSxcbiAgICAgICAgTW95OiBnZXRNZWFuKHZhbHVlczEpLFxuICAgICAgICBNZWQ6IGQzLm1lZGlhbih2YWx1ZXMxKSxcbiAgICAgICAgaWQ6IHRoaXMudmFyaWFibGUxLFxuICAgICAgICBWYXJpYWJsZTogdGhpcy52YXJpYWJsZTEsXG4gICAgICAgICdNYSByw6lnaW9uJzogdGhpcy5yZWZfdmFsdWUxLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgTWluOiBkMy5taW4odmFsdWVzMiksXG4gICAgICAgIE1heDogZDMubWF4KHZhbHVlczIpLFxuICAgICAgICBNb3k6IGdldE1lYW4odmFsdWVzMiksXG4gICAgICAgIE1lZDogZDMubWVkaWFuKHZhbHVlczIpLFxuICAgICAgICBpZDogdGhpcy52YXJpYWJsZTIsXG4gICAgICAgIFZhcmlhYmxlOiB0aGlzLnZhcmlhYmxlMixcbiAgICAgICAgJ01hIHLDqWdpb24nOiB0aGlzLnJlZl92YWx1ZTIsXG4gICAgICB9XTtcbiAgICByZXR1cm4gZmVhdHVyZXM7XG4gIH1cblxuICB1cGRhdGVUYWJsZVN0YXQoKSB7XG4gICAgdGhpcy50YWJsZV9zdGF0cy5yZW1vdmVBbGwoKTtcbiAgICB0aGlzLnRhYmxlX3N0YXRzLmFkZEZlYXR1cmVzKHRoaXMucHJlcGFyZVRhYmxlU3RhdCgpKTtcbiAgfVxuXG4gIG1ha2VUYWJsZVN0YXQoKSB7XG4gICAgY29uc3QgZmVhdHVyZXMgPSB0aGlzLnByZXBhcmVUYWJsZVN0YXQoKTtcbiAgICB0aGlzLnRhYmxlX3N0YXRzID0gbmV3IFRhYmxlUmVzdW1lU3RhdChmZWF0dXJlcyk7XG4gIH1cblxuICBnZXRIZWxwTWVzc2FnZSgpIHtcbiAgICByZXR1cm4gYFxuPGgzPlBvc2l0aW9uICAtIDIgaW5kaWNhdGV1cnM8L2gzPlxuXG48Yj5BaWRlIGfDqW7DqXJhbGU8L2I+XG5DZSBncmFwaGlxdWUgYmlkaW1lbnNpb25uZWwgcmVwcsOpc2VudGUgbGEgcG9zaXRpb24gZGUgbOKAmXVuaXTDqSB0ZXJyaXRvcmlhbGUgZGUgcsOpZsOpcmVuY2Ugc3VyIGRldXggaW5kaWNhdGV1cnMgcG91ciB1biBlc3BhY2UgZOKAmcOpdHVkZSBldCB1biBtYWlsbGFnZSB0ZXJyaXRvcmlhbCBk4oCZYW5hbHlzZSBkb25uw6kuIExhIHZhbGV1ciBkZSBs4oCZdW5pdMOpIHRlcnJpdG9yaWFsZSBkZSByw6lmw6lyZW5jZSBhcHBhcmHDrnQgZW4gc3VyYnJpbGxhbmNlIChqYXVuZSkuIExlcyBsaWduZXMgcmVwcsOpc2VudMOpZXMgcGFyIHVuIHRpcmV0w6kgcm91Z2UgcmVwcsOpc2VudGVudCBsYSBtb3llbm5lIGRlIGzigJllc3BhY2UgZOKAmcOpdHVkZSBwb3VyIGNoYWN1biBkZXMgaW5kaWNhdGV1cnMgc8OpbGVjdGlvbm7DqXMgKG5vbiBwb25kw6lyw6llKS5cblxuU3VyIGxlIGdyYXBoaXF1ZSBldCBsYSBjYXJ0ZSwgbGVzIHVuaXTDqXMgdGVycml0b3JpYWxlcyBxdWkgZGlzcG9zZW50IGRlIHZhbGV1cnMgc3Vww6lyaWV1cmVzIMOgIGxhIHVuaXTDqSB0ZXJyaXRvcmlhbGUgZGUgcsOpZsOpcmVuY2UgcG91ciBsZXMgZGV1eCBpbmRpY2F0ZXVycyBzb250IHJlcHLDqXNlbnTDqWVzIGVuIHZlcnQuIExlcyB1bml0w6lzIHRlcnJpdG9yaWFsZXMgY2FyYWN0w6lyaXPDqWVzIHBhciBkZXMgdmFsZXVycyBpbmbDqXJpZXVyZXMgw6AgbOKAmXVuaXTDqSB0ZXJyaXRvcmlhbGUgZGUgcsOpZsOpcmVuY2UgcG91ciBsZXMgZGV1eCBpbmRpY2F0ZXVycyBzb250IHJlcHLDqXNlbnTDqWVzIGVuIHJvdWdlLiBDZWxsZXMgcXVpIHNvbnQgc3Vww6lyaWV1cmVzIHBvdXIgbOKAmWluZGljYXRldXIgcmVwcsOpc2VudMOpIHN1ciBs4oCZYXhlIGRlcyBhYnNjaXNzZXMgZXQgaW5mw6lyaWV1ciBzdXIgbOKAmWF4ZSBkZXMgb3Jkb25uw6llcyBzb250IHJlcHLDqXNlbnTDqWVzIGVuIG9yYW5nZcKgOyBldCB2aW9sZXQgw6AgbOKAmWludmVyc2UuIFN1ciBjZSBncmFwaGlxdWUsIGlsIGVzdCBwb3NzaWJsZSBk4oCZaW52ZXJzZXIgbOKAmW9yZHJlIGRlIGNsYXNzZW1lbnQgZGUgbOKAmWluZGljYXRldXIgKGFwcHV5ZXIgc3VyIGxlIMKrwqArwqDCuynCoDogbGVzIHZhbGV1cnMgbWluaW1hbGVzIHNlcm9udCBhbG9ycyBjb25zaWTDqXLDqWVzIGNvbW1lIG1heGltYWxlIHN1ciBs4oCZYXhlLlxuXG5QYXIgZMOpZmF1dCwgY2UgZ3JhcGhpcXVlIGVzdCBleHByaW3DqSBkYW5zIGxlcyB2YWxldXJzIGJydXRlcyBkZSBs4oCZaW5kaWNhdGV1ciAocG91cmNlbnRhZ2UgcGFyIGV4ZW1wbGUpLiBFbiBzw6lsZWN0aW9ubmFudCBs4oCZb3B0aW9uIMKrdmFsZXVycyBkZSByYW5nwqDCuywgbOKAmWluZGljYXRldXIgZXN0IG5vcm1hbGlzw6kgZGUgMCAodmFsZXVyIG1pbmltYWxlKSDDoCAxMDAgKHZhbGV1ciBtYXhpbWFsZSkuIEzigJl1dGlsaXNhdGlvbiBwb3NzaWJsZSBkZSBjZSB0eXBlIGRlIHRyYW5zZm9ybWF0aW9uIGVzdCBsYSBzdWl2YW50ZcKgOiB1bmUgdW5pdMOpIHRlcnJpdG9yaWFsZSBkaXNwb3NhbnQgZOKAmXVuIGluZGljZSBkZSA2NyBzdXIgdW4gaW5kaWNhdGV1ciBzaWduaWZpZSBxdWUgMzPCoCUgZGVzIHVuaXTDqXMgdGVycml0b3JpYWxlcyBkZSBs4oCZZXNwYWNlIGTigJnDqXR1ZGUgc29udCBjYXJhY3TDqXJpc8OpZXMgcGFyIGRlcyB2YWxldXJzIHN1cMOpcmlldXJlcyDDoCBs4oCZdW5pdMOpIHRlcnJpdG9yaWFsZSBkZSByw6lmw6lyZW5jZSBwb3VyIGxlcyBpbmRpY2F0ZXVycyBzw6lsZWN0aW9ubsOpcy4gRXQgcsOpY2lwcm9xdWVtZW50LiBMZXMgdmFsZXVycyBkZSByYW5nIHBlcm1ldHRlbnQgbm90YW1tZW50IGRlIHJlbmRyZSBjb21wYXJhYmxlcyBkZXMgdW5pdMOpcyBkZSBtZXN1cmUgZXQgZGVzIHBhcmFtw6h0cmVzIGRlIGRpc3BlcnNpb24gZGUgZGV1eCBpbmRpY2F0ZXVycy4gSWwgbmUgZmF1dCBuw6lhbm1vaW5zIHBhcyBvbWV0dHJlIHF1ZSBjZXR0ZSB0cmFuc2Zvcm1hdGlvbiBudWl0IMOgIGxhIHJlc3RpdHV0aW9uIGRlIGxhIGRpc3BlcnNpb24gc3RhdGlzdGlxdWUgZWZmZWN0aXZlIGRlcyBpbmRpY2F0ZXVycy5gO1xuICB9XG59XG4iLCJpbXBvcnQgYWxlcnRpZnkgZnJvbSAnYWxlcnRpZnlqcyc7XG5pbXBvcnQge1xuICBtYXRoX21heCwgbWF0aF9zaW4sIG1hdGhfY29zLCBIQUxGX1BJLCBjb21wdXRlUGVyY2VudGlsZVJhbmssIGdldE1lYW4gfSBmcm9tICcuLy4uL2hlbHBlcnMnO1xuaW1wb3J0IHsgY29sb3JfZGlzYWJsZWQsIGNvbG9yX2NvdW50cmllcywgY29sb3JfaGlnaGxpZ2h0LCBjb2xvcl9kZWZhdWx0X2Rpc3NpbSB9IGZyb20gJy4vLi4vb3B0aW9ucyc7XG5pbXBvcnQgeyBjYWxjUG9wQ29tcGxldHVkZVN1YnNldCwgY2FsY0NvbXBsZXR1ZGVTdWJzZXQgfSBmcm9tICcuLy4uL3ByZXBhcmVfZGF0YSc7XG5pbXBvcnQgeyBhcHAsIHZhcmlhYmxlc19pbmZvIH0gZnJvbSAnLi8uLi8uLi9tYWluJztcbmltcG9ydCBDb21wbGV0dWRlU2VjdGlvbiBmcm9tICcuLy4uL2NvbXBsZXR1ZGUnO1xuaW1wb3J0IFRhYmxlUmVzdW1lU3RhdCBmcm9tICcuLy4uL3RhYmxlUmVzdW1lU3RhdCc7XG5cblxubGV0IHN2Z19iYXIsIG1hcmdpbiwgYmJveF9zdmcsIHdpZHRoLCBoZWlnaHQ7XG5cbmNvbnN0IHVwZGF0ZURpbWVuc2lvbnMgPSAoKSA9PiB7XG4gIHN2Z19iYXIgPSBkMy5zZWxlY3QoJyNzdmdfYmFyJyk7XG4gIG1hcmdpbiA9IHsgdG9wOiA1MCwgcmlnaHQ6IDYwLCBib3R0b206IDUwLCBsZWZ0OiA2MCB9O1xuICBiYm94X3N2ZyA9IHN2Z19iYXIubm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICB3aWR0aCA9ICtiYm94X3N2Zy53aWR0aCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0O1xuICBoZWlnaHQgPSA1MDAgKiBhcHAucmF0aW9Ub1dpZGUgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTtcbiAgc3ZnX2Jhci5hdHRyKCdoZWlnaHQnLCBgJHs1MDAgKiBhcHAucmF0aW9Ub1dpZGV9cHhgKTtcbiAgc3ZnX2JhciA9IHN2Z19iYXIuYXBwZW5kKCdnJykuYXR0cignY2xhc3MnLCAnY29udGFpbmVyJyk7XG59O1xuXG5jb25zdCB3cmFwID0gKF90ZXh0LCBfd2lkdGgpID0+IHtcbiAgX3RleHQuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgdGV4dCA9IGQzLnNlbGVjdCh0aGlzKSxcbiAgICAgIHdvcmRzID0gdGV4dC50ZXh0KCkuc3BsaXQoL1xccysvKS5yZXZlcnNlKCksXG4gICAgICBsaW5lSGVpZ2h0ID0gMS40LFxuICAgICAgeCA9ICt0ZXh0LmF0dHIoJ3gnKSxcbiAgICAgIGR5ID0gcGFyc2VGbG9hdCh0ZXh0LmF0dHIoJ2R5JykpLCAvLyBlbXNcbiAgICAgIG5iX3ZhciA9IGFwcC5jdXJyZW50X2NvbmZpZy5yYXRpby5sZW5ndGg7XG4gICAgbGV0IHkgPSArdGV4dC5hdHRyKCd5Jyk7XG4gICAgbGV0IGlkID0gK3RleHQuYXR0cignaWQnKTtcbiAgICBsZXQgbGluZSA9IFtdO1xuICAgIGxldCBsaW5lTnVtYmVyID0gMDtcbiAgICAvLyBpZiAoeSA+IGhlaWdodCAvIDIgLSAzNSkge1xuICAgIC8vICAgeSAtPSA0MDtcbiAgICAvLyB9XG4gICAgaWYgKGlkID09PSAwKSB5ID0geSArIDEyO1xuICAgIGlmIChpZCA9PT0gbmJfdmFyIC8gMikgeSA9IHkgLSAxMjtcbiAgICBsZXQgdHNwYW4gPSB0ZXh0LnRleHQobnVsbClcbiAgICAgIC5hcHBlbmQoJ3RzcGFuJylcbiAgICAgIC5hdHRyKCd4JywgeClcbiAgICAgIC5hdHRyKCd5JywgeSlcbiAgICAgIC5hdHRyKCdkeScsIGAke2R5fWVtYCk7XG4gICAgbGV0IHdvcmQgPSB3b3Jkcy5wb3AoKTtcbiAgICB3aGlsZSAod29yZCkge1xuICAgICAgbGluZS5wdXNoKHdvcmQpO1xuICAgICAgdHNwYW4udGV4dChsaW5lLmpvaW4oJyAnKSk7XG4gICAgICBpZiAodHNwYW4ubm9kZSgpLmdldENvbXB1dGVkVGV4dExlbmd0aCgpID4gX3dpZHRoKSB7XG4gICAgICAgIGxpbmUucG9wKCk7XG4gICAgICAgIHRzcGFuLnRleHQobGluZS5qb2luKCcgJykpO1xuICAgICAgICBsaW5lID0gW3dvcmRdO1xuICAgICAgICB0c3BhbiA9IHRleHQuYXBwZW5kKCd0c3BhbicpXG4gICAgICAgICAgLmF0dHIoJ3gnLCB4KVxuICAgICAgICAgIC5hdHRyKCd5JywgeSlcbiAgICAgICAgICAuYXR0cignZHknLCBgJHsrK2xpbmVOdW1iZXIgKiBsaW5lSGVpZ2h0ICsgZHl9ZW1gKVxuICAgICAgICAgIC50ZXh0KHdvcmQpO1xuICAgICAgfVxuICAgICAgd29yZCA9IHdvcmRzLnBvcCgpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5jb25zdCBtb3ZlID0gZnVuY3Rpb24gbW92ZShhcnJheSwgZnJvbSwgdG8pIHtcbiAgYXJyYXkuc3BsaWNlKHRvLCAwLCBhcnJheS5zcGxpY2UoZnJvbSwgMSlbMF0pO1xuICByZXR1cm4gYXJyYXk7XG59O1xuXG5jb25zdCBzd2FwID0gZnVuY3Rpb24gc3dhcChhcnJheSwgaXgxLCBpeDIpIHtcbiAgW2FycmF5W2l4MV0sIGFycmF5W2l4Ml1dID0gW2FycmF5W2l4Ml0sIGFycmF5W2l4MV1dOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gIHJldHVybiBhcnJheTtcbn07XG5cbmV4cG9ydCBjb25zdCBwcmVwYXJlX2RhdGFfcmFkYXJfZGVmYXVsdCA9IChkYXRhLCB2YXJpYWJsZXMpID0+IHtcbiAgLy8gUHJlcGFyZSB0aGUgZGF0YSBmb3IgXCJNeSBSw6lnaW9uXCI6XG4gIGNvbnN0IHZfbXlfcmVnaW9uID0gZGF0YS5maW5kKGQgPT4gZC5pZCA9PT0gYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbik7XG4gIGNvbnN0IG9qYl9teV9yZWdpb24gPSB7XG4gICAgbmFtZTogYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbixcbiAgICBheGVzOiBbXSxcbiAgfTtcbiAgdmFyaWFibGVzLmZvckVhY2goKHYpID0+IHtcbiAgICBjb25zdCB0ID0gdmFyaWFibGVzX2luZm8uZmluZChkID0+IGQuaWQgPT09IHYpLmlkO1xuICAgIGNvbnN0IF92ID0gYHByXyR7dn1gO1xuICAgIG9qYl9teV9yZWdpb24uYXhlcy5wdXNoKHtcbiAgICAgIGF4aXM6IHQsIHZhbHVlOiB2X215X3JlZ2lvbltfdl0sXG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gb2piX215X3JlZ2lvbjtcbn07XG5cbmV4cG9ydCBjb25zdCBwcmVwYXJlX2RhdGFfcmFkYXJfZnQgPSAoZGF0YSwgdmFyaWFibGVzLCBmdCkgPT4ge1xuICBjb25zdCBmdF92YWx1ZXMgPSBkYXRhLmZpbmQoZCA9PiBkLmlkID09PSBmdCk7XG4gIGlmICghZnRfdmFsdWVzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3Qgb2JqID0ge1xuICAgIG5hbWU6IGZ0LFxuICAgIGF4ZXM6IFtdLFxuICB9O1xuICB2YXJpYWJsZXMuZm9yRWFjaCgodikgPT4ge1xuICAgIGNvbnN0IHQgPSB2YXJpYWJsZXNfaW5mby5maW5kKGQgPT4gZC5pZCA9PT0gdikuaWQ7XG4gICAgY29uc3QgX3YgPSBgcHJfJHt2fWA7XG4gICAgb2JqLmF4ZXMucHVzaCh7XG4gICAgICBheGlzOiB0LCB2YWx1ZTogZnRfdmFsdWVzW192XSxcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBvYmo7XG59O1xuXG5leHBvcnQgY2xhc3MgUmFkYXJDaGFydDMge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBvcHRpb25zKSB7XG4gICAgdXBkYXRlRGltZW5zaW9ucygpO1xuICAgIGNvbnN0IGNmZyA9IHtcbiAgICAgIHc6IHdpZHRoIC0gMjAsIC8vIFdpZHRoIG9mIHRoZSBjaXJjbGVcbiAgICAgIGg6IGhlaWdodCAtIDIwLCAvLyBIZWlnaHQgb2YgdGhlIGNpcmNsZVxuICAgICAgbWFyZ2luOiBtYXJnaW4sIC8vIFRoZSBtYXJnaW5zIG9mIHRoZSBTVkdcbiAgICAgIGxldmVsczogMTAsIC8vIEhvdyBtYW55IGxldmVscyBvciBpbm5lciBjaXJjbGVzIHNob3VsZCB0aGVyZSBiZSBkcmF3blxuICAgICAgbWF4VmFsdWU6IDEwMCwgLy8gV2hhdCBpcyB0aGUgdmFsdWUgdGhhdCB0aGUgYmlnZ2VzdCBjaXJjbGUgd2lsbCByZXByZXNlbnRcbiAgICAgIGxhYmVsRmFjdG9yOiAxLjIsIC8vIEhvdyBtdWNoIGZhcnRoZXIgdGhhbiB0aGUgcmFkaXVzIG9mIHRoZSBvdXRlciBjaXJjbGUgc2hvdWxkIHRoZSBsYWJlbHMgYmUgcGxhY2VkXG4gICAgICB3cmFwV2lkdGg6IDc1LCAvLyBUaGUgbnVtYmVyIG9mIHBpeGVscyBhZnRlciB3aGljaCBhIGxhYmVsIG5lZWRzIHRvIGJlIGdpdmVuIGEgbmV3IGxpbmVcbiAgICAgIG9wYWNpdHlBcmVhOiAwLjEwLCAvLyBUaGUgb3BhY2l0eSBvZiB0aGUgYXJlYSBvZiB0aGUgYmxvYlxuICAgICAgZG90UmFkaXVzOiA0LCAvLyBUaGUgc2l6ZSBvZiB0aGUgY29sb3JlZCBjaXJjbGVzIG9mIGVhY2ggYmxvZ1xuICAgICAgb3BhY2l0eUNpcmNsZXM6IDAuMSwgLy8gVGhlIG9wYWNpdHkgb2YgdGhlIGNpcmNsZXMgb2YgZWFjaCBibG9iXG4gICAgICBzdHJva2VXaWR0aDogMiwgLy8gVGhlIHdpZHRoIG9mIHRoZSBzdHJva2UgYXJvdW5kIGVhY2ggYmxvYlxuICAgICAgcm91bmRTdHJva2VzOiB0cnVlLCAvLyBJZiB0cnVlIHRoZSBhcmVhIGFuZCBzdHJva2Ugd2lsbCBmb2xsb3cgYSByb3VuZCBwYXRoIChjYXJkaW5hbC1jbG9zZWQpXG4gICAgICBjb2xvcjogZDMuc2NhbGVPcmRpbmFsKGQzLnNjaGVtZUNhdGVnb3J5MTApLCAvLyBDb2xvciBmdW5jdGlvbixcbiAgICAgIGZvcm1hdDogJy4yJywgLy8gVGhlIGZvcm1hdCBzdHJpbmcgdG8gYmUgdXNlZCBieSBkMy5mb3JtYXRcbiAgICAgIHVuaXQ6ICclJywgLy8gVGhlIHVuaXQgdG8gZGlzcGxheSBhZnRlciB0aGUgbnVtYmVyIG9uIHRoZSBheGlzIGFuZCBwb2ludCB0b29sdGlwcyAobGlrZSAkLCDigqwsICUsIGV0YylcbiAgICAgIGxlZ2VuZDogZmFsc2UsXG4gICAgICBhbGxvd0ludmVyc2VEYXRhOiB0cnVlLFxuICAgIH07XG4gICAgdGhpcy5jZmcgPSBjZmc7XG4gICAgLy8gUHV0IGFsbCBvZiB0aGUgb3B0aW9ucyBpbnRvIGEgdmFyaWFibGUgY2FsbGVkIGNmZ1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IG9wdHNfa2V5ID0gT2JqZWN0LmtleXMob3B0aW9ucyk7XG4gICAgICBmb3IgKGxldCBpID0gMCwgbGVuX2kgPSBvcHRzX2tleS5sZW5ndGg7IGkgPCBsZW5faTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGsgPSBvcHRzX2tleVtpXTtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zW2tdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNmZ1trXSA9IG9wdGlvbnNba107XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5pbnZlcnNlZEF4aXMgPSBuZXcgU2V0KCk7XG4gICAgdGhpcy5nID0gc3ZnX2Jhci5hcHBlbmQoJ2cnKVxuICAgICAgLmF0dHIoJ2lkJywgJ1JhZGFyR3JwJylcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7Y2ZnLncgLyAyICsgY2ZnLm1hcmdpbi5sZWZ0fSwke2NmZy5oIC8gMiArIGNmZy5tYXJnaW4udG9wfSlgKTtcblxuICAgIHRoaXMucHJlcGFyZURhdGEoZGF0YSk7XG4gICAgdGhpcy5kcmF3QXhpc0dyaWQoKTtcbiAgICB0aGlzLmRyYXdBcmVhKCk7XG5cbiAgICB0aGlzLmNvbXBsZXR1ZGUgPSBuZXcgQ29tcGxldHVkZVNlY3Rpb24oKTtcbiAgICAvLyBDb21wdXRlIHRoZSBcImNvbXBsw6l0dWRlXCIgdmFsdWUgZm9yIHRoZXNlIHJhdGlvczpcbiAgICB0aGlzLmNvbXBsZXR1ZGUudXBkYXRlKFxuICAgICAgY2FsY0NvbXBsZXR1ZGVTdWJzZXQoYXBwLCB0aGlzLnZhcmlhYmxlcywgJ2FycmF5JyksXG4gICAgICBjYWxjUG9wQ29tcGxldHVkZVN1YnNldChhcHAsIHRoaXMudmFyaWFibGVzKSk7XG4gICAgYXBwLmNvbG9yc1thcHAuY3VycmVudF9jb25maWcubXlfcmVnaW9uXSA9IGNvbG9yX2hpZ2hsaWdodDtcbiAgICBpZiAoY2ZnLmFsbG93SW52ZXJzZURhdGEpIHtcbiAgICAgIHRoaXMuaW52ZXJzZV9kYXRhID0gKGZpZWxkKSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGFfbGVuZ3RoID0gdGhpcy5kYXRhLmxlbmd0aDtcbiAgICAgICAgaWYgKCFmaWVsZCkge1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YV9sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgYXggPSB0aGlzLmRhdGFbaV0uYXhlcztcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYXgubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgYXhbal0udmFsdWUgPSAxMDAgLSBheFtqXS52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhX2xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBheCA9IHRoaXMuZGF0YVtpXS5heGVzO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBheC5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICBpZiAoYXhbal0uYXhpcyA9PT0gZmllbGQpIHtcbiAgICAgICAgICAgICAgICBheFtqXS52YWx1ZSA9IDEwMCAtIGF4W2pdLnZhbHVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICB9O1xuICAgIH1cbiAgICB0aGlzLm1ha2VUYWJsZVN0YXQoKTtcbiAgfVxuXG4gIGFkZF9lbGVtZW50KGVsZW0pIHtcbiAgICBjb25zdCBuX2F4aXMgPSBlbGVtLmF4ZXMubWFwKGkgPT4gaS5heGlzKTtcbiAgICBpZiAoIShKU09OLnN0cmluZ2lmeShuX2F4aXMuc29ydCgpKSA9PT0gSlNPTi5zdHJpbmdpZnkodGhpcy5hbGxBeGlzLnNvcnQoKSkpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIGVsZW1lbnQgd2l0aCBzYW1lIGF4ZXMgbmFtZSB0aGFuIGV4aXN0aW5nIGRhdGEuJyk7XG4gICAgfVxuICAgIGVsZW0uYXhlcy5mb3JFYWNoKChmdCkgPT4ge1xuICAgICAgaWYgKHRoaXMuaW52ZXJzZWRBeGlzLmhhcyhmdC5heGlzKSkge1xuICAgICAgICBmdC52YWx1ZSA9IDEwMCAtIGZ0LnZhbHVlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5kYXRhLnB1c2goZWxlbSk7XG4gICAgY29uc3QgY29sb3JzX2luX3VzZSA9IE9iamVjdC5rZXlzKGFwcC5jb2xvcnMpLm1hcChrID0+IGFwcC5jb2xvcnNba10pO1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5kYXRhLmxlbmd0aDsgaisrKSB7XG4gICAgICBjb25zdCBvbl9heGVzID0gW107XG4gICAgICBpZiAodGhpcy5pZF9teV9yZWdpb24gPT09IHRoaXMuZGF0YVtqXS5uYW1lKSBhcHAuY29sb3JzW3RoaXMuZGF0YVtqXS5uYW1lXSA9IGNvbG9yX2hpZ2hsaWdodDtcbiAgICAgIGVsc2UgaWYgKCFhcHAuY29sb3JzW3RoaXMuZGF0YVtqXS5uYW1lXSkge1xuICAgICAgICBsZXQgaWkgPSAwO1xuICAgICAgICB3aGlsZSAoaWkrKyA8IDIxKSB7XG4gICAgICAgICAgY29uc3QgYyA9IHRoaXMuY2ZnLmNvbG9yKGlpKTtcbiAgICAgICAgICBpZiAoIShjb2xvcnNfaW5fdXNlLmluZGV4T2YoYykgPiAtMSkpIHtcbiAgICAgICAgICAgIGFwcC5jb2xvcnNbdGhpcy5kYXRhW2pdLm5hbWVdID0gYztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kYXRhW2pdLmF4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5kYXRhW2pdLmF4ZXNbaV0uaWQgPSB0aGlzLmRhdGFbal0ubmFtZTtcbiAgICAgICAgb25fYXhlcy5wdXNoKHRoaXMuZGF0YVtqXS5uYW1lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5kaXNwbGF5ZWRfaWRzLnB1c2goZWxlbS5uYW1lKTtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICBjb25zdCBjZmcgPSB0aGlzLmNmZztcblxuICAgIGNvbnN0IGJsb2JXcmFwcGVyID0gdGhpcy5nXG4gICAgICAuaW5zZXJ0KCdnJywgJy5yYWRhckNpcmNsZVdyYXBwZXInKVxuICAgICAgLmF0dHIoJ2lkJywgZWxlbS5uYW1lLmluZGV4T2YoJyAnKSA+IC0xID8gJ2N0eCcgOiBlbGVtLm5hbWUpXG4gICAgICAuYXR0cignY2xhc3MnLCAncmFkYXJXcmFwcGVyJyk7XG5cbiAgICAvLyBBcHBlbmQgdGhlIGJhY2tncm91bmRzXG4gICAgYmxvYldyYXBwZXJcbiAgICAgIC5hcHBlbmQoJ3BhdGgnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ3JhZGFyQXJlYScpXG4gICAgICAuYXR0cignZCcsIHRoaXMucmFkYXJMaW5lKGVsZW0uYXhlcykpXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCBhcHAuY29sb3JzW2VsZW0ubmFtZV0pXG4gICAgICAuc3R5bGUoJ2ZpbGwtb3BhY2l0eScsIGNmZy5vcGFjaXR5QXJlYSlcbiAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBEaW0gYWxsIGJsb2JzXG4gICAgICAgIHNlbGYuZy5zZWxlY3RBbGwoJy5yYWRhckFyZWEnKVxuICAgICAgICAgIC50cmFuc2l0aW9uKCkuZHVyYXRpb24oMjAwKVxuICAgICAgICAgIC5zdHlsZSgnZmlsbC1vcGFjaXR5JywgMCk7XG4gICAgICAgIC8vIEJyaW5nIGJhY2sgdGhlIGhvdmVyZWQgb3ZlciBibG9iXG4gICAgICAgIGQzLnNlbGVjdCh0aGlzKVxuICAgICAgICAgIC50cmFuc2l0aW9uKCkuZHVyYXRpb24oMjAwKVxuICAgICAgICAgIC5zdHlsZSgnZmlsbC1vcGFjaXR5JywgMC4zKTtcbiAgICAgIH0pXG4gICAgICAub24oJ21vdXNlb3V0JywgKCkgPT4ge1xuICAgICAgICAvLyBCcmluZyBiYWNrIGFsbCBibG9ic1xuICAgICAgICBzZWxmLmcuc2VsZWN0QWxsKCcucmFkYXJBcmVhJylcbiAgICAgICAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKDIwMClcbiAgICAgICAgICAuc3R5bGUoJ2ZpbGwtb3BhY2l0eScsIGNmZy5vcGFjaXR5QXJlYSk7XG4gICAgICB9KVxuICAgICAgLm9uKCdjbGljaycsIChkKSA9PiB7XG4gICAgICAgIGNvbnN0IGZ0X2lkID0gZC5uYW1lO1xuICAgICAgICBzZWxmLm1hcF9lbGVtLnRhcmdldF9sYXllclxuICAgICAgICAgIC5zZWxlY3RBbGwoJ3BhdGgnKVxuICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uIChmdCkge1xuICAgICAgICAgICAgaWYgKGZ0LmlkID09PSBmdF9pZCkge1xuICAgICAgICAgICAgICBjb25zdCBjbG9uZWQgPSB0aGlzLmNsb25lTm9kZSgpO1xuICAgICAgICAgICAgICBjbG9uZWQuc3R5bGUuc3Ryb2tlID0gJ3llbGxvdyc7XG4gICAgICAgICAgICAgIGNsb25lZC5zdHlsZS5zdHJva2VXaWR0aCA9ICcyLjI1cHgnO1xuICAgICAgICAgICAgICBjbG9uZWQuY2xhc3NMaXN0LmFkZCgnY2xvbmVkJyk7XG4gICAgICAgICAgICAgIHNlbGYubWFwX2VsZW0ubGF5ZXJzLm5vZGUoKS5hcHBlbmRDaGlsZChjbG9uZWQpO1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBjbG9uZWQucmVtb3ZlKCk7XG4gICAgICAgICAgICAgIH0sIDUwMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIG91dGxpbmVzXG4gICAgYmxvYldyYXBwZXIuYXBwZW5kKCdwYXRoJylcbiAgICAgIC5hdHRyKCdjbGFzcycsICdyYWRhclN0cm9rZScpXG4gICAgICAuYXR0cignZCcsIHRoaXMucmFkYXJMaW5lKGVsZW0uYXhlcykpXG4gICAgICAuc3R5bGUoJ3N0cm9rZS13aWR0aCcsIGAke2NmZy5zdHJva2VXaWR0aH1weGApXG4gICAgICAuc3R5bGUoJ3N0cm9rZScsIGFwcC5jb2xvcnNbZWxlbS5uYW1lXSlcbiAgICAgIC5zdHlsZSgnZmlsbCcsICdub25lJylcbiAgICAgIC5zdHlsZSgnZmlsdGVyJywgJ3VybCgjZ2xvdyknKTtcblxuICAgIC8vIEFwcGVuZCB0aGUgY2lyY2xlc1xuICAgIGJsb2JXcmFwcGVyLnNlbGVjdEFsbCgnLnJhZGFyQ2lyY2xlJylcbiAgICAgIC5kYXRhKGVsZW0uYXhlcylcbiAgICAgIC5lbnRlcigpXG4gICAgICAuYXBwZW5kKCdjaXJjbGUnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ3JhZGFyQ2lyY2xlJylcbiAgICAgIC5hdHRyKCdyJywgY2ZnLmRvdFJhZGl1cylcbiAgICAgIC5hdHRyKCdjeCcsIChkLCBpKSA9PiB0aGlzLnJTY2FsZShkLnZhbHVlKSAqIG1hdGhfY29zKHRoaXMuYW5nbGVTbGljZSAqIGkgLSBIQUxGX1BJKSlcbiAgICAgIC5hdHRyKCdjeScsIChkLCBpKSA9PiB0aGlzLnJTY2FsZShkLnZhbHVlKSAqIG1hdGhfc2luKHRoaXMuYW5nbGVTbGljZSAqIGkgLSBIQUxGX1BJKSlcbiAgICAgIC5zdHlsZSgnZmlsbCcsIGFwcC5jb2xvcnNbZWxlbS5uYW1lXSlcbiAgICAgIC5zdHlsZSgnZmlsbC1vcGFjaXR5JywgMC44KTtcblxuICAgIGJsb2JXcmFwcGVyLm5vZGUoKS5fX2RhdGFfXyA9IGVsZW07XG5cbiAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gLy8vLy8vIEFwcGVuZCBpbnZpc2libGUgY2lyY2xlcyBmb3IgdG9vbHRpcCAvLy8vLy8vLy8vL1xuICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgIC8vIFdyYXBwZXIgZm9yIHRoZSBpbnZpc2libGUgY2lyY2xlcyBvbiB0b3BcbiAgICBjb25zdCBibG9iQ2lyY2xlV3JhcHBlciA9IHRoaXMuZ1xuICAgICAgLmluc2VydCgnZycsICcudG9vbHRpcCcpXG4gICAgICAuYXR0cignaWQnLCBlbGVtLm5hbWUuaW5kZXhPZignICcpID4gLTEgPyAnY3R4JyA6IGVsZW0ubmFtZSlcbiAgICAgIC5hdHRyKCdjbGFzcycsICdyYWRhckNpcmNsZVdyYXBwZXInKTtcblxuICAgIGJsb2JDaXJjbGVXcmFwcGVyLm5vZGUoKS5fX2RhdGFfXyA9IGVsZW07XG5cbiAgICAvLyBBcHBlbmQgYSBzZXQgb2YgaW52aXNpYmxlIGNpcmNsZXMgb24gdG9wIGZvciB0aGUgbW91c2VvdmVyIHBvcC11cFxuICAgIGJsb2JDaXJjbGVXcmFwcGVyLnNlbGVjdEFsbCgnLnJhZGFySW52aXNpYmxlQ2lyY2xlJylcbiAgICAgIC5kYXRhKGVsZW0uYXhlcylcbiAgICAgIC5lbnRlcigpXG4gICAgICAuYXBwZW5kKCdjaXJjbGUnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ3JhZGFySW52aXNpYmxlQ2lyY2xlJylcbiAgICAgIC5hdHRyKCdyJywgY2ZnLmRvdFJhZGl1cyAqIDEuNSlcbiAgICAgIC5hdHRyKCdjeCcsIChkLCBpKSA9PiB0aGlzLnJTY2FsZShkLnZhbHVlKSAqIG1hdGhfY29zKHRoaXMuYW5nbGVTbGljZSAqIGkgLSBIQUxGX1BJKSlcbiAgICAgIC5hdHRyKCdjeScsIChkLCBpKSA9PiB0aGlzLnJTY2FsZShkLnZhbHVlKSAqIG1hdGhfc2luKHRoaXMuYW5nbGVTbGljZSAqIGkgLSBIQUxGX1BJKSlcbiAgICAgIC5zdHlsZSgnZmlsbCcsICdub25lJylcbiAgICAgIC5zdHlsZSgncG9pbnRlci1ldmVudHMnLCAnYWxsJylcbiAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgc2VsZi5nLnNlbGVjdCgnLnRvb2x0aXAnKVxuICAgICAgICAgIC5hdHRyKCd4JywgdGhpcy5jeC5iYXNlVmFsLnZhbHVlIC0gMTApXG4gICAgICAgICAgLmF0dHIoJ3knLCB0aGlzLmN5LmJhc2VWYWwudmFsdWUgLSAxMClcbiAgICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLnN0eWxlKCdkaXNwbGF5JywgJ2Jsb2NrJylcbiAgICAgICAgICAudGV4dChzZWxmLkZvcm1hdChkLnZhbHVlKSArIGNmZy51bml0KTtcbiAgICAgIH0pXG4gICAgICAub24oJ21vdXNlb3V0JywgKCkgPT4ge1xuICAgICAgICBzZWxmLmcuc2VsZWN0KCcudG9vbHRpcCcpLnRyYW5zaXRpb24oKVxuICAgICAgICAgIC5zdHlsZSgnZGlzcGxheScsICdub25lJykudGV4dCgnJyk7XG4gICAgICB9KTtcbiAgfVxuXG4gIGNoYW5nZU9yZGVyKCkge1xuICAgIHRoaXMuZGF0YSA9IHRoaXMuZGF0YS5zbGljZSgxLCB0aGlzLmRhdGEubGVuZ3RoKS5jb25jYXQodGhpcy5kYXRhLnNsaWNlKDAsIDEpKTtcbiAgICB0aGlzLnVwZGF0ZSgpO1xuICB9XG5cbiAgcHJlcGFyZURhdGEoZGF0YSkge1xuICAgIC8vIFNldCB0aGUgbWluaW11bSBudW1iZXIgb2YgdmFyaWFibGVzIHRvIGtlZXAgc2VsZWN0ZWQgZm9yIHRoaXMga2luZCBvZiBjaGFydDpcbiAgICBhcHAuY3VycmVudF9jb25maWcubmJfdmFyID0gMztcbiAgICB0aGlzLnZhcmlhYmxlcyA9IGFwcC5jdXJyZW50X2NvbmZpZy5yYXRpbztcbiAgICB0aGlzLnJlZl9kYXRhID0gZGF0YS5zbGljZSgpLmZpbHRlcihcbiAgICAgIGZ0ID0+IHRoaXMudmFyaWFibGVzLm1hcCh2ID0+ICEhZnRbdl0pLmV2ZXJ5KGQgPT4gZCA9PT0gdHJ1ZSkpO1xuICAgIHRoaXMucmFua192YXJpYWJsZXMgPSB0aGlzLnZhcmlhYmxlcy5tYXAoZCA9PiBgcHJfJHtkfWApO1xuICAgIHRoaXMudmFyaWFibGVzLmZvckVhY2goKGQsIGkpID0+IHtcbiAgICAgIGNvbXB1dGVQZXJjZW50aWxlUmFuayh0aGlzLnJlZl9kYXRhLCBkLCB0aGlzLnJhbmtfdmFyaWFibGVzW2ldKTtcbiAgICB9KTtcbiAgICB0aGlzLmRhdGEgPSBbcHJlcGFyZV9kYXRhX3JhZGFyX2RlZmF1bHQodGhpcy5yZWZfZGF0YSwgdGhpcy52YXJpYWJsZXMpXTtcbiAgICB0aGlzLmRpc3BsYXllZF9pZHMgPSB0aGlzLmRhdGEubWFwKGQgPT4gZC5uYW1lKTtcbiAgICB0aGlzLmN1cnJlbnRfaWRzID0gdGhpcy5yZWZfZGF0YS5tYXAoZCA9PiBkLmlkKTtcbiAgICB0aGlzLmlkX215X3JlZ2lvbiA9IGFwcC5jdXJyZW50X2NvbmZpZy5teV9yZWdpb247XG5cbiAgICAvLyBJZiB0aGUgc3VwcGxpZWQgbWF4VmFsdWUgaXMgc21hbGxlciB0aGFuIHRoZSBhY3R1YWwgb25lLCByZXBsYWNlIGJ5IHRoZSBtYXggaW4gdGhlIGRhdGFcbiAgICBsZXQgbWF4VmFsdWUgPSAwO1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5kYXRhLmxlbmd0aDsgaisrKSB7XG4gICAgICBpZiAodGhpcy5pZF9teV9yZWdpb24gPT09IHRoaXMuZGF0YVtqXS5uYW1lKSBhcHAuY29sb3JzW3RoaXMuZGF0YVtqXS5uYW1lXSA9IGNvbG9yX2hpZ2hsaWdodDtcbiAgICAgIGVsc2UgYXBwLmNvbG9yc1t0aGlzLmRhdGFbal0ubmFtZV0gPSB0aGlzLmNmZy5jb2xvcihqICsgMSk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGF0YVtqXS5heGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuZGF0YVtqXS5heGVzW2ldLmlkID0gdGhpcy5kYXRhW2pdLm5hbWU7XG4gICAgICAgIGlmICh0aGlzLmRhdGFbal0uYXhlc1tpXS52YWx1ZSA+IG1heFZhbHVlKSB7XG4gICAgICAgICAgbWF4VmFsdWUgPSB0aGlzLmRhdGFbal0uYXhlc1tpXS52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMubWF4VmFsdWUgPSBtYXRoX21heCh0aGlzLmNmZy5tYXhWYWx1ZSwgbWF4VmFsdWUpO1xuICAgIHRoaXMuYWxsQXhpcyA9IHRoaXMuZGF0YVswXS5heGVzLm1hcChpID0+IGkuYXhpcyk7IC8vIE5hbWVzIG9mIGVhY2ggYXhpc1xuICAgIHRoaXMudG90YWwgPSB0aGlzLmFsbEF4aXMubGVuZ3RoOyAvLyBUaGUgbnVtYmVyIG9mIGRpZmZlcmVudCBheGVzXG4gICAgdGhpcy5yYWRpdXMgPSBNYXRoLm1pbih0aGlzLmNmZy53IC8gMiwgdGhpcy5jZmcuaCAvIDIpOyAvLyBSYWRpdXMgb2YgdGhlIG91dGVybW9zdCBjaXJjbGVcbiAgICB0aGlzLkZvcm1hdCA9IGQzLmZvcm1hdCh0aGlzLmNmZy5mb3JtYXQpOyAvLyBGb3JtYXR0aW5nXG4gICAgdGhpcy5hbmdsZVNsaWNlID0gTWF0aC5QSSAqIDIgLyB0aGlzLnRvdGFsOyAvLyBUaGUgd2lkdGggaW4gcmFkaWFucyBvZiBlYWNoIFwic2xpY2VcIlxuICAgIC8vIFNjYWxlIGZvciB0aGUgcmFkaXVzXG4gICAgdGhpcy5yU2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpXG4gICAgICAucmFuZ2UoWzAsIHRoaXMucmFkaXVzXSlcbiAgICAgIC5kb21haW4oWzAsIHRoaXMubWF4VmFsdWVdKTtcbiAgICAvLyBUaGUgcmFkaWFsIGxpbmUgZnVuY3Rpb25cbiAgICB0aGlzLnJhZGFyTGluZSA9IGQzLnJhZGlhbExpbmUoKVxuICAgICAgLmN1cnZlKHRoaXMuY2ZnLnJvdW5kU3Ryb2tlcyA/IGQzLmN1cnZlQ2FyZGluYWxDbG9zZWQgOiBkMy5jdXJ2ZUxpbmVhckNsb3NlZClcbiAgICAgIC5yYWRpdXMoZCA9PiB0aGlzLnJTY2FsZShkLnZhbHVlKSlcbiAgICAgIC5hbmdsZSgoZCwgaSkgPT4gaSAqIHRoaXMuYW5nbGVTbGljZSk7XG4gIH1cblxuICBkcmF3QXhpc0dyaWQoKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgY29uc3QgY2ZnID0gdGhpcy5jZmc7XG4gICAgY29uc3QgZyA9IHRoaXMuZztcbiAgICBjb25zdCByYWRpdXMgPSB0aGlzLnJhZGl1cztcbiAgICBjb25zdCBtYXhWYWx1ZSA9IHRoaXMubWF4VmFsdWU7XG4gICAgY29uc3QgclNjYWxlID0gdGhpcy5yU2NhbGU7XG4gICAgY29uc3QgYW5nbGVTbGljZSA9IHRoaXMuYW5nbGVTbGljZTtcblxuICAgIGNvbnN0IGxhYmVsQ2xpY2tlZCA9IGZ1bmN0aW9uIGxhYmVsQ2xpY2tlZCgpIHtcbiAgICAgIGNvbnN0IGl4ID0gK3RoaXMuaWQ7XG4gICAgICBpZiAoaXggKyAxID09PSBzZWxmLmFsbEF4aXMubGVuZ3RoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZi5kYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgc3dhcChzZWxmLmRhdGFbaV0uYXhlcywgaXgsIDApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBuZXdfaXggPSBpeCArIDE7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZi5kYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbW92ZShzZWxmLmRhdGFbaV0uYXhlcywgaXgsIG5ld19peCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHNlbGYudXBkYXRlKCk7XG4gICAgfTtcblxuICAgIGNvbnN0IGxhYmVsQ3R4TWVudSA9IGZ1bmN0aW9uIGxhYmVsQ3R4TWVudShsYWJlbCkge1xuICAgICAgaWYgKHNlbGYuaW52ZXJzZWRBeGlzLmhhcyhsYWJlbCkpIHtcbiAgICAgICAgc2VsZi5pbnZlcnNlZEF4aXMuZGVsZXRlKGxhYmVsKTtcbiAgICAgICAgdGhpcy5zdHlsZS5maWxsID0gJ2JsYWNrJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYuaW52ZXJzZWRBeGlzLmFkZChsYWJlbCk7XG4gICAgICAgIHRoaXMuc3R5bGUuZmlsbCA9ICdyZWQnO1xuICAgICAgfVxuICAgICAgZDMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBkMy5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgc2VsZi5pbnZlcnNlX2RhdGEobGFiZWwpO1xuICAgIH07XG5cbiAgICBjb25zdCBheGlzR3JpZCA9IGcuYXBwZW5kKCdnJykuYXR0cignY2xhc3MnLCAnYXhpc1dyYXBwZXInKTtcblxuICAgIC8vIERyYXcgdGhlIGJhY2tncm91bmQgY2lyY2xlc1xuICAgIGF4aXNHcmlkLnNlbGVjdEFsbCgnLmxldmVscycpXG4gICAgICAuZGF0YShkMy5yYW5nZSgxLCAoY2ZnLmxldmVscyArIDEpKS5yZXZlcnNlKCkpXG4gICAgICAuZW50ZXIoKVxuICAgICAgLmFwcGVuZCgnY2lyY2xlJylcbiAgICAgIC5hdHRycyhkID0+ICh7XG4gICAgICAgIGNsYXNzOiAnZ3JpZENpcmNsZScsXG4gICAgICAgIHI6IHJhZGl1cyAvIGNmZy5sZXZlbHMgKiBkLFxuICAgICAgfSkpXG4gICAgICAuc3R5bGVzKChkKSA9PiB7XG4gICAgICAgIGlmIChkID09PSA1KSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpbGw6ICcjQ0RDRENEJyxcbiAgICAgICAgICAgIHN0cm9rZTogJ3JnYigyNDUsIDEzOCwgMTM4KScsXG4gICAgICAgICAgICAnc3Ryb2tlLWRhc2hhcnJheSc6ICc1LCA1JyxcbiAgICAgICAgICAgICdmaWxsLW9wYWNpdHknOiBjZmcub3BhY2l0eUNpcmNsZXMsXG4gICAgICAgICAgICBmaWx0ZXI6ICd1cmwoI2dsb3cpJyxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZmlsbDogJyNDRENEQ0QnLFxuICAgICAgICAgIHN0cm9rZTogJyNDRENEQ0QnLFxuICAgICAgICAgICdmaWxsLW9wYWNpdHknOiBjZmcub3BhY2l0eUNpcmNsZXMsXG4gICAgICAgICAgZmlsdGVyOiAndXJsKCNnbG93KScsXG4gICAgICAgIH07XG4gICAgICB9KTtcblxuXG4gICAgLy8gLy8gVGV4dCBpbmRpY2F0aW5nIGF0IHdoYXQgJSBlYWNoIGxldmVsIGlzXG4gICAgLy8gYXhpc0dyaWQuc2VsZWN0QWxsKCcuYXhpc0xhYmVsJylcbiAgICAvLyAgIC5kYXRhKGQzLnJhbmdlKDEsIChjZmcubGV2ZWxzICsgMSkpLnJldmVyc2UoKSlcbiAgICAvLyAgIC5lbnRlcigpLmFwcGVuZCgndGV4dCcpXG4gICAgLy8gICAuYXR0cignY2xhc3MnLCAnYXhpc0xhYmVsJylcbiAgICAvLyAgIC5hdHRyKCd4JywgNClcbiAgICAvLyAgIC5hdHRyKCd5JywgZCA9PiAtZCAqIHJhZGl1cyAvIGNmZy5sZXZlbHMpXG4gICAgLy8gICAuYXR0cignZHknLCAnMC40ZW0nKVxuICAgIC8vICAgLnN0eWxlKCdmb250LXNpemUnLCAnMTBweCcpXG4gICAgLy8gICAuYXR0cignZmlsbCcsICcjNzM3MzczJylcbiAgICAvLyAgIC50ZXh0KGQgPT4gRm9ybWF0KG1heFZhbHVlICogZCAvIGNmZy5sZXZlbHMpICsgY2ZnLnVuaXQpO1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBzdHJhaWdodCBsaW5lcyByYWRpYXRpbmcgb3V0d2FyZCBmcm9tIHRoZSBjZW50ZXJcbiAgICBjb25zdCBheGlzID0gYXhpc0dyaWQuc2VsZWN0QWxsKCcuYXhpcycpXG4gICAgICAuZGF0YSh0aGlzLmFsbEF4aXMpXG4gICAgICAuZW50ZXIoKVxuICAgICAgLmFwcGVuZCgnZycpXG4gICAgICAuYXR0cignY2xhc3MnLCAnYXhpcycpO1xuICAgIC8vIEFwcGVuZCB0aGUgbGluZXNcbiAgICBheGlzLmFwcGVuZCgnbGluZScpXG4gICAgICAuYXR0cigneDEnLCAwKVxuICAgICAgLmF0dHIoJ3kxJywgMClcbiAgICAgIC5hdHRyKCd4MicsIChkLCBpKSA9PiByU2NhbGUobWF4VmFsdWUgKiAxLjEpICogbWF0aF9jb3MoYW5nbGVTbGljZSAqIGkgLSBIQUxGX1BJKSlcbiAgICAgIC5hdHRyKCd5MicsIChkLCBpKSA9PiByU2NhbGUobWF4VmFsdWUgKiAxLjEpICogbWF0aF9zaW4oYW5nbGVTbGljZSAqIGkgLSBIQUxGX1BJKSlcbiAgICAgIC5hdHRyKCdjbGFzcycsICdsaW5lJylcbiAgICAgIC5zdHlsZSgnc3Ryb2tlJywgJ3doaXRlJylcbiAgICAgIC5zdHlsZSgnc3Ryb2tlLXdpZHRoJywgJzJweCcpO1xuXG4gICAgLy8gQXBwZW5kIHRoZSBsYWJlbHMgYXQgZWFjaCBheGlzXG4gICAgYXhpcy5hcHBlbmQoJ3RleHQnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZCcpXG4gICAgICAuc3R5bGUoJ2ZvbnQtc2l6ZScsICcxMXB4JylcbiAgICAgIC5hdHRyKCdpZCcsIChkLCBpKSA9PiBpKVxuICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpXG4gICAgICAuYXR0cignZHknLCAnMC4zNWVtJylcbiAgICAgIC5hdHRyKCd4JywgKGQsIGkpID0+IHJTY2FsZShtYXhWYWx1ZSAqIGNmZy5sYWJlbEZhY3RvcikgKiBtYXRoX2NvcyhhbmdsZVNsaWNlICogaSAtIEhBTEZfUEkpKVxuICAgICAgLmF0dHIoJ3knLCAoZCwgaSkgPT4gclNjYWxlKG1heFZhbHVlICogY2ZnLmxhYmVsRmFjdG9yKSAqIG1hdGhfc2luKGFuZ2xlU2xpY2UgKiBpIC0gSEFMRl9QSSkpXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCBkID0+IChzZWxmLmludmVyc2VkQXhpcy5oYXMoZCkgPyAncmVkJyA6ICdibGFjaycpKVxuICAgICAgLnN0eWxlKCdjdXJzb3InLCAncG9pbnRlcicpXG4gICAgICAudGV4dChkID0+IGQpXG4gICAgICAub24oJ2NsaWNrJywgbGFiZWxDbGlja2VkKVxuICAgICAgLm9uKCdjb250ZXh0bWVudScsIGNmZy5hbGxvd0ludmVyc2VEYXRhID8gbGFiZWxDdHhNZW51IDogbnVsbClcbiAgICAgIC5jYWxsKHdyYXAsIGNmZy53cmFwV2lkdGgpO1xuXG4gICAgLy8gRmlsdGVyIGZvciB0aGUgb3V0c2lkZSBnbG93XG4gICAgY29uc3QgZmlsdGVyID0gZy5hcHBlbmQoJ2RlZnMnKVxuICAgICAgLmFwcGVuZCgnZmlsdGVyJylcbiAgICAgIC5hdHRyKCdpZCcsICdnbG93Jyk7XG4gICAgZmlsdGVyLmFwcGVuZCgnZmVHYXVzc2lhbkJsdXInKVxuICAgICAgLmF0dHIoJ3N0ZERldmlhdGlvbicsICcyLjUnKVxuICAgICAgLmF0dHIoJ3Jlc3VsdCcsICdjb2xvcmVkQmx1cicpO1xuICAgIGNvbnN0IGZlTWVyZ2UgPSBmaWx0ZXIuYXBwZW5kKCdmZU1lcmdlJyk7XG4gICAgZmVNZXJnZS5hcHBlbmQoJ2ZlTWVyZ2VOb2RlJykuYXR0cignaW4nLCAnY29sb3JlZEJsdXInKTtcbiAgICBmZU1lcmdlLmFwcGVuZCgnZmVNZXJnZU5vZGUnKS5hdHRyKCdpbicsICdTb3VyY2VHcmFwaGljJyk7XG5cbiAgICB0aGlzLmF4aXNHcmlkID0gYXhpc0dyaWQ7XG4gIH1cblxuICAvLyBoYW5kbGVMZWdlbmQoKSB7XG4gIC8vICAgY29uc3QgY2ZnID0gdGhpcy5jZmc7XG4gIC8vICAgaWYgKGNmZy5sZWdlbmQgIT09IGZhbHNlICYmIHR5cGVvZiBjZmcubGVnZW5kID09PSAnb2JqZWN0Jykge1xuICAvLyAgICAgY29uc3QgbmFtZXMgPSB0aGlzLmRhdGEubWFwKGVsID0+IGVsLm5hbWUpO1xuICAvLyAgICAgaWYgKGNmZy5sZWdlbmQudGl0bGUpIHtcbiAgLy8gICAgICAgdGhpcy5sZWdlbmRab25lLmFwcGVuZCgndGV4dCcpXG4gIC8vICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3RpdGxlJylcbiAgLy8gICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCAtMjApJylcbiAgLy8gICAgICAgICAuYXR0cigneCcsIGNmZy53IC0gNzApXG4gIC8vICAgICAgICAgLmF0dHIoJ3knLCAxMClcbiAgLy8gICAgICAgICAuYXR0cignZm9udC1zaXplJywgJzEycHgnKVxuICAvLyAgICAgICAgIC5hdHRyKCdmaWxsJywgJyM0MDQwNDAnKVxuICAvLyAgICAgICAgIC50ZXh0KGNmZy5sZWdlbmQudGl0bGUpO1xuICAvLyAgICAgfVxuICAvLyAgICAgY29uc3QgbGVnZW5kID0gdGhpcy5sZWdlbmRab25lXG4gIC8vICAgICAgIC5zZWxlY3RBbGwoJ2cnKVxuICAvLyAgICAgICAuZGF0YShuYW1lcyk7XG4gIC8vICAgICBjb25zdCBsZWdlbmRFbnRlciA9IGxlZ2VuZFxuICAvLyAgICAgICAuZW50ZXIoKVxuICAvLyAgICAgICAuYXBwZW5kKCdnJyk7XG4gIC8vXG4gIC8vICAgICAvLyBDcmVhdGUgcmVjdGFuZ2xlcyBtYXJrZXJzXG4gIC8vICAgICBsZWdlbmRFbnRlclxuICAvLyAgICAgICAuYXBwZW5kKCdyZWN0JylcbiAgLy8gICAgICAgLmF0dHJzKChkLCBpKSA9PiAoe1xuICAvLyAgICAgICAgIHg6IGNmZy53IC0gNjUsXG4gIC8vICAgICAgICAgeTogaSAqIDIwLFxuICAvLyAgICAgICAgIHdpZHRoOiAxMCxcbiAgLy8gICAgICAgICBoZWlnaHQ6IDEwLFxuICAvLyAgICAgICB9KSlcbiAgLy8gICAgICAgLnN0eWxlKCdmaWxsJywgZCA9PiBhcHAuY29sb3JzW2QubmFtZV0pO1xuICAvL1xuICAvLyAgICAgLy8gQ3JlYXRlIGxhYmVsc1xuICAvLyAgICAgbGVnZW5kRW50ZXJcbiAgLy8gICAgICAgLmFwcGVuZCgndGV4dCcpXG4gIC8vICAgICAgIC5hdHRycygoZCwgaSkgPT4gKHtcbiAgLy8gICAgICAgICB4OiBjZmcudyAtIDUyLFxuICAvLyAgICAgICAgIHk6IGkgKiAyMCArIDksXG4gIC8vICAgICAgICAgZmlsbDogJyM3MzczNzMnLFxuICAvLyAgICAgICAgICdmb250LXNpemUnOiAnMTFweCcsXG4gIC8vICAgICAgIH0pKVxuICAvLyAgICAgICAudGV4dChkID0+IGQpO1xuICAvL1xuICAvLyAgICAgbGVnZW5kLm1lcmdlKGxlZ2VuZEVudGVyKS5zZWxlY3RBbGwoJ3JlY3QnKVxuICAvLyAgICAgICAuYXR0cigneScsIChkLCBpKSA9PiBpICogMjApXG4gIC8vICAgICAgIC5zdHlsZSgnZmlsbCcsIGQgPT4gYXBwLmNvbG9yc1tkLm5hbWVdKTtcbiAgLy9cbiAgLy8gICAgIGxlZ2VuZC5tZXJnZShsZWdlbmRFbnRlcikuc2VsZWN0QWxsKCd0ZXh0JylcbiAgLy8gICAgICAgLmF0dHJzKChkLCBpKSA9PiAoe1xuICAvLyAgICAgICAgIHg6IGNmZy53IC0gNTIsXG4gIC8vICAgICAgICAgeTogaSAqIDIwICsgOSxcbiAgLy8gICAgICAgfSkpXG4gIC8vICAgICAgIC50ZXh0KGQgPT4gZCk7XG4gIC8vXG4gIC8vICAgICBsZWdlbmQuZXhpdCgpLnJlbW92ZSgpO1xuICAvLyAgIH1cbiAgLy8gfVxuXG4gIGRyYXdBcmVhKCkge1xuICAgIGNvbnN0IGNmZyA9IHRoaXMuY2ZnO1xuICAgIGNvbnN0IGcgPSB0aGlzLmc7XG4gICAgY29uc3QgRm9ybWF0ID0gdGhpcy5Gb3JtYXQ7XG4gICAgY29uc3QgclNjYWxlID0gdGhpcy5yU2NhbGU7XG4gICAgY29uc3QgYW5nbGVTbGljZSA9IHRoaXMuYW5nbGVTbGljZTtcblxuICAgIC8vIENyZWF0ZSBhIHdyYXBwZXIgZm9yIHRoZSBibG9ic1xuICAgIGNvbnN0IGJsb2JXcmFwcGVyID0gZy5zZWxlY3RBbGwoJy5yYWRhcldyYXBwZXInKVxuICAgICAgLmRhdGEodGhpcy5kYXRhLCBkID0+IGQubmFtZSlcbiAgICAgIC5lbnRlcigpXG4gICAgICAuYXBwZW5kKCdnJylcbiAgICAgIC5hdHRyKCdpZCcsIGQgPT4gKGQubmFtZS5pbmRleE9mKCcgJykgPiAtMSA/ICdjdHgnIDogZC5uYW1lKSlcbiAgICAgIC5hdHRyKCdjbGFzcycsICdyYWRhcldyYXBwZXInKTtcblxuICAgIC8vIEFwcGVuZCB0aGUgYmFja2dyb3VuZHNcbiAgICBibG9iV3JhcHBlclxuICAgICAgLmFwcGVuZCgncGF0aCcpXG4gICAgICAuYXR0cignY2xhc3MnLCAncmFkYXJBcmVhJylcbiAgICAgIC5hdHRyKCdkJywgZCA9PiB0aGlzLnJhZGFyTGluZShkLmF4ZXMpKVxuICAgICAgLnN0eWxlKCdmaWxsJywgZCA9PiBhcHAuY29sb3JzW2QubmFtZV0pXG4gICAgICAuc3R5bGUoJ2ZpbGwtb3BhY2l0eScsIGNmZy5vcGFjaXR5QXJlYSlcbiAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBEaW0gYWxsIGJsb2JzXG4gICAgICAgIGcuc2VsZWN0QWxsKCcucmFkYXJBcmVhJylcbiAgICAgICAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKDIwMClcbiAgICAgICAgICAuc3R5bGUoJ2ZpbGwtb3BhY2l0eScsIDAuMSk7XG4gICAgICAgIC8vIEJyaW5nIGJhY2sgdGhlIGhvdmVyZWQgb3ZlciBibG9iXG4gICAgICAgIGQzLnNlbGVjdCh0aGlzKVxuICAgICAgICAgIC50cmFuc2l0aW9uKCkuZHVyYXRpb24oMjAwKVxuICAgICAgICAgIC5zdHlsZSgnZmlsbC1vcGFjaXR5JywgMC43KTtcbiAgICAgIH0pXG4gICAgICAub24oJ21vdXNlb3V0JywgKCkgPT4ge1xuICAgICAgICBnLnNlbGVjdEFsbCgnLnJhZGFyQXJlYScpXG4gICAgICAgICAgLnRyYW5zaXRpb24oKS5kdXJhdGlvbigyMDApXG4gICAgICAgICAgLnN0eWxlKCdmaWxsLW9wYWNpdHknLCBjZmcub3BhY2l0eUFyZWEpO1xuICAgICAgfSk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIG91dGxpbmVzXG4gICAgYmxvYldyYXBwZXIuYXBwZW5kKCdwYXRoJylcbiAgICAgIC5hdHRyKCdjbGFzcycsICdyYWRhclN0cm9rZScpXG4gICAgICAuYXR0cignZCcsIGQgPT4gdGhpcy5yYWRhckxpbmUoZC5heGVzKSlcbiAgICAgIC5zdHlsZSgnc3Ryb2tlLXdpZHRoJywgYCR7Y2ZnLnN0cm9rZVdpZHRofXB4YClcbiAgICAgIC5zdHlsZSgnc3Ryb2tlJywgKGQsIGkpID0+IGFwcC5jb2xvcnNbZC5uYW1lXSlcbiAgICAgIC5zdHlsZSgnZmlsbCcsICdub25lJylcbiAgICAgIC5zdHlsZSgnZmlsdGVyJywgJ3VybCgjZ2xvdyknKTtcblxuICAgIC8vIEFwcGVuZCB0aGUgY2lyY2xlc1xuICAgIGJsb2JXcmFwcGVyLnNlbGVjdEFsbCgnLnJhZGFyQ2lyY2xlJylcbiAgICAgIC5kYXRhKGQgPT4gZC5heGVzKVxuICAgICAgLmVudGVyKClcbiAgICAgIC5hcHBlbmQoJ2NpcmNsZScpXG4gICAgICAuYXR0cignY2xhc3MnLCAncmFkYXJDaXJjbGUnKVxuICAgICAgLmF0dHIoJ3InLCBjZmcuZG90UmFkaXVzKVxuICAgICAgLmF0dHIoJ2N4JywgKGQsIGkpID0+IHJTY2FsZShkLnZhbHVlKSAqIG1hdGhfY29zKGFuZ2xlU2xpY2UgKiBpIC0gSEFMRl9QSSkpXG4gICAgICAuYXR0cignY3knLCAoZCwgaSkgPT4gclNjYWxlKGQudmFsdWUpICogbWF0aF9zaW4oYW5nbGVTbGljZSAqIGkgLSBIQUxGX1BJKSlcbiAgICAgIC5zdHlsZSgnZmlsbCcsIGQgPT4gYXBwLmNvbG9yc1tkLmlkXSlcbiAgICAgIC5zdHlsZSgnZmlsbC1vcGFjaXR5JywgMC44KTtcblxuICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyAvLy8vLy8gQXBwZW5kIGludmlzaWJsZSBjaXJjbGVzIGZvciB0b29sdGlwIC8vLy8vLy8vLy8vXG4gICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgLy8gV3JhcHBlciBmb3IgdGhlIGludmlzaWJsZSBjaXJjbGVzIG9uIHRvcFxuICAgIGNvbnN0IGJsb2JDaXJjbGVXcmFwcGVyID0gZy5zZWxlY3RBbGwoJy5yYWRhckNpcmNsZVdyYXBwZXInKVxuICAgICAgLmRhdGEodGhpcy5kYXRhLCBkID0+IGQubmFtZSlcbiAgICAgIC5lbnRlcigpXG4gICAgICAuYXBwZW5kKCdnJylcbiAgICAgIC5hdHRyKCdpZCcsIGQgPT4gKGQubmFtZS5pbmRleE9mKCcgJykgPiAtMSA/ICdjdHgnIDogZC5uYW1lKSlcbiAgICAgIC5hdHRyKCdjbGFzcycsICdyYWRhckNpcmNsZVdyYXBwZXInKTtcblxuICAgIC8vIEFwcGVuZCBhIHNldCBvZiBpbnZpc2libGUgY2lyY2xlcyBvbiB0b3AgZm9yIHRoZSBtb3VzZW92ZXIgcG9wLXVwXG4gICAgYmxvYkNpcmNsZVdyYXBwZXIuc2VsZWN0QWxsKCcucmFkYXJJbnZpc2libGVDaXJjbGUnKVxuICAgICAgLmRhdGEoZCA9PiBkLmF4ZXMpXG4gICAgICAuZW50ZXIoKVxuICAgICAgLmFwcGVuZCgnY2lyY2xlJylcbiAgICAgIC5hdHRyKCdjbGFzcycsICdyYWRhckludmlzaWJsZUNpcmNsZScpXG4gICAgICAuYXR0cigncicsIGNmZy5kb3RSYWRpdXMgKiAxLjUpXG4gICAgICAuYXR0cignY3gnLCAoZCwgaSkgPT4gclNjYWxlKGQudmFsdWUpICogbWF0aF9jb3MoYW5nbGVTbGljZSAqIGkgLSBIQUxGX1BJKSlcbiAgICAgIC5hdHRyKCdjeScsIChkLCBpKSA9PiByU2NhbGUoZC52YWx1ZSkgKiBtYXRoX3NpbihhbmdsZVNsaWNlICogaSAtIEhBTEZfUEkpKVxuICAgICAgLnN0eWxlKCdmaWxsJywgJ25vbmUnKVxuICAgICAgLnN0eWxlKCdwb2ludGVyLWV2ZW50cycsICdhbGwnKVxuICAgICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICBnLnNlbGVjdCgnLnRvb2x0aXAnKVxuICAgICAgICAgIC5hdHRyKCd4JywgdGhpcy5jeC5iYXNlVmFsLnZhbHVlIC0gMTApXG4gICAgICAgICAgLmF0dHIoJ3knLCB0aGlzLmN5LmJhc2VWYWwudmFsdWUgLSAxMClcbiAgICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgICAgLnN0eWxlKCdkaXNwbGF5JywgJ2Jsb2NrJylcbiAgICAgICAgICAudGV4dChGb3JtYXQoZC52YWx1ZSkgKyBjZmcudW5pdCk7XG4gICAgICB9KVxuICAgICAgLm9uKCdtb3VzZW91dCcsICgpID0+IHtcbiAgICAgICAgZy5zZWxlY3QoJy50b29sdGlwJykudHJhbnNpdGlvbigpXG4gICAgICAgICAgLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKS50ZXh0KCcnKTtcbiAgICAgIH0pO1xuXG4gICAgY29uc3QgdG9vbHRpcCA9IGcuYXBwZW5kKCd0ZXh0JylcbiAgICAgIC5hdHRycyh7IGNsYXNzOiAndG9vbHRpcCcsIHg6IDAsIHk6IDAsIGR5OiAnMC4zNWVtJywgJ3RleHQtYW5jaG9yJzogJ21pZGRsZScgfSlcbiAgICAgIC5zdHlsZXMoeyAnZm9udC1zaXplJzogJzEycHgnLCBkaXNwbGF5OiAnbm9uZScgfSk7XG4gIH1cblxuICB1cGRhdGUoKSB7XG4gICAgY29uc3QgclNjYWxlID0gdGhpcy5yU2NhbGU7XG4gICAgY29uc3QgbWF4VmFsdWUgPSB0aGlzLm1heFZhbHVlO1xuICAgIGNvbnN0IGNmZyA9IHRoaXMuY2ZnO1xuICAgIGNvbnN0IGFuZ2xlU2xpY2UgPSB0aGlzLmFuZ2xlU2xpY2U7XG4gICAgLy8gY29uc29sZS5sb2codGhpcy5jdXJyZW50X2lkcyk7XG4gICAgLy8gaWYgKG5ld19kYXRhKSB7XG4gICAgLy8gICBjb25zdCBuZXdfYXhpcyA9IG5ld19kYXRhWzBdLmF4ZXMubWFwKGVsZW0gPT4gZWxlbS5heGlzKTtcbiAgICAvLyAgIGlmICghKEpTT04uc3RyaW5naWZ5KG5ld19heGlzKSA9PT0gSlNPTi5zdHJpbmdpZnkodGhpcy5hbGxBeGlzKSkpIHtcbiAgICAvLyAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCBlbGVtZW50IHdpdGggc2FtZSBheGVzIG5hbWUgdGhhbiBleGlzdGluZyBkYXRhLicpO1xuICAgIC8vICAgfVxuICAgIC8vICAgdGhpcy5kYXRhID0gbmV3X2RhdGE7XG4gICAgLy8gICB0aGlzLmFsbEF4aXMgPSBuZXdfYXhpcztcbiAgICAvLyB9IGVsc2Uge1xuICAgIHRoaXMuYWxsQXhpcyA9IHRoaXMuZGF0YVswXS5heGVzLm1hcChlbGVtID0+IGVsZW0uYXhpcyk7XG4gICAgLy8gfVxuICAgIGNvbnN0IHVwZGF0ZV9heGlzID0gdGhpcy5heGlzR3JpZC5zZWxlY3RBbGwoJy5heGlzJylcbiAgICAgIC5kYXRhKHRoaXMuYWxsQXhpcyk7XG5cbiAgICBjb25zdCB0ID0gdGhpcy5nLnNlbGVjdEFsbCgnLnJhZGFyV3JhcHBlcicpXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuZHVyYXRpb24oMjI1KTtcblxuICAgIHVwZGF0ZV9heGlzLnNlbGVjdCgndGV4dC5sZWdlbmQnKVxuICAgICAgLmF0dHJzKChkLCBpKSA9PiAoe1xuICAgICAgICBpZDogaSxcbiAgICAgICAgeDogclNjYWxlKG1heFZhbHVlICogY2ZnLmxhYmVsRmFjdG9yKSAqIG1hdGhfY29zKGFuZ2xlU2xpY2UgKiBpIC0gSEFMRl9QSSksXG4gICAgICAgIHk6IHJTY2FsZShtYXhWYWx1ZSAqIGNmZy5sYWJlbEZhY3RvcikgKiBtYXRoX3NpbihhbmdsZVNsaWNlICogaSAtIEhBTEZfUEkpLFxuICAgICAgfSkpXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCBkID0+ICh0aGlzLmludmVyc2VkQXhpcy5oYXMoZCkgPyAncmVkJyA6ICdibGFjaycpKVxuICAgICAgLnN0eWxlKCdjdXJzb3InLCAncG9pbnRlcicpXG4gICAgICAudGV4dChkID0+IGQpXG4gICAgICAuY2FsbCh3cmFwLCBjZmcud3JhcFdpZHRoKTtcblxuICAgIGNvbnN0IHVwZGF0ZV9ibG9iV3JhcHBlciA9IHRoaXMuZy5zZWxlY3RBbGwoJy5yYWRhcldyYXBwZXInKVxuICAgICAgLmRhdGEodGhpcy5kYXRhLCBkID0+IGQubmFtZSk7XG5cbiAgICB1cGRhdGVfYmxvYldyYXBwZXIuc2VsZWN0KCcucmFkYXJBcmVhJylcbiAgICAgIC50cmFuc2l0aW9uKHQpXG4gICAgICAuYXR0cignZCcsIGQgPT4gdGhpcy5yYWRhckxpbmUoZC5heGVzKSk7XG5cbiAgICB1cGRhdGVfYmxvYldyYXBwZXIuc2VsZWN0KCcucmFkYXJTdHJva2UnKVxuICAgICAgLnRyYW5zaXRpb24odClcbiAgICAgIC5hdHRyKCdkJywgZCA9PiB0aGlzLnJhZGFyTGluZShkLmF4ZXMpKTtcblxuICAgIGNvbnN0IGNpcmNsZSA9IHVwZGF0ZV9ibG9iV3JhcHBlci5zZWxlY3RBbGwoJy5yYWRhckNpcmNsZScpXG4gICAgICAuZGF0YShkID0+IGQuYXhlcyk7XG4gICAgY2lyY2xlXG4gICAgICAudHJhbnNpdGlvbih0KVxuICAgICAgLmF0dHJzKChkLCBpKSA9PiAoe1xuICAgICAgICBjeDogclNjYWxlKGQudmFsdWUpICogbWF0aF9jb3MoYW5nbGVTbGljZSAqIGkgLSBIQUxGX1BJKSxcbiAgICAgICAgY3k6IHJTY2FsZShkLnZhbHVlKSAqIG1hdGhfc2luKGFuZ2xlU2xpY2UgKiBpIC0gSEFMRl9QSSksXG4gICAgICB9KSlcbiAgICAgIC5zdHlsZXMoZCA9PiAoe1xuICAgICAgICBmaWxsOiBhcHAuY29sb3JzW2QuaWRdLFxuICAgICAgICAnZmlsbC1vcGFjaXR5JzogMC44LFxuICAgICAgfSkpO1xuXG4gICAgY29uc3QgdXBkYXRlX2Jsb2JDaXJjbGVXcmFwcGVyID0gdGhpcy5nLnNlbGVjdEFsbCgnLnJhZGFyQ2lyY2xlV3JhcHBlcicpXG4gICAgICAuZGF0YSh0aGlzLmRhdGEsIGQgPT4gZC5uYW1lKTtcblxuICAgIGNvbnN0IGludmlzaWJsZUNpcmNsZSA9IHVwZGF0ZV9ibG9iQ2lyY2xlV3JhcHBlci5zZWxlY3RBbGwoJy5yYWRhckludmlzaWJsZUNpcmNsZScpXG4gICAgICAuZGF0YShkID0+IGQuYXhlcyk7XG4gICAgaW52aXNpYmxlQ2lyY2xlXG4gICAgICAudHJhbnNpdGlvbih0KVxuICAgICAgLmF0dHJzKChkLCBpKSA9PiAoe1xuICAgICAgICBjeDogclNjYWxlKGQudmFsdWUpICogbWF0aF9jb3MoYW5nbGVTbGljZSAqIGkgLSBIQUxGX1BJKSxcbiAgICAgICAgY3k6IHJTY2FsZShkLnZhbHVlKSAqIG1hdGhfc2luKGFuZ2xlU2xpY2UgKiBpIC0gSEFMRl9QSSksXG4gICAgICB9KSk7XG4gIH1cblxuICByb3VuZF9zdHJva2UodmFsKSB7XG4gICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5jZmcucm91bmRTdHJva2VzO1xuICAgIH0gZWxzZSBpZiAodmFsICE9PSB0aGlzLmNmZy5yb3VuZFN0cm9rZXMpIHtcbiAgICAgIHRoaXMuY2ZnLnJvdW5kU3Ryb2tlcyA9IHZhbDtcbiAgICAgIHRoaXMucmFkYXJMaW5lID0gZDMucmFkaWFsTGluZSgpXG4gICAgICAgIC5jdXJ2ZSh0aGlzLmNmZy5yb3VuZFN0cm9rZXMgPyBkMy5jdXJ2ZUNhcmRpbmFsQ2xvc2VkIDogZDMuY3VydmVMaW5lYXJDbG9zZWQpXG4gICAgICAgIC5yYWRpdXMoZCA9PiB0aGlzLnJTY2FsZShkLnZhbHVlKSlcbiAgICAgICAgLmFuZ2xlKChkLCBpKSA9PiBpICogdGhpcy5hbmdsZVNsaWNlKTtcbiAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG4gIH1cblxuICBiaW5kTWFwKG1hcF9lbGVtKSB7XG4gICAgdGhpcy5tYXBfZWxlbSA9IG1hcF9lbGVtO1xuICAgIHRoaXMubWFwX2VsZW0ucmVzZXRDb2xvcnModGhpcy5jdXJyZW50X2lkcyk7XG4gICAgdGhpcy5tYXBfZWxlbS5kaXNwbGF5TGVnZW5kKDIpO1xuICAgIHRoaXMudXBkYXRlTWFwUmVnaW8oKTtcbiAgfVxuXG4gIHJlbW92ZSgpIHtcbiAgICB0aGlzLnRhYmxlX3N0YXRzLnJlbW92ZSgpO1xuICAgIHRoaXMudGFibGVfc3RhdHMgPSBudWxsO1xuICAgIHRoaXMubWFwX2VsZW0ubGF5ZXJzLnNlbGVjdEFsbCgnLmNsb25lZCcpLnJlbW92ZSgpO1xuICAgIHRoaXMubWFwX2VsZW0udW5iaW5kQnJ1c2hDbGljaygpO1xuICAgIHRoaXMubWFwX2VsZW0gPSBudWxsO1xuICAgIGQzLnNlbGVjdCgnI3N2Z19iYXInKS5odG1sKCcnKTtcbiAgfVxuXG4gIHVwZGF0ZUNoYW5nZVJlZ2lvbigpIHtcbiAgICB0aGlzLmNoYW5nZVN0dWR5Wm9uZSgpO1xuICB9XG5cbiAgY2hhbmdlU3R1ZHlab25lKCkge1xuICAgIGNvbnN0IG9sZF9teV9yZWdpb24gPSB0aGlzLmlkX215X3JlZ2lvbjtcbiAgICBjb25zdCBvdGhlcl9mZWF0dXJlcyA9IHRoaXMuZGlzcGxheWVkX2lkcy5maWx0ZXIoZCA9PiBkICE9PSBvbGRfbXlfcmVnaW9uKTtcbiAgICB0aGlzLmcucmVtb3ZlKCk7XG4gICAgdGhpcy5nID0gc3ZnX2Jhci5hcHBlbmQoJ2cnKVxuICAgICAgLmF0dHIoJ2lkJywgJ1JhZGFyR3JwJylcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7dGhpcy5jZmcudyAvIDIgKyB0aGlzLmNmZy5tYXJnaW4ubGVmdH0sJHt0aGlzLmNmZy5oIC8gMiArIHRoaXMuY2ZnLm1hcmdpbi50b3B9KWApO1xuXG4gICAgdGhpcy5pZF9teV9yZWdpb24gPSBhcHAuY3VycmVudF9jb25maWcubXlfcmVnaW9uO1xuICAgIHRoaXMucHJlcGFyZURhdGEoYXBwLmN1cnJlbnRfZGF0YSk7XG4gICAgdGhpcy5kcmF3QXhpc0dyaWQoKTtcbiAgICB0aGlzLmRyYXdBcmVhKCk7XG4gICAgb3RoZXJfZmVhdHVyZXMuZm9yRWFjaCgoaWQpID0+IHtcbiAgICAgIGNvbnN0IGEgPSBwcmVwYXJlX2RhdGFfcmFkYXJfZnQodGhpcy5yZWZfZGF0YSwgdGhpcy52YXJpYWJsZXMsIGlkKTtcbiAgICAgIHRoaXMuYWRkX2VsZW1lbnQoYSk7XG4gICAgfSk7XG4gICAgdGhpcy51cGRhdGVNYXBSZWdpbygpO1xuICAgIHRoaXMudXBkYXRlQ29tcGxldHVkZSgpO1xuICAgIHRoaXMudXBkYXRlVGFibGVTdGF0KCk7XG4gIH1cblxuICBhZGRWYXJpYWJsZShjb2RlX3ZhcmlhYmxlLCBuYW1lX3ZhcmlhYmxlKSB7XG4gICAgY29uc3Qgb3RoZXJfZmVhdHVyZXMgPSB0aGlzLmRpc3BsYXllZF9pZHMuZmlsdGVyKGQgPT4gZCAhPT0gdGhpcy5pZF9teV9yZWdpb24pO1xuICAgIHRoaXMuZy5yZW1vdmUoKTtcbiAgICB0aGlzLmcgPSBzdmdfYmFyLmFwcGVuZCgnZycpXG4gICAgICAuYXR0cignaWQnLCAnUmFkYXJHcnAnKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHt0aGlzLmNmZy53IC8gMiArIHRoaXMuY2ZnLm1hcmdpbi5sZWZ0fSwke3RoaXMuY2ZnLmggLyAyICsgdGhpcy5jZmcubWFyZ2luLnRvcH0pYCk7XG5cbiAgICB0aGlzLnByZXBhcmVEYXRhKGFwcC5jdXJyZW50X2RhdGEpO1xuICAgIHRoaXMuZHJhd0F4aXNHcmlkKCk7XG4gICAgdGhpcy5kcmF3QXJlYSgpO1xuICAgIG90aGVyX2ZlYXR1cmVzLmZvckVhY2goKGlkKSA9PiB7XG4gICAgICBjb25zdCBhID0gcHJlcGFyZV9kYXRhX3JhZGFyX2Z0KHRoaXMucmVmX2RhdGEsIHRoaXMudmFyaWFibGVzLCBpZCk7XG4gICAgICB0aGlzLmFkZF9lbGVtZW50KGEpO1xuICAgIH0pO1xuICAgIHRoaXMudXBkYXRlQ29tcGxldHVkZSgpO1xuICAgIHRoaXMudXBkYXRlTWFwUmVnaW8oKTtcbiAgICB0aGlzLnVwZGF0ZVRhYmxlU3RhdCgpO1xuICB9XG5cbiAgcmVtb3ZlVmFyaWFibGUoY29kZV92YXJpYWJsZSkge1xuICAgIGNvbnN0IG90aGVyX2ZlYXR1cmVzID0gdGhpcy5kaXNwbGF5ZWRfaWRzLmZpbHRlcihkID0+IGQgIT09IHRoaXMuaWRfbXlfcmVnaW9uKTtcbiAgICB0aGlzLmcucmVtb3ZlKCk7XG4gICAgdGhpcy5nID0gc3ZnX2Jhci5hcHBlbmQoJ2cnKVxuICAgICAgLmF0dHIoJ2lkJywgJ1JhZGFyR3JwJylcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7dGhpcy5jZmcudyAvIDIgKyB0aGlzLmNmZy5tYXJnaW4ubGVmdH0sJHt0aGlzLmNmZy5oIC8gMiArIHRoaXMuY2ZnLm1hcmdpbi50b3B9KWApO1xuXG4gICAgdGhpcy5wcmVwYXJlRGF0YShhcHAuY3VycmVudF9kYXRhKTtcbiAgICB0aGlzLmRyYXdBeGlzR3JpZCgpO1xuICAgIHRoaXMuZHJhd0FyZWEoKTtcbiAgICBvdGhlcl9mZWF0dXJlcy5mb3JFYWNoKChpZCkgPT4ge1xuICAgICAgY29uc3QgYSA9IHByZXBhcmVfZGF0YV9yYWRhcl9mdCh0aGlzLnJlZl9kYXRhLCB0aGlzLnZhcmlhYmxlcywgaWQpO1xuICAgICAgdGhpcy5hZGRfZWxlbWVudChhKTtcbiAgICB9KTtcbiAgICB0aGlzLnVwZGF0ZUNvbXBsZXR1ZGUoKTtcbiAgICB0aGlzLnVwZGF0ZU1hcFJlZ2lvKCk7XG4gICAgdGhpcy51cGRhdGVUYWJsZVN0YXQoKTtcbiAgfVxuXG4gIHByZXBhcmVUYWJsZVN0YXQoKSB7XG4gICAgY29uc3QgYWxsX3ZhbHVlcyA9IHRoaXMudmFyaWFibGVzLm1hcCh2ID0+IHRoaXMucmVmX2RhdGEubWFwKGQgPT4gZFt2XSkpO1xuICAgIGNvbnN0IG15X3JlZ2lvbiA9IHRoaXMucmVmX2RhdGEuZmluZChkID0+IGQuaWQgPT09IHRoaXMuaWRfbXlfcmVnaW9uKTtcbiAgICBjb25zdCBmZWF0dXJlcyA9IGFsbF92YWx1ZXMubWFwKCh2YWx1ZXMsIGkpID0+ICh7XG4gICAgICBNaW46IGQzLm1pbih2YWx1ZXMpLFxuICAgICAgTWF4OiBkMy5tYXgodmFsdWVzKSxcbiAgICAgIE1veTogZ2V0TWVhbih2YWx1ZXMpLFxuICAgICAgTWVkOiBkMy5tZWRpYW4odmFsdWVzKSxcbiAgICAgIGlkOiB0aGlzLnZhcmlhYmxlc1tpXSxcbiAgICAgIFZhcmlhYmxlOiB0aGlzLnZhcmlhYmxlc1tpXSxcbiAgICAgICdNYSByw6lnaW9uJzogbXlfcmVnaW9uW3RoaXMudmFyaWFibGVzW2ldXSxcbiAgICB9KSk7XG4gICAgcmV0dXJuIGZlYXR1cmVzO1xuICB9XG5cbiAgaGFuZGxlQ2xpY2tNYXAoZCwgcGFyZW50KSB7XG4gICAgY29uc3QgaWQgPSBkLmlkO1xuICAgIGlmICh0aGlzLmN1cnJlbnRfaWRzLmluZGV4T2YoaWQpIDwgMCB8fCBpZCA9PT0gdGhpcy5pZF9teV9yZWdpb24pIHJldHVybjtcbiAgICBpZiAodGhpcy5kaXNwbGF5ZWRfaWRzLmluZGV4T2YoaWQpIDwgMCkge1xuICAgICAgaWYgKHRoaXMuZGF0YS5sZW5ndGggPiA2KSB7XG4gICAgICAgIGFsZXJ0aWZ5Lndhcm5pbmcoJ0xlIG5vbWJyZSBtYXhpbWFsIGRlIHLDqWdpb25zIHPDqWxlY3Rpb25uw6llcyBlc3QgYXR0ZWludC4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgYSA9IHByZXBhcmVfZGF0YV9yYWRhcl9mdCh0aGlzLnJlZl9kYXRhLCB0aGlzLnZhcmlhYmxlcywgaWQpO1xuICAgICAgdGhpcy5hZGRfZWxlbWVudChhKTtcbiAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFwcC5jb2xvcnNbaWRdID0gbnVsbDtcbiAgICAgIHRoaXMuZy5zZWxlY3RBbGwoYCMke2lkfS5yYWRhcldyYXBwZXJgKS5yZW1vdmUoKTtcbiAgICAgIHRoaXMuZy5zZWxlY3RBbGwoYCMke2lkfS5yYWRhckNpcmNsZVdyYXBwZXJgKS5yZW1vdmUoKTtcbiAgICAgIGNvbnN0IGl4ID0gdGhpcy5kYXRhLm1hcCgoX2QsIGkpID0+IFtpLCBfZC5uYW1lID09PSBpZF0pLmZpbmQoX2QgPT4gX2RbMV0gPT09IHRydWUpWzBdO1xuICAgICAgdGhpcy5kYXRhLnNwbGljZShpeCwgMSk7XG4gICAgICB0aGlzLmRpc3BsYXllZF9pZHMgPSB0aGlzLmRhdGEubWFwKF9kID0+IF9kLm5hbWUpO1xuICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVNYXBSZWdpbygpO1xuICB9XG5cbiAgdXBkYXRlQ29tcGxldHVkZSgpIHtcbiAgICB0aGlzLmNvbXBsZXR1ZGUudXBkYXRlKFxuICAgICAgY2FsY0NvbXBsZXR1ZGVTdWJzZXQoYXBwLCB0aGlzLnZhcmlhYmxlcywgJ2FycmF5JyksXG4gICAgICBjYWxjUG9wQ29tcGxldHVkZVN1YnNldChhcHAsIHRoaXMudmFyaWFibGVzKSk7XG4gIH1cblxuICB1cGRhdGVNYXBSZWdpbygpIHtcbiAgICBpZiAoIXRoaXMubWFwX2VsZW0pIHJldHVybjtcbiAgICB0aGlzLm1hcF9lbGVtLnRhcmdldF9sYXllci5zZWxlY3RBbGwoJ3BhdGgnKVxuICAgICAgLmF0dHIoJ2ZpbGwnLCBkID0+IChkLmlkID09PSB0aGlzLmlkX215X3JlZ2lvblxuICAgICAgICA/IGNvbG9yX2hpZ2hsaWdodFxuICAgICAgICA6IHRoaXMuY3VycmVudF9pZHMuaW5kZXhPZihkLmlkKSA+IC0xXG4gICAgICAgID8gKHRoaXMuZGlzcGxheWVkX2lkcy5pbmRleE9mKGQuaWQpID4gLTFcbiAgICAgICAgPyBhcHAuY29sb3JzW2QuaWRdIDogY29sb3JfY291bnRyaWVzKSA6IGNvbG9yX2Rpc2FibGVkKSk7XG4gIH1cblxuICB1cGRhdGVUYWJsZVN0YXQoKSB7XG4gICAgdGhpcy50YWJsZV9zdGF0cy5yZW1vdmVBbGwoKTtcbiAgICB0aGlzLnRhYmxlX3N0YXRzLmFkZEZlYXR1cmVzKHRoaXMucHJlcGFyZVRhYmxlU3RhdCgpKTtcbiAgfVxuXG4gIG1ha2VUYWJsZVN0YXQoKSB7XG4gICAgY29uc3QgZmVhdHVyZXMgPSB0aGlzLnByZXBhcmVUYWJsZVN0YXQoKTtcbiAgICB0aGlzLnRhYmxlX3N0YXRzID0gbmV3IFRhYmxlUmVzdW1lU3RhdChmZWF0dXJlcyk7XG4gIH1cblxuICBnZXRIZWxwTWVzc2FnZSgpIHtcbiAgICByZXR1cm4gYFxuPGgzPlBvc2l0aW9uICAtIDMgaW5kaWNhdGV1cnM8L2gzPlxuXG48Yj5BaWRlIGfDqW7DqXJhbGU8L2I+XG5cbkNlIGdyYXBoaXF1ZSBjb25zdHJ1aXQgdGVsIMKrwqB1bmUgY2libGXCoMK7IHBlcm1ldCBkZSByZXByw6lzZW50ZXIgbGEgcG9zaXRpb24gZGUgbOKAmXVuaXTDqSB0ZXJyaXRvcmlhbGUgZGUgcsOpZsOpcmVuY2UgcG91ciAzIMOgIDggaW5kaWNhdGV1cnMgc2ltdWx0YW7DqW1lbnQuIExlcyBjZXJjbGVzIGNvbmNlbnRyaXF1ZXMgcXVpIGNvbnN0aXR1ZW50IGxlIGdyYXBoaXF1ZSBleHByaW1lbnQgbGVzIGTDqWNpbGVzIGRlIGxhIGRpc3RyaWJ1dGlvbiBwb3VyIGNoYWN1biBkZXMgaW5kaWNhdGV1cnMgc8OpbGVjdGlvbm7DqXMgKHByZW1pZXIgY2VyY2xlID0gcHJlbWllciBkw6ljaWxlLCB2YWxldXJzIG1pbmltYWxlcyBwYXIgZMOpZmF1dCAvIGNlcmNsZSBleHTDqXJpZXVyID0gZGVybmllciBkw6ljaWxlLCB2YWxldXJzIG1heGltYWxlcyBwYXIgZMOpZmF1dCkuIExlcyBpbmRpY2F0ZXVycyByZXByw6lzZW50w6lzIHN1ciBjZSBncmFwaGlxdWUgc29udCBkZSBmYWl0IG5vcm1hbGlzw6lzIHNlbG9uIGxldXIgcmFuZyByZXNwZWN0aWYgZGFucyBsYSBkaXN0cmlidXRpb24gc3RhdGlzdGlxdWUgcG91ciBjaGFjdW4gZGVzIGluZGljYXRldXJzwqA6IDAgY29ycmVzcG9uZGFudCDDoCBsYSB2YWxldXIgbWluaW1hbGUgKDEwMMKgJSBkZXMgdW5pdMOpcyB0ZXJyaXRvcmlhbGVzIGRpc3Bvc2VudCBkZSB2YWxldXJzIHBsdXMgZm9ydGVzKSBldCAxMDAgbGEgdmFsZXVyIG1heGltYWxlICgxMDDCoCUgZGVzIHVuaXTDqSB0ZXJyaXRvcmlhbGVzIHNvbnQgY2FyYWN0w6lyaXPDqWVzIHBhciBkZXMgdmFsZXVycyBtb2lucyBmb3J0ZXMpLlxuXG5MZSBjZXJjbGUgcmVwcsOpc2VudMOpIGVuIHRpcmV0w6kgcm91Z2UgcmVwcsOpc2VudGUgbGEgdmFsZXVyIG3DqWRpYW5lICg1MCkgcG91ciBs4oCZZXNwYWNlIGTigJnDqXR1ZGUuIFNpIHBvdXIgdW4gaW5kaWNhdGV1ciBsYSB1bml0w6kgdGVycml0b3JpYWxlIHNlIHNpdHVlIMOgIGzigJlpbnTDqXJpZXVyIGRlIGNlIGNlcmNsZSwgY2VsYSBzaWduaWZpZSBxdWUgbGEgdmFsZXVyIHBvdXIgY2V0IGluZGljYXRldXIgc2Ugc2l0dWUgZW4tZGVzc291cyBkZSBsYSBtw6lkaWFuZSBkZSBs4oCZZXNwYWNlIGTigJnDqXR1ZGUuIFNpIHBvdXIgdW4gYXV0cmUgaW5kaWNhdGV1ciBsYSB1bml0w6kgdGVycml0b3JpYWxlIHNlIHNpdHVlIMOgIGzigJlleHTDqXJpZXVyIGRlIGNlIGNlcmNsZSwgY2VsYSBzaWduaWZpZSBxdWUgbGEgdmFsZXVyIHBvdXIgY2V0IGluZGljYXRldXIgc2Ugc2l0dWUgYXUgZGVzc3VzIGRlIGxhIG3DqWRpYW5lIGRlIGzigJllc3BhY2UgZOKAmcOpdHVkZS5cblxuSWwgZXN0IHBvc3NpYmxlIGRlIGNsaXF1ZXIgc3VyIGxhIGNhcnRlIHBvdXIgdmlzdWFsaXNlciBsZSBwb3NpdGlvbm5lbWVudCBk4oCZYXV0cmVzIHVuaXTDqXMgdGVycml0b3JpYWxlcyBwYXIgcmFwcG9ydCDDoCBs4oCZdW5pdMOpIHRlcnJpdG9yaWFsZSBkZSByw6lmw6lyZW5jZS4gSWwgZXN0IGTDqWNvbnNlaWxsw6kgZGUgcmVwcsOpc2VudGVyIHNpbXVsdGFuw6ltZW50IHBsdXMgZGUgMyB1bml0w6lzIHRlcnJpdG9yaWFsZXMgc3VyIGxlIG3Dqm1lIGdyYXBoaXF1ZSwgYXUgcmlzcXVlIGRlIHJlbmRyZSBzYSBsZWN0dXJlIGFsw6lhdG9pcmUuXG5cbkNlIG7igJllc3QgcGFzIHRhbnQgbGEgZm9ybWUgY3LDqcOpZSBzdXIgY2UgZ3JhcGhpcXVlIHF14oCZaWwgZmF1dCBhbmFseXNlciAobGEgZm9ybWUgZMOpcGVuZCBsYXJnZW1lbnQgZGUgbGEgcG9zaXRpb24gZGVzIGluZGljYXRldXJzIHN1ciBsZSBncmFwaGlxdWUsIGFsw6lhdG9pcmUgcGFyIGTDqWZpbml0aW9uKSBxdWUgbGEgcG9zaXRpb24gYXUgcmVnYXJkIGRlIGzigJllc3BhY2UgZGUgcsOpZsOpcmVuY2Ugb3UgZOKAmWF1dHJlcyB1bml0w6lzIHRlcnJpdG9yaWFsZXMgc8OpbGVjdGlvbm7DqWVzIHN1ciBsZSBncmFwaGlxdWUuIEzigJl1dGlsaXNhdGV1ciBwZXV0IGTDqHMgbG9ycyBpbnZlcnNlciBsZSBzZW5zIGR1IGNsYXNzZW1lbnQgKGNsaWMgZHJvaXQgc3VyIGxlIGxhYmVsIGRlIGzigJlpbmRpY2F0ZXVyLCBhZGFwdMOpIHBvdXIgZGVzIGluZGljYXRldXJzIGNvbW1lIGxlIHRhdXggZGUgY2jDtG1hZ2Ugb3UgdW4gdGF1eCDDqWxldsOpIG5lIHNpZ25pZmllIHBhcyBmb3Jjw6ltZW50IHVuZSBzaXR1YXRpb24gZmF2b3JhYmxlKSBvdSBwZXV0IGludmVyc2VyIGzigJlvcmRyZSBk4oCZYXBwYXJpdGlvbiBkZXMgdmFyaWFibGVzIHN1ciBsZSBncmFwaGlxdWUgKGNsaWMgZ2F1Y2hlKSBzaSBs4oCZb24gc291aGFpdGUgcGFyIGV4ZW1wbGUgcmFwcHJvY2hlciBkZXMgaW5kaWNhdGV1cnMgZGUgbcOqbWUgdGjDqW1hdGlxdWUgY8O0dGUgw6AgY8O0dGUuYDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgY29tcCwgbWF0aF9yb3VuZCwgbWF0aF9hYnMsIG1hdGhfc3FydCwgUHJvcFNpemVyLCBwcmVwYXJlVG9vbHRpcDIsIGdldE1lYW4gfSBmcm9tICcuLy4uL2hlbHBlcnMnO1xuaW1wb3J0IHsgY29sb3JfZGlzYWJsZWQsIGNvbG9yX2NvdW50cmllcywgY29sb3JfZGVmYXVsdF9kaXNzaW0sIGNvbG9yX2hpZ2hsaWdodCB9IGZyb20gJy4vLi4vb3B0aW9ucyc7XG5pbXBvcnQgeyBjYWxjUG9wQ29tcGxldHVkZVN1YnNldCwgY2FsY0NvbXBsZXR1ZGVTdWJzZXQgfSBmcm9tICcuLy4uL3ByZXBhcmVfZGF0YSc7XG4vLyBpbXBvcnQgeyBzdmdfbWFwIH0gZnJvbSAnLi8uLi9tYXAnO1xuaW1wb3J0IHsgYXBwLCByZXNldENvbG9ycywgdmFyaWFibGVzX2luZm8gfSBmcm9tICcuLy4uLy4uL21haW4nO1xuaW1wb3J0IFRhYmxlUmVzdW1lU3RhdCBmcm9tICcuLy4uL3RhYmxlUmVzdW1lU3RhdCc7XG5pbXBvcnQgQ29tcGxldHVkZVNlY3Rpb24gZnJvbSAnLi8uLi9jb21wbGV0dWRlJztcblxubGV0IHN2Z19iYXI7XG5sZXQgbWFyZ2luO1xubGV0IGJib3hfc3ZnO1xubGV0IHdpZHRoO1xubGV0IGhlaWdodDtcbmxldCBzdmdfY29udGFpbmVyO1xubGV0IHQ7XG5cbmNvbnN0IHVwZGF0ZURpbWVuc2lvbnMgPSAoKSA9PiB7XG4gIHN2Z19iYXIgPSBkMy5zZWxlY3QoJyNzdmdfYmFyJyk7XG4gIG1hcmdpbiA9IHsgdG9wOiAyMCwgcmlnaHQ6IDIwLCBib3R0b206IDQwLCBsZWZ0OiAzMCB9O1xuICBiYm94X3N2ZyA9IHN2Z19iYXIubm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICB3aWR0aCA9ICtiYm94X3N2Zy53aWR0aCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0O1xuICBoZWlnaHQgPSA1MDAgKiBhcHAucmF0aW9Ub1dpZGUgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTtcbiAgc3ZnX2Jhci5hdHRyKCdoZWlnaHQnLCBgJHs1MDAgKiBhcHAucmF0aW9Ub1dpZGV9cHhgKTtcbiAgc3ZnX2NvbnRhaW5lciA9IHN2Z19iYXIuYXBwZW5kKCdnJykuYXR0cignY2xhc3MnLCAnY29udGFpbmVyJyk7XG59O1xuXG5cbmV4cG9ydCBjbGFzcyBTaW1pbGFyaXR5MXBsdXMge1xuICBjb25zdHJ1Y3RvcihyZWZfZGF0YSkge1xuICAgIHVwZGF0ZURpbWVuc2lvbnMoKTtcbiAgICBhcHAuY2hhcnREcmF3UmF0aW8gPSBhcHAucmF0aW9Ub1dpZGU7XG4gICAgLy8gU2V0IHRoZSBtaW5pbXVtIG51bWJlciBvZiB2YXJpYWJsZXMgdG8ga2VlcCBzZWxlY3RlZCBmb3IgdGhpcyBraW5kIG9mIGNoYXJ0OlxuICAgIGFwcC5jdXJyZW50X2NvbmZpZy5uYl92YXIgPSAxO1xuICAgIHRoaXMucmF0aW9zID0gYXBwLmN1cnJlbnRfY29uZmlnLnJhdGlvO1xuICAgIHRoaXMubnVtcyA9IGFwcC5jdXJyZW50X2NvbmZpZy5udW07XG4gICAgdGhpcy5kYXRhID0gcmVmX2RhdGEuZmlsdGVyKGZ0ID0+IHRoaXMucmF0aW9zLm1hcCh2ID0+ICEhZnRbdl0pLmV2ZXJ5KHYgPT4gdiA9PT0gdHJ1ZSkpLnNsaWNlKCk7XG4gICAgdGhpcy5teV9yZWdpb24gPSB0aGlzLmRhdGEuZmluZChkID0+IGQuaWQgPT09IGFwcC5jdXJyZW50X2NvbmZpZy5teV9yZWdpb24pO1xuICAgIHRoaXMuZGF0YS5mb3JFYWNoKChmdCkgPT4ge1xuICAgICAgdGhpcy5yYXRpb3MuZm9yRWFjaCgodikgPT4ge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgZnRbYGRpc3RfJHt2fWBdID0gbWF0aF9hYnMoK2Z0W3ZdIC0gK3RoaXMubXlfcmVnaW9uW3ZdKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuY3VycmVudF9pZHMgPSB0aGlzLmRhdGEubWFwKGQgPT4gZC5pZCk7XG4gICAgcmVzZXRDb2xvcnMoKTtcbiAgICB0aGlzLmhpZ2hsaWdodF9zZWxlY3Rpb24gPSBbXTtcbiAgICB0aGlzLnNlcmllX2ludmVyc2VkID0gZmFsc2U7XG4gICAgdGhpcy5wcm9wb3J0aW9ubmFsX3N5bWJvbHMgPSBmYWxzZTtcbiAgICB0aGlzLmRyYXdfZ3JvdXAgPSBzdmdfY29udGFpbmVyXG4gICAgICAuYXBwZW5kKCdnJylcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7bWFyZ2luLmxlZnR9LCAke21hcmdpbi50b3B9KWApO1xuXG4gICAgLy8gUHJlcGFyZSB0aGUgdG9vbHRpcCBkaXNwbGF5ZWQgb24gbW91c2VvdmVyOlxuICAgIHRoaXMudG9vbHRpcCA9IHByZXBhcmVUb29sdGlwMihkMy5zZWxlY3Qoc3ZnX2Jhci5ub2RlKCkucGFyZW50RWxlbWVudCksIG51bGwpO1xuXG4gICAgdGhpcy5jb21wbGV0dWRlID0gbmV3IENvbXBsZXR1ZGVTZWN0aW9uKCk7XG4gICAgdGhpcy5jb21wbGV0dWRlLnVwZGF0ZShcbiAgICAgIGNhbGNDb21wbGV0dWRlU3Vic2V0KGFwcCwgdGhpcy5yYXRpb3MsICdhcnJheScpLFxuICAgICAgY2FsY1BvcENvbXBsZXR1ZGVTdWJzZXQoYXBwLCB0aGlzLnJhdGlvcykpO1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBidXR0b24gYWxsb3dpbmcgdG8gY2hvb3NlXG4gICAgLy8gaWYgdGhlIGNvbG9ycyBhcmUgaW52ZXJzZWRcbiAgICAvLyAobGlrZSBncmVlbi9yZWQgZm9yIHN1cGVyaW9yL2luZmVyaW9yIHJlZ2lvbnMpXG4gICAgc3ZnX2NvbnRhaW5lci5hcHBlbmQoJ2ltYWdlJylcbiAgICAgIC5hdHRycyh7XG4gICAgICAgIHg6IHdpZHRoICsgbWFyZ2luLmxlZnQgKyA1LFxuICAgICAgICB5OiAyMzIuNSxcbiAgICAgICAgd2lkdGg6IDE1LFxuICAgICAgICBoZWlnaHQ6IDE1LFxuICAgICAgICAneGxpbms6aHJlZic6ICdpbWcvcmV2ZXJzZV9wbHVzLnBuZycsXG4gICAgICAgIGlkOiAnaW1nX3JldmVyc2UnLFxuICAgICAgfSlcbiAgICAgIC5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2VyaWVfaW52ZXJzZWQgPSAhdGhpcy5zZXJpZV9pbnZlcnNlZDtcbiAgICAgICAgdGhpcy5hcHBseVNlbGVjdGlvbih0aGlzLmhpZ2hsaWdodF9zZWxlY3Rpb24ubGVuZ3RoKTtcbiAgICAgIH0pO1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBzZWN0aW9uIGNvbnRhaW5pbmcgdGhlIGlucHV0IGVsZW1lbnQgYWxsb3dpbmcgdG8gY2hvc2VcbiAgICAvLyBob3cgbWFueSBcImNsb3NlXCIgcmVnaW9ucyB3ZSB3YW50IHRvIGhpZ2hsaWdodC5cbiAgICBjb25zdCBtZW51X3NlbGVjdGlvbiA9IGQzLnNlbGVjdChzdmdfYmFyLm5vZGUoKS5wYXJlbnRFbGVtZW50KVxuICAgICAgLmFwcGVuZCgnZGl2JylcbiAgICAgIC5hdHRyKCdpZCcsICdtZW51X3NlbGVjdGlvbicpXG4gICAgICAuc3R5bGVzKHsgcG9zaXRpb246ICdyZWxhdGl2ZScsIGNvbG9yOiAnIzRmODFiZCcsICd0ZXh0LWFsaWduJzogJ2NlbnRlcicgfSk7XG4gICAgY29uc3Qgc2VsZWN0aW9uX2Nsb3NlID0gbWVudV9zZWxlY3Rpb24uYXBwZW5kKCdwJyk7XG4gICAgc2VsZWN0aW9uX2Nsb3NlLmFwcGVuZCgnc3BhbicpXG4gICAgICAuaHRtbCgnU8OpbGVjdGlvbiBkZXMnKTtcbiAgICBzZWxlY3Rpb25fY2xvc2UuYXBwZW5kKCdpbnB1dCcpXG4gICAgICAuYXR0cnMoeyBjbGFzczogJ25iX3NlbGVjdCcsIHR5cGU6ICdudW1iZXInIH0pXG4gICAgICAuc3R5bGVzKHsgY29sb3I6ICcjNGY4MWJkJywgJ21hcmdpbi1sZWZ0JzogJzFweCcgfSlcbiAgICAgIC5wcm9wZXJ0eSgndmFsdWUnLCA1KTtcbiAgICBzZWxlY3Rpb25fY2xvc2UuYXBwZW5kKCdzcGFuJylcbiAgICAgIC5odG1sKCdyw6lnaW9ucyBsZXMgcGx1cyBwcm9jaGVzJyk7XG4gICAgY29uc3Qgc2VjdGlvbiA9IG1lbnVfc2VsZWN0aW9uLmFwcGVuZCgnc2VjdGlvbicpXG4gICAgICAuYXR0cignY2xhc3MnLCAnc2xpZGVyLWNoZWNrYm94Jyk7XG4gICAgc2VjdGlvbi5hcHBlbmQoJ2lucHV0JylcbiAgICAgIC5hdHRycyh7IHR5cGU6ICdjaGVja2JveCcsIGlkOiAnY2hlY2tfcHJvcCcgfSk7XG4gICAgc2VjdGlvbi5hcHBlbmQoJ2xhYmVsJylcbiAgICAgIC5hdHRycyh7IGNsYXNzOiAnbGFiZWwgbm90X3NlbGVjdGVkJywgZm9yOiAnY2hlY2tfcHJvcCcgfSlcbiAgICAgIC50ZXh0KCdDZXJjbGVzIHByb3BvcnRpb25uZWxzIGF1IG51bcOpcmF0ZXVyJyk7XG5cbiAgICAvLyBjb25zdCBzd2l0Y2hfYnV0dG9uID0gbWVudV9zZWxlY3Rpb24uYXBwZW5kKCdwJylcbiAgICAvLyAgIC5hdHRyKCdjbGFzcycsICdidG4tc3dpdGNoJyk7XG4gICAgLy8gc3dpdGNoX2J1dHRvbi5hcHBlbmQoJ2lucHV0JylcbiAgICAvLyAgIC5hdHRycyh7IHR5cGU6ICdyYWRpbycsIGlkOiAneWVzJywgbmFtZTogJ3N3aXRjaCcsIGNsYXNzOiAnYnRuLXN3aXRjaF9fcmFkaW8gYnRuLXN3aXRjaF9fcmFkaW9feWVzJyB9KVxuICAgIC8vIHN3aXRjaF9idXR0b24uYXBwZW5kKCdpbnB1dCcpXG4gICAgLy8gICAuYXR0cnMoeyB0eXBlOiAncmFkaW8nLCBpZDogJ25vJywgbmFtZTogJ3N3aXRjaCcsIGNsYXNzOiAnYnRuLXN3aXRjaF9fcmFkaW8gYnRuLXN3aXRjaF9fcmFkaW9fbm8nIH0pXG4gICAgLy8gICAucHJvcGVydHkoJ2NoZWNrZWQnLCAnY2hlY2tlZCcpO1xuICAgIC8vIGNvbnN0IHllc19sYWJlbCA9IHN3aXRjaF9idXR0b24uYXBwZW5kKCdsYWJlbCcpXG4gICAgLy8gICAuYXR0cnMoeyBmb3I6ICd5ZXMnLCBjbGFzczogJ2J0bi1zd2l0Y2hfX2xhYmVsIGJ0bi1zd2l0Y2hfX2xhYmVsX3llcyd9KTtcbiAgICAvLyB5ZXNfbGFiZWwuYXBwZW5kKCdzcGFuJylcbiAgICAvLyAgIC5hdHRyKCdjbGFzcycsICdidG4tc3dpdGNoX190eHQnKVxuICAgIC8vICAgLmh0bWwoJyYjeGYwMGM7Jyk7XG4gICAgLy8gY29uc3Qgbm9fbGFiZWwgPSBzd2l0Y2hfYnV0dG9uLmFwcGVuZCgnbGFiZWwnKVxuICAgIC8vICAgLmF0dHJzKHsgZm9yOiAnbm8nLCBjbGFzczogJ2J0bi1zd2l0Y2hfX2xhYmVsIGJ0bi1zd2l0Y2hfX2xhYmVsX25vJyB9KTtcbiAgICAvLyBub19sYWJlbC5hcHBlbmQoJ3NwYW4nKVxuICAgIC8vICAgLmF0dHIoJ2NsYXNzJywgJ2J0bi1zd2l0Y2hfX3R4dCcpXG4gICAgLy8gICAuaHRtbCgnJiN4ZjAwZDsnKTtcblxuICAgIHRoaXMuYmluZE1lbnUoKTtcbiAgICB0aGlzLm1ha2VUYWJsZVN0YXQoKTtcbiAgfVxuXG4gIGFwcGx5U2VsZWN0aW9uKG5iKSB7XG4gICAgYXBwLmNvbG9ycyA9IHt9O1xuICAgIGlmIChuYiA+IDApIHtcbiAgICAgIHRoaXMuZGF0YS5mb3JFYWNoKChmdCkgPT4ge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgZnQuZGlzdCA9IG1hdGhfc3FydCh0aGlzLnJhdGlvcy5tYXAodiA9PiBgZGlzdF8ke3Z9YCkubWFwKHYgPT4gTWF0aC5wb3coZnRbdl0sIDIpKS5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiKSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuZGF0YS5zb3J0KChhLCBiKSA9PiBhLmRpc3QgLSBiLmRpc3QpO1xuICAgICAgdGhpcy5kYXRhLmZvckVhY2goKGVsLCBpKSA9PiB7IGVsLnJhbmsgPSBpOyB9KTtcbiAgICAgIHRoaXMuaGlnaGxpZ2h0X3NlbGVjdGlvbiA9IHRoaXMuZGF0YS5zbGljZSgxLCBuYiArIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhpZ2hsaWdodF9zZWxlY3Rpb24gPSBbXTtcbiAgICB9XG4gICAgdGhpcy5yZW1vdmVMaW5lcygpO1xuICAgIHRoaXMudXBkYXRlKCk7XG4gICAgdGhpcy51cGRhdGVNYXBSZWdpbygpO1xuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIGNvbnN0IGRhdGEgPSBzZWxmLmRhdGE7XG4gICAgY29uc3QgaGlnaGxpZ2h0X3NlbGVjdGlvbiA9IHNlbGYuaGlnaGxpZ2h0X3NlbGVjdGlvbjtcbiAgICBjb25zdCBuYl92YXJpYWJsZXMgPSBzZWxmLnJhdGlvcy5sZW5ndGg7XG4gICAgY29uc3Qgb2Zmc2V0ID0gaGVpZ2h0IC8gbmJfdmFyaWFibGVzICsgMTtcbiAgICBsZXQgaGVpZ2h0X3RvX3VzZSA9IG9mZnNldCAvIDI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYl92YXJpYWJsZXM7IGkrKykge1xuICAgICAgY29uc3QgcmF0aW9fbmFtZSA9IHNlbGYucmF0aW9zW2ldO1xuICAgICAgY29uc3Qgc2VsZWN0b3JfcmF0aW9fbmFtZSA9IGBsXyR7cmF0aW9fbmFtZX1gO1xuICAgICAgY29uc3QgbnVtX25hbWUgPSBzZWxmLm51bXNbaV07XG4gICAgICBjb25zdCBteV9yZWdpb25fdmFsdWUgPSBzZWxmLm15X3JlZ2lvbltyYXRpb19uYW1lXTtcbiAgICAgIGNvbnN0IHJhdGlvX3ZhbHVlcyA9IHRoaXMuZGF0YS5tYXAoZCA9PiBkW3JhdGlvX25hbWVdKTtcbiAgICAgIGxldCBnID0gdGhpcy5kcmF3X2dyb3VwLnNlbGVjdChgIyR7c2VsZWN0b3JfcmF0aW9fbmFtZX1gKTtcbiAgICAgIGxldCBheGlzID0gdGhpcy5kcmF3X2dyb3VwLnNlbGVjdChgZy5heGlzLS14LiR7c2VsZWN0b3JfcmF0aW9fbmFtZX1gKTtcbiAgICAgIGxldCBsYXllcl9vdGhlcjtcbiAgICAgIGxldCBsYXllcl9oaWdobGlnaHRlZDtcbiAgICAgIGlmICghZy5ub2RlKCkpIHtcbiAgICAgICAgZyA9IHRoaXMuZHJhd19ncm91cFxuICAgICAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgICAgIC5hdHRycyh7XG4gICAgICAgICAgICBpZDogc2VsZWN0b3JfcmF0aW9fbmFtZSxcbiAgICAgICAgICAgIG51bTogbnVtX25hbWUsXG4gICAgICAgICAgICBjbGFzczogJ2dycF92YXInLFxuICAgICAgICAgIH0pO1xuICAgICAgICBheGlzID0gZy5hcHBlbmQoJ2cnKVxuICAgICAgICAgIC5hdHRycyh7XG4gICAgICAgICAgICBjbGFzczogYGF4aXMgYXhpcy0teCAke3NlbGVjdG9yX3JhdGlvX25hbWV9YCxcbiAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgwLCAxMCknLFxuICAgICAgICAgIH0pO1xuICAgICAgICBnLmFwcGVuZCgndGV4dCcpXG4gICAgICAgICAgLmF0dHJzKHtcbiAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICB5OiAtNy41LFxuICAgICAgICAgICAgZmlsbDogJyM0ZjgxYmQnLFxuICAgICAgICAgICAgJ2ZvbnQtc2l6ZSc6ICcxMXB4JyxcbiAgICAgICAgICAgICdmb250LXdlaWdodCc6ICdib2xkJyxcbiAgICAgICAgICAgICdmb250LWZhbWlseSc6ICdcIlNpZ25pa2FcIixzYW5zLXNlcmlmJyxcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50ZXh0KHJhdGlvX25hbWUpO1xuICAgICAgICBsYXllcl9vdGhlciA9IGcuYXBwZW5kKCdnJykuYXR0cignY2xhc3MnLCAnb3RoZXJmZWF0dXJlJyk7XG4gICAgICAgIGxheWVyX2hpZ2hsaWdodGVkID0gZy5hcHBlbmQoJ2cnKS5hdHRyKCdjbGFzcycsICdoaWdobGlnaHRlZCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGF5ZXJfb3RoZXIgPSBnLnNlbGVjdCgnZy5vdGhlcmZlYXR1cmUnKTtcbiAgICAgICAgbGF5ZXJfaGlnaGxpZ2h0ZWQgPSBnLnNlbGVjdCgnZy5oaWdobGlnaHRlZCcpO1xuICAgICAgfVxuICAgICAgZy5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKDAsICR7aGVpZ2h0X3RvX3VzZX0pYCk7XG4gICAgICBsZXQgX21pbjtcbiAgICAgIGxldCBfbWF4O1xuICAgICAgdGhpcy5kYXRhLnNvcnQoKGEsIGIpID0+IGJbYGRpc3RfJHtyYXRpb19uYW1lfWBdIC0gYVtgZGlzdF8ke3JhdGlvX25hbWV9YF0pO1xuICAgICAgaWYgKGhpZ2hsaWdodF9zZWxlY3Rpb24ubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBkaXN0X2F4aXMgPSBNYXRoLm1heChcbiAgICAgICAgICBtYXRoX2FicyhteV9yZWdpb25fdmFsdWUgLSArZDMubWluKGhpZ2hsaWdodF9zZWxlY3Rpb24sIGQgPT4gZFtyYXRpb19uYW1lXSkpLFxuICAgICAgICAgIG1hdGhfYWJzKCtkMy5tYXgoaGlnaGxpZ2h0X3NlbGVjdGlvbiwgZCA9PiBkW3JhdGlvX25hbWVdKSAtIG15X3JlZ2lvbl92YWx1ZSkpO1xuICAgICAgICBjb25zdCBtYXJnaW5fbWluX21heCA9IG1hdGhfcm91bmQoZGlzdF9heGlzKSAvIDg7XG4gICAgICAgIF9taW4gPSBteV9yZWdpb25fdmFsdWUgLSBkaXN0X2F4aXMgLSBtYXJnaW5fbWluX21heDtcbiAgICAgICAgX21heCA9IG15X3JlZ2lvbl92YWx1ZSArIGRpc3RfYXhpcyArIG1hcmdpbl9taW5fbWF4O1xuICAgICAgICAvLyBpZiAoX21pbiA+IF9tYXgpIHsgW19taW4sIF9tYXhdID0gW19tYXgsIF9taW5dOyB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBkaXN0X2F4aXMgPSBNYXRoLm1heChcbiAgICAgICAgICBtYXRoX2FicyhteV9yZWdpb25fdmFsdWUgLSBkMy5taW4ocmF0aW9fdmFsdWVzKSksXG4gICAgICAgICAgbWF0aF9hYnMoZDMubWF4KHJhdGlvX3ZhbHVlcykgLSBteV9yZWdpb25fdmFsdWUpKTtcbiAgICAgICAgY29uc3QgbWFyZ2luX21pbl9tYXggPSBtYXRoX3JvdW5kKGRpc3RfYXhpcykgLyA4O1xuICAgICAgICBfbWluID0gbXlfcmVnaW9uX3ZhbHVlIC0gZGlzdF9heGlzIC0gbWFyZ2luX21pbl9tYXg7XG4gICAgICAgIF9tYXggPSBteV9yZWdpb25fdmFsdWUgKyBkaXN0X2F4aXMgKyBtYXJnaW5fbWluX21heDtcbiAgICAgIH1cbiAgICAgIHRoaXMuaGlnaGxpZ2h0X3NlbGVjdGlvbi5mb3JFYWNoKChlbGVtKSA9PiB7XG4gICAgICAgIGFwcC5jb2xvcnNbZWxlbS5pZF0gPSBjb21wKGVsZW1bcmF0aW9fbmFtZV0sIG15X3JlZ2lvbl92YWx1ZSwgdGhpcy5zZXJpZV9pbnZlcnNlZCk7XG4gICAgICB9KTtcblxuICAgICAgYXBwLmNvbG9yc1thcHAuY3VycmVudF9jb25maWcubXlfcmVnaW9uXSA9IGNvbG9yX2hpZ2hsaWdodDtcblxuICAgICAgY29uc3Qgc2l6ZV9mdW5jID0gdGhpcy5wcm9wb3J0aW9ubmFsX3N5bWJvbHMgPyBuZXcgUHJvcFNpemVyKGQzLm1heChkYXRhLCBkID0+IGRbbnVtX25hbWVdKSwgMzMpLnNjYWxlIDogKCkgPT4gNy41O1xuICAgICAgY29uc3QgeFNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxuICAgICAgICAuZG9tYWluKFtfbWluLCBfbWF4XSlcbiAgICAgICAgLnJhbmdlKFswLCB3aWR0aF0pO1xuXG4gICAgICBheGlzXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKDEyNSlcbiAgICAgICAgLmNhbGwoZDMuYXhpc0JvdHRvbSh4U2NhbGUpKTtcblxuICAgICAgY29uc3QgYnViYmxlczEgPSBsYXllcl9vdGhlci5zZWxlY3RBbGwoJy5idWJibGUnKVxuICAgICAgICAuZGF0YShkYXRhLmZpbHRlcihkID0+IGFwcC5jb2xvcnNbZC5pZF0gPT09IHVuZGVmaW5lZCksIGQgPT4gZC5pZCk7XG5cbiAgICAgIGJ1YmJsZXMxXG4gICAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKDEyNSlcbiAgICAgICAgLmF0dHJzKChkKSA9PiB7XG4gICAgICAgICAgbGV0IHhfdmFsdWUgPSB4U2NhbGUoZFtyYXRpb19uYW1lXSk7XG4gICAgICAgICAgaWYgKHhfdmFsdWUgPiB3aWR0aCkgeF92YWx1ZSA9IHdpZHRoICsgMjAwO1xuICAgICAgICAgIGVsc2UgaWYgKHhfdmFsdWUgPCAwKSB4X3ZhbHVlID0gLTIwMDtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmFuazogZC5yYW5rLFxuICAgICAgICAgICAgY3g6IHhfdmFsdWUsXG4gICAgICAgICAgICBjeTogMTAsXG4gICAgICAgICAgICByOiBzaXplX2Z1bmMoZFtudW1fbmFtZV0pLFxuICAgICAgICAgIH07XG4gICAgICAgIH0pXG4gICAgICAgIC5zdHlsZXMoZCA9PiAoe1xuICAgICAgICAgIGZpbGw6IGNvbG9yX2NvdW50cmllcyxcbiAgICAgICAgICAnZmlsbC1vcGFjaXR5JzogMC4xLFxuICAgICAgICAgIHN0cm9rZTogJ2RhcmtncmF5JyxcbiAgICAgICAgICAnc3Ryb2tlLXdpZHRoJzogMC43NSxcbiAgICAgICAgICAnc3Ryb2tlLW9wYWNpdHknOiAwLjc1LFxuICAgICAgICB9KSk7XG5cbiAgICAgIGJ1YmJsZXMxXG4gICAgICAgIC5lbnRlcigpXG4gICAgICAgIC5pbnNlcnQoJ2NpcmNsZScpXG4gICAgICAgIC5zdHlsZXMoZCA9PiAoe1xuICAgICAgICAgIGZpbGw6IGNvbG9yX2NvdW50cmllcyxcbiAgICAgICAgICAnZmlsbC1vcGFjaXR5JzogMC4xLFxuICAgICAgICAgIHN0cm9rZTogJ2RhcmtncmF5JyxcbiAgICAgICAgICAnc3Ryb2tlLXdpZHRoJzogMC43NSxcbiAgICAgICAgICAnc3Ryb2tlLW9wYWNpdHknOiAwLjc1LFxuICAgICAgICB9KSlcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oMTI1KVxuICAgICAgICAuYXR0cnMoKGQpID0+IHtcbiAgICAgICAgICBsZXQgeF92YWx1ZSA9IHhTY2FsZShkW3JhdGlvX25hbWVdKTtcbiAgICAgICAgICBpZiAoeF92YWx1ZSA+IHdpZHRoKSB4X3ZhbHVlID0gd2lkdGggKyAyMDA7XG4gICAgICAgICAgZWxzZSBpZiAoeF92YWx1ZSA8IDApIHhfdmFsdWUgPSAtMjAwO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByYW5rOiBkLnJhbmssXG4gICAgICAgICAgICBpZDogZC5pZCxcbiAgICAgICAgICAgIGNsYXNzOiAnYnViYmxlJyxcbiAgICAgICAgICAgIGN4OiB4X3ZhbHVlLFxuICAgICAgICAgICAgY3k6IDEwLFxuICAgICAgICAgICAgcjogc2l6ZV9mdW5jKGRbbnVtX25hbWVdKSxcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgYnViYmxlczEuZXhpdCgpLnRyYW5zaXRpb24oKS5kdXJhdGlvbigxMjUpLnJlbW92ZSgpO1xuXG4gICAgICBjb25zdCBidWJibGVzMiA9IGxheWVyX2hpZ2hsaWdodGVkLnNlbGVjdEFsbCgnLmJ1YmJsZScpXG4gICAgICAgIC5kYXRhKGRhdGEuZmlsdGVyKGQgPT4gYXBwLmNvbG9yc1tkLmlkXSAhPT0gdW5kZWZpbmVkKSwgZCA9PiBkLmlkKTtcblxuICAgICAgYnViYmxlczJcbiAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAuZHVyYXRpb24oMTI1KVxuICAgICAgICAuYXR0cnMoKGQpID0+IHtcbiAgICAgICAgICBsZXQgeF92YWx1ZSA9IHhTY2FsZShkW3JhdGlvX25hbWVdKTtcbiAgICAgICAgICBpZiAoeF92YWx1ZSA+IHdpZHRoKSB4X3ZhbHVlID0gd2lkdGggKyAyMDA7XG4gICAgICAgICAgZWxzZSBpZiAoeF92YWx1ZSA8IDApIHhfdmFsdWUgPSAtMjAwO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByYW5rOiBkLnJhbmssXG4gICAgICAgICAgICBjeDogeF92YWx1ZSxcbiAgICAgICAgICAgIGN5OiAxMCxcbiAgICAgICAgICAgIHI6IHNpemVfZnVuYyhkW251bV9uYW1lXSksXG4gICAgICAgICAgfTtcbiAgICAgICAgfSlcbiAgICAgICAgLnN0eWxlcyhkID0+ICh7XG4gICAgICAgICAgZmlsbDogYXBwLmNvbG9yc1tkLmlkXSxcbiAgICAgICAgICAnZmlsbC1vcGFjaXR5JzogZC5pZCA9PT0gYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbiA/IDEgOiAwLjcsXG4gICAgICAgICAgc3Ryb2tlOiAnZGFya2dyYXknLFxuICAgICAgICAgICdzdHJva2Utd2lkdGgnOiAwLjc1LFxuICAgICAgICAgICdzdHJva2Utb3BhY2l0eSc6IDAuNzUsXG4gICAgICAgIH0pKTtcblxuICAgICAgYnViYmxlczJcbiAgICAgICAgLmVudGVyKClcbiAgICAgICAgLmluc2VydCgnY2lyY2xlJylcbiAgICAgICAgLnN0eWxlcyhkID0+ICh7XG4gICAgICAgICAgZmlsbDogYXBwLmNvbG9yc1tkLmlkXSxcbiAgICAgICAgICAnZmlsbC1vcGFjaXR5JzogZC5pZCA9PT0gYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbiA/IDEgOiAwLjcsXG4gICAgICAgICAgc3Ryb2tlOiAnZGFya2dyYXknLFxuICAgICAgICAgICdzdHJva2Utd2lkdGgnOiAwLjc1LFxuICAgICAgICAgICdzdHJva2Utb3BhY2l0eSc6IDAuNzUsXG4gICAgICAgIH0pKVxuICAgICAgICAudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbigxMjUpXG4gICAgICAgIC5hdHRycygoZCkgPT4ge1xuICAgICAgICAgIGxldCB4X3ZhbHVlID0geFNjYWxlKGRbcmF0aW9fbmFtZV0pO1xuICAgICAgICAgIGlmICh4X3ZhbHVlID4gd2lkdGgpIHhfdmFsdWUgPSB3aWR0aCArIDIwMDtcbiAgICAgICAgICBlbHNlIGlmICh4X3ZhbHVlIDwgMCkgeF92YWx1ZSA9IC0yMDA7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJhbms6IGQucmFuayxcbiAgICAgICAgICAgIGlkOiBkLmlkLFxuICAgICAgICAgICAgY2xhc3M6ICdidWJibGUnLFxuICAgICAgICAgICAgY3g6IHhfdmFsdWUsXG4gICAgICAgICAgICBjeTogMTAsXG4gICAgICAgICAgICByOiBzaXplX2Z1bmMoZFtudW1fbmFtZV0pLFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICBidWJibGVzMi5leGl0KCkudHJhbnNpdGlvbigpLmR1cmF0aW9uKDEyNSkucmVtb3ZlKCk7XG5cbiAgICAgIGhlaWdodF90b191c2UgKz0gb2Zmc2V0O1xuICAgIH1cbiAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5tYWtlVG9vbHRpcHMoKTsgfSwgMTI1KTtcbiAgfVxuXG4gIHVwZGF0ZUNvbXBsZXR1ZGUoKSB7XG4gICAgdGhpcy5jb21wbGV0dWRlLnVwZGF0ZShcbiAgICAgIGNhbGNDb21wbGV0dWRlU3Vic2V0KGFwcCwgdGhpcy5yYXRpb3MsICdhcnJheScpLFxuICAgICAgY2FsY1BvcENvbXBsZXR1ZGVTdWJzZXQoYXBwLCB0aGlzLnJhdGlvcykpO1xuICB9XG5cbiAgdXBkYXRlTWFwUmVnaW8oKSB7XG4gICAgaWYgKCF0aGlzLm1hcF9lbGVtKSByZXR1cm47XG4gICAgdGhpcy5tYXBfZWxlbS50YXJnZXRfbGF5ZXIuc2VsZWN0QWxsKCdwYXRoJylcbiAgICAgIC5hdHRyKCdmaWxsJywgKGQpID0+IHtcbiAgICAgICAgY29uc3QgX2lkID0gZC5pZDtcbiAgICAgICAgaWYgKF9pZCA9PT0gYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbikge1xuICAgICAgICAgIHJldHVybiBjb2xvcl9oaWdobGlnaHQ7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5jdXJyZW50X2lkcy5pbmRleE9mKF9pZCkgPiAtMSkge1xuICAgICAgICAgIGlmIChhcHAuY29sb3JzW19pZF0pIHJldHVybiBjb2xvcl9kZWZhdWx0X2Rpc3NpbTtcbiAgICAgICAgICByZXR1cm4gY29sb3JfY291bnRyaWVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2xvcl9kaXNhYmxlZDtcbiAgICAgIH0pO1xuICB9XG5cbiAgaGFuZGxlQ2xpY2tNYXAoZCwgcGFyZW50KSB7XG4gICAgbGV0IHRvX2Rpc3BsYXkgPSBmYWxzZTtcbiAgICBjb25zdCBpZCA9IGQuaWQ7XG4gICAgaWYgKHRoaXMuY3VycmVudF9pZHMuaW5kZXhPZihpZCkgPCAwIHx8IGlkID09PSBhcHAuY3VycmVudF9jb25maWcubXlfcmVnaW9uKSByZXR1cm47XG4gICAgaWYgKGFwcC5jb2xvcnNbaWRdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIFJlbW92ZSB0aGUgY2xpY2tlZCBmZWF0dXJlIGZyb20gdGhlIGNvbG9yZWQgc2VsZWN0aW9uIG9uIHRoZSBjaGFydDpcbiAgICAgIGNvbnN0IGlkX3RvX3JlbW92ZSA9IHRoaXMuaGlnaGxpZ2h0X3NlbGVjdGlvblxuICAgICAgICAubWFwKChmdCwgaSkgPT4gKGZ0LmlkID09PSBpZCA/IGkgOiBudWxsKSkuZmlsdGVyKGZ0ID0+IGZ0KVswXTtcbiAgICAgIHRoaXMuaGlnaGxpZ2h0X3NlbGVjdGlvbi5zcGxpY2UoaWRfdG9fcmVtb3ZlLCAxKTtcbiAgICAgIC8vIENoYW5nZSBpdHMgY29sb3IgaW4gdGhlIGdsb2JhbCBjb2xvcnMgb2JqZWN0OlxuICAgICAgYXBwLmNvbG9yc1tpZF0gPSB1bmRlZmluZWQ7XG4gICAgICAvLyBDaGFuZ2UgdGhlIGNvbG9yIG9uIHRoZSBtYXA6XG4gICAgICBkMy5zZWxlY3QocGFyZW50KS5hdHRyKCdmaWxsJywgY29sb3JfY291bnRyaWVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXBwLmNvbG9yc1tpZF0gPSBjb2xvcl9kZWZhdWx0X2Rpc3NpbTtcbiAgICAgIC8vIENoYW5nZSB0aGUgY29sb3Igb24gdGhlIG1hcDpcbiAgICAgIGQzLnNlbGVjdChwYXJlbnQpLmF0dHIoJ2ZpbGwnLCBjb2xvcl9kZWZhdWx0X2Rpc3NpbSk7XG4gICAgICAvLyBBZGQgdGhlIGNsaWNrZWQgZmVhdHVyZSBvbiB0aGUgY29sb3JlZCBzZWxlY3Rpb24gb24gdGhlIGNoYXJ0OlxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtcHJvcGVydGllc1xuICAgICAgY29uc3Qgb2JqID0gdGhpcy5kYXRhLmZpbmQoZWwgPT4gZWwuaWQgPT09IGlkKTtcbiAgICAgIC8vIGNvbnN0IGdsb2JhbF9kaXN0ID0gbWF0aF9zcXJ0KHRoaXMucmF0aW9zLm1hcCh2ID0+IGBkaXN0XyR7dn1gKS5tYXAodiA9PiBNYXRoLnBvdygrZC5wcm9wZXJ0aWVzW3ZdLCAyKSkucmVkdWNlKChhLCBiKSA9PiBhICsgYikpO1xuICAgICAgLy8gY29uc3Qgb2JqID0ge1xuICAgICAgLy8gICBpZCxcbiAgICAgIC8vICAgZGlzdDogZ2xvYmFsX2Rpc3QsXG4gICAgICAvLyB9O1xuICAgICAgLy8gdGhpcy5yYXRpb3MuZm9yRWFjaCgodikgPT4geyBvYmpbdl0gPSArZC5wcm9wZXJ0aWVzW3ZdOyB9KTtcbiAgICAgIHRoaXMuaGlnaGxpZ2h0X3NlbGVjdGlvbi5wdXNoKG9iaik7XG4gICAgICB0b19kaXNwbGF5ID0gdHJ1ZTtcbiAgICB9XG4gICAgdGhpcy5oaWdobGlnaHRfc2VsZWN0aW9uLnNvcnQoKGEsIGIpID0+IGEuZGlzdCAtIGIuZGlzdCk7XG4gICAgdGhpcy5yZW1vdmVMaW5lcygpO1xuICAgIHRoaXMudXBkYXRlKCk7XG4gICAgaWYgKHRvX2Rpc3BsYXkpIHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLmRpc3BsYXlMaW5lKGlkKTsgfSwgMTUwKTtcbiAgfVxuXG4gIG1ha2VUb29sdGlwcygpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICB0aGlzLmRyYXdfZ3JvdXAuc2VsZWN0QWxsKCdnLmdycF92YXInKVxuICAgICAgLnNlbGVjdEFsbCgnY2lyY2xlJylcbiAgICAgICAgLm9uKCdtb3VzZW92ZXInLCAoKSA9PiB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHQpO1xuICAgICAgICAgIHRoaXMudG9vbHRpcC5zdHlsZSgnZGlzcGxheScsIG51bGwpO1xuICAgICAgICB9KVxuICAgICAgICAub24oJ21vdXNlb3V0JywgKCkgPT4ge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0KTtcbiAgICAgICAgICB0ID0gc2V0VGltZW91dCgoKSA9PiB7IHRoaXMudG9vbHRpcC5zdHlsZSgnZGlzcGxheScsICdub25lJyk7IH0sIDI1MCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5vbignbW91c2Vtb3ZlIG1vdXNlZG93bicsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgY29uc3QgY29udGVudCA9IFtdO1xuICAgICAgICAgIGNvbnN0IHJhdGlvX24gPSB0aGlzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5pZC5yZXBsYWNlKCdsXycsICcnKTtcbiAgICAgICAgICBjb25zdCB1bml0X3JhdGlvID0gdmFyaWFibGVzX2luZm8uZmluZChmdCA9PiBmdC5pZCA9PT0gcmF0aW9fbikudW5pdDtcbiAgICAgICAgICBjb25zdCByYW5rID0gK3RoaXMuZ2V0QXR0cmlidXRlKCdyYW5rJyk7XG4gICAgICAgICAgY29udGVudC5wdXNoKGAke3JhdGlvX259IDogJHtNYXRoLnJvdW5kKGRbcmF0aW9fbl0gKiAxMCkgLyAxMH0gJHt1bml0X3JhdGlvfWApO1xuICAgICAgICAgIGlmIChzZWxmLnByb3BvcnRpb25uYWxfc3ltYm9scykge1xuICAgICAgICAgICAgY29uc3QgbnVtX24gPSB0aGlzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ251bScpO1xuICAgICAgICAgICAgY29uc3QgbyA9IHZhcmlhYmxlc19pbmZvLmZpbmQoZnQgPT4gZnQuaWQgPT09IG51bV9uKTtcbiAgICAgICAgICAgIGNvbnN0IHVuaXRfbnVtID0gby51bml0O1xuICAgICAgICAgICAgbGV0IGNvZWYgPSArby5mb3JtdWxhO1xuICAgICAgICAgICAgY29lZiA9IGlzTmFOKGNvZWYpIHx8IGNvZWYgPT09IDAgPyAxIDogY29lZjtcbiAgICAgICAgICAgIGNvbnRlbnQucHVzaChgJHtudW1fbn0gKG51bcOpcmF0ZXVyKSA6ICR7TWF0aC5yb3VuZChkW251bV9uXSAqIGNvZWYgKiAxMCkgLyAxMH0gJHt1bml0X251bX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFpc05hTihyYW5rKSkge1xuICAgICAgICAgICAgaWYgKCtyYW5rID09PSAwKSB7XG4gICAgICAgICAgICAgIGNvbnRlbnQucHVzaCgnKE1hIHLDqWdpb24pJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCtyYW5rID09PSAxKSB7XG4gICAgICAgICAgICAgIGNvbnRlbnQucHVzaCgnKFLDqWdpb24gbGEgcGx1cyBwcm9jaGUpJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb250ZW50LnB1c2goYCgke3Jhbmt9w6htZSByw6lnaW9uIGxhIHBsdXMgcHJvY2hlKWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjbGVhclRpbWVvdXQodCk7XG4gICAgICAgICAgc2VsZi50b29sdGlwLnNlbGVjdCgnLnRpdGxlJylcbiAgICAgICAgICAgIC5odG1sKFtcbiAgICAgICAgICAgICAgJzxiPicsIGQubmFtZSwgJyAoJywgZC5pZCwgJyknLCAnPC9iPiddLmpvaW4oJycpKTtcbiAgICAgICAgICBzZWxmLnRvb2x0aXAuc2VsZWN0KCcuY29udGVudCcpXG4gICAgICAgICAgICAuaHRtbChjb250ZW50LmpvaW4oJzxicj4nKSk7XG4gICAgICAgICAgc2VsZi50b29sdGlwXG4gICAgICAgICAgICAuc3R5bGVzKHtcbiAgICAgICAgICAgICAgZGlzcGxheTogbnVsbCxcbiAgICAgICAgICAgICAgbGVmdDogYCR7ZDMuZXZlbnQucGFnZVggLSA1fXB4YCxcbiAgICAgICAgICAgICAgdG9wOiBgJHtkMy5ldmVudC5wYWdlWSAtIDY1fXB4YCB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgaWYgKHRoaXMuc3R5bGUuZmlsbCAhPT0gY29sb3JfY291bnRyaWVzKSB7XG4gICAgICAgICAgICBzZWxmLmRpc3BsYXlMaW5lKGQuaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZWxmLm1hcF9lbGVtLnRhcmdldF9sYXllclxuICAgICAgICAgICAgLnNlbGVjdEFsbCgncGF0aCcpXG4gICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoZnQpIHtcbiAgICAgICAgICAgICAgaWYgKGZ0LmlkID09PSBkLmlkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2xvbmVkID0gdGhpcy5jbG9uZU5vZGUoKTtcbiAgICAgICAgICAgICAgICBjbG9uZWQuc3R5bGUuZmlsbCA9ICdyZWQnO1xuICAgICAgICAgICAgICAgIGNsb25lZC5zdHlsZS5zdHJva2UgPSAnb3JhbmdlJztcbiAgICAgICAgICAgICAgICBjbG9uZWQuc3R5bGUuc3Ryb2tlV2lkdGggPSAnMi4yNXB4JztcbiAgICAgICAgICAgICAgICBjbG9uZWQuY2xhc3NMaXN0LmFkZCgnY2xvbmVkJyk7XG4gICAgICAgICAgICAgICAgc2VsZi5tYXBfZWxlbS5sYXllcnMubm9kZSgpLmFwcGVuZENoaWxkKGNsb25lZCk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IGNsb25lZC5yZW1vdmUoKTsgfSwgNTAwMCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgfVxuXG4gIGRpc3BsYXlMaW5lKGlkX3JlZ2lvbikge1xuICAgIGlmICh0aGlzLnJhdGlvcy5sZW5ndGggPT09IDEpIHJldHVybjtcbiAgICBjb25zdCBjb29yZHMgPSBbXTtcbiAgICBzdmdfY29udGFpbmVyLnNlbGVjdEFsbCgnLmdycF92YXInKVxuICAgICAgLnNlbGVjdEFsbChgIyR7aWRfcmVnaW9ufS5idWJibGVgKVxuICAgICAgLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCB0eSA9ICt0aGlzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScpLnNwbGl0KCd0cmFuc2xhdGUoMCwgJylbMV0ucmVwbGFjZSgnKScsICcnKTtcbiAgICAgICAgY29vcmRzLnB1c2goW3RoaXMuY3guYmFzZVZhbC52YWx1ZSwgdGhpcy5jeS5iYXNlVmFsLnZhbHVlICsgdHldKTtcbiAgICAgIH0pO1xuXG4gICAgY29uc3QgbCA9IHRoaXMuZHJhd19ncm91cC5hcHBlbmQoJ3BhdGgnKVxuICAgICAgLmRhdHVtKGNvb3JkcylcbiAgICAgIC5hdHRycyh7XG4gICAgICAgIGNsYXNzOiAncmVnaW9fbGluZScsXG4gICAgICAgIGZpbGw6ICdub25lJyxcbiAgICAgICAgc3Ryb2tlOiAnc3RlZWxibHVlJyxcbiAgICAgICAgJ3N0cm9rZS1saW5lam9pbic6ICdyb3VuZCcsXG4gICAgICAgICdzdHJva2UtbGluZWNhcCc6ICdyb3VuZCcsXG4gICAgICAgICdzdHJva2Utd2lkdGgnOiAxLjUsXG4gICAgICAgIGQ6IGQzLmxpbmUoKS54KF9kID0+IF9kWzBdKS55KF9kID0+IF9kWzFdKSxcbiAgICAgIH0pO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgbC5yZW1vdmUoKTtcbiAgICB9LCA1MDAwKTtcbiAgfVxuXG4gIHVwZGF0ZUNoYW5nZVJlZ2lvbigpIHtcbiAgICB0aGlzLnJlbW92ZUxpbmVzKCk7XG4gICAgaWYgKGFwcC5jdXJyZW50X2NvbmZpZy5maWx0ZXJfa2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuY2hhbmdlU3R1ZHlab25lKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubWFwX2VsZW0udXBkYXRlTGVnZW5kKCk7XG4gICAgICB0aGlzLm15X3JlZ2lvbiA9IHRoaXMuZGF0YS5maW5kKGQgPT4gZC5pZCA9PT0gYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbik7XG4gICAgICB0aGlzLmRhdGFcbiAgICAgICAgLmZvckVhY2goKGZ0KSA9PiB7XG4gICAgICAgICAgdGhpcy5yYXRpb3MuZm9yRWFjaCgodikgPT4ge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmdFtgZGlzdF8ke3Z9YF0gPSBtYXRoX2FicygrZnRbdl0gLSArdGhpcy5teV9yZWdpb25bdl0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIHRoaXMudXBkYXRlVGFibGVTdGF0KCk7XG4gICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgdGhpcy51cGRhdGVNYXBSZWdpbygpO1xuICAgICAgLy8gdGhpcy5hcHBseVNlbGVjdGlvbih0aGlzLmhpZ2hsaWdodF9zZWxlY3Rpb24ubGVuZ3RoKTtcbiAgICB9XG4gIH1cblxuICBjaGFuZ2VTdHVkeVpvbmUoKSB7XG4gICAgdGhpcy5yZW1vdmVMaW5lcygpO1xuICAgIHRoaXMubWFwX2VsZW0udXBkYXRlTGVnZW5kKCk7XG4gICAgdGhpcy5yYXRpb3MgPSBhcHAuY3VycmVudF9jb25maWcucmF0aW87XG4gICAgdGhpcy5udW1zID0gYXBwLmN1cnJlbnRfY29uZmlnLm51bTtcbiAgICB0aGlzLmRhdGEgPSBhcHAuY3VycmVudF9kYXRhLmZpbHRlcihcbiAgICAgIGZ0ID0+IHRoaXMucmF0aW9zLm1hcCh2ID0+ICEhZnRbdl0pLmV2ZXJ5KHYgPT4gdiA9PT0gdHJ1ZSkpLnNsaWNlKCk7XG4gICAgdGhpcy5teV9yZWdpb24gPSB0aGlzLmRhdGEuZmluZChkID0+IGQuaWQgPT09IGFwcC5jdXJyZW50X2NvbmZpZy5teV9yZWdpb24pO1xuICAgIHRoaXMuZGF0YS5mb3JFYWNoKChmdCkgPT4ge1xuICAgICAgdGhpcy5yYXRpb3MuZm9yRWFjaCgodikgPT4ge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgZnRbYGRpc3RfJHt2fWBdID0gbWF0aF9hYnMoK2Z0W3ZdIC0gK3RoaXMubXlfcmVnaW9uW3ZdKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuY3VycmVudF9pZHMgPSB0aGlzLmRhdGEubWFwKGQgPT4gZC5pZCk7XG4gICAgY29uc3QgdGVtcCA9IHRoaXMuaGlnaGxpZ2h0X3NlbGVjdGlvbi5sZW5ndGg7XG4gICAgdGhpcy5oaWdobGlnaHRfc2VsZWN0aW9uID0gW107XG4gICAgdGhpcy51cGRhdGVUYWJsZVN0YXQoKTtcbiAgICB0aGlzLnVwZGF0ZUNvbXBsZXR1ZGUoKTtcbiAgICB0aGlzLmFwcGx5U2VsZWN0aW9uKHRlbXApO1xuICAgIHRoaXMudXBkYXRlTWFwUmVnaW8oKTtcbiAgfVxuXG4gIGFkZFZhcmlhYmxlKGNvZGVfdmFyaWFibGUsIG5hbWVfdmFyaWFibGUpIHtcbiAgICB0aGlzLnJlbW92ZUxpbmVzKCk7XG4gICAgdGhpcy5yYXRpb3MgPSBhcHAuY3VycmVudF9jb25maWcucmF0aW8uc2xpY2UoKTtcbiAgICB0aGlzLm51bXMgPSBhcHAuY3VycmVudF9jb25maWcubnVtLnNsaWNlKCk7XG4gICAgdGhpcy5kYXRhID0gYXBwLmN1cnJlbnRfZGF0YS5maWx0ZXIoXG4gICAgICBmdCA9PiB0aGlzLnJhdGlvcy5tYXAodiA9PiAhIWZ0W3ZdKS5ldmVyeSh2ID0+IHYgPT09IHRydWUpKS5zbGljZSgpO1xuICAgIHRoaXMuY3VycmVudF9pZHMgPSB0aGlzLmRhdGEubWFwKGQgPT4gZC5pZCk7XG4gICAgdGhpcy5teV9yZWdpb24gPSB0aGlzLmRhdGEuZmluZChkID0+IGQuaWQgPT09IGFwcC5jdXJyZW50X2NvbmZpZy5teV9yZWdpb24pO1xuICAgIHRoaXMuZGF0YS5mb3JFYWNoKChmdCkgPT4ge1xuICAgICAgdGhpcy5yYXRpb3MuZm9yRWFjaCgodikgPT4ge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgZnRbYGRpc3RfJHt2fWBdID0gbWF0aF9hYnMoK2Z0W3ZdIC0gK3RoaXMubXlfcmVnaW9uW3ZdKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuaGlnaGxpZ2h0X3NlbGVjdGlvbiA9IHRoaXMuaGlnaGxpZ2h0X3NlbGVjdGlvbi5tYXAoKGQpID0+IHtcbiAgICAgIGNvbnN0IG9iaiA9IE9iamVjdC5hc3NpZ24oZCwge30pO1xuICAgICAgY29uc3QgZnQgPSB0aGlzLmRhdGEuZmluZChlbGVtID0+IGVsZW0uaWQgPT09IG9iai5pZCk7XG4gICAgICBpZiAoIWZ0KSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5yYXRpb3MuZm9yRWFjaCgodikgPT4ge1xuICAgICAgICBvYmpbdl0gPSArZnRbdl07XG4gICAgICAgIG9ialtgZGlzdF8ke3Z9YF0gPSArZnRbYGRpc3RfJHt2fWBdO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH0pLmZpbHRlcihkID0+ICEhZCk7XG4gICAgLy8gQW5kIHVzZSBpdCBpbW1lZGlhdGx5OlxuICAgIHRoaXMudXBkYXRlVGFibGVTdGF0KCk7XG4gICAgdGhpcy51cGRhdGUoKTtcbiAgICB0aGlzLnVwZGF0ZU1hcFJlZ2lvKCk7XG4gIH1cblxuICByZW1vdmVWYXJpYWJsZShjb2RlX3ZhcmlhYmxlKSB7XG4gICAgdGhpcy5yZW1vdmVMaW5lcygpO1xuICAgIHRoaXMucmF0aW9zID0gYXBwLmN1cnJlbnRfY29uZmlnLnJhdGlvLnNsaWNlKCk7XG4gICAgdGhpcy5udW1zID0gYXBwLmN1cnJlbnRfY29uZmlnLm51bS5zbGljZSgpO1xuICAgIHRoaXMuZGF0YSA9IGFwcC5jdXJyZW50X2RhdGEuZmlsdGVyKFxuICAgICAgZnQgPT4gdGhpcy5yYXRpb3MubWFwKHYgPT4gISFmdFt2XSkuZXZlcnkodiA9PiB2ID09PSB0cnVlKSkuc2xpY2UoKTtcbiAgICB0aGlzLm15X3JlZ2lvbiA9IHRoaXMuZGF0YS5maW5kKGQgPT4gZC5pZCA9PT0gYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbik7XG5cbiAgICB0aGlzLmRyYXdfZ3JvdXAuc2VsZWN0KGBnI2xfJHtjb2RlX3ZhcmlhYmxlfWApLnJlbW92ZSgpO1xuICAgIC8vIEFuZCB1c2UgaXQgaW1tZWRpYXRseTpcbiAgICB0aGlzLnVwZGF0ZVRhYmxlU3RhdCgpO1xuICAgIHRoaXMudXBkYXRlKCk7XG4gICAgdGhpcy51cGRhdGVNYXBSZWdpbygpO1xuICB9XG5cbiAgYmluZE1lbnUoKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgY29uc3QgbWVudSA9IGQzLnNlbGVjdCgnI21lbnVfc2VsZWN0aW9uJyk7XG4gICAgY29uc3QgYXBwbHljaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBzZWxmLm1hcF9lbGVtLnJlbW92ZVJlY3RCcnVzaCgpO1xuICAgICAgY29uc3QgdmFsdWUgPSArdGhpcy52YWx1ZTtcbiAgICAgIGlmICh2YWx1ZSA8IDEpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IDE7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNlbGYuYXBwbHlTZWxlY3Rpb24odmFsdWUpO1xuICAgIH07XG4gICAgbWVudS5zZWxlY3QoJy5uYl9zZWxlY3QnKVxuICAgICAgLm9uKCdjaGFuZ2UnLCBhcHBseWNoYW5nZSk7XG4gICAgbWVudS5zZWxlY3QoJy5uYl9zZWxlY3QnKVxuICAgICAgLm9uKCd3aGVlbCcsIGFwcGx5Y2hhbmdlKTtcbiAgICBtZW51LnNlbGVjdCgnLm5iX3NlbGVjdCcpXG4gICAgICAub24oJ2tleXVwJywgYXBwbHljaGFuZ2UpO1xuICAgIG1lbnUuc2VsZWN0KCcjY2hlY2tfcHJvcCcpXG4gICAgICAub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCkge1xuICAgICAgICAgIG1lbnUuc2VsZWN0KCcuc2xpZGVyLWNoZWNrYm94ID4gLmxhYmVsJykuYXR0cignY2xhc3MnLCAnbGFiZWwnKTtcbiAgICAgICAgICBzZWxmLnByb3BvcnRpb25uYWxfc3ltYm9scyA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWVudS5zZWxlY3QoJy5zbGlkZXItY2hlY2tib3ggPiAubGFiZWwnKS5hdHRyKCdjbGFzcycsICdsYWJlbCBub3Rfc2VsZWN0ZWQnKTtcbiAgICAgICAgICBzZWxmLnByb3BvcnRpb25uYWxfc3ltYm9scyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYudXBkYXRlKCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHJlbW92ZUxpbmVzKCkge1xuICAgIHRoaXMuZHJhd19ncm91cC5zZWxlY3RBbGwoJy5yZWdpb19saW5lJykucmVtb3ZlKCk7XG4gIH1cblxuICByZW1vdmUoKSB7XG4gICAgdGhpcy5tYXBfZWxlbS5sYXllcnMuc2VsZWN0QWxsKCcuY2xvbmVkJykucmVtb3ZlKCk7XG4gICAgdGhpcy5tYXBfZWxlbS51bmJpbmRCcnVzaENsaWNrKCk7XG4gICAgdGhpcy5tYXBfZWxlbSA9IG51bGw7XG4gICAgdGhpcy50YWJsZV9zdGF0cy5yZW1vdmUoKTtcbiAgICB0aGlzLnRhYmxlX3N0YXRzID0gbnVsbDtcbiAgICBzdmdfYmFyLmh0bWwoJycpO1xuICB9XG5cbiAgYmluZE1hcChtYXBfZWxlbSkge1xuICAgIHRoaXMubWFwX2VsZW0gPSBtYXBfZWxlbTtcbiAgICB0aGlzLm1hcF9lbGVtLnJlc2V0Q29sb3JzKHRoaXMuY3VycmVudF9pZHMpO1xuICAgIHRoaXMubWFwX2VsZW0uZGlzcGxheUxlZ2VuZCgyKTtcbiAgICB0aGlzLmFwcGx5U2VsZWN0aW9uKDUpO1xuICB9XG5cbiAgcHJlcGFyZVRhYmxlU3RhdCgpIHtcbiAgICBjb25zdCByYXRpb3MgPSB0aGlzLnJhdGlvcztcbiAgICBjb25zdCBhbGxfdmFsdWVzID0gcmF0aW9zLm1hcCh2ID0+IHRoaXMuZGF0YS5tYXAoZCA9PiArZFt2XSkpO1xuICAgIGNvbnN0IG15X3JlZ2lvbiA9IHRoaXMubXlfcmVnaW9uO1xuICAgIGNvbnN0IGZlYXR1cmVzID0gYWxsX3ZhbHVlcy5tYXAoKHZhbHVlcywgaSkgPT4gKHtcbiAgICAgIE1pbjogZDMubWluKHZhbHVlcyksXG4gICAgICBNYXg6IGQzLm1heCh2YWx1ZXMpLFxuICAgICAgTW95OiBnZXRNZWFuKHZhbHVlcyksXG4gICAgICBNZWQ6IGQzLm1lZGlhbih2YWx1ZXMpLFxuICAgICAgaWQ6IHRoaXMucmF0aW9zW2ldLFxuICAgICAgVmFyaWFibGU6IHRoaXMucmF0aW9zW2ldLFxuICAgICAgJ01hIHLDqWdpb24nOiBteV9yZWdpb25bdGhpcy5yYXRpb3NbaV1dLFxuICAgIH0pKTtcbiAgICByZXR1cm4gZmVhdHVyZXM7XG4gIH1cblxuICB1cGRhdGVUYWJsZVN0YXQoKSB7XG4gICAgdGhpcy50YWJsZV9zdGF0cy5yZW1vdmVBbGwoKTtcbiAgICB0aGlzLnRhYmxlX3N0YXRzLmFkZEZlYXR1cmVzKHRoaXMucHJlcGFyZVRhYmxlU3RhdCgpKTtcbiAgfVxuXG4gIG1ha2VUYWJsZVN0YXQoKSB7XG4gICAgY29uc3QgZmVhdHVyZXMgPSB0aGlzLnByZXBhcmVUYWJsZVN0YXQoKTtcbiAgICB0aGlzLnRhYmxlX3N0YXRzID0gbmV3IFRhYmxlUmVzdW1lU3RhdChmZWF0dXJlcyk7XG4gIH1cblxuICBnZXRIZWxwTWVzc2FnZSgpIHtcbiAgICByZXR1cm4gYFxuPGgzPlJlc3NlbWJsYW5jZXM8L2gzPlxuXG48Yj5BaWRlIGfDqW7DqXJhbGU8L2I+XG5cbkxlcyBncmFwaGlxdWVzIGRlIHJlc3NlbWJsYW5jZSBwZXJtZXR0ZW50IGRlIHZpc3VhbGlzZXIgcG91ciAxIMOgIDggaW5kaWNhdGV1cnMgbGVzIHVuaXTDqXMgdGVycml0b3JpYWxlcyBsZXMgcGx1cyBwcm9jaGVzIHN0YXRpc3RpcXVlbWVudCDDoCBs4oCZdW5pdMOpIHRlcnJpdG9yaWFsZSBkZSByw6lmw6lyZW5jZS5cblxuQ2V0dGUgcHJveGltaXTDqSBlc3QgbWVzdXLDqWUgcGFyIGxhIGRpc3RhbmNlIGV1Y2xpZGllbm5lLiBDZXR0ZSBmb25jdGlvbiBwZXJtZXQgZOKAmcOpdmFsdWVyIGxhIGRpc3RhbmNlIG5vcm1hbGlzw6llIGdsb2JhbGUgKGV4cHJpbcOpZSBlbiByYW5nKSBzw6lwYXJhbnQgbOKAmXVuaXTDqSB0ZXJyaXRvcmlhbGUgZGUgcsOpZsOpcmVuY2UgYXZlYyBs4oCZZW5zZW1ibGUgZGVzIGF1dHJlcyB1bml0w6lzIHRlcnJpdG9yaWFsZXMgcG91ciB1biBlbnNlbWJsZSBk4oCZaW5kaWNhdGV1cnMuIExhIGZvcm11bGUgZGUgbGEgZm9uY3Rpb24gZXN0IGxhIHN1aXZhbnRlwqA6XG5cbjxiPs6jKHhpIC0geWkpwrI8L2I+XG5cblNpIGxhIHZhbGV1ciBkZSBs4oCZaW5kaWNlIMOpcXVpdmF1dCDDoCAwLCBsYSBzaW1pbGFyaXTDqSBlc3QgdG90YWxlIGVudHJlIGRldXggdW5pdMOpcyB0ZXJyaXRvcmlhbGVzLiBQbHVzIGxhIHZhbGV1ciBkZSBs4oCZaW5kaWNlIGVzdCDDqWxldsOpZSwgcGx1cyBsYSBkaXNzaW1pbGFyaXTDqSBlc3QgaW1wb3J0YW50ZS4gQSBub3RlciBxdWUgY2V0dGUgbcOpdHJpcXVlIGV1Y2xpZGllbm5lIGVzdCBhc3NleiBzZW5zaWJsZSBhdXggb3JkcmVzIGRlIGdyYW5kZXVyIGjDqXTDqXJvZ8OobmVzIGVudHJlIHBsdXNpZXVycyBpbmRpY2F0ZXVycyAodW4gZm9ydCDDqWNhcnQgcG91ciB1biBpbmRpY2F0ZXVyIHBldXQgYWZmZWN0ZXIgc2lnbmlmaWNhdGl2ZW1lbnQgbGEgdmFsZXVyIGRlIGzigJlpbmRpY2UpLlxuXG5Qb3VyIMOpdml0ZXIgZGUgcG90ZW50aWVsbGVzIGVycmV1cnMgZOKAmWludGVycHLDqXRhdGlvbiBsacOpZXMgw6AgY2V0IGluZGljZSBkZSBzaW1pbGFyaXTDqSBzeW50aMOpdGlxdWUsIFJlZ2lvdml6IHByb3Bvc2Ugc3lzdMOpbWF0aXF1ZW1lbnQgdW5lIHJlcHLDqXNlbnRhdGlvbiBncmFwaGlxdWUgcGVybWV0dGFudCBk4oCZw6l2YWx1ZXIgdmlzdWVsbGVtZW50IGxlIGRlZ3LDqSBkZSBzaW1pbGFyaXTDqSBpbmRpY2F0ZXVyIHBhciBpbmRpY2F0ZXVyLlxuXG5QYXIgZMOpZmF1dCwgbOKAmWFwcGxpY2F0aW9uIHJlbnZvaWUgbGVzIDUgdW5pdMOpcyB0ZXJyaXRvcmlhbGVzIHBvdXIgbOKAmWVzcGFjZSBk4oCZw6l0dWRlIGV0IGxlcyBpbmRpY2F0ZXVycyBzw6lsZWN0aW9ubsOpZXMgcXVpIHNvbnQgZMOpZmluaXMgcGFyIGxhIGRpc3RhbmNlIGV1Y2xpZGllbm5lIGxhIHBsdXMgZmFpYmxlLiBMaWJyZSDDoCBs4oCZdXRpbGlzYXRldXIgZGUgY2hvaXNpciBwbHVzIG91IG1vaW5zIGTigJl1bml0w6lzIHRlcnJpdG9yaWFsZXMgZGUgY29tcGFyYWlzb24gZW4gZm9uY3Rpb24gZGUgc2VzIG9iamVjdGlmcyBk4oCZYW5hbHlzZS5cblxuU3VyIGxlIGdyYXBoaXF1ZSBhcHBhcmFpc3NlbnQgbGVzIG4gdW5pdMOpcyB0ZXJyaXRvcmlhbGVzIGxlcyBwbHVzIHByb2NoZXMgcG91ciBjaGFxdWUgaW5kaWNhdGV1ciBkYW5zIGxldXJzIHVuaXTDqXMgZGUgbWVzdXJlIHJlc3BlY3RpdmVzLiBM4oCZdW5pdMOpIHRlcnJpdG9yaWFsZSBkZSByw6lmw6lyZW5jZSBhcHBhcmHDrnQgc3lzdMOpbWF0aXF1ZW1lbnQgYXUgY2VudHJlIGRlIGNoYWN1biBkZXMgZ3JhcGhpcXVlcy4gVW4gY2xpYyBnYXVjaGUgc3VyIHVuZSBkZXMgdW5pdMOpcyB0ZXJyaXRvcmlhbGVzIHN1ciBsZSBncmFwaGlxdWUgb3Ugc3VyIGxhIGNhcnRlIGfDqW7DqHJlIHVuZSBsaWduZSBlbnRyZSBjaGFxdWUgaW5kaWNhdGV1ciBwZXJtZXR0YW50IGTigJnDqXZhbHVlciBsZSBkZWdyw6kgZGUgcmVzc2VtYmxhbmNlIGF2ZWMgbOKAmXVuaXTDqSB0ZXJyaXRvcmlhbGUgZGUgcsOpZsOpcmVuY2UgZXQgdmlzdWFsaXNlciBhaW5zaSBzaSBjZWxsZS1jaSBzZSBwb3NpdGlvbm5lIGF1LWRlc3N1cyBvdSBlbiBkZXNzb3VzLCBldCBwb3VyIHF1ZWwgaW5kaWNhdGV1ci5cblxuUGFyIGTDqWZhdXQsIGxhIHRhaWxsZSBkZXMgY2VyY2xlcyBzdXIgbGUgZ3JhcGhpcXVlIGVzdCBjb25zdGFudGUuIE1haXMgbOKAmXV0aWxpc2F0ZXVyIHBldXQgYWN0aXZlciBs4oCZb3B0aW9uIMKrwqBjZXJjbGVzIHByb3BvcnRpb25uZWxzIGF1IG51bcOpcmF0ZXVywqDCuyBwb3VyIHZpc3VhbGlzZXIgZ3JhcGhpcXVlbWVudCBsYSBtYXNzZSBkZXMgdW5pdMOpcyB0ZXJyaXRvcmlhbGVzLiBQYXIgZXhlbXBsZSwgc2kgbOKAmWluZGljYXRldXIgUElCIHBhciBoYWJpdGFudCBlc3Qgc8OpbGVjdGlvbm7DqSwgbGEgdGFpbGxlIGRlcyBjZXJjbGVzIHNlcmEgcHJvcG9ydGlvbm5lbGxlIMOgIGxhIG1hc3NlIGRlIFBJQiBkZXMgdW5pdMOpcyB0ZXJyaXRvcmlhbGVzLiBTaSBj4oCZZXN0IGxhIHBhcnQgZGVzIDAtMjQgYW5zIGRhbnMgbGEgcG9wdWxhdGlvbiB0b3RhbGUsIGxhIHRhaWxsZSBkZXMgZmlndXLDqXMgc2VyYSBwcm9wb3J0aW9ubmVsbGUgw6AgbGEgbWFzc2UgZGUgbGEgcG9wdWxhdGlvbiDDomfDqWUgZGUgMCDDoCAyNCBhbnMuIENldHRlIG9wdGlvbiBhIMOpdMOpIGNyw6nDqWUgYWZpbiBkZSBwb3V2b2lyIHJlc3RpdHVlciBsZXMgb3JkcmVzIGRlIGdyYW5kZXVyIHBvdGVudGllbGxlbWVudCBow6l0w6lyb2fDqG5lcyBkZXMgdW5pdMOpcyB0ZXJyaXRvcmlhbGVzIHByb3Bvc8OpZXMgZGFucyBs4oCZYXBwbGljYXRpb24uYDtcbiAgfVxufVxuXG5cblxuXG5cblxuXG5cbi8vXG4vL1xuLy9cbi8vXG4vL1xuLy8gaW1wb3J0IHsgY29tcCwgbWF0aF9yb3VuZCwgbWF0aF9hYnMsIG1hdGhfc3FydCwgUHJvcFNpemVyLCBwcmVwYXJlVG9vbHRpcDIsIGdldE1lYW4gfSBmcm9tICcuLy4uL2hlbHBlcnMnO1xuLy8gaW1wb3J0IHsgY29sb3JfZGlzYWJsZWQsIGNvbG9yX2NvdW50cmllcywgY29sb3JfZGVmYXVsdF9kaXNzaW0sIGNvbG9yX2hpZ2hsaWdodCB9IGZyb20gJy4vLi4vb3B0aW9ucyc7XG4vLyBpbXBvcnQgeyBjYWxjUG9wQ29tcGxldHVkZVN1YnNldCwgY2FsY0NvbXBsZXR1ZGVTdWJzZXQgfSBmcm9tICcuLy4uL3ByZXBhcmVfZGF0YSc7XG4vLyAvLyBpbXBvcnQgeyBzdmdfbWFwIH0gZnJvbSAnLi8uLi9tYXAnO1xuLy8gaW1wb3J0IHsgYXBwLCByZXNldENvbG9ycywgdmFyaWFibGVzX2luZm8gfSBmcm9tICcuLy4uLy4uL21haW4nO1xuLy8gaW1wb3J0IFRhYmxlUmVzdW1lU3RhdCBmcm9tICcuLy4uL3RhYmxlUmVzdW1lU3RhdCc7XG4vLyBpbXBvcnQgQ29tcGxldHVkZVNlY3Rpb24gZnJvbSAnLi8uLi9jb21wbGV0dWRlJztcbi8vXG4vLyBsZXQgc3ZnX2Jhcjtcbi8vIGxldCBtYXJnaW47XG4vLyBsZXQgYmJveF9zdmc7XG4vLyBsZXQgd2lkdGg7XG4vLyBsZXQgaGVpZ2h0O1xuLy8gbGV0IHN2Z19jb250YWluZXI7XG4vLyBsZXQgdDtcbi8vXG4vLyBjb25zdCB1cGRhdGVEaW1lbnNpb25zID0gKCkgPT4ge1xuLy8gICBzdmdfYmFyID0gZDMuc2VsZWN0KCcjc3ZnX2JhcicpO1xuLy8gICBtYXJnaW4gPSB7IHRvcDogMjAsIHJpZ2h0OiAyMCwgYm90dG9tOiA0MCwgbGVmdDogMzAgfTtcbi8vICAgYmJveF9zdmcgPSBzdmdfYmFyLm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbi8vICAgd2lkdGggPSArYmJveF9zdmcud2lkdGggLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodDtcbi8vICAgaGVpZ2h0ID0gNTAwICogYXBwLnJhdGlvVG9XaWRlIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XG4vLyAgIHN2Z19iYXIuYXR0cignaGVpZ2h0JywgYCR7NTAwICogYXBwLnJhdGlvVG9XaWRlfXB4YCk7XG4vLyAgIHN2Z19jb250YWluZXIgPSBzdmdfYmFyLmFwcGVuZCgnZycpLmF0dHIoJ2NsYXNzJywgJ2NvbnRhaW5lcicpO1xuLy8gfTtcbi8vXG4vL1xuLy8gZXhwb3J0IGNsYXNzIFNpbWlsYXJpdHkxcGx1cyB7XG4vLyAgIGNvbnN0cnVjdG9yKHJlZl9kYXRhKSB7XG4vLyAgICAgdXBkYXRlRGltZW5zaW9ucygpO1xuLy8gICAgIGFwcC5jaGFydERyYXdSYXRpbyA9IGFwcC5yYXRpb1RvV2lkZTtcbi8vICAgICAvLyBTZXQgdGhlIG1pbmltdW0gbnVtYmVyIG9mIHZhcmlhYmxlcyB0byBrZWVwIHNlbGVjdGVkIGZvciB0aGlzIGtpbmQgb2YgY2hhcnQ6XG4vLyAgICAgYXBwLmN1cnJlbnRfY29uZmlnLm5iX3ZhciA9IDE7XG4vLyAgICAgdGhpcy5yYXRpb3MgPSBhcHAuY3VycmVudF9jb25maWcucmF0aW87XG4vLyAgICAgdGhpcy5udW1zID0gYXBwLmN1cnJlbnRfY29uZmlnLm51bTtcbi8vICAgICB0aGlzLmRhdGEgPSByZWZfZGF0YS5maWx0ZXIoZnQgPT4gdGhpcy5yYXRpb3MubWFwKHYgPT4gISFmdFt2XSkuZXZlcnkodiA9PiB2ID09PSB0cnVlKSkuc2xpY2UoKTtcbi8vICAgICB0aGlzLm15X3JlZ2lvbiA9IHRoaXMuZGF0YS5maW5kKGQgPT4gZC5pZCA9PT0gYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbik7XG4vLyAgICAgdGhpcy5kYXRhLmZvckVhY2goKGZ0KSA9PiB7XG4vLyAgICAgICB0aGlzLnJhdGlvcy5mb3JFYWNoKCh2KSA9PiB7XG4vLyAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuLy8gICAgICAgICBmdFtgZGlzdF8ke3Z9YF0gPSBtYXRoX2FicygrZnRbdl0gLSArdGhpcy5teV9yZWdpb25bdl0pO1xuLy8gICAgICAgfSk7XG4vLyAgICAgfSk7XG4vLyAgICAgdGhpcy5jdXJyZW50X2lkcyA9IHRoaXMuZGF0YS5tYXAoZCA9PiBkLmlkKTtcbi8vICAgICByZXNldENvbG9ycygpO1xuLy8gICAgIHRoaXMuaGlnaGxpZ2h0X3NlbGVjdGlvbiA9IFtdO1xuLy8gICAgIHRoaXMuc2VyaWVfaW52ZXJzZWQgPSBmYWxzZTtcbi8vICAgICB0aGlzLnByb3BvcnRpb25uYWxfc3ltYm9scyA9IGZhbHNlO1xuLy8gICAgIHRoaXMuZHJhd19ncm91cCA9IHN2Z19jb250YWluZXJcbi8vICAgICAgIC5hcHBlbmQoJ2cnKVxuLy8gICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHttYXJnaW4ubGVmdH0sICR7bWFyZ2luLnRvcH0pYCk7XG4vL1xuLy8gICAgIC8vIFByZXBhcmUgdGhlIHRvb2x0aXAgZGlzcGxheWVkIG9uIG1vdXNlb3Zlcjpcbi8vICAgICB0aGlzLnRvb2x0aXAgPSBwcmVwYXJlVG9vbHRpcDIoZDMuc2VsZWN0KHN2Z19iYXIubm9kZSgpLnBhcmVudEVsZW1lbnQpLCBudWxsKTtcbi8vXG4vLyAgICAgdGhpcy5jb21wbGV0dWRlID0gbmV3IENvbXBsZXR1ZGVTZWN0aW9uKCk7XG4vLyAgICAgdGhpcy5jb21wbGV0dWRlLnVwZGF0ZShcbi8vICAgICAgIGNhbGNDb21wbGV0dWRlU3Vic2V0KGFwcCwgdGhpcy5yYXRpb3MsICdhcnJheScpLFxuLy8gICAgICAgY2FsY1BvcENvbXBsZXR1ZGVTdWJzZXQoYXBwLCB0aGlzLnJhdGlvcykpO1xuLy9cbi8vICAgICAvLyBDcmVhdGUgdGhlIGJ1dHRvbiBhbGxvd2luZyB0byBjaG9vc2Vcbi8vICAgICAvLyBpZiB0aGUgY29sb3JzIGFyZSBpbnZlcnNlZFxuLy8gICAgIC8vIChsaWtlIGdyZWVuL3JlZCBmb3Igc3VwZXJpb3IvaW5mZXJpb3IgcmVnaW9ucylcbi8vICAgICBzdmdfY29udGFpbmVyLmFwcGVuZCgnaW1hZ2UnKVxuLy8gICAgICAgLmF0dHJzKHtcbi8vICAgICAgICAgeDogd2lkdGggKyBtYXJnaW4ubGVmdCArIDUsXG4vLyAgICAgICAgIHk6IDIzMi41LFxuLy8gICAgICAgICB3aWR0aDogMTUsXG4vLyAgICAgICAgIGhlaWdodDogMTUsXG4vLyAgICAgICAgICd4bGluazpocmVmJzogJ2ltZy9yZXZlcnNlX3BsdXMucG5nJyxcbi8vICAgICAgICAgaWQ6ICdpbWdfcmV2ZXJzZScsXG4vLyAgICAgICB9KVxuLy8gICAgICAgLm9uKCdjbGljaycsICgpID0+IHtcbi8vICAgICAgICAgdGhpcy5zZXJpZV9pbnZlcnNlZCA9ICF0aGlzLnNlcmllX2ludmVyc2VkO1xuLy8gICAgICAgICB0aGlzLmFwcGx5U2VsZWN0aW9uKHRoaXMuaGlnaGxpZ2h0X3NlbGVjdGlvbi5sZW5ndGgpO1xuLy8gICAgICAgfSk7XG4vL1xuLy8gICAgIC8vIENyZWF0ZSB0aGUgc2VjdGlvbiBjb250YWluaW5nIHRoZSBpbnB1dCBlbGVtZW50IGFsbG93aW5nIHRvIGNob3NlXG4vLyAgICAgLy8gaG93IG1hbnkgXCJjbG9zZVwiIHJlZ2lvbnMgd2Ugd2FudCB0byBoaWdobGlnaHQuXG4vLyAgICAgY29uc3QgbWVudV9zZWxlY3Rpb24gPSBkMy5zZWxlY3Qoc3ZnX2Jhci5ub2RlKCkucGFyZW50RWxlbWVudClcbi8vICAgICAgIC5hcHBlbmQoJ2RpdicpXG4vLyAgICAgICAuYXR0cignaWQnLCAnbWVudV9zZWxlY3Rpb24nKVxuLy8gICAgICAgLnN0eWxlcyh7IHBvc2l0aW9uOiAncmVsYXRpdmUnLCBjb2xvcjogJyM0ZjgxYmQnLCAndGV4dC1hbGlnbic6ICdjZW50ZXInIH0pO1xuLy8gICAgIGNvbnN0IHNlbGVjdGlvbl9jbG9zZSA9IG1lbnVfc2VsZWN0aW9uLmFwcGVuZCgncCcpO1xuLy8gICAgIHNlbGVjdGlvbl9jbG9zZS5hcHBlbmQoJ3NwYW4nKVxuLy8gICAgICAgLmh0bWwoJ1PDqWxlY3Rpb24gZGVzJyk7XG4vLyAgICAgc2VsZWN0aW9uX2Nsb3NlLmFwcGVuZCgnaW5wdXQnKVxuLy8gICAgICAgLmF0dHJzKHsgY2xhc3M6ICduYl9zZWxlY3QnLCB0eXBlOiAnbnVtYmVyJyB9KVxuLy8gICAgICAgLnN0eWxlcyh7IGNvbG9yOiAnIzRmODFiZCcsICdtYXJnaW4tbGVmdCc6ICcxcHgnIH0pXG4vLyAgICAgICAucHJvcGVydHkoJ3ZhbHVlJywgNSk7XG4vLyAgICAgc2VsZWN0aW9uX2Nsb3NlLmFwcGVuZCgnc3BhbicpXG4vLyAgICAgICAuaHRtbCgncsOpZ2lvbnMgbGVzIHBsdXMgcHJvY2hlcycpO1xuLy8gICAgIGNvbnN0IHNlY3Rpb24gPSBtZW51X3NlbGVjdGlvbi5hcHBlbmQoJ3NlY3Rpb24nKVxuLy8gICAgICAgLmF0dHIoJ2NsYXNzJywgJ3NsaWRlci1jaGVja2JveCcpO1xuLy8gICAgIHNlY3Rpb24uYXBwZW5kKCdpbnB1dCcpXG4vLyAgICAgICAuYXR0cnMoeyB0eXBlOiAnY2hlY2tib3gnLCBpZDogJ2NoZWNrX3Byb3AnIH0pO1xuLy8gICAgIHNlY3Rpb24uYXBwZW5kKCdsYWJlbCcpXG4vLyAgICAgICAuYXR0cnMoeyBjbGFzczogJ2xhYmVsJywgZm9yOiAnY2hlY2tfcHJvcCcgfSlcbi8vICAgICAgIC50ZXh0KCdDZXJjbGVzIHByb3BvcnRpb25uZWxzIGF1IG51bcOpcmF0ZXVyJyk7XG4vL1xuLy8gICAgIC8vIGNvbnN0IHN3aXRjaF9idXR0b24gPSBtZW51X3NlbGVjdGlvbi5hcHBlbmQoJ3AnKVxuLy8gICAgIC8vICAgLmF0dHIoJ2NsYXNzJywgJ2J0bi1zd2l0Y2gnKTtcbi8vICAgICAvLyBzd2l0Y2hfYnV0dG9uLmFwcGVuZCgnaW5wdXQnKVxuLy8gICAgIC8vICAgLmF0dHJzKHsgdHlwZTogJ3JhZGlvJywgaWQ6ICd5ZXMnLCBuYW1lOiAnc3dpdGNoJywgY2xhc3M6ICdidG4tc3dpdGNoX19yYWRpbyBidG4tc3dpdGNoX19yYWRpb195ZXMnIH0pXG4vLyAgICAgLy8gc3dpdGNoX2J1dHRvbi5hcHBlbmQoJ2lucHV0Jylcbi8vICAgICAvLyAgIC5hdHRycyh7IHR5cGU6ICdyYWRpbycsIGlkOiAnbm8nLCBuYW1lOiAnc3dpdGNoJywgY2xhc3M6ICdidG4tc3dpdGNoX19yYWRpbyBidG4tc3dpdGNoX19yYWRpb19ubycgfSlcbi8vICAgICAvLyAgIC5wcm9wZXJ0eSgnY2hlY2tlZCcsICdjaGVja2VkJyk7XG4vLyAgICAgLy8gY29uc3QgeWVzX2xhYmVsID0gc3dpdGNoX2J1dHRvbi5hcHBlbmQoJ2xhYmVsJylcbi8vICAgICAvLyAgIC5hdHRycyh7IGZvcjogJ3llcycsIGNsYXNzOiAnYnRuLXN3aXRjaF9fbGFiZWwgYnRuLXN3aXRjaF9fbGFiZWxfeWVzJ30pO1xuLy8gICAgIC8vIHllc19sYWJlbC5hcHBlbmQoJ3NwYW4nKVxuLy8gICAgIC8vICAgLmF0dHIoJ2NsYXNzJywgJ2J0bi1zd2l0Y2hfX3R4dCcpXG4vLyAgICAgLy8gICAuaHRtbCgnJiN4ZjAwYzsnKTtcbi8vICAgICAvLyBjb25zdCBub19sYWJlbCA9IHN3aXRjaF9idXR0b24uYXBwZW5kKCdsYWJlbCcpXG4vLyAgICAgLy8gICAuYXR0cnMoeyBmb3I6ICdubycsIGNsYXNzOiAnYnRuLXN3aXRjaF9fbGFiZWwgYnRuLXN3aXRjaF9fbGFiZWxfbm8nIH0pO1xuLy8gICAgIC8vIG5vX2xhYmVsLmFwcGVuZCgnc3BhbicpXG4vLyAgICAgLy8gICAuYXR0cignY2xhc3MnLCAnYnRuLXN3aXRjaF9fdHh0Jylcbi8vICAgICAvLyAgIC5odG1sKCcmI3hmMDBkOycpO1xuLy9cbi8vICAgICB0aGlzLmJpbmRNZW51KCk7XG4vLyAgICAgdGhpcy5tYWtlVGFibGVTdGF0KCk7XG4vLyAgIH1cbi8vXG4vLyAgIGFwcGx5U2VsZWN0aW9uKG5iKSB7XG4vLyAgICAgYXBwLmNvbG9ycyA9IHt9O1xuLy8gICAgIGlmIChuYiA+IDApIHtcbi8vICAgICAgIHRoaXMuaGlnaGxpZ2h0X3NlbGVjdGlvbiA9IHRoaXMuZGF0YS5tYXAoKGZ0KSA9PiB7XG4vLyAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXByb3BlcnRpZXNcbi8vICAgICAgICAgY29uc3QgZ2xvYmFsX2Rpc3QgPSBtYXRoX3NxcnQodGhpcy5yYXRpb3MubWFwKHYgPT4gYGRpc3RfJHt2fWApLm1hcCh2ID0+IE1hdGgucG93KGZ0W3ZdLCAyKSkucmVkdWNlKChhLCBiKSA9PiBhICsgYikpO1xuLy8gICAgICAgICBjb25zdCBvYmogPSB7XG4vLyAgICAgICAgICAgaWQ6IGZ0LmlkLFxuLy8gICAgICAgICAgIGRpc3Q6IGdsb2JhbF9kaXN0LFxuLy8gICAgICAgICB9O1xuLy8gICAgICAgICB0aGlzLnJhdGlvcy5mb3JFYWNoKCh2KSA9PiB7IG9ialt2XSA9IGZ0W3ZdOyB9KTtcbi8vICAgICAgICAgcmV0dXJuIG9iajtcbi8vICAgICAgIH0pO1xuLy8gICAgICAgdGhpcy5oaWdobGlnaHRfc2VsZWN0aW9uLnNvcnQoKGEsIGIpID0+IGEuZGlzdCAtIGIuZGlzdCk7XG4vLyAgICAgICB0aGlzLmhpZ2hsaWdodF9zZWxlY3Rpb24uZm9yRWFjaCgoZWwsIGkpID0+IHsgZWwucmFuayA9IGkgKyAxOyB9KTtcbi8vICAgICAgIHRoaXMuaGlnaGxpZ2h0X3NlbGVjdGlvbiA9IHRoaXMuaGlnaGxpZ2h0X3NlbGVjdGlvbi5zbGljZSgxLCBuYiArIDEpO1xuLy8gICAgIH0gZWxzZSB7XG4vLyAgICAgICB0aGlzLmhpZ2hsaWdodF9zZWxlY3Rpb24gPSBbXTtcbi8vICAgICB9XG4vLyAgICAgdGhpcy5yZW1vdmVMaW5lcygpO1xuLy8gICAgIHRoaXMudXBkYXRlKCk7XG4vLyAgICAgdGhpcy51cGRhdGVNYXBSZWdpbygpO1xuLy8gICB9XG4vL1xuLy8gICB1cGRhdGUoKSB7XG4vLyAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4vLyAgICAgY29uc3QgZGF0YSA9IHNlbGYuZGF0YTtcbi8vICAgICBjb25zdCBoaWdobGlnaHRfc2VsZWN0aW9uID0gc2VsZi5oaWdobGlnaHRfc2VsZWN0aW9uO1xuLy8gICAgIGNvbnN0IG5iX3ZhcmlhYmxlcyA9IHNlbGYucmF0aW9zLmxlbmd0aDtcbi8vICAgICBjb25zdCBvZmZzZXQgPSBoZWlnaHQgLyBuYl92YXJpYWJsZXMgKyAxO1xuLy8gICAgIGxldCBoZWlnaHRfdG9fdXNlID0gb2Zmc2V0IC8gMjtcbi8vICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5iX3ZhcmlhYmxlczsgaSsrKSB7XG4vLyAgICAgICBjb25zdCByYXRpb19uYW1lID0gc2VsZi5yYXRpb3NbaV07XG4vLyAgICAgICBjb25zdCBzZWxlY3Rvcl9yYXRpb19uYW1lID0gYGxfJHtyYXRpb19uYW1lfWA7XG4vLyAgICAgICBjb25zdCBudW1fbmFtZSA9IHNlbGYubnVtc1tpXTtcbi8vICAgICAgIGNvbnN0IG15X3JlZ2lvbl92YWx1ZSA9IHNlbGYubXlfcmVnaW9uW3JhdGlvX25hbWVdO1xuLy8gICAgICAgY29uc3QgcmF0aW9fdmFsdWVzID0gdGhpcy5kYXRhLm1hcChkID0+IGRbcmF0aW9fbmFtZV0pO1xuLy8gICAgICAgbGV0IGcgPSB0aGlzLmRyYXdfZ3JvdXAuc2VsZWN0KGAjJHtzZWxlY3Rvcl9yYXRpb19uYW1lfWApO1xuLy8gICAgICAgbGV0IGF4aXMgPSB0aGlzLmRyYXdfZ3JvdXAuc2VsZWN0KGBnLmF4aXMtLXguJHtzZWxlY3Rvcl9yYXRpb19uYW1lfWApO1xuLy8gICAgICAgbGV0IGxheWVyX290aGVyO1xuLy8gICAgICAgbGV0IGxheWVyX2hpZ2hsaWdodGVkO1xuLy8gICAgICAgaWYgKCFnLm5vZGUoKSkge1xuLy8gICAgICAgICBnID0gdGhpcy5kcmF3X2dyb3VwXG4vLyAgICAgICAgICAgLmFwcGVuZCgnZycpXG4vLyAgICAgICAgICAgLmF0dHJzKHtcbi8vICAgICAgICAgICAgIGlkOiBzZWxlY3Rvcl9yYXRpb19uYW1lLFxuLy8gICAgICAgICAgICAgbnVtOiBudW1fbmFtZSxcbi8vICAgICAgICAgICAgIGNsYXNzOiAnZ3JwX3ZhcicsXG4vLyAgICAgICAgICAgfSk7XG4vLyAgICAgICAgIGF4aXMgPSBnLmFwcGVuZCgnZycpXG4vLyAgICAgICAgICAgLmF0dHJzKHtcbi8vICAgICAgICAgICAgIGNsYXNzOiBgYXhpcyBheGlzLS14ICR7c2VsZWN0b3JfcmF0aW9fbmFtZX1gLFxuLy8gICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlKDAsIDEwKScsXG4vLyAgICAgICAgICAgfSk7XG4vLyAgICAgICAgIGcuYXBwZW5kKCd0ZXh0Jylcbi8vICAgICAgICAgICAuYXR0cnMoe1xuLy8gICAgICAgICAgICAgeDogMCxcbi8vICAgICAgICAgICAgIHk6IC03LjUsXG4vLyAgICAgICAgICAgICBmaWxsOiAnIzRmODFiZCcsXG4vLyAgICAgICAgICAgICAnZm9udC1zaXplJzogJzExcHgnLFxuLy8gICAgICAgICAgICAgJ2ZvbnQtd2VpZ2h0JzogJ2JvbGQnLFxuLy8gICAgICAgICAgICAgJ2ZvbnQtZmFtaWx5JzogJ1wiU2lnbmlrYVwiLHNhbnMtc2VyaWYnLFxuLy8gICAgICAgICAgIH0pXG4vLyAgICAgICAgICAgLnRleHQocmF0aW9fbmFtZSk7XG4vLyAgICAgICAgIGxheWVyX290aGVyID0gZy5hcHBlbmQoJ2cnKS5hdHRyKCdjbGFzcycsICdvdGhlcmZlYXR1cmUnKTtcbi8vICAgICAgICAgbGF5ZXJfaGlnaGxpZ2h0ZWQgPSBnLmFwcGVuZCgnZycpLmF0dHIoJ2NsYXNzJywgJ2hpZ2hsaWdodGVkJyk7XG4vLyAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICBsYXllcl9vdGhlciA9IGcuc2VsZWN0KCdnLm90aGVyZmVhdHVyZScpO1xuLy8gICAgICAgICBsYXllcl9oaWdobGlnaHRlZCA9IGcuc2VsZWN0KCdnLmhpZ2hsaWdodGVkJyk7XG4vLyAgICAgICB9XG4vLyAgICAgICBnLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoMCwgJHtoZWlnaHRfdG9fdXNlfSlgKTtcbi8vICAgICAgIGxldCBfbWluO1xuLy8gICAgICAgbGV0IF9tYXg7XG4vLyAgICAgICB0aGlzLmRhdGEuc29ydCgoYSwgYikgPT4gYltgZGlzdF8ke3JhdGlvX25hbWV9YF0gLSBhW2BkaXN0XyR7cmF0aW9fbmFtZX1gXSk7XG4vLyAgICAgICBpZiAoaGlnaGxpZ2h0X3NlbGVjdGlvbi5sZW5ndGggPiAwKSB7XG4vLyAgICAgICAgIGNvbnN0IGRpc3RfYXhpcyA9IE1hdGgubWF4KFxuLy8gICAgICAgICAgIG1hdGhfYWJzKG15X3JlZ2lvbl92YWx1ZSAtICtkMy5taW4oaGlnaGxpZ2h0X3NlbGVjdGlvbiwgZCA9PiBkW3JhdGlvX25hbWVdKSksXG4vLyAgICAgICAgICAgbWF0aF9hYnMoK2QzLm1heChoaWdobGlnaHRfc2VsZWN0aW9uLCBkID0+IGRbcmF0aW9fbmFtZV0pIC0gbXlfcmVnaW9uX3ZhbHVlKSk7XG4vLyAgICAgICAgIGNvbnN0IG1hcmdpbl9taW5fbWF4ID0gbWF0aF9yb3VuZChkaXN0X2F4aXMpIC8gODtcbi8vICAgICAgICAgX21pbiA9IG15X3JlZ2lvbl92YWx1ZSAtIGRpc3RfYXhpcyAtIG1hcmdpbl9taW5fbWF4O1xuLy8gICAgICAgICBfbWF4ID0gbXlfcmVnaW9uX3ZhbHVlICsgZGlzdF9heGlzICsgbWFyZ2luX21pbl9tYXg7XG4vLyAgICAgICAgIC8vIGlmIChfbWluID4gX21heCkgeyBbX21pbiwgX21heF0gPSBbX21heCwgX21pbl07IH1cbi8vICAgICAgIH0gZWxzZSB7XG4vLyAgICAgICAgIGNvbnN0IGRpc3RfYXhpcyA9IE1hdGgubWF4KFxuLy8gICAgICAgICAgIG1hdGhfYWJzKG15X3JlZ2lvbl92YWx1ZSAtIGQzLm1pbihyYXRpb192YWx1ZXMpKSxcbi8vICAgICAgICAgICBtYXRoX2FicyhkMy5tYXgocmF0aW9fdmFsdWVzKSAtIG15X3JlZ2lvbl92YWx1ZSkpO1xuLy8gICAgICAgICBjb25zdCBtYXJnaW5fbWluX21heCA9IG1hdGhfcm91bmQoZGlzdF9heGlzKSAvIDg7XG4vLyAgICAgICAgIF9taW4gPSBteV9yZWdpb25fdmFsdWUgLSBkaXN0X2F4aXMgLSBtYXJnaW5fbWluX21heDtcbi8vICAgICAgICAgX21heCA9IG15X3JlZ2lvbl92YWx1ZSArIGRpc3RfYXhpcyArIG1hcmdpbl9taW5fbWF4O1xuLy8gICAgICAgfVxuLy8gICAgICAgdGhpcy5oaWdobGlnaHRfc2VsZWN0aW9uLmZvckVhY2goKGVsZW0pID0+IHtcbi8vICAgICAgICAgYXBwLmNvbG9yc1tlbGVtLmlkXSA9IGNvbXAoZWxlbVtyYXRpb19uYW1lXSwgbXlfcmVnaW9uX3ZhbHVlLCB0aGlzLnNlcmllX2ludmVyc2VkKTtcbi8vICAgICAgIH0pO1xuLy9cbi8vICAgICAgIGFwcC5jb2xvcnNbYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbl0gPSBjb2xvcl9oaWdobGlnaHQ7XG4vL1xuLy8gICAgICAgY29uc3Qgc2l6ZV9mdW5jID0gdGhpcy5wcm9wb3J0aW9ubmFsX3N5bWJvbHMgPyBuZXcgUHJvcFNpemVyKGQzLm1heChkYXRhLCBkID0+IGRbbnVtX25hbWVdKSwgMzMpLnNjYWxlIDogKCkgPT4gNy41O1xuLy8gICAgICAgY29uc3QgeFNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxuLy8gICAgICAgICAuZG9tYWluKFtfbWluLCBfbWF4XSlcbi8vICAgICAgICAgLnJhbmdlKFswLCB3aWR0aF0pO1xuLy9cbi8vICAgICAgIGF4aXNcbi8vICAgICAgICAgLnRyYW5zaXRpb24oKVxuLy8gICAgICAgICAuZHVyYXRpb24oMTI1KVxuLy8gICAgICAgICAuY2FsbChkMy5heGlzQm90dG9tKHhTY2FsZSkpO1xuLy9cbi8vICAgICAgIGNvbnN0IGJ1YmJsZXMxID0gbGF5ZXJfb3RoZXIuc2VsZWN0QWxsKCcuYnViYmxlJylcbi8vICAgICAgICAgLmRhdGEoZGF0YS5maWx0ZXIoZCA9PiBhcHAuY29sb3JzW2QuaWRdID09PSB1bmRlZmluZWQpLCBkID0+IGQuaWQpO1xuLy9cbi8vICAgICAgIGJ1YmJsZXMxXG4vLyAgICAgICAgIC50cmFuc2l0aW9uKClcbi8vICAgICAgICAgLmR1cmF0aW9uKDEyNSlcbi8vICAgICAgICAgLmF0dHJzKChkKSA9PiB7XG4vLyAgICAgICAgICAgbGV0IHhfdmFsdWUgPSB4U2NhbGUoZFtyYXRpb19uYW1lXSk7XG4vLyAgICAgICAgICAgaWYgKHhfdmFsdWUgPiB3aWR0aCkgeF92YWx1ZSA9IHdpZHRoICsgMjAwO1xuLy8gICAgICAgICAgIGVsc2UgaWYgKHhfdmFsdWUgPCAwKSB4X3ZhbHVlID0gLTIwMDtcbi8vICAgICAgICAgICByZXR1cm4ge1xuLy8gICAgICAgICAgICAgY3g6IHhfdmFsdWUsXG4vLyAgICAgICAgICAgICBjeTogMTAsXG4vLyAgICAgICAgICAgICByOiBzaXplX2Z1bmMoZFtudW1fbmFtZV0pLFxuLy8gICAgICAgICAgIH07XG4vLyAgICAgICAgIH0pXG4vLyAgICAgICAgIC5zdHlsZXMoZCA9PiAoe1xuLy8gICAgICAgICAgIGZpbGw6IGNvbG9yX2NvdW50cmllcyxcbi8vICAgICAgICAgICAnZmlsbC1vcGFjaXR5JzogMC4xLFxuLy8gICAgICAgICAgIHN0cm9rZTogJ2RhcmtncmF5Jyxcbi8vICAgICAgICAgICAnc3Ryb2tlLXdpZHRoJzogMC43NSxcbi8vICAgICAgICAgICAnc3Ryb2tlLW9wYWNpdHknOiAwLjc1LFxuLy8gICAgICAgICB9KSk7XG4vL1xuLy8gICAgICAgYnViYmxlczFcbi8vICAgICAgICAgLmVudGVyKClcbi8vICAgICAgICAgLmluc2VydCgnY2lyY2xlJylcbi8vICAgICAgICAgLnN0eWxlcyhkID0+ICh7XG4vLyAgICAgICAgICAgZmlsbDogY29sb3JfY291bnRyaWVzLFxuLy8gICAgICAgICAgICdmaWxsLW9wYWNpdHknOiAwLjEsXG4vLyAgICAgICAgICAgc3Ryb2tlOiAnZGFya2dyYXknLFxuLy8gICAgICAgICAgICdzdHJva2Utd2lkdGgnOiAwLjc1LFxuLy8gICAgICAgICAgICdzdHJva2Utb3BhY2l0eSc6IDAuNzUsXG4vLyAgICAgICAgIH0pKVxuLy8gICAgICAgICAudHJhbnNpdGlvbigpXG4vLyAgICAgICAgIC5kdXJhdGlvbigxMjUpXG4vLyAgICAgICAgIC5hdHRycygoZCkgPT4ge1xuLy8gICAgICAgICAgIGxldCB4X3ZhbHVlID0geFNjYWxlKGRbcmF0aW9fbmFtZV0pO1xuLy8gICAgICAgICAgIGlmICh4X3ZhbHVlID4gd2lkdGgpIHhfdmFsdWUgPSB3aWR0aCArIDIwMDtcbi8vICAgICAgICAgICBlbHNlIGlmICh4X3ZhbHVlIDwgMCkgeF92YWx1ZSA9IC0yMDA7XG4vLyAgICAgICAgICAgcmV0dXJuIHtcbi8vICAgICAgICAgICAgIGlkOiBkLmlkLFxuLy8gICAgICAgICAgICAgY2xhc3M6ICdidWJibGUnLFxuLy8gICAgICAgICAgICAgY3g6IHhfdmFsdWUsXG4vLyAgICAgICAgICAgICBjeTogMTAsXG4vLyAgICAgICAgICAgICByOiBzaXplX2Z1bmMoZFtudW1fbmFtZV0pLFxuLy8gICAgICAgICAgIH07XG4vLyAgICAgICAgIH0pO1xuLy9cbi8vICAgICAgIGJ1YmJsZXMxLmV4aXQoKS50cmFuc2l0aW9uKCkuZHVyYXRpb24oMTI1KS5yZW1vdmUoKTtcbi8vXG4vLyAgICAgICBjb25zdCBidWJibGVzMiA9IGxheWVyX2hpZ2hsaWdodGVkLnNlbGVjdEFsbCgnLmJ1YmJsZScpXG4vLyAgICAgICAgIC5kYXRhKGRhdGEuZmlsdGVyKGQgPT4gYXBwLmNvbG9yc1tkLmlkXSAhPT0gdW5kZWZpbmVkKSwgZCA9PiBkLmlkKTtcbi8vXG4vLyAgICAgICBidWJibGVzMlxuLy8gICAgICAgICAudHJhbnNpdGlvbigpXG4vLyAgICAgICAgIC5kdXJhdGlvbigxMjUpXG4vLyAgICAgICAgIC5hdHRycygoZCkgPT4ge1xuLy8gICAgICAgICAgIGxldCB4X3ZhbHVlID0geFNjYWxlKGRbcmF0aW9fbmFtZV0pO1xuLy8gICAgICAgICAgIGlmICh4X3ZhbHVlID4gd2lkdGgpIHhfdmFsdWUgPSB3aWR0aCArIDIwMDtcbi8vICAgICAgICAgICBlbHNlIGlmICh4X3ZhbHVlIDwgMCkgeF92YWx1ZSA9IC0yMDA7XG4vLyAgICAgICAgICAgcmV0dXJuIHtcbi8vICAgICAgICAgICAgIGN4OiB4X3ZhbHVlLFxuLy8gICAgICAgICAgICAgY3k6IDEwLFxuLy8gICAgICAgICAgICAgcjogc2l6ZV9mdW5jKGRbbnVtX25hbWVdKSxcbi8vICAgICAgICAgICB9O1xuLy8gICAgICAgICB9KVxuLy8gICAgICAgICAuc3R5bGVzKGQgPT4gKHtcbi8vICAgICAgICAgICBmaWxsOiBhcHAuY29sb3JzW2QuaWRdLFxuLy8gICAgICAgICAgICdmaWxsLW9wYWNpdHknOiBkLmlkID09PSBhcHAuY3VycmVudF9jb25maWcubXlfcmVnaW9uID8gMSA6IDAuNyxcbi8vICAgICAgICAgICBzdHJva2U6ICdkYXJrZ3JheScsXG4vLyAgICAgICAgICAgJ3N0cm9rZS13aWR0aCc6IDAuNzUsXG4vLyAgICAgICAgICAgJ3N0cm9rZS1vcGFjaXR5JzogMC43NSxcbi8vICAgICAgICAgfSkpO1xuLy9cbi8vICAgICAgIGJ1YmJsZXMyXG4vLyAgICAgICAgIC5lbnRlcigpXG4vLyAgICAgICAgIC5pbnNlcnQoJ2NpcmNsZScpXG4vLyAgICAgICAgIC5zdHlsZXMoZCA9PiAoe1xuLy8gICAgICAgICAgIGZpbGw6IGFwcC5jb2xvcnNbZC5pZF0sXG4vLyAgICAgICAgICAgJ2ZpbGwtb3BhY2l0eSc6IGQuaWQgPT09IGFwcC5jdXJyZW50X2NvbmZpZy5teV9yZWdpb24gPyAxIDogMC43LFxuLy8gICAgICAgICAgIHN0cm9rZTogJ2RhcmtncmF5Jyxcbi8vICAgICAgICAgICAnc3Ryb2tlLXdpZHRoJzogMC43NSxcbi8vICAgICAgICAgICAnc3Ryb2tlLW9wYWNpdHknOiAwLjc1LFxuLy8gICAgICAgICB9KSlcbi8vICAgICAgICAgLnRyYW5zaXRpb24oKVxuLy8gICAgICAgICAuZHVyYXRpb24oMTI1KVxuLy8gICAgICAgICAuYXR0cnMoKGQpID0+IHtcbi8vICAgICAgICAgICBsZXQgeF92YWx1ZSA9IHhTY2FsZShkW3JhdGlvX25hbWVdKTtcbi8vICAgICAgICAgICBpZiAoeF92YWx1ZSA+IHdpZHRoKSB4X3ZhbHVlID0gd2lkdGggKyAyMDA7XG4vLyAgICAgICAgICAgZWxzZSBpZiAoeF92YWx1ZSA8IDApIHhfdmFsdWUgPSAtMjAwO1xuLy8gICAgICAgICAgIHJldHVybiB7XG4vLyAgICAgICAgICAgICBpZDogZC5pZCxcbi8vICAgICAgICAgICAgIGNsYXNzOiAnYnViYmxlJyxcbi8vICAgICAgICAgICAgIGN4OiB4X3ZhbHVlLFxuLy8gICAgICAgICAgICAgY3k6IDEwLFxuLy8gICAgICAgICAgICAgcjogc2l6ZV9mdW5jKGRbbnVtX25hbWVdKSxcbi8vICAgICAgICAgICB9O1xuLy8gICAgICAgICB9KTtcbi8vXG4vLyAgICAgICBidWJibGVzMi5leGl0KCkudHJhbnNpdGlvbigpLmR1cmF0aW9uKDEyNSkucmVtb3ZlKCk7XG4vL1xuLy8gICAgICAgaGVpZ2h0X3RvX3VzZSArPSBvZmZzZXQ7XG4vLyAgICAgfVxuLy8gICAgIHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLm1ha2VUb29sdGlwcygpOyB9LCAxMjUpO1xuLy8gICB9XG4vL1xuLy8gICB1cGRhdGVDb21wbGV0dWRlKCkge1xuLy8gICAgIHRoaXMuY29tcGxldHVkZS51cGRhdGUoXG4vLyAgICAgICBjYWxjQ29tcGxldHVkZVN1YnNldChhcHAsIHRoaXMucmF0aW9zLCAnYXJyYXknKSxcbi8vICAgICAgIGNhbGNQb3BDb21wbGV0dWRlU3Vic2V0KGFwcCwgdGhpcy5yYXRpb3MpKTtcbi8vICAgfVxuLy9cbi8vICAgdXBkYXRlTWFwUmVnaW8oKSB7XG4vLyAgICAgaWYgKCF0aGlzLm1hcF9lbGVtKSByZXR1cm47XG4vLyAgICAgdGhpcy5tYXBfZWxlbS50YXJnZXRfbGF5ZXIuc2VsZWN0QWxsKCdwYXRoJylcbi8vICAgICAgIC5hdHRyKCdmaWxsJywgKGQpID0+IHtcbi8vICAgICAgICAgY29uc3QgX2lkID0gZC5pZDtcbi8vICAgICAgICAgaWYgKF9pZCA9PT0gYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbikge1xuLy8gICAgICAgICAgIHJldHVybiBjb2xvcl9oaWdobGlnaHQ7XG4vLyAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jdXJyZW50X2lkcy5pbmRleE9mKF9pZCkgPiAtMSkge1xuLy8gICAgICAgICAgIGlmIChhcHAuY29sb3JzW19pZF0pIHJldHVybiBjb2xvcl9kZWZhdWx0X2Rpc3NpbTtcbi8vICAgICAgICAgICByZXR1cm4gY29sb3JfY291bnRyaWVzO1xuLy8gICAgICAgICB9XG4vLyAgICAgICAgIHJldHVybiBjb2xvcl9kaXNhYmxlZDtcbi8vICAgICAgIH0pO1xuLy8gICB9XG4vL1xuLy8gICBoYW5kbGVDbGlja01hcChkLCBwYXJlbnQpIHtcbi8vICAgICBsZXQgdG9fZGlzcGxheSA9IGZhbHNlO1xuLy8gICAgIGNvbnN0IGlkID0gZC5pZDtcbi8vICAgICBpZiAodGhpcy5jdXJyZW50X2lkcy5pbmRleE9mKGlkKSA8IDAgfHwgaWQgPT09IGFwcC5jdXJyZW50X2NvbmZpZy5teV9yZWdpb24pIHJldHVybjtcbi8vICAgICBpZiAoYXBwLmNvbG9yc1tpZF0gIT09IHVuZGVmaW5lZCkge1xuLy8gICAgICAgLy8gUmVtb3ZlIHRoZSBjbGlja2VkIGZlYXR1cmUgZnJvbSB0aGUgY29sb3JlZCBzZWxlY3Rpb24gb24gdGhlIGNoYXJ0OlxuLy8gICAgICAgY29uc3QgaWRfdG9fcmVtb3ZlID0gdGhpcy5oaWdobGlnaHRfc2VsZWN0aW9uXG4vLyAgICAgICAgIC5tYXAoKGZ0LCBpKSA9PiAoZnQuaWQgPT09IGlkID8gaSA6IG51bGwpKS5maWx0ZXIoZnQgPT4gZnQpWzBdO1xuLy8gICAgICAgdGhpcy5oaWdobGlnaHRfc2VsZWN0aW9uLnNwbGljZShpZF90b19yZW1vdmUsIDEpO1xuLy8gICAgICAgLy8gQ2hhbmdlIGl0cyBjb2xvciBpbiB0aGUgZ2xvYmFsIGNvbG9ycyBvYmplY3Q6XG4vLyAgICAgICBhcHAuY29sb3JzW2lkXSA9IHVuZGVmaW5lZDtcbi8vICAgICAgIC8vIENoYW5nZSB0aGUgY29sb3Igb24gdGhlIG1hcDpcbi8vICAgICAgIGQzLnNlbGVjdChwYXJlbnQpLmF0dHIoJ2ZpbGwnLCBjb2xvcl9jb3VudHJpZXMpO1xuLy8gICAgIH0gZWxzZSB7XG4vLyAgICAgICBhcHAuY29sb3JzW2lkXSA9IGNvbG9yX2RlZmF1bHRfZGlzc2ltO1xuLy8gICAgICAgLy8gQ2hhbmdlIHRoZSBjb2xvciBvbiB0aGUgbWFwOlxuLy8gICAgICAgZDMuc2VsZWN0KHBhcmVudCkuYXR0cignZmlsbCcsIGNvbG9yX2RlZmF1bHRfZGlzc2ltKTtcbi8vICAgICAgIC8vIEFkZCB0aGUgY2xpY2tlZCBmZWF0dXJlIG9uIHRoZSBjb2xvcmVkIHNlbGVjdGlvbiBvbiB0aGUgY2hhcnQ6XG4vLyAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1wcm9wZXJ0aWVzXG4vLyAgICAgICBjb25zdCBnbG9iYWxfZGlzdCA9IG1hdGhfc3FydCh0aGlzLnJhdGlvcy5tYXAodiA9PiBgZGlzdF8ke3Z9YCkubWFwKHYgPT4gTWF0aC5wb3coK2QucHJvcGVydGllc1t2XSwgMikpLnJlZHVjZSgoYSwgYikgPT4gYSArIGIpKTtcbi8vICAgICAgIGNvbnN0IG9iaiA9IHtcbi8vICAgICAgICAgaWQsXG4vLyAgICAgICAgIGRpc3Q6IGdsb2JhbF9kaXN0LFxuLy8gICAgICAgfTtcbi8vICAgICAgIHRoaXMucmF0aW9zLmZvckVhY2goKHYpID0+IHsgb2JqW3ZdID0gK2QucHJvcGVydGllc1t2XTsgfSk7XG4vLyAgICAgICB0aGlzLmhpZ2hsaWdodF9zZWxlY3Rpb24ucHVzaChvYmopO1xuLy8gICAgICAgdG9fZGlzcGxheSA9IHRydWU7XG4vLyAgICAgfVxuLy8gICAgIHRoaXMuaGlnaGxpZ2h0X3NlbGVjdGlvbi5zb3J0KChhLCBiKSA9PiBhLmRpc3QgLSBiLmRpc3QpO1xuLy8gICAgIHRoaXMuaGlnaGxpZ2h0X3NlbGVjdGlvbi5mb3JFYWNoKChlbCwgaSkgPT4geyBlbC5yYW5rID0gaSArIDE7IH0pO1xuLy8gICAgIHRoaXMucmVtb3ZlTGluZXMoKTtcbi8vICAgICB0aGlzLnVwZGF0ZSgpO1xuLy8gICAgIGlmICh0b19kaXNwbGF5KSBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5kaXNwbGF5TGluZShpZCk7IH0sIDE1MCk7XG4vLyAgIH1cbi8vXG4vLyAgIG1ha2VUb29sdGlwcygpIHtcbi8vICAgICBjb25zdCBzZWxmID0gdGhpcztcbi8vICAgICB0aGlzLmRyYXdfZ3JvdXAuc2VsZWN0QWxsKCdnLmdycF92YXInKVxuLy8gICAgICAgLnNlbGVjdEFsbCgnY2lyY2xlJylcbi8vICAgICAgICAgLm9uKCdtb3VzZW92ZXInLCAoKSA9PiB7XG4vLyAgICAgICAgICAgY2xlYXJUaW1lb3V0KHQpO1xuLy8gICAgICAgICAgIHRoaXMudG9vbHRpcC5zdHlsZSgnZGlzcGxheScsIG51bGwpO1xuLy8gICAgICAgICB9KVxuLy8gICAgICAgICAub24oJ21vdXNlb3V0JywgKCkgPT4ge1xuLy8gICAgICAgICAgIGNsZWFyVGltZW91dCh0KTtcbi8vICAgICAgICAgICB0ID0gc2V0VGltZW91dCgoKSA9PiB7IHRoaXMudG9vbHRpcC5zdHlsZSgnZGlzcGxheScsICdub25lJyk7IH0sIDI1MCk7XG4vLyAgICAgICAgIH0pXG4vLyAgICAgICAgIC5vbignbW91c2Vtb3ZlIG1vdXNlZG93bicsIGZ1bmN0aW9uIChkKSB7XG4vLyAgICAgICAgICAgY29uc3QgY29udGVudCA9IFtdO1xuLy8gICAgICAgICAgIGNvbnN0IHJhdGlvX24gPSB0aGlzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5pZC5yZXBsYWNlKCdsXycsICcnKTtcbi8vICAgICAgICAgICBjb25zdCB1bml0X3JhdGlvID0gdmFyaWFibGVzX2luZm8uZmluZChmdCA9PiBmdC5pZCA9PT0gcmF0aW9fbikudW5pdDtcbi8vICAgICAgICAgICBjb25zdCByYW5rID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ3JhbmsnKTtcbi8vICAgICAgICAgICBjb250ZW50LnB1c2goYCR7cmF0aW9fbn0gOiAke01hdGgucm91bmQoZFtyYXRpb19uXSAqIDEwKSAvIDEwfSAke3VuaXRfcmF0aW99YCk7XG4vLyAgICAgICAgICAgbGV0IG51bV9uLCB1bml0X251bSwgY29lZjtcbi8vICAgICAgICAgICBpZiAoc2VsZi5wcm9wb3J0aW9ubmFsX3N5bWJvbHMpIHtcbi8vICAgICAgICAgICAgIG51bV9uID0gdGhpcy5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdudW0nKTtcbi8vICAgICAgICAgICAgIGNvbnN0IG8gPSB2YXJpYWJsZXNfaW5mby5maW5kKGZ0ID0+IGZ0LmlkID09PSBudW1fbik7XG4vLyAgICAgICAgICAgICB1bml0X251bSA9IG8udW5pdDtcbi8vICAgICAgICAgICAgIGNvZWYgPSArby5mb3JtdWxhO1xuLy8gICAgICAgICAgICAgY29lZiA9IGlzTmFOKGNvZWYpIHx8IGNvZWYgPT09IDAgPyAxIDogY29lZjtcbi8vICAgICAgICAgICAgIGNvbnRlbnQucHVzaChgJHtudW1fbn0gKG51bcOpcmF0ZXVyKSA6ICR7TWF0aC5yb3VuZChkW251bV9uXSAqIGNvZWYgKiAxMCkgLyAxMH0gJHt1bml0X251bX1gKTtcbi8vICAgICAgICAgICB9XG4vLyAgICAgICAgICAgaWYgKHJhbmspIHtcbi8vICAgICAgICAgICAgIGlmICgrcmFuayA9PT0gMSkge1xuLy8gICAgICAgICAgICAgICBjb250ZW50LnB1c2goJyhSw6lnaW9uIGxhIHBsdXMgcHJvY2hlKScpO1xuLy8gICAgICAgICAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgICAgICAgY29udGVudC5wdXNoKGAoJHtyYW5rfcOobWUgcsOpZ2lvbiBsYSBwbHVzIHByb2NoZSlgKVxuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICAgIH1cbi8vICAgICAgICAgICBjbGVhclRpbWVvdXQodCk7XG4vLyAgICAgICAgICAgc2VsZi50b29sdGlwLnNlbGVjdCgnLnRpdGxlJylcbi8vICAgICAgICAgICAgIC5odG1sKFtcbi8vICAgICAgICAgICAgICAgJzxiPicsIGQubmFtZSwgJyAoJywgZC5pZCwgJyknLCAnPC9iPiddLmpvaW4oJycpKTtcbi8vICAgICAgICAgICBzZWxmLnRvb2x0aXAuc2VsZWN0KCcuY29udGVudCcpXG4vLyAgICAgICAgICAgICAuaHRtbChjb250ZW50LmpvaW4oJzxicj4nKSk7XG4vLyAgICAgICAgICAgc2VsZi50b29sdGlwXG4vLyAgICAgICAgICAgICAuc3R5bGVzKHtcbi8vICAgICAgICAgICAgICAgZGlzcGxheTogbnVsbCxcbi8vICAgICAgICAgICAgICAgbGVmdDogYCR7ZDMuZXZlbnQucGFnZVggLSA1fXB4YCxcbi8vICAgICAgICAgICAgICAgdG9wOiBgJHtkMy5ldmVudC5wYWdlWSAtIDY1fXB4YCB9KTtcbi8vICAgICAgICAgfSlcbi8vICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uIChkKSB7XG4vLyAgICAgICAgICAgaWYgKHRoaXMuc3R5bGUuZmlsbCAhPT0gY29sb3JfY291bnRyaWVzKSB7XG4vLyAgICAgICAgICAgICBzZWxmLmRpc3BsYXlMaW5lKGQuaWQpO1xuLy8gICAgICAgICAgIH1cbi8vICAgICAgICAgICBzZWxmLm1hcF9lbGVtLnRhcmdldF9sYXllclxuLy8gICAgICAgICAgICAgLnNlbGVjdEFsbCgncGF0aCcpXG4vLyAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoZnQpIHtcbi8vICAgICAgICAgICAgICAgaWYgKGZ0LmlkID09PSBkLmlkKSB7XG4vLyAgICAgICAgICAgICAgICAgY29uc3QgY2xvbmVkID0gdGhpcy5jbG9uZU5vZGUoKTtcbi8vICAgICAgICAgICAgICAgICBjbG9uZWQuc3R5bGUuZmlsbCA9ICdyZWQnO1xuLy8gICAgICAgICAgICAgICAgIGNsb25lZC5zdHlsZS5zdHJva2UgPSAnb3JhbmdlJztcbi8vICAgICAgICAgICAgICAgICBjbG9uZWQuc3R5bGUuc3Ryb2tlV2lkdGggPSAnMi4yNXB4Jztcbi8vICAgICAgICAgICAgICAgICBjbG9uZWQuY2xhc3NMaXN0LmFkZCgnY2xvbmVkJyk7XG4vLyAgICAgICAgICAgICAgICAgc2VsZi5tYXBfZWxlbS5sYXllcnMubm9kZSgpLmFwcGVuZENoaWxkKGNsb25lZCk7XG4vLyAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IGNsb25lZC5yZW1vdmUoKTsgfSwgNTAwMCk7XG4vLyAgICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgIH0pO1xuLy8gICAgICAgICB9KTtcbi8vICAgfVxuLy9cbi8vICAgZGlzcGxheUxpbmUoaWRfcmVnaW9uKSB7XG4vLyAgICAgaWYgKHRoaXMucmF0aW9zLmxlbmd0aCA9PT0gMSkgcmV0dXJuO1xuLy8gICAgIGNvbnN0IGNvb3JkcyA9IFtdO1xuLy8gICAgIHN2Z19jb250YWluZXIuc2VsZWN0QWxsKCcuZ3JwX3ZhcicpXG4vLyAgICAgICAuc2VsZWN0QWxsKGAjJHtpZF9yZWdpb259LmJ1YmJsZWApXG4vLyAgICAgICAuZWFjaChmdW5jdGlvbiAoKSB7XG4vLyAgICAgICAgIGNvbnN0IHR5ID0gK3RoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgndHJhbnNmb3JtJykuc3BsaXQoJ3RyYW5zbGF0ZSgwLCAnKVsxXS5yZXBsYWNlKCcpJywgJycpO1xuLy8gICAgICAgICBjb29yZHMucHVzaChbdGhpcy5jeC5iYXNlVmFsLnZhbHVlLCB0aGlzLmN5LmJhc2VWYWwudmFsdWUgKyB0eV0pO1xuLy8gICAgICAgfSk7XG4vL1xuLy8gICAgIGNvbnN0IGwgPSB0aGlzLmRyYXdfZ3JvdXAuYXBwZW5kKCdwYXRoJylcbi8vICAgICAgIC5kYXR1bShjb29yZHMpXG4vLyAgICAgICAuYXR0cnMoe1xuLy8gICAgICAgICBjbGFzczogJ3JlZ2lvX2xpbmUnLFxuLy8gICAgICAgICBmaWxsOiAnbm9uZScsXG4vLyAgICAgICAgIHN0cm9rZTogJ3N0ZWVsYmx1ZScsXG4vLyAgICAgICAgICdzdHJva2UtbGluZWpvaW4nOiAncm91bmQnLFxuLy8gICAgICAgICAnc3Ryb2tlLWxpbmVjYXAnOiAncm91bmQnLFxuLy8gICAgICAgICAnc3Ryb2tlLXdpZHRoJzogMS41LFxuLy8gICAgICAgICBkOiBkMy5saW5lKCkueChfZCA9PiBfZFswXSkueShfZCA9PiBfZFsxXSksXG4vLyAgICAgICB9KTtcbi8vICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbi8vICAgICAgIGwucmVtb3ZlKCk7XG4vLyAgICAgfSwgNTAwMCk7XG4vLyAgIH1cbi8vXG4vLyAgIHVwZGF0ZUNoYW5nZVJlZ2lvbigpIHtcbi8vICAgICB0aGlzLnJlbW92ZUxpbmVzKCk7XG4vLyAgICAgaWYgKGFwcC5jdXJyZW50X2NvbmZpZy5maWx0ZXJfa2V5ICE9PSB1bmRlZmluZWQpIHtcbi8vICAgICAgIHRoaXMuY2hhbmdlU3R1ZHlab25lKCk7XG4vLyAgICAgfSBlbHNlIHtcbi8vICAgICAgIHRoaXMubWFwX2VsZW0udXBkYXRlTGVnZW5kKCk7XG4vLyAgICAgICB0aGlzLm15X3JlZ2lvbiA9IHRoaXMuZGF0YS5maW5kKGQgPT4gZC5pZCA9PT0gYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbik7XG4vLyAgICAgICB0aGlzLmRhdGFcbi8vICAgICAgICAgLmZvckVhY2goKGZ0KSA9PiB7XG4vLyAgICAgICAgICAgdGhpcy5yYXRpb3MuZm9yRWFjaCgodikgPT4ge1xuLy8gICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4vLyAgICAgICAgICAgICBmdFtgZGlzdF8ke3Z9YF0gPSBtYXRoX2FicygrZnRbdl0gLSArdGhpcy5teV9yZWdpb25bdl0pO1xuLy8gICAgICAgICAgIH0pO1xuLy8gICAgICAgICB9KTtcbi8vICAgICAgIHRoaXMudXBkYXRlVGFibGVTdGF0KCk7XG4vLyAgICAgICB0aGlzLnVwZGF0ZSgpO1xuLy8gICAgICAgdGhpcy51cGRhdGVNYXBSZWdpbygpO1xuLy8gICAgICAgLy8gdGhpcy5hcHBseVNlbGVjdGlvbih0aGlzLmhpZ2hsaWdodF9zZWxlY3Rpb24ubGVuZ3RoKTtcbi8vICAgICB9XG4vLyAgIH1cbi8vXG4vLyAgIGNoYW5nZVN0dWR5Wm9uZSgpIHtcbi8vICAgICB0aGlzLnJlbW92ZUxpbmVzKCk7XG4vLyAgICAgdGhpcy5tYXBfZWxlbS51cGRhdGVMZWdlbmQoKTtcbi8vICAgICB0aGlzLnJhdGlvcyA9IGFwcC5jdXJyZW50X2NvbmZpZy5yYXRpbztcbi8vICAgICB0aGlzLm51bXMgPSBhcHAuY3VycmVudF9jb25maWcubnVtO1xuLy8gICAgIHRoaXMuZGF0YSA9IGFwcC5jdXJyZW50X2RhdGEuZmlsdGVyKFxuLy8gICAgICAgZnQgPT4gdGhpcy5yYXRpb3MubWFwKHYgPT4gISFmdFt2XSkuZXZlcnkodiA9PiB2ID09PSB0cnVlKSkuc2xpY2UoKTtcbi8vICAgICB0aGlzLm15X3JlZ2lvbiA9IHRoaXMuZGF0YS5maW5kKGQgPT4gZC5pZCA9PT0gYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbik7XG4vLyAgICAgdGhpcy5kYXRhLmZvckVhY2goKGZ0KSA9PiB7XG4vLyAgICAgICB0aGlzLnJhdGlvcy5mb3JFYWNoKCh2KSA9PiB7XG4vLyAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuLy8gICAgICAgICBmdFtgZGlzdF8ke3Z9YF0gPSBtYXRoX2FicygrZnRbdl0gLSArdGhpcy5teV9yZWdpb25bdl0pO1xuLy8gICAgICAgfSk7XG4vLyAgICAgfSk7XG4vLyAgICAgdGhpcy5jdXJyZW50X2lkcyA9IHRoaXMuZGF0YS5tYXAoZCA9PiBkLmlkKTtcbi8vICAgICBjb25zdCB0ZW1wID0gdGhpcy5oaWdobGlnaHRfc2VsZWN0aW9uLmxlbmd0aDtcbi8vICAgICB0aGlzLmhpZ2hsaWdodF9zZWxlY3Rpb24gPSBbXTtcbi8vICAgICB0aGlzLnVwZGF0ZVRhYmxlU3RhdCgpO1xuLy8gICAgIHRoaXMudXBkYXRlQ29tcGxldHVkZSgpO1xuLy8gICAgIHRoaXMuYXBwbHlTZWxlY3Rpb24odGVtcCk7XG4vLyAgICAgdGhpcy51cGRhdGVNYXBSZWdpbygpO1xuLy8gICB9XG4vL1xuLy8gICBhZGRWYXJpYWJsZShjb2RlX3ZhcmlhYmxlLCBuYW1lX3ZhcmlhYmxlKSB7XG4vLyAgICAgdGhpcy5yZW1vdmVMaW5lcygpO1xuLy8gICAgIHRoaXMucmF0aW9zID0gYXBwLmN1cnJlbnRfY29uZmlnLnJhdGlvLnNsaWNlKCk7XG4vLyAgICAgdGhpcy5udW1zID0gYXBwLmN1cnJlbnRfY29uZmlnLm51bS5zbGljZSgpO1xuLy8gICAgIHRoaXMuZGF0YSA9IGFwcC5jdXJyZW50X2RhdGEuZmlsdGVyKFxuLy8gICAgICAgZnQgPT4gdGhpcy5yYXRpb3MubWFwKHYgPT4gISFmdFt2XSkuZXZlcnkodiA9PiB2ID09PSB0cnVlKSkuc2xpY2UoKTtcbi8vICAgICB0aGlzLmN1cnJlbnRfaWRzID0gdGhpcy5kYXRhLm1hcChkID0+IGQuaWQpO1xuLy8gICAgIHRoaXMubXlfcmVnaW9uID0gdGhpcy5kYXRhLmZpbmQoZCA9PiBkLmlkID09PSBhcHAuY3VycmVudF9jb25maWcubXlfcmVnaW9uKTtcbi8vICAgICB0aGlzLmRhdGEuZm9yRWFjaCgoZnQpID0+IHtcbi8vICAgICAgIHRoaXMucmF0aW9zLmZvckVhY2goKHYpID0+IHtcbi8vICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4vLyAgICAgICAgIGZ0W2BkaXN0XyR7dn1gXSA9IG1hdGhfYWJzKCtmdFt2XSAtICt0aGlzLm15X3JlZ2lvblt2XSk7XG4vLyAgICAgICB9KTtcbi8vICAgICB9KTtcbi8vICAgICB0aGlzLmhpZ2hsaWdodF9zZWxlY3Rpb24gPSB0aGlzLmhpZ2hsaWdodF9zZWxlY3Rpb24ubWFwKChkKSA9PiB7XG4vLyAgICAgICBjb25zdCBvYmogPSBPYmplY3QuYXNzaWduKGQsIHt9KTtcbi8vICAgICAgIGNvbnN0IGZ0ID0gdGhpcy5kYXRhLmZpbmQoZWxlbSA9PiBlbGVtLmlkID09PSBvYmouaWQpO1xuLy8gICAgICAgaWYgKCFmdCkgcmV0dXJuIHVuZGVmaW5lZDtcbi8vICAgICAgIHRoaXMucmF0aW9zLmZvckVhY2goKHYpID0+IHtcbi8vICAgICAgICAgb2JqW3ZdID0gK2Z0W3ZdO1xuLy8gICAgICAgICBvYmpbYGRpc3RfJHt2fWBdID0gK2Z0W2BkaXN0XyR7dn1gXTtcbi8vICAgICAgIH0pO1xuLy8gICAgICAgcmV0dXJuIG9iajtcbi8vICAgICB9KS5maWx0ZXIoZCA9PiAhIWQpO1xuLy8gICAgIC8vIEFuZCB1c2UgaXQgaW1tZWRpYXRseTpcbi8vICAgICB0aGlzLnVwZGF0ZVRhYmxlU3RhdCgpO1xuLy8gICAgIHRoaXMudXBkYXRlKCk7XG4vLyAgICAgdGhpcy51cGRhdGVNYXBSZWdpbygpO1xuLy8gICB9XG4vL1xuLy8gICByZW1vdmVWYXJpYWJsZShjb2RlX3ZhcmlhYmxlKSB7XG4vLyAgICAgdGhpcy5yZW1vdmVMaW5lcygpO1xuLy8gICAgIHRoaXMucmF0aW9zID0gYXBwLmN1cnJlbnRfY29uZmlnLnJhdGlvLnNsaWNlKCk7XG4vLyAgICAgdGhpcy5udW1zID0gYXBwLmN1cnJlbnRfY29uZmlnLm51bS5zbGljZSgpO1xuLy8gICAgIHRoaXMuZGF0YSA9IGFwcC5jdXJyZW50X2RhdGEuZmlsdGVyKFxuLy8gICAgICAgZnQgPT4gdGhpcy5yYXRpb3MubWFwKHYgPT4gISFmdFt2XSkuZXZlcnkodiA9PiB2ID09PSB0cnVlKSkuc2xpY2UoKTtcbi8vICAgICB0aGlzLm15X3JlZ2lvbiA9IHRoaXMuZGF0YS5maW5kKGQgPT4gZC5pZCA9PT0gYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbik7XG4vL1xuLy8gICAgIHRoaXMuZHJhd19ncm91cC5zZWxlY3QoYGcjbF8ke2NvZGVfdmFyaWFibGV9YCkucmVtb3ZlKCk7XG4vLyAgICAgLy8gQW5kIHVzZSBpdCBpbW1lZGlhdGx5OlxuLy8gICAgIHRoaXMudXBkYXRlVGFibGVTdGF0KCk7XG4vLyAgICAgdGhpcy51cGRhdGUoKTtcbi8vICAgICB0aGlzLnVwZGF0ZU1hcFJlZ2lvKCk7XG4vLyAgIH1cbi8vXG4vLyAgIGJpbmRNZW51KCkge1xuLy8gICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuLy8gICAgIGNvbnN0IG1lbnUgPSBkMy5zZWxlY3QoJyNtZW51X3NlbGVjdGlvbicpO1xuLy8gICAgIGNvbnN0IGFwcGx5Y2hhbmdlID0gZnVuY3Rpb24gKCkge1xuLy8gICAgICAgLy8gc2VsZi5tYXBfZWxlbS5yZW1vdmVSZWN0QnJ1c2goKTtcbi8vICAgICAgIGNvbnN0IHZhbHVlID0gK3RoaXMudmFsdWU7XG4vLyAgICAgICBpZiAodmFsdWUgPCAxKSB7XG4vLyAgICAgICAgIHRoaXMudmFsdWUgPSAxO1xuLy8gICAgICAgICByZXR1cm47XG4vLyAgICAgICB9XG4vLyAgICAgICBzZWxmLmFwcGx5U2VsZWN0aW9uKHZhbHVlKTtcbi8vICAgICB9O1xuLy8gICAgIG1lbnUuc2VsZWN0KCcubmJfc2VsZWN0Jylcbi8vICAgICAgIC5vbignY2hhbmdlJywgYXBwbHljaGFuZ2UpO1xuLy8gICAgIG1lbnUuc2VsZWN0KCcubmJfc2VsZWN0Jylcbi8vICAgICAgIC5vbignd2hlZWwnLCBhcHBseWNoYW5nZSk7XG4vLyAgICAgbWVudS5zZWxlY3QoJy5uYl9zZWxlY3QnKVxuLy8gICAgICAgLm9uKCdrZXl1cCcsIGFwcGx5Y2hhbmdlKTtcbi8vICAgICBtZW51LnNlbGVjdCgnI2NoZWNrX3Byb3AnKVxuLy8gICAgICAgLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4vLyAgICAgICAgIGlmICh0aGlzLmNoZWNrZWQpIHtcbi8vICAgICAgICAgICBzZWxmLnByb3BvcnRpb25uYWxfc3ltYm9scyA9IHRydWU7XG4vLyAgICAgICAgIH0gZWxzZSB7XG4vLyAgICAgICAgICAgc2VsZi5wcm9wb3J0aW9ubmFsX3N5bWJvbHMgPSBmYWxzZTtcbi8vICAgICAgICAgfVxuLy8gICAgICAgICBzZWxmLnVwZGF0ZSgpO1xuLy8gICAgICAgfSk7XG4vLyAgIH1cbi8vXG4vLyAgIHJlbW92ZUxpbmVzKCkge1xuLy8gICAgIHRoaXMuZHJhd19ncm91cC5zZWxlY3RBbGwoJy5yZWdpb19saW5lJykucmVtb3ZlKCk7XG4vLyAgIH1cbi8vXG4vLyAgIHJlbW92ZSgpIHtcbi8vICAgICB0aGlzLm1hcF9lbGVtLmxheWVycy5zZWxlY3RBbGwoJy5jbG9uZWQnKS5yZW1vdmUoKTtcbi8vICAgICB0aGlzLm1hcF9lbGVtLnVuYmluZEJydXNoQ2xpY2soKTtcbi8vICAgICB0aGlzLm1hcF9lbGVtID0gbnVsbDtcbi8vICAgICB0aGlzLnRhYmxlX3N0YXRzLnJlbW92ZSgpO1xuLy8gICAgIHRoaXMudGFibGVfc3RhdHMgPSBudWxsO1xuLy8gICAgIHN2Z19iYXIuaHRtbCgnJyk7XG4vLyAgIH1cbi8vXG4vLyAgIGJpbmRNYXAobWFwX2VsZW0pIHtcbi8vICAgICB0aGlzLm1hcF9lbGVtID0gbWFwX2VsZW07XG4vLyAgICAgdGhpcy5tYXBfZWxlbS5yZXNldENvbG9ycyh0aGlzLmN1cnJlbnRfaWRzKTtcbi8vICAgICB0aGlzLm1hcF9lbGVtLmRpc3BsYXlMZWdlbmQoMik7XG4vLyAgICAgdGhpcy5hcHBseVNlbGVjdGlvbig1KTtcbi8vICAgfVxuLy9cbi8vICAgcHJlcGFyZVRhYmxlU3RhdCgpIHtcbi8vICAgICBjb25zdCByYXRpb3MgPSB0aGlzLnJhdGlvcztcbi8vICAgICBjb25zdCBhbGxfdmFsdWVzID0gcmF0aW9zLm1hcCh2ID0+IHRoaXMuZGF0YS5tYXAoZCA9PiArZFt2XSkpO1xuLy8gICAgIGNvbnN0IG15X3JlZ2lvbiA9IHRoaXMubXlfcmVnaW9uO1xuLy8gICAgIGNvbnN0IGZlYXR1cmVzID0gYWxsX3ZhbHVlcy5tYXAoKHZhbHVlcywgaSkgPT4gKHtcbi8vICAgICAgIE1pbjogZDMubWluKHZhbHVlcyksXG4vLyAgICAgICBNYXg6IGQzLm1heCh2YWx1ZXMpLFxuLy8gICAgICAgTW95OiBnZXRNZWFuKHZhbHVlcyksXG4vLyAgICAgICBNZWQ6IGQzLm1lZGlhbih2YWx1ZXMpLFxuLy8gICAgICAgaWQ6IHRoaXMucmF0aW9zW2ldLFxuLy8gICAgICAgVmFyaWFibGU6IHRoaXMucmF0aW9zW2ldLFxuLy8gICAgICAgJ01hIHLDqWdpb24nOiBteV9yZWdpb25bdGhpcy5yYXRpb3NbaV1dLFxuLy8gICAgIH0pKTtcbi8vICAgICByZXR1cm4gZmVhdHVyZXM7XG4vLyAgIH1cbi8vXG4vLyAgIHVwZGF0ZVRhYmxlU3RhdCgpIHtcbi8vICAgICB0aGlzLnRhYmxlX3N0YXRzLnJlbW92ZUFsbCgpO1xuLy8gICAgIHRoaXMudGFibGVfc3RhdHMuYWRkRmVhdHVyZXModGhpcy5wcmVwYXJlVGFibGVTdGF0KCkpO1xuLy8gICB9XG4vL1xuLy8gICBtYWtlVGFibGVTdGF0KCkge1xuLy8gICAgIGNvbnN0IGZlYXR1cmVzID0gdGhpcy5wcmVwYXJlVGFibGVTdGF0KCk7XG4vLyAgICAgdGhpcy50YWJsZV9zdGF0cyA9IG5ldyBUYWJsZVJlc3VtZVN0YXQoZmVhdHVyZXMpO1xuLy8gICB9XG4vL1xuLy8gICBnZXRIZWxwTWVzc2FnZSgpIHtcbi8vICAgICByZXR1cm4gYFxuLy8gPGgzPlJlc3NlbWJsYW5jZXM8L2gzPlxuLy9cbi8vIDxiPkFpZGUgZ8OpbsOpcmFsZTwvYj5cbi8vXG4vLyBMZXMgZ3JhcGhpcXVlcyBkZSByZXNzZW1ibGFuY2UgcGVybWV0dGVudCBkZSB2aXN1YWxpc2VyIHBvdXIgMSDDoCA4IGluZGljYXRldXJzIGxlcyB1bml0w6lzIHRlcnJpdG9yaWFsZXMgbGVzIHBsdXMgcHJvY2hlcyBzdGF0aXN0aXF1ZW1lbnQgw6AgbOKAmXVuaXTDqSB0ZXJyaXRvcmlhbGUgZGUgcsOpZsOpcmVuY2UuXG4vL1xuLy8gQ2V0dGUgcHJveGltaXTDqSBlc3QgbWVzdXLDqWUgcGFyIGxhIGRpc3RhbmNlIGV1Y2xpZGllbm5lLiBDZXR0ZSBmb25jdGlvbiBwZXJtZXQgZOKAmcOpdmFsdWVyIGxhIGRpc3RhbmNlIG5vcm1hbGlzw6llIGdsb2JhbGUgKGV4cHJpbcOpZSBlbiByYW5nKSBzw6lwYXJhbnQgbOKAmXVuaXTDqSB0ZXJyaXRvcmlhbGUgZGUgcsOpZsOpcmVuY2UgYXZlYyBs4oCZZW5zZW1ibGUgZGVzIGF1dHJlcyB1bml0w6lzIHRlcnJpdG9yaWFsZXMgcG91ciB1biBlbnNlbWJsZSBk4oCZaW5kaWNhdGV1cnMuIExhIGZvcm11bGUgZGUgbGEgZm9uY3Rpb24gZXN0IGxhIHN1aXZhbnRlwqA6XG4vL1xuLy8gPGI+zqMoeGkgLSB5aSnCsjwvYj5cbi8vXG4vLyBTaSBsYSB2YWxldXIgZGUgbOKAmWluZGljZSDDqXF1aXZhdXQgw6AgMCwgbGEgc2ltaWxhcml0w6kgZXN0IHRvdGFsZSBlbnRyZSBkZXV4IHVuaXTDqXMgdGVycml0b3JpYWxlcy4gUGx1cyBsYSB2YWxldXIgZGUgbOKAmWluZGljZSBlc3Qgw6lsZXbDqWUsIHBsdXMgbGEgZGlzc2ltaWxhcml0w6kgZXN0IGltcG9ydGFudGUuIEEgbm90ZXIgcXVlIGNldHRlIG3DqXRyaXF1ZSBldWNsaWRpZW5uZSBlc3QgYXNzZXogc2Vuc2libGUgYXV4IG9yZHJlcyBkZSBncmFuZGV1ciBow6l0w6lyb2fDqG5lcyBlbnRyZSBwbHVzaWV1cnMgaW5kaWNhdGV1cnMgKHVuIGZvcnQgw6ljYXJ0IHBvdXIgdW4gaW5kaWNhdGV1ciBwZXV0IGFmZmVjdGVyIHNpZ25pZmljYXRpdmVtZW50IGxhIHZhbGV1ciBkZSBs4oCZaW5kaWNlKS5cbi8vXG4vLyBQb3VyIMOpdml0ZXIgZGUgcG90ZW50aWVsbGVzIGVycmV1cnMgZOKAmWludGVycHLDqXRhdGlvbiBsacOpZXMgw6AgY2V0IGluZGljZSBkZSBzaW1pbGFyaXTDqSBzeW50aMOpdGlxdWUsIFJlZ2lvdml6IHByb3Bvc2Ugc3lzdMOpbWF0aXF1ZW1lbnQgdW5lIHJlcHLDqXNlbnRhdGlvbiBncmFwaGlxdWUgcGVybWV0dGFudCBk4oCZw6l2YWx1ZXIgdmlzdWVsbGVtZW50IGxlIGRlZ3LDqSBkZSBzaW1pbGFyaXTDqSBpbmRpY2F0ZXVyIHBhciBpbmRpY2F0ZXVyLlxuLy9cbi8vIFBhciBkw6lmYXV0LCBs4oCZYXBwbGljYXRpb24gcmVudm9pZSBsZXMgNSB1bml0w6lzIHRlcnJpdG9yaWFsZXMgcG91ciBs4oCZZXNwYWNlIGTigJnDqXR1ZGUgZXQgbGVzIGluZGljYXRldXJzIHPDqWxlY3Rpb25uw6llcyBxdWkgc29udCBkw6lmaW5pcyBwYXIgbGEgZGlzdGFuY2UgZXVjbGlkaWVubmUgbGEgcGx1cyBmYWlibGUuIExpYnJlIMOgIGzigJl1dGlsaXNhdGV1ciBkZSBjaG9pc2lyIHBsdXMgb3UgbW9pbnMgZOKAmXVuaXTDqXMgdGVycml0b3JpYWxlcyBkZSBjb21wYXJhaXNvbiBlbiBmb25jdGlvbiBkZSBzZXMgb2JqZWN0aWZzIGTigJlhbmFseXNlLlxuLy9cbi8vIFN1ciBsZSBncmFwaGlxdWUgYXBwYXJhaXNzZW50IGxlcyBuIHVuaXTDqXMgdGVycml0b3JpYWxlcyBsZXMgcGx1cyBwcm9jaGVzIHBvdXIgY2hhcXVlIGluZGljYXRldXIgZGFucyBsZXVycyB1bml0w6lzIGRlIG1lc3VyZSByZXNwZWN0aXZlcy4gTOKAmXVuaXTDqSB0ZXJyaXRvcmlhbGUgZGUgcsOpZsOpcmVuY2UgYXBwYXJhw650IHN5c3TDqW1hdGlxdWVtZW50IGF1IGNlbnRyZSBkZSBjaGFjdW4gZGVzIGdyYXBoaXF1ZXMuIFVuIGNsaWMgZ2F1Y2hlIHN1ciB1bmUgZGVzIHVuaXTDqXMgdGVycml0b3JpYWxlcyBzdXIgbGUgZ3JhcGhpcXVlIG91IHN1ciBsYSBjYXJ0ZSBnw6luw6hyZSB1bmUgbGlnbmUgZW50cmUgY2hhcXVlIGluZGljYXRldXIgcGVybWV0dGFudCBk4oCZw6l2YWx1ZXIgbGUgZGVncsOpIGRlIHJlc3NlbWJsYW5jZSBhdmVjIGzigJl1bml0w6kgdGVycml0b3JpYWxlIGRlIHLDqWbDqXJlbmNlIGV0IHZpc3VhbGlzZXIgYWluc2kgc2kgY2VsbGUtY2kgc2UgcG9zaXRpb25uZSBhdS1kZXNzdXMgb3UgZW4gZGVzc291cywgZXQgcG91ciBxdWVsIGluZGljYXRldXIuXG4vL1xuLy8gUGFyIGTDqWZhdXQsIGxhIHRhaWxsZSBkZXMgY2VyY2xlcyBzdXIgbGUgZ3JhcGhpcXVlIGVzdCBjb25zdGFudGUuIE1haXMgbOKAmXV0aWxpc2F0ZXVyIHBldXQgYWN0aXZlciBs4oCZb3B0aW9uIMKrwqBjZXJjbGVzIHByb3BvcnRpb25uZWxzIGF1IG51bcOpcmF0ZXVywqDCuyBwb3VyIHZpc3VhbGlzZXIgZ3JhcGhpcXVlbWVudCBsYSBtYXNzZSBkZXMgdW5pdMOpcyB0ZXJyaXRvcmlhbGVzLiBQYXIgZXhlbXBsZSwgc2kgbOKAmWluZGljYXRldXIgUElCIHBhciBoYWJpdGFudCBlc3Qgc8OpbGVjdGlvbm7DqSwgbGEgdGFpbGxlIGRlcyBjZXJjbGVzIHNlcmEgcHJvcG9ydGlvbm5lbGxlIMOgIGxhIG1hc3NlIGRlIFBJQiBkZXMgdW5pdMOpcyB0ZXJyaXRvcmlhbGVzLiBTaSBj4oCZZXN0IGxhIHBhcnQgZGVzIDAtMjQgYW5zIGRhbnMgbGEgcG9wdWxhdGlvbiB0b3RhbGUsIGxhIHRhaWxsZSBkZXMgZmlndXLDqXMgc2VyYSBwcm9wb3J0aW9ubmVsbGUgw6AgbGEgbWFzc2UgZGUgbGEgcG9wdWxhdGlvbiDDomfDqWUgZGUgMCDDoCAyNCBhbnMuIENldHRlIG9wdGlvbiBhIMOpdMOpIGNyw6nDqWUgYWZpbiBkZSBwb3V2b2lyIHJlc3RpdHVlciBsZXMgb3JkcmVzIGRlIGdyYW5kZXVyIHBvdGVudGllbGxlbWVudCBow6l0w6lyb2fDqG5lcyBkZXMgdW5pdMOpcyB0ZXJyaXRvcmlhbGVzIHByb3Bvc8OpZXMgZGFucyBs4oCZYXBwbGljYXRpb24uYDtcbi8vICAgfVxuLy8gfVxuIiwiLy8gaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCB0aW5nbGUgZnJvbSAndGluZ2xlLmpzJztcbmltcG9ydCBhbGVydGlmeSBmcm9tICdhbGVydGlmeWpzJztcbmltcG9ydCB7IGNyZWF0ZU1lbnUgfSBmcm9tICcuL21vZHVsZXMvbWVudWxlZnQnO1xuaW1wb3J0IHsgbWFrZVRvcE1lbnUsIG1ha2VIZWFkZXJDaGFydCwgbWFrZUhlYWRlck1hcFNlY3Rpb24gfSBmcm9tICcuL21vZHVsZXMvbWVudXRvcCc7XG5pbXBvcnQgeyBNYXBTZWxlY3QsIG1ha2VTb3VyY2VTZWN0aW9uLCBzdmdfbWFwLCB6b29tQ2xpY2sgfSBmcm9tICcuL21vZHVsZXMvbWFwJztcbi8vIGltcG9ydCB7IG1ha2VUYWJsZSB9IGZyb20gJy4vbW9kdWxlcy90YWJsZSc7XG5pbXBvcnQgeyBjb2xvcl9oaWdobGlnaHQsIE1BWF9WQVJJQUJMRVMsIFJBVElPX1dIX01BUCB9IGZyb20gJy4vbW9kdWxlcy9vcHRpb25zJztcbmltcG9ydCB7IEJhckNoYXJ0MSB9IGZyb20gJy4vbW9kdWxlcy9jaGFydHMvYmFyQ2hhcnRfMXYnO1xuaW1wb3J0IHsgU2NhdHRlclBsb3QyIH0gZnJvbSAnLi9tb2R1bGVzL2NoYXJ0cy9zY2F0dGVyUGxvdF8ydic7XG5pbXBvcnQgeyBSYWRhckNoYXJ0MyB9IGZyb20gJy4vbW9kdWxlcy9jaGFydHMvcmFkYXJDaGFydF8zdic7XG5pbXBvcnQgeyBTaW1pbGFyaXR5MXBsdXMgfSBmcm9tICcuL21vZHVsZXMvY2hhcnRzL3NpbWlsYXJpdHkxdic7XG5pbXBvcnQgeyB1bmJpbmRVSSwgc2VsZWN0Rmlyc3RBdmFpbGFibGVWYXIsIHByZXBhcmVHZW9tTGF5ZXJJZCwgZ2V0UmFuZG9tIH0gZnJvbSAnLi9tb2R1bGVzL2hlbHBlcnMnO1xuaW1wb3J0IHtcbiAgcHJlcGFyZV9kYXRhc2V0LFxuICBmaWx0ZXJMZXZlbFZhcixcbiAgYXBwbHlGaWx0ZXIsXG4gIGNoYW5nZVJlZ2lvbixcbiAgYWRkVmFyaWFibGUsXG4gIHJlbW92ZVZhcmlhYmxlLFxuICByZXNldFZhcmlhYmxlcyxcbiAgcHJlcGFyZVZhcmlhYmxlc0luZm8sXG59IGZyb20gJy4vbW9kdWxlcy9wcmVwYXJlX2RhdGEnO1xuXG5cbmV4cG9ydCBjb25zdCB2YXJpYWJsZXNfaW5mbyA9IFtdO1xuXG5leHBvcnQgY29uc3Qgc3R1ZHlfem9uZXMgPSBbXG4gIHsgaWQ6ICdub19maWx0ZXInLCBuYW1lOiAnVUUyOCcsIGRpc3BsYXlfbGV2ZWw6ICcnIH0sXG4gIHsgaWQ6ICdmaWx0ZXJfZGlzdCcsIG5hbWU6ICdSw6lnaW9uIGRhbnMgdW4gcmF5b24gZGUgJywgZGlzcGxheV9sZXZlbDogJycgfSxcbl07XG5leHBvcnQgY29uc3QgdGVycml0b3JpYWxfbWVzaCA9IFtdO1xuXG5leHBvcnQgY29uc3QgYXBwID0ge1xuICAvLyBBIG1hcHBpbmcgaWQgLT4gY29sb3IsIGNvbnRhaW5pbmcgdGhlIGNvbG9yIHRvIHVzZSBmb3IgZWFjaFxuICAvLyBmZWF0dXJlIG5vdCB1c2luZyB0aGUgZGVmYXVsdCBjb2xvciBvciB0aGUgZGlzYWJsZWQgY29sb3JcbiAgY29sb3JzOiB7fSxcbiAgLy8gVGhlIGZpbHRlcmVkIGRhdGFzZXQgKGFjY2NvcmRpbmcgdG86IHRoZSBjdXJyZW50IHRlcnJpdG9yaWFsIGxldmVsLFxuICAvLyB0aGUgZmlsdGVyIGtleSAoaWYgYW55KSBhbmQgdGhlIHJhdGlvKHMpIHNlbGVjdGVkIG9uIHRoZSBsZWZ0IG1lbnU6XG4gIGN1cnJlbnRfZGF0YTogW10sXG4gIC8vIFRoZSBmdWxsIGRhdGFzZXQgcHJvdmlkZWQgKGNvbnRhaW5pbmcgYWxsIHRoZSBmZWF0dXJlcyBhdCBhbnkgbGV2ZWwgaW4gb25lIHRhYmxlKVxuICAvLyBSb3cgd2l0aG91dCBkYXRhIGFyZSBleHBlY3RlZCB0byBiZSBlbXB0eSBvciB0byBjb250YWluIHRoZSBcIk5BXCIgc3RyaW5nLlxuICBmdWxsX2RhdGFzZXQ6IFtdLFxuICAvLyBUaGUgaWRzIG9mIHRoZSBjdXJyZW50IGZlYXR1cmUgaW4gdXNlIChhY2Njb3JkaW5nIHRvOiB0aGUgY3VycmVudCB0ZXJyaXRvcmlhbCBsZXZlbCxcbiAgLy8gdGhlIGZpbHRlciBrZXkgKGlmIGFueSkgYW5kIHRoZSByYXRpbyhzKSB1c2VkIGluIHRoZSBjdXJyZW50IGNoYXJ0OyBmaWx0ZXJlZFxuICAvLyB0byBub3QgY29udGFpbiBmZWF0dXJlIHdpdGggZW1wdHkgcmF0aW8gdmFsdWVzIHdpdGhpbiB0aGUgcmF0aW9zIGluIHVzZSkuXG4gIGN1cnJlbnRfaWRzOiBbXSxcbn07XG5cbmZ1bmN0aW9uIHNldERlZmF1bHRDb25maWcoY29kZSA9ICdGUkUnLCB2YXJpYWJsZSA9ICdSRVZNRU4nKSB7IC8vIH0sIGxldmVsID0gJ05VVFMxJykge1xuICBjb25zdCB2YXJfaW5mbyA9IHZhcmlhYmxlc19pbmZvLmZpbmQoZnQgPT4gZnQuaWQgPT09IHZhcmlhYmxlKTtcbiAgYXBwLmN1cnJlbnRfY29uZmlnID0ge1xuICAgIC8vIFRoZSBuYW1lIG9mIHRoZSBmaWVsZCBvZiB0aGUgZGF0YXNldCBjb250YWluaW5nIHRoZSBJRCBvZiBlYWNoIGZlYXR1cmU6XG4gICAgaWRfZmllbGQ6ICdpZCcsXG4gICAgLy8gVGhlIG5hbWUgb2YgdGhlIGZpZWxkIG9mIHRoZSBkYXRhc2V0IGNvbnRhaW5pbmcgdGhlIG5hbWUgb2YgZWFjaCBmZWF0dXJlOlxuICAgIG5hbWVfZmllbGQ6ICduYW1lJyxcbiAgICAvLyBUaGUgbmFtZSBvZiB0aGUgZmllbGQgb2YgdGhlIGRhdGFzZXQgY29udGFpbmluZyB0aGUgcG9wdWxhdGlvbiBvZiBlYWNoIGZlYXR1cmU6XG4gICAgcG9wX2ZpZWxkOiAnUE9QX0FHRV9UJyxcbiAgICAvLyBUaGUgbmFtZSBvZiB0aGUgZmllbGQgb2YgdGhlIGdlb2pzb24gbGF5ZXIgY29udGFpbmluZyB0aGUgSUQgb2YgZWFjaCBmZWF0dXJlXG4gICAgLy8gKHRoZXNlIHZhbHVlcyBzaG91bGQgbWF0Y2ggd2l0aCB0aGUgdmFsdWVzIG9mIHRoZSBcImlkX2ZpZWxkXCIgaW4gdGhlXG4gICAgLy8gdGFidWxhciBkYXRhc2V0KVxuICAgIGlkX2ZpZWxkX2dlb206ICdpZCcsXG4gICAgbnVtOiBbdmFyX2luZm8uaWQxXSxcbiAgICBkZW51bTogW3Zhcl9pbmZvLmlkMl0sXG4gICAgcmF0aW86IFt2YXJpYWJsZV0sXG4gICAgcmF0aW9fcHJldHR5X25hbWU6IFt2YXJfaW5mby5uYW1lXSxcbiAgICByYXRpb191bml0OiBbdmFyX2luZm8udW5pdF0sXG4gICAgLy8gVGhlIGxldmVsIGN1cnJlbnRseSBpbiB1c2U6XG4gICAgY3VycmVudF9sZXZlbDogJ04xJyxcbiAgICAvLyBUaGUgSUQgb2YgdGhlIHJlZ2lvbiBjdXJyZW50bHkgaW4gdXNlOlxuICAgIG15X3JlZ2lvbjogY29kZSxcbiAgICAvLyBUaGUgbmFtZSBvZiB0aGUgcmVnaW9uIGN1cnJlbnRseSBpbiB1c2U6XG4gICAgbXlfcmVnaW9uX3ByZXR0eV9uYW1lOiBhcHAuZmVhdHVyZV9uYW1lc1tjb2RlXSxcbiAgICAvLyBIb3cgbWFueSByYXRpbyBvbiB0aGUgY3VycmVudCBjaGFydDpcbiAgICBuYl92YXI6IDEsXG4gIH07XG4gIGFwcC5jb2xvcnNbYXBwLmN1cnJlbnRfY29uZmlnLm15X3JlZ2lvbl0gPSBjb2xvcl9oaWdobGlnaHQ7XG59XG5cbmZ1bmN0aW9uIHNldERlZmF1bHRDb25maWdNZW51KGNvZGUgPSAnRlJFJywgdmFyaWFibGUgPSAnUkVWTUVOJywgbGV2ZWwgPSAnTjEnKSB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC50YXJnZXRfcmVnaW9uLnNxdWFyZVt2YWx1ZT1cIiR7Y29kZX1cIl1gKS5jbGFzc0xpc3QuYWRkKCdjaGVja2VkJyk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC50YXJnZXRfdmFyaWFibGUuc21hbGxfc3F1YXJlW3ZhbHVlPVwiJHt2YXJpYWJsZX1cIl1gKS5jbGFzc0xpc3QuYWRkKCdjaGVja2VkJyk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXJfdi5zcXVhcmVbZmlsdGVyLXZhbHVlPVwibm9fZmlsdGVyXCJdJykuY2xhc3NMaXN0LmFkZCgnY2hlY2tlZCcpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAudGVycml0X2xldmVsLnNxdWFyZVt2YWx1ZT1cIiR7bGV2ZWx9XCJdYCkuY2xhc3NMaXN0LmFkZCgnY2hlY2tlZCcpO1xuICB1cGRhdGVBdmFpbGFibGVSYXRpb3MoY29kZSk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZU1lbnVTdHVkeVpvbmVzKCkge1xuICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNtZW51X3N0dWR5em9uZSA+IHAnKSxcbiAgICAoZWxlbSkgPT4ge1xuICAgICAgY29uc3QgdmFsID0gZWxlbS5xdWVyeVNlbGVjdG9yKCcuZmlsdGVyX3Yuc3F1YXJlJykuZ2V0QXR0cmlidXRlKCdkaXNwbGF5X2xldmVsJyk7XG4gICAgICBpZiAodmFsID09PSAnJyB8fCB2YWwgPT09IGFwcC5jdXJyZW50X2NvbmZpZy5jdXJyZW50X2xldmVsKSB7XG4gICAgICAgIGVsZW0uc3R5bGUuZGlzcGxheSA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB9XG4gICAgfSk7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0Q29sb3JzKCkge1xuICBhcHAuY29sb3JzID0ge307XG4gIC8vIGZvciAobGV0IGkgPSAwLCBsZW5faSA9IGN1cnJlbnRfaWRzLmxlbmd0aDsgaSA8IGxlbl9pOyBpKyspIHtcbiAgLy8gICBhcHAuY29sb3JzW2N1cnJlbnRfaWRzW2ldXSA9IGNvbG9yX2NvdW50cmllcztcbiAgLy8gfVxuICBhcHAuY29sb3JzW2FwcC5jdXJyZW50X2NvbmZpZy5teV9yZWdpb25dID0gY29sb3JfaGlnaGxpZ2h0O1xufVxuXG4vKipcbiogRnVuY3Rpb24gdG8gdXBkYXRlIHRoZSBhdmFpbGFibGVzIHJhdGlvcyBpbiB0aGUgbGVmdCBtZW51IChhZnRlciBjaGFuZ2luZyByZWdpb24pXG4qIElmIGEgc2VsZWN0ZWQgdmFyaWFibGUgaXMgbm90IGF2YWlsYWJsZSBhbnltb3JlIGl0IHdpbGwgYmUgZGVzZWxlY3RlZC5cbiogSWYgdGhlcmUgc2VsZWN0ZWQgdmFyaWFibGUgKGFsbCB0aGUgcHJldmlvdXNseSBzZWxlY3RlZCB2YXJpYWJsZXMgYXJlIHVuYXZhaWxhYmxlIGZvciB0aGlzIHJlZ2lvbilcbiogdGhlIGZpcnN0IHZhcmlhYmxlIG9uIHRoZSBtZW51IHdpbGwgYmUgc2VsZWN0ZWQuXG4qIElmIHRoZSBuZXcgbnVtYmVyIG9mIHNlbGVjdGVkIGZlYXR1cmUgaXMgaW5mZXJpb3IgdG8gdGhlIG51bWJlciBvZiB2YXJpYWJsZXMgb24gdGhlIGN1cnJlbnRcbiogY2hhcnQsIGEgbmV3IGNoYXJ0IChzdWl0YWJsZSBmb3Igb25seSAxIHZhcmlhYmxlKSB3aWxsIGJlIHNlbGVjdGVkLlxuKlxuKlxuKiBAcGFyYW0ge1N0cmluZ30gbXlfcmVnaW9uIC0gVGhlIElEIG9mIHRoZSBuZXdseSBzZWxlY3RlZCByZWdpb24uXG4qIEByZXR1cm4ge051bWJlcn0gLSBUaGUgbmV3IG51bWJlciBvZiBzZWxlY3RlZCByYXRpb3MuXG4qXG4qL1xuZnVuY3Rpb24gdXBkYXRlQXZhaWxhYmxlUmF0aW9zKG15X3JlZ2lvbikge1xuICBjb25zdCBkYXRhX215X2ZlYXR1cmUgPSBhcHAuZnVsbF9kYXRhc2V0LmZpbHRlcihcbiAgICBmdCA9PiBmdFthcHAuY3VycmVudF9jb25maWcuaWRfZmllbGRdID09PSBteV9yZWdpb24pWzBdO1xuICBjb25zdCBtZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lbnUnKTtcbiAgY29uc3QgbGluZXMgPSBtZW51LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXJnZXRfdmFyaWFibGUnKTtcbiAgZm9yIChsZXQgaSA9IDAsIG5iX2xpbmVzID0gbGluZXMubGVuZ3RoOyBpIDwgbmJfbGluZXM7IGkrKykge1xuICAgIGNvbnN0IGNvZGVfdmFyaWFibGUgPSBsaW5lc1tpXS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJyk7XG4gICAgaWYgKGRhdGFfbXlfZmVhdHVyZVtjb2RlX3ZhcmlhYmxlXSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICYmIGRhdGFfbXlfZmVhdHVyZVtjb2RlX3ZhcmlhYmxlXSAhPT0gJ05BJykge1xuICAgICAgbGluZXNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcbiAgICAgIGxpbmVzW2ldLm5leHRTaWJsaW5nLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpbmVzW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2NoZWNrZWQnKTtcbiAgICAgIGxpbmVzW2ldLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG4gICAgICBsaW5lc1tpXS5uZXh0U2libGluZy5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuICAgIH1cbiAgfVxuICBjb25zdCBuZXdfdmFyID0gbWVudS5xdWVyeVNlbGVjdG9yQWxsKCcudGFyZ2V0X3ZhcmlhYmxlLmNoZWNrZWQnKTtcbiAgaWYgKG5ld192YXIubGVuZ3RoICE9PSBhcHAuY3VycmVudF9jb25maWcucmF0aW8ubGVuZ3RoKSB7XG4gICAgbGV0IG5ld192YXJfbmFtZXM7XG4gICAgaWYgKG5ld192YXIubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zdCBuYW1lID0gc2VsZWN0Rmlyc3RBdmFpbGFibGVWYXIoKTtcbiAgICAgIG5ld192YXJfbmFtZXMgPSBbbmFtZV07XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld192YXJfbmFtZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChcbiAgICAgICAgbmV3X3ZhcikubWFwKGVsZW0gPT4gZWxlbS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpO1xuICAgIH1cbiAgICByZXNldFZhcmlhYmxlcyhhcHAsIG5ld192YXJfbmFtZXMpO1xuICB9XG4gIHJldHVybiBuZXdfdmFyLmxlbmd0aDtcbn1cblxuLyoqXG4qIFVwZGF0ZSB0aGUgbWVudSBsb2NhdGVkIG9uIHRoZSB0b3Agb2YgdGhlIHdpbmRvdyB0aGUgZGlzcGxheSB0aGUgYXZhaWxhYmxlXG4qIGNoYXJ0cywgYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IG51bWJlciBvZiBzZWxlY3RlZCB2YXJpYWJsZXMuXG4qXG4qIEBwYXJhbSB7TnVtYmVyfSBuYl92YXIgLSBIb3cgbWFueSB2YXJpYWJsZXMgYXJlIGN1cnJlbnRseSBzZWxlY3RlZC5cbiogQHJldHVybiB7dm9pZH1cbipcbiovXG5mdW5jdGlvbiB1cGRhdGVBdmFpbGFibGVDaGFydHMobmJfdmFyKSB7XG4gIGlmIChuYl92YXIgPT09IDEpIHsgLy8gQWxsb3cgYWxsIGtpbmQgb2Ygdml6dSB3aXRoIDEgdmFyaWFibGU6XG4gICAgZDMuc2VsZWN0QWxsKCcuY2hhcnRfdDEnKS5lYWNoKGZ1bmN0aW9uICgpIHsgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpOyB9KTtcbiAgICBkMy5zZWxlY3RBbGwoJy5jaGFydF90MiwgLmNoYXJ0X3QzJykuZWFjaChmdW5jdGlvbiAoKSB7IHRoaXMuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTsgfSk7XG4gIH0gZWxzZSBpZiAobmJfdmFyID09PSAyKSB7IC8vIEFsbG93IGFsbCBraW5kIG9mIHZpenUgd2l0aCAyIHZhcmlhYmxlczpcbiAgICBkMy5zZWxlY3RBbGwoJy5jaGFydF90MSwgLmNoYXJ0X3QyJykuZWFjaChmdW5jdGlvbiAoKSB7IHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTsgfSk7XG4gICAgZDMuc2VsZWN0QWxsKCcuY2hhcnRfdDMnKS5lYWNoKGZ1bmN0aW9uICgpIHsgdGhpcy5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpOyB9KTtcbiAgfSBlbHNlIGlmIChuYl92YXIgPiAyKSB7IC8vIEFsbG93IGFsbCBraW5kIG9mIHZpenUgd2l0aCAzIHZhcmlhYmxlczpcbiAgICBkMy5zZWxlY3RBbGwoJy5jaGFydF90MSwgLmNoYXJ0X3QyLCAuY2hhcnRfdDMnKS5lYWNoKGZ1bmN0aW9uICgpIHsgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpOyB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiB1cGRhdGVNeUNhdGVnb3J5U2VjdGlvbigpIHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZpbHRlcl9pbmZvJykuaW5uZXJIVE1MID0gYXBwLmN1cnJlbnRfY29uZmlnLm15X2NhdGVnb3J5O1xufVxuXG4vKipcbiogQ3JlYXRlIGhhbmRsZXJzIGZvciB1c2VyIGV2ZW50IG9uIHRoZSBsZWZ0IG1lbnUgYW5kIG9uIHRoZSBtYXAgZm9yIGNoYXJ0cyBvbmx5XG4qIGFsbG93aW5nIHRvIHVzZSAxIHZhcmlhYmxlLlxuKlxuKiBAcGFyYW0ge09iamVjdH0gY2hhcnQgLSBUaGUgY2hhcnQgb2JqZWN0LlxuKiBAcGFyYW0ge09iamVjdH0gbWFwX2VsZW0gLSBUaGUgbWFwIG9iamVjdC5cbiogQHJldHVybiB7dm9pZH1cbipcbiovXG5mdW5jdGlvbiBiaW5kVUlfY2hhcnQoY2hhcnQsIG1hcF9lbGVtKSB7XG4gIC8vIFVzZXIgY2hhbmdlIHRoZSBzdHVkeSB6b25lOlxuICBkMy5zZWxlY3RBbGwoJ3NwYW4uZmlsdGVyX3YnKVxuICAgIC5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKCdjaGVja2VkJykpIHtcbiAgICAgICAgZDMuc2VsZWN0QWxsKCdzcGFuLmZpbHRlcl92JykuYXR0cignY2xhc3MnLCAnZmlsdGVyX3Ygc3F1YXJlJyk7XG4gICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnY2hlY2tlZCcpO1xuICAgICAgICBjb25zdCBmaWx0ZXJfdHlwZSA9IHRoaXMuZ2V0QXR0cmlidXRlKCdmaWx0ZXItdmFsdWUnKTtcbiAgICAgICAgaWYgKGZpbHRlcl90eXBlID09PSAnZmlsdGVyX2Rpc3QnKSB7XG4gICAgICAgICAgY29uc3QgaW5wdXRfZWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXN0X2ZpbHRlcicpO1xuICAgICAgICAgIGlucHV0X2VsZW0ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgIGNvbnN0IGRpc3QgPSAraW5wdXRfZWxlbS52YWx1ZTtcbiAgICAgICAgICBjb25zdCBpZHMgPSBtYXBfZWxlbS5nZXRVbml0c1dpdGhpbihkaXN0KTtcbiAgICAgICAgICBhcHBseUZpbHRlcihhcHAsIGlkcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3RfZmlsdGVyJykuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgICAgIGFwcGx5RmlsdGVyKGFwcCwgZmlsdGVyX3R5cGUpO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZU15Q2F0ZWdvcnlTZWN0aW9uKCk7XG4gICAgICAgIGNoYXJ0LmNoYW5nZVN0dWR5Wm9uZSgpO1xuICAgICAgICBjaGFydC51cGRhdGVDb21wbGV0dWRlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgZDMuc2VsZWN0KCcjZGlzdF9maWx0ZXInKVxuICAgIC5vbignY2hhbmdlLCBrZXl1cCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGlkcyA9IG1hcF9lbGVtLmdldFVuaXRzV2l0aGluKCt0aGlzLnZhbHVlKTtcbiAgICAgIGFwcGx5RmlsdGVyKGFwcCwgaWRzKTtcbiAgICAgIGNoYXJ0LmNoYW5nZVN0dWR5Wm9uZSgpO1xuICAgICAgY2hhcnQudXBkYXRlQ29tcGxldHVkZSgpO1xuICAgIH0pO1xuXG4gIC8vIFVzZXIgY2hhbmdlIHRoZSB0YXJnZXRlZCByZWdpb246XG4gIGQzLnNlbGVjdEFsbCgnc3Bhbi50YXJnZXRfcmVnaW9uJylcbiAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCF0aGlzLmNsYXNzTGlzdC5jb250YWlucygnY2hlY2tlZCcpKSB7XG4gICAgICAgIGQzLnNlbGVjdEFsbCgnc3Bhbi50YXJnZXRfcmVnaW9uJykuYXR0cignY2xhc3MnLCAndGFyZ2V0X3JlZ2lvbiBzcXVhcmUnKTtcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdjaGVja2VkJyk7XG4gICAgICAgIGNvbnN0IGlkX3JlZ2lvbiA9IHRoaXMuZ2V0QXR0cmlidXRlKCd2YWx1ZScpO1xuICAgICAgICBjb25zdCBvbGRfbmJfdmFyID0gYXBwLmN1cnJlbnRfY29uZmlnLnJhdGlvLmxlbmd0aDtcbiAgICAgICAgY2hhbmdlUmVnaW9uKGFwcCwgaWRfcmVnaW9uLCBtYXBfZWxlbSk7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgYXZhaWxhYmxlcyByYXRpbyBvbiB0aGUgbGVmdCBtZW51XG4gICAgICAgIC8vICh0aGlzIG1heSBjaGFuZ2UgdGhlIGN1cnJlbnQgc2VsZWN0ZWQgcmF0aW8ocykgYXMgc29tZSB2YXJpYWJsZXMgYXJlXG4gICAgICAgIC8vIG5vdCBhdmFpbGFibGUgZm9yIHNvbWUgZmVhdHVyZXMpIGFuZCBmZXRjaCB0aGUgbnVtYmVyIG9mIHNlbGVjdGVkXG4gICAgICAgIC8vIHZhcmlhYmxlcyBhZnRlciB0aGF0OlxuICAgICAgICBjb25zdCBuZXdfbmJfdmFyID0gdXBkYXRlQXZhaWxhYmxlUmF0aW9zKGlkX3JlZ2lvbik7XG4gICAgICAgIHVwZGF0ZUF2YWlsYWJsZUNoYXJ0cyhuZXdfbmJfdmFyKTtcbiAgICAgICAgaWYgKG5ld19uYl92YXIgPj0gYXBwLmN1cnJlbnRfY29uZmlnLm5iX3Zhcikge1xuICAgICAgICAgIGlmIChvbGRfbmJfdmFyID09PSBuZXdfbmJfdmFyKSB7XG4gICAgICAgICAgICBjaGFydC51cGRhdGVDaGFuZ2VSZWdpb24oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZDMuc2VsZWN0KCdzcGFuLnR5cGVfY2hhcnQuc2VsZWN0ZWQnKS5kaXNwYXRjaCgnY2xpY2snKTtcbiAgICAgICAgICAgIGFsZXJ0aWZ5Lndhcm5pbmcoJ1VuZSB2YXJpYWJsZSBwcsOpY8OpZGVtbWVudCBzw6lsZWN0aW9ubsOpZSBuXFwnZXN0IHBhcyBkaXNwb25pYmxlIHBvdXIgY2V0dGUgcsOpZ2lvbi4nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgdGhlcmUgZmV3ZXIgc2VsZWN0ZWQgdmFyaWFibGVzIHRoYW4gcmVxdWVzdGVkIGJ5IHRoZSBjdXJyZW50IGNoYXJ0LFxuICAgICAgICAgIC8vIHJlZHJhdyB0aGUgZmlyc3QgKGRlZmF1bHQpIGtpbmQgb2YgY2hhcnQ6XG4gICAgICAgICAgZDMuc2VsZWN0KCdzcGFuLmNoYXJ0X3QxW3ZhbHVlPVwiQmFyQ2hhcnQxXCJdJykuZGlzcGF0Y2goJ2NsaWNrJyk7XG4gICAgICAgICAgYWxlcnRpZnkud2FybmluZygnRGVzIHZhcmlhYmxlcyBzw6lsZWN0aW9ubsOpZXMgc29udCBpbmRpc3BvbmlibGVzIHBvdXIgY2V0dGUgcsOpZ2lvbi4gVW4gY2hhbmdlbWVudCBkZSByZXByw6lzZW50YXRpb24gZXN0IG7DqWNlc3NhaXJlLicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgLy8gVXNlciBjbGljayBvbiB0aGUgbmFtZSBvZiBhIGdyb3VwIG9mIHZhcmlhYmxlc1xuICAvLyB0byBleHBhbmQgb3IgY29sbGFwc2UgaXRzIGNvbnRlbnQ6XG4gIGQzLnNlbGVjdEFsbCgnLm5hbWVfZ3JvdXBfdmFyJylcbiAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgZ3JvdXBfdmFyID0gdGhpcy5uZXh0U2libGluZztcbiAgICAgIGNvbnN0IHRpdGxlX2Fycm93ID0gdGhpcy5xdWVyeVNlbGVjdG9yKCdzcGFuLmFycm93Jyk7XG4gICAgICBpZiAoZ3JvdXBfdmFyLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykge1xuICAgICAgICB0aXRsZV9hcnJvdy5jbGFzc0xpc3QucmVtb3ZlKCdhcnJvd19kb3duJyk7XG4gICAgICAgIHRpdGxlX2Fycm93LmNsYXNzTGlzdC5hZGQoJ2Fycm93X3JpZ2h0Jyk7XG4gICAgICAgIGdyb3VwX3Zhci5zdHlsZS5kaXNwbGF5ID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRpdGxlX2Fycm93LmNsYXNzTGlzdC5yZW1vdmUoJ2Fycm93X3JpZ2h0Jyk7XG4gICAgICAgIHRpdGxlX2Fycm93LmNsYXNzTGlzdC5hZGQoJ2Fycm93X2Rvd24nKTtcbiAgICAgICAgZ3JvdXBfdmFyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgLy8gVXNlciBjbGljayB0byBhZGQvcmVtb3ZlIGEgdmFyaWFibGUgZnJvbSB0aGUgY29tcGFyaXNvbjpcbiAgZDMuc2VsZWN0QWxsKCdzcGFuLnRhcmdldF92YXJpYWJsZScpXG4gICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKSkgcmV0dXJuO1xuICAgICAgbGV0IG5iX3ZhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKFxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzcGFuLnRhcmdldF92YXJpYWJsZScpKS5maWx0ZXIoXG4gICAgICAgICAgZWxlbSA9PiAhIWVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdjaGVja2VkJykpLmxlbmd0aDtcbiAgICAgIC8vIFNlbGVjdCBhIG5ldyB2YXJpYWJsZSBhbmQgdHJpZ2dlciB0aGUgYXBwcm9wcmlhdGUgY2hhbmdlcyBvbiB0aGUgY3VycmVudCBjaGFydDpcbiAgICAgIGlmICghdGhpcy5jbGFzc0xpc3QuY29udGFpbnMoJ2NoZWNrZWQnKSkge1xuICAgICAgICAvLyBXZSBkb24ndCB3YW50IHRoZSB1c2VyIHRvIGJlIGFibGUgdG8gc2VsZWN0IG1vcmUgdGhhblxuICAgICAgICAvLyBNQVhfVkFSSUFCTEVTIChkZWZhdWx0ID0gNykgdmFyaWFibGVzIHNpbXVsdGFuZW91c2x5OlxuICAgICAgICBpZiAobmJfdmFyID49IE1BWF9WQVJJQUJMRVMpIHtcbiAgICAgICAgICBhbGVydGlmeS53YXJuaW5nKCdMZSBub21icmUgbWF4aW1hbCBkZSB2YXJpYWJsZXMgc8OpbGVjdGlvbm7DqWVzIGVzdCBhdHRlaW50LicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ2NoZWNrZWQnKTtcbiAgICAgICAgY29uc3QgY29kZV92YXJpYWJsZSA9IHRoaXMuZ2V0QXR0cmlidXRlKCd2YWx1ZScpO1xuICAgICAgICBjb25zdCBuYW1lX3ZhcmlhYmxlID0gdmFyaWFibGVzX2luZm8uZmluZChkID0+IGQuaWQgPT09IGNvZGVfdmFyaWFibGUpLm5hbWU7XG4gICAgICAgIGFkZFZhcmlhYmxlKGFwcCwgY29kZV92YXJpYWJsZSk7XG4gICAgICAgIC8vIG1ha2VUYWJsZShhcHAuY3VycmVudF9kYXRhLCBhcHAuY3VycmVudF9jb25maWcpO1xuICAgICAgICBjaGFydC5hZGRWYXJpYWJsZShjb2RlX3ZhcmlhYmxlLCBuYW1lX3ZhcmlhYmxlKTtcbiAgICAgICAgbmJfdmFyICs9IDE7XG4gICAgICB9IGVsc2UgeyAvLyBSZW1vdmUgYSB2YXJpYWJsZSBmcm9tIHRoZSBzZWxlY3Rpb246XG4gICAgICAgIG5iX3ZhciAtPSAxO1xuICAgICAgICAvLyBXZSBkb24ndCB3YW50IHRvIGxldCB0aGUgdXNlciByZW1vdmUgdGhlIHZhcmlhYmxlIGlmXG4gICAgICAgIC8vIGl0J3MgdGhlIG9ubHkgb25lIHNlbGVjdGVkIG9yIGlmIHRoZSBjdXJyZW50bHkgZGlzcGxheWVkXG4gICAgICAgIC8vIGNoYXJ0IG5lZWQgYSBtaW5pbXVtIG51bWJlciBvZiB2YXJpYWJsZXM6XG4gICAgICAgIGlmIChuYl92YXIgPCBhcHAuY3VycmVudF9jb25maWcubmJfdmFyKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvZGVfdmFyaWFibGUgPSB0aGlzLmdldEF0dHJpYnV0ZSgndmFsdWUnKTtcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdjaGVja2VkJyk7XG4gICAgICAgIHJlbW92ZVZhcmlhYmxlKGFwcCwgY29kZV92YXJpYWJsZSk7XG4gICAgICAgIGNoYXJ0LnJlbW92ZVZhcmlhYmxlKGNvZGVfdmFyaWFibGUpO1xuICAgICAgICAvLyBtYWtlVGFibGUoYXBwLmN1cnJlbnRfZGF0YSwgYXBwLmN1cnJlbnRfY29uZmlnKTtcbiAgICAgIH1cbiAgICAgIC8vIFVwZGF0ZSB0aGUgdG9wIG1lbnUgdG8gZGlzcGxheSBhdmFpbGFibGUgY2hhcnRzIGFjY29yZGluZyB0byB0aGUgY3VycmVudFxuICAgICAgLy8gbnVtYmVyIG9mIGF2YWlsYWJsZSB2YXJpYWJsZXM6XG4gICAgICB1cGRhdGVBdmFpbGFibGVDaGFydHMobmJfdmFyKTtcbiAgICB9KTtcblxuICBkMy5zZWxlY3RBbGwoJ3NwYW4udGVycml0X2xldmVsJylcbiAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCF0aGlzLmNsYXNzTGlzdC5jb250YWlucygnY2hlY2tlZCcpKSB7XG4gICAgICAgIC8vIFJlc2V0IHRoZSBzdHVkeSB6b25lIDpcbiAgICAgICAgZDMuc2VsZWN0KCdzcGFuLmZpbHRlcl92W2ZpbHRlci12YWx1ZT1cIm5vX2ZpbHRlclwiXScpLmRpc3BhdGNoKCdjbGljaycpO1xuICAgICAgICBkMy5zZWxlY3RBbGwoJ3NwYW4udGVycml0X2xldmVsJykuYXR0cignY2xhc3MnLCAndGVycml0X2xldmVsIHNxdWFyZScpO1xuICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ2NoZWNrZWQnKTtcbiAgICAgICAgY29uc3QgbGV2ZWxfdmFsdWUgPSB0aGlzLmdldEF0dHJpYnV0ZSgndmFsdWUnKTtcbiAgICAgICAgYXBwLmN1cnJlbnRfY29uZmlnLmN1cnJlbnRfbGV2ZWwgPSBsZXZlbF92YWx1ZTtcbiAgICAgICAgdXBkYXRlTWVudVN0dWR5Wm9uZXMoKTtcbiAgICAgICAgZmlsdGVyTGV2ZWxWYXIoYXBwKTtcbiAgICAgICAgcmVzZXRDb2xvcnMoKTtcbiAgICAgICAgbWFwX2VsZW0udXBkYXRlTGV2ZWxSZWdpb24obGV2ZWxfdmFsdWUpO1xuICAgICAgICBtYXBfZWxlbS51bmJpbmRCcnVzaENsaWNrKCk7XG4gICAgICAgIG1hcF9lbGVtLmJpbmRCcnVzaENsaWNrKGNoYXJ0KTtcbiAgICAgICAgY2hhcnQuY2hhbmdlU3R1ZHlab25lKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgLy8gRGlzcGF0Y2ggYSBjbGljayBldmVudCBvbiB0aGUgYXNzb2NpYXRlZCBjaGVja2JveCB3aGVuIHRoZSB0ZXh0IGlzIGNsaWNrZWQ6XG4gIGQzLnNlbGVjdEFsbCgnc3Bhbi5sYWJlbF9jaGsnKVxuICAgIC5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnByZXZpb3VzU2libGluZy5jbGljaygpO1xuICAgIH0pO1xuXG4gIGNvbnN0IGhlYWRlcl9tYXBfc2VjdGlvbiA9IGQzLnNlbGVjdCgnI21hcF9zZWN0aW9uID4gI2hlYWRlcl9tYXAnKTtcblxuICBoZWFkZXJfbWFwX3NlY3Rpb24uc2VsZWN0KCcjaW1nX3JlY3Rfc2VsZWMnKVxuICAgIC5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1nX21hcF96b29tJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWdfbWFwX3NlbGVjdCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICBzdmdfbWFwLm9uKCcuem9vbScsIG51bGwpO1xuICAgICAgICBpZiAobWFwX2VsZW0uYnJ1c2hfbWFwKSB7XG4gICAgICAgICAgc3ZnX21hcC5zZWxlY3QoJy5icnVzaF9tYXAnKS5zdHlsZSgnZGlzcGxheScsIG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIG1hcF9lbGVtLnRhcmdldF9sYXllci5zZWxlY3RBbGwoJ3BhdGgnKS5vbignY2xpY2snLCBudWxsKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICBoZWFkZXJfbWFwX3NlY3Rpb24uc2VsZWN0KCcjaW1nX21hcF96b29tJylcbiAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCF0aGlzLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltZ19yZWN0X3NlbGVjJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWdfbWFwX3NlbGVjdCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICBzdmdfbWFwLmNhbGwobWFwX2VsZW0uem9vbV9tYXApO1xuICAgICAgICBpZiAobWFwX2VsZW0uYnJ1c2hfbWFwKSB7XG4gICAgICAgICAgc3ZnX21hcC5zZWxlY3QoJy5icnVzaF9tYXAnKS5jYWxsKG1hcF9lbGVtLmJydXNoX21hcC5tb3ZlLCBudWxsKTtcbiAgICAgICAgICBzdmdfbWFwLnNlbGVjdCgnLmJydXNoX21hcCcpLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgfVxuICAgICAgICBtYXBfZWxlbS50YXJnZXRfbGF5ZXIuc2VsZWN0QWxsKCdwYXRoJykub24oJ2NsaWNrJywgbnVsbCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgaGVhZGVyX21hcF9zZWN0aW9uLnNlbGVjdCgnI2ltZ19tYXBfc2VsZWN0JylcbiAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCF0aGlzLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltZ19yZWN0X3NlbGVjJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWdfbWFwX3pvb20nKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgc3ZnX21hcC5vbignLnpvb20nLCBudWxsKTtcbiAgICAgICAgaWYgKG1hcF9lbGVtLmJydXNoX21hcCkge1xuICAgICAgICAgIHN2Z19tYXAuc2VsZWN0KCcuYnJ1c2hfbWFwJykuY2FsbChtYXBfZWxlbS5icnVzaF9tYXAubW92ZSwgbnVsbCk7XG4gICAgICAgICAgc3ZnX21hcC5zZWxlY3QoJy5icnVzaF9tYXAnKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgIH1cbiAgICAgICAgbWFwX2VsZW0udGFyZ2V0X2xheWVyLnNlbGVjdEFsbCgncGF0aCcpXG4gICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICBjaGFydC5oYW5kbGVDbGlja01hcChkLCB0aGlzKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICBoZWFkZXJfbWFwX3NlY3Rpb24uc2VsZWN0KCcjem9vbV9pbicpXG4gICAgLm9uKCdjbGljaycsIHpvb21DbGljayk7XG5cbiAgaGVhZGVyX21hcF9zZWN0aW9uLnNlbGVjdCgnI3pvb21fb3V0JylcbiAgICAub24oJ2NsaWNrJywgem9vbUNsaWNrKTtcblxuICBpZiAoIW1hcF9lbGVtLmJydXNoX21hcCkge1xuICAgIGlmIChjaGFydC5oYW5kbGVDbGlja01hcCkge1xuICAgICAgbWFwX2VsZW0udGFyZ2V0X2xheWVyLnNlbGVjdEFsbCgncGF0aCcpXG4gICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgIGNoYXJ0LmhhbmRsZUNsaWNrTWFwKGQsIHRoaXMpO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWFwX2VsZW0udGFyZ2V0X2xheWVyLnNlbGVjdEFsbCgncGF0aCcpXG4gICAgICAgIC5vbignY2xpY2snLCBudWxsKTtcbiAgICB9XG4gIH1cblxuICBiaW5kVG9wQnV0dG9ucyhjaGFydCwgbWFwX2VsZW0pO1xufVxuXG4vKipcbiogRnVuY3Rpb24gdG8gaGFuZGxlIGNsaWNrIG9uIHRoZSB0b3AgbWVudSwgaW4gb3JkZXIgdG8gY2hvb3NlXG4qIHRoZSBraW5kIG9mIGF2YWlsYWJsZXMgcmVwcmVzZW50YXRpb25cbipcbiogQHBhcmFtIHtPYmplY3R9IGNoYXJ0IC1cbiogQHBhcmFtIHtPYmplY3R9IG1hcF9lbGVtIC1cbiogQHJldHVybiB7dm9pZH1cbiovXG5leHBvcnQgZnVuY3Rpb24gYmluZFRvcEJ1dHRvbnMoY2hhcnQsIG1hcF9lbGVtKSB7XG4gIGQzLnNlbGVjdEFsbCgnLnR5cGVfY2hhcnQnKVxuICAgIC5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJykpIHJldHVybjtcbiAgICAgIC8vIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkgcmV0dXJuO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnR5cGVfY2hhcnQuc2VsZWN0ZWQnKS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xuICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xuICAgICAgY2hhcnQucmVtb3ZlKCk7XG4gICAgICBjaGFydCA9IG51bGw7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgIHVuYmluZFVJKCk7XG4gICAgICBtYXBfZWxlbS5yZXNldFpvb20oKTtcbiAgICAgIGFwcC5jb2xvcnMgPSB7fTtcbiAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJyk7XG4gICAgICBpZiAodmFsdWUgPT09ICdCYXJDaGFydDEnKSB7XG4gICAgICAgIGNoYXJ0ID0gbmV3IEJhckNoYXJ0MShhcHAuY3VycmVudF9kYXRhKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICBiaW5kVUlfY2hhcnQoY2hhcnQsIG1hcF9lbGVtKTtcbiAgICAgICAgbWFwX2VsZW0uYmluZEJydXNoQ2xpY2soY2hhcnQpO1xuICAgICAgICBjaGFydC5iaW5kTWFwKG1hcF9lbGVtKTtcbiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICdTY2F0dGVyUGxvdDInKSB7XG4gICAgICAgIGNoYXJ0ID0gbmV3IFNjYXR0ZXJQbG90MihhcHAuY3VycmVudF9kYXRhKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICBiaW5kVUlfY2hhcnQoY2hhcnQsIG1hcF9lbGVtKTtcbiAgICAgICAgbWFwX2VsZW0uYmluZEJydXNoQ2xpY2soY2hhcnQpO1xuICAgICAgICBjaGFydC5iaW5kTWFwKG1hcF9lbGVtKTtcbiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICdSYWRhckNoYXJ0MycpIHtcbiAgICAgICAgY2hhcnQgPSBuZXcgUmFkYXJDaGFydDMoYXBwLmN1cnJlbnRfZGF0YSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgYmluZFVJX2NoYXJ0KGNoYXJ0LCBtYXBfZWxlbSk7XG4gICAgICAgIG1hcF9lbGVtLmJpbmRCcnVzaENsaWNrKGNoYXJ0KTtcbiAgICAgICAgY2hhcnQuYmluZE1hcChtYXBfZWxlbSk7XG4gICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSAnU2ltaWxhcml0eTFwbHVzJykge1xuICAgICAgICBjaGFydCA9IG5ldyBTaW1pbGFyaXR5MXBsdXMoYXBwLmN1cnJlbnRfZGF0YSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgYmluZFVJX2NoYXJ0KGNoYXJ0LCBtYXBfZWxlbSk7XG4gICAgICAgIG1hcF9lbGVtLmJpbmRCcnVzaENsaWNrKGNoYXJ0KTtcbiAgICAgICAgY2hhcnQuYmluZE1hcChtYXBfZWxlbSk7XG4gICAgICB9XG4gICAgICBhcHAuY2hhcnQgPSBjaGFydDtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gYmluZEhlbHBNZW51KCkge1xuICBjb25zdCBoZWxwX2J1dHRvbnNfdmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lbnVfdmFyaWFibGVzJykucXVlcnlTZWxlY3RvckFsbCgnc3Bhbi5pX2luZm8nKTtcbiAgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoaGVscF9idXR0b25zX3ZhcikuZm9yRWFjaCgoYnRuX2kpID0+IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICBidG5faS5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgY29kZV92YXJpYWJsZSA9IHRoaXMucHJldmlvdXNTaWJsaW5nLnByZXZpb3VzU2libGluZy5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJyk7XG4gICAgICBjb25zdCBvID0gdmFyaWFibGVzX2luZm8uZmluZChkID0+IGQuaWQgPT09IGNvZGVfdmFyaWFibGUpO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5ldy1jYXBcbiAgICAgIGNvbnN0IG1vZGFsID0gbmV3IHRpbmdsZS5tb2RhbCh7XG4gICAgICAgIHN0aWNreUZvb3RlcjogZmFsc2UsXG4gICAgICAgIGNsb3NlTWV0aG9kczogWydvdmVybGF5JywgJ2J1dHRvbicsICdlc2NhcGUnXSxcbiAgICAgICAgY2xvc2VMYWJlbDogJ0Nsb3NlJyxcbiAgICAgICAgb25PcGVuKCkge1xuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi50aW5nbGUtbW9kYWwudGluZ2xlLW1vZGFsLS12aXNpYmxlJykuc3R5bGUuYmFja2dyb3VuZCA9ICdyZ2JhKDAsMCwwLDAuNCknO1xuICAgICAgICB9LFxuICAgICAgICBvbkNsb3NlKCkge1xuICAgICAgICAgIG1vZGFsLmRlc3Ryb3koKTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgbW9kYWwuc2V0Q29udGVudChcbiAgICAgICAgYDxwIHN0eWxlPVwiZm9udC1mYW1pbHk6ICdTaWduaWthJyxzYW5zLXNlcmlmO2NvbG9yOiAjNGY4MWJkO2ZvbnQtc2l6ZTogMS4zcmVtO1wiPkRlc2NyaXB0aW9uIGRlIGwnaW5kaWNhdGV1cjwvcD5cbiAgICAgICAgPHAgc3R5bGU9XCJmb250LWZhbWlseTogJ1NpZ25pa2EnLHNhbnMtc2VyaWY7dGV4dC1hbGlnbjoganVzdGlmeTtcIj4ke28ubWV0aG9kby5zcGxpdCgnXFxuJykuam9pbignPGJyPicpfTwvcD5cbiAgICAgICAgPHAgc3R5bGU9XCJmb250LWZhbWlseTogJ1NpZ25pa2EnLHNhbnMtc2VyaWY7Zm9udC1zaXplOiAwLjhlbVwiPiR7by5zb3VyY2V9PC9wPlxuICAgICAgICA8cCBzdHlsZT1cImZvbnQtZmFtaWx5OiAnU2lnbmlrYScsc2Fucy1zZXJpZjtmb250LXNpemU6IDAuOGVtXCI+RGF0ZSBkZSB0w6lsw6ljaGFyZ2VtZW50IGRlIGxhIGRvbm7DqWUgOiAke28ubGFzdF91cGRhdGV9PC9wPmApO1xuICAgICAgbW9kYWwub3BlbigpO1xuICAgIH07XG4gIH0pO1xuXG4gIGNvbnN0IGhlbHBzX2J1dHRvbnNfc3R1ZHlfem9uZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZW51X3N0dWR5em9uZScpLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NwYW4uaV9pbmZvJyk7XG4gIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGhlbHBzX2J1dHRvbnNfc3R1ZHlfem9uZSkuZm9yRWFjaCgoYnRuX2kpID0+IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICBidG5faS5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgZmlsdGVyX25hbWUgPSB0aGlzLnByZXZpb3VzU2libGluZy5wcmV2aW91c1NpYmxpbmcuZ2V0QXR0cmlidXRlKCdmaWx0ZXItdmFsdWUnKTtcbiAgICAgIGNvbnN0IG8gPSBzdHVkeV96b25lcy5maW5kKGQgPT4gZC5pZCA9PT0gZmlsdGVyX25hbWUpO1xuXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbmV3LWNhcFxuICAgICAgY29uc3QgbW9kYWwgPSBuZXcgdGluZ2xlLm1vZGFsKHtcbiAgICAgICAgc3RpY2t5Rm9vdGVyOiBmYWxzZSxcbiAgICAgICAgY2xvc2VNZXRob2RzOiBbJ292ZXJsYXknLCAnYnV0dG9uJywgJ2VzY2FwZSddLFxuICAgICAgICBjbG9zZUxhYmVsOiAnQ2xvc2UnLFxuICAgICAgICBvbk9wZW4oKSB7XG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LnRpbmdsZS1tb2RhbC50aW5nbGUtbW9kYWwtLXZpc2libGUnKS5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JnYmEoMCwwLDAsMC40KSc7XG4gICAgICAgIH0sXG4gICAgICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgICAgbW9kYWwuZGVzdHJveSgpO1xuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBtb2RhbC5zZXRDb250ZW50KFxuICAgICAgICBgPHAgc3R5bGU9XCJmb250LWZhbWlseTogJ1NpZ25pa2EnLHNhbnMtc2VyaWY7Y29sb3I6ICM0ZjgxYmQ7Zm9udC1zaXplOiAxLjNyZW07XCI+TcOpdGhvZG9sb2dpZTwvcD5cbiAgICAgICAgPHAgc3R5bGU9XCJmb250LWZhbWlseTogJ1NpZ25pa2EnLHNhbnMtc2VyaWY7dGV4dC1hbGlnbjoganVzdGlmeTtcIj4ke2ZpbHRlcl9uYW1lfTwvcD5cbiAgICAgICAgPHAgc3R5bGU9XCJmb250LWZhbWlseTogJ1NpZ25pa2EnLHNhbnMtc2VyaWY7dGV4dC1hbGlnbjoganVzdGlmeTtcIj4ke28ubWV0aG9kb2xvZ3kuc3BsaXQoJ1xcbicpLmpvaW4oJzxicj4nKX08L3A+XG4gICAgICAgIGApO1xuICAgICAgbW9kYWwub3BlbigpO1xuICAgIH07XG4gIH0pO1xuXG4gIGNvbnN0IGhlbHBzX2J1dHRvbnNfdGVycml0X3VuaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVudV90ZXJyaXRfbGV2ZWwnKS5xdWVyeVNlbGVjdG9yQWxsKCdzcGFuLmlfaW5mbycpO1xuICBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChoZWxwc19idXR0b25zX3RlcnJpdF91bml0KS5mb3JFYWNoKChidG5faSkgPT4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIGJ0bl9pLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCB0ZXJyaXRfbGV2ZWxfbmFtZSA9IHRoaXMucHJldmlvdXNTaWJsaW5nLnByZXZpb3VzU2libGluZy5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJyk7XG4gICAgICBjb25zdCBvID0gdGVycml0b3JpYWxfbWVzaC5maW5kKGQgPT4gZC5pZCA9PT0gdGVycml0X2xldmVsX25hbWUpO1xuXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbmV3LWNhcFxuICAgICAgY29uc3QgbW9kYWwgPSBuZXcgdGluZ2xlLm1vZGFsKHtcbiAgICAgICAgc3RpY2t5Rm9vdGVyOiBmYWxzZSxcbiAgICAgICAgY2xvc2VNZXRob2RzOiBbJ292ZXJsYXknLCAnYnV0dG9uJywgJ2VzY2FwZSddLFxuICAgICAgICBjbG9zZUxhYmVsOiAnQ2xvc2UnLFxuICAgICAgICBvbk9wZW4oKSB7XG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2LnRpbmdsZS1tb2RhbC50aW5nbGUtbW9kYWwtLXZpc2libGUnKS5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JnYmEoMCwwLDAsMCwwLjQpJztcbiAgICAgICAgfSxcbiAgICAgICAgb25DbG9zZSgpIHtcbiAgICAgICAgICBtb2RhbC5kZXN0cm95KCk7XG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIG1vZGFsLnNldENvbnRlbnQoYFxuICAgICAgICA8cCBzdHlsZT1cImZvbnQtZmFtaWx5OiAnU2lnbmlrYScsc2Fucy1zZXJpZjsgY29sb3I6ICM0ZjgxYmQ7Zm9udC1zaXplOiAxLjNyZW07XCI+VGl0cmU8L3A+XG4gICAgICAgIDxwIHN0eWxlPVwiZm9udC1mYW1pbHk6ICdTaWduaWthJyxzYW5zLXNlcmlmO3RleHQtYWxpZ246IGp1c3RpZnk7XCI+JHt0ZXJyaXRfbGV2ZWxfbmFtZX08L3A+XG4gICAgICAgIDxwIHN0eWxlPVwiZm9udC1mYW1pbHk6ICdTaWduaWthJyxzYW5zLXNlcmlmO3RleHQtYWxpZ246IGp1c3RpZnk7XCI+JHtvLm1ldGhvZG9sb2d5LnNwbGl0KCdcXG4nKS5qb2luKCc8YnI+Jyl9PC9wPlxuICAgICAgICBgKTtcbiAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICB9O1xuICB9KTtcbn1cblxuZnVuY3Rpb24gbG9hZERhdGEoKSB7XG4gIGQzLnF1ZXVlKDQpXG4gICAgLmRlZmVyKGQzLmNzdiwgJ2RhdGEvUkVHSU9WSVpfREFUQS5jc3YnKVxuICAgIC5kZWZlcihkMy5qc29uLCAnZGF0YS9DR0VUX251dHNfYWxsMzAzNS5nZW9qc29uJylcbiAgICAuZGVmZXIoZDMuanNvbiwgJ2RhdGEvYm9yZGVyczMwMzUuZ2VvanNvbicpXG4gICAgLmRlZmVyKGQzLmpzb24sICdkYXRhL2NvdW50cmllczMwMzUuZ2VvanNvbicpXG4gICAgLmRlZmVyKGQzLmpzb24sICdkYXRhL2NvdW50cmllcy1yZW1vdGUzMDM1Lmdlb2pzb24nKVxuICAgIC5kZWZlcihkMy5qc29uLCAnZGF0YS9jb2FzdHMzMDM1Lmdlb2pzb24nKVxuICAgIC5kZWZlcihkMy5qc29uLCAnZGF0YS9jb2FzdHMtcmVtb3RlMzAzNS5nZW9qc29uJylcbiAgICAuZGVmZXIoZDMuanNvbiwgJ2RhdGEvY3lwcnVzX25vbl9lc3Bvbl9zcGFjZTMwMzUuZ2VvanNvbicpXG4gICAgLmRlZmVyKGQzLmpzb24sICdkYXRhL2NvdW50cmllcy1yZW1vdGUtYm91bmRhcmllczMwMzUuZ2VvanNvbicpXG4gICAgLmRlZmVyKGQzLmpzb24sICdkYXRhL2ZyYW1lMzAzNS5nZW9qc29uJylcbiAgICAuZGVmZXIoZDMuanNvbiwgJ2RhdGEvYm94ZXMzMDM1Lmdlb2pzb24nKVxuICAgIC5kZWZlcihkMy5qc29uLCAnZGF0YS9saW5lMzAzNS5nZW9qc29uJylcbiAgICAuZGVmZXIoZDMuY3N2LCAnZGF0YS9pbmRpY2F0ZXVyc19tZXRhLmNzdicpXG4gICAgLmF3YWl0QWxsKChlcnJvciwgcmVzdWx0cykgPT4ge1xuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnbG9hZGluZycpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNwaW5uZXInKS5yZW1vdmUoKTtcbiAgICAgIGFwcC5yYXRpb1RvV2lkZSA9IGdldFJhdGlvVG9XaWRlKCk7XG4gICAgICBjb25zdCBbXG4gICAgICAgIGZ1bGxfZGF0YXNldCwgbnV0cywgYm9yZGVycywgY291bnRyaWVzLCBjb3VudHJpZXNfcmVtb3RlLFxuICAgICAgICBjb2FzdHMsIGNvYXN0c19yZW1vdGUsIGN5cHJ1c19ub25fZXNwb25fc3BhY2UsXG4gICAgICAgIGNvdW50cmllc19yZW1vdGVfYm91bmRhcmllcywgZnJhbWUsIGJveGVzLCBsaW5lLCBtZXRhZGF0YV9pbmRpY2F0ZXVycyxcbiAgICAgIF0gPSByZXN1bHRzO1xuICAgICAgYWxlcnRpZnkuc2V0KCdub3RpZmllcicsICdwb3NpdGlvbicsICdib3R0b20tbGVmdCcpO1xuICAgICAgcHJlcGFyZVZhcmlhYmxlc0luZm8obWV0YWRhdGFfaW5kaWNhdGV1cnMpO1xuICAgICAgLy8gVE9ETyA6IFJlb3JkZXIgaXQgaW4gdGhlIGRhdGFzZXQgOlxuICAgICAgbGV0IGZlYXR1cmVzX21lbnUgPSBmdWxsX2RhdGFzZXQuZmlsdGVyKGZ0ID0+IGZ0LlJFR0lPVklaID09PSAnMScpO1xuICAgICAgZmVhdHVyZXNfbWVudSA9IGZlYXR1cmVzX21lbnUuc2xpY2UoMCwgMSkuY29uY2F0KFxuICAgICAgICBmZWF0dXJlc19tZW51LnNsaWNlKDYpKS5jb25jYXQoZmVhdHVyZXNfbWVudS5zbGljZSgxLCA2KSk7XG4gICAgICBjb25zdCBzdGFydF9yZWdpb24gPSBnZXRSYW5kb20oZmVhdHVyZXNfbWVudS5tYXAoZCA9PiBkLmlkKSwgMTIpO1xuICAgICAgY29uc3Qgc3RhcnRfdmFyaWFibGUgPSBnZXRSYW5kb20oXG4gICAgICAgIFsnUkVWTUVOJywgJ0NIT00xNTc0JywgJ0NIT00xNTI0J10pO1xuICAgICAgcHJlcGFyZV9kYXRhc2V0KGZ1bGxfZGF0YXNldCwgYXBwKTtcbiAgICAgIHNldERlZmF1bHRDb25maWcoc3RhcnRfcmVnaW9uLCBzdGFydF92YXJpYWJsZSwgJ04xJyk7XG4gICAgICBwcmVwYXJlR2VvbUxheWVySWQobnV0cywgYXBwLmN1cnJlbnRfY29uZmlnLmlkX2ZpZWxkX2dlb20pO1xuICAgICAgY3JlYXRlTWVudShmZWF0dXJlc19tZW51LCB2YXJpYWJsZXNfaW5mby5maWx0ZXIoZCA9PiBkLmdyb3VwKSwgc3R1ZHlfem9uZXMsIHRlcnJpdG9yaWFsX21lc2gpO1xuICAgICAgdXBkYXRlTWVudVN0dWR5Wm9uZXMoKTtcbiAgICAgIGJpbmRIZWxwTWVudSgpO1xuICAgICAgbWFrZVRvcE1lbnUoKTtcbiAgICAgIG1ha2VIZWFkZXJDaGFydCgpO1xuICAgICAgbWFrZUhlYWRlck1hcFNlY3Rpb24oKTtcbiAgICAgIHNldERlZmF1bHRDb25maWdNZW51KHN0YXJ0X3JlZ2lvbiwgc3RhcnRfdmFyaWFibGUsICdOMScpO1xuICAgICAgZmlsdGVyTGV2ZWxWYXIoYXBwKTtcbiAgICAgIGNvbnN0IG90aGVyX2xheWVycyA9IG5ldyBNYXAoW1xuICAgICAgICBbJ2JvcmRlcnMnLCBib3JkZXJzXSwgWydib3hlcycsIGJveGVzXSxcbiAgICAgICAgWydjb3VudHJpZXMnLCBjb3VudHJpZXNdLCBbJ2NvdW50cmllc19yZW1vdGUnLCBjb3VudHJpZXNfcmVtb3RlXSxcbiAgICAgICAgWydjb2FzdHMnLCBjb2FzdHNdLCBbJ2NvYXN0c19yZW1vdGUnLCBjb2FzdHNfcmVtb3RlXSxcbiAgICAgICAgWydjeXBydXNfbm9uX2VzcG9uX3NwYWNlJywgY3lwcnVzX25vbl9lc3Bvbl9zcGFjZV0sXG4gICAgICAgIFsnY291bnRyaWVzX3JlbW90ZV9ib3VuZGFyaWVzJywgY291bnRyaWVzX3JlbW90ZV9ib3VuZGFyaWVzXSxcbiAgICAgICAgWydmcmFtZScsIGZyYW1lXSwgWydsaW5lJywgbGluZV0sIFsnYm94ZXMyJywgYm94ZXNdLFxuICAgICAgXSk7XG4gICAgICBjb25zdCBtYXBfZWxlbSA9IG5ldyBNYXBTZWxlY3QobnV0cywgb3RoZXJfbGF5ZXJzKTtcbiAgICAgIGNvbnN0IGNoYXJ0ID0gbmV3IEJhckNoYXJ0MShhcHAuY3VycmVudF9kYXRhKTtcbiAgICAgIG1ha2VTb3VyY2VTZWN0aW9uKCk7XG4gICAgICBiaW5kVUlfY2hhcnQoY2hhcnQsIG1hcF9lbGVtKTtcbiAgICAgIG1hcF9lbGVtLmJpbmRCcnVzaENsaWNrKGNoYXJ0KTtcbiAgICAgIGNoYXJ0LmJpbmRNYXAobWFwX2VsZW0pO1xuICAgICAgYXBwLmNoYXJ0ID0gY2hhcnQ7XG4gICAgfSk7XG59XG5cbmxvYWREYXRhKCk7XG5cbmNvbnN0IGdldFJhdGlvVG9XaWRlID0gKCkgPT4ge1xuICBpZiAod2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDE1NjFweCknKS5tYXRjaGVzKSB7XG4gICAgcmV0dXJuIDE1NTAgLyAxMzUwO1xuICB9IGVsc2UgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiAxMzYxcHgpIGFuZCAobWF4LXdpZHRoOiAxNTYwcHgpJykubWF0Y2hlcykge1xuICAgIHJldHVybiAxMzUwIC8gMTM1MDtcbiAgfSBlbHNlIGlmICh3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogMTE2MXB4KSBhbmQgKG1heC13aWR0aDogMTM2MHB4KScpLm1hdGNoZXMpIHtcbiAgICByZXR1cm4gMTE1MCAvIDEzNTA7XG4gIH0gZWxzZSBpZiAod2luZG93Lm1hdGNoTWVkaWEoJyhtaW4td2lkdGg6IDk2MHB4KSBhbmQgKG1heC13aWR0aDogMTE2MHB4KScpLm1hdGNoZXMpIHtcbiAgICByZXR1cm4gOTYwIC8gMTM1MDtcbiAgfSBlbHNlIGlmICh3aW5kb3cubWF0Y2hNZWRpYSgnKG1heC13aWR0aDogOTU5cHgpJykubWF0Y2hlcykge1xuICAgIHJldHVybiA1NDAgLyAxMzUwO1xuICB9XG4gIHJldHVybiAxMzUwIC8gMTM1MDtcbn07XG5cbndpbmRvdy5vbnJlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgcHJldmlvdXNfcmF0aW8gPSBhcHAucmF0aW9Ub1dpZGU7XG4gIGNvbnN0IG5ld19yYXRpbyA9IGdldFJhdGlvVG9XaWRlKCk7XG4gIGlmIChwcmV2aW91c19yYXRpbyA9PT0gbmV3X3JhdGlvKSByZXR1cm47XG4gIGFwcC5yYXRpb1RvV2lkZSA9IG5ld19yYXRpbztcbiAgY29uc3QgY2hhcnRfc2NhbGVfdmFsdWUgPSBuZXdfcmF0aW8gLyBhcHAuY2hhcnREcmF3UmF0aW87XG4gIGQzLnNlbGVjdCgnI3N2Z19iYXInKS5hdHRyKCdoZWlnaHQnLCBgJHs1MDAgKiBhcHAucmF0aW9Ub1dpZGV9cHhgKTtcbiAgZDMuc2VsZWN0KCcjc3ZnX2JhciA+IGcuY29udGFpbmVyJykuYXR0cigndHJhbnNmb3JtJywgYHNjYWxlKCR7Y2hhcnRfc2NhbGVfdmFsdWV9KWApO1xuXG4gIGNvbnN0IGJib3hfc3ZnID0gc3ZnX21hcC5ub2RlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGNvbnN0IHdpZHRoX21hcCA9ICtiYm94X3N2Zy53aWR0aDtcbiAgY29uc3QgaGVpZ2h0X21hcCA9IHdpZHRoX21hcCAqICgxIC8gUkFUSU9fV0hfTUFQKTtcbiAgY29uc3QgbWFwX3NjYWxlX3ZhbHVlID0gbmV3X3JhdGlvIC8gYXBwLm1hcERyYXdSYXRpbztcbiAgc3ZnX21hcC5hdHRyKCdoZWlnaHQnLCBgJHtoZWlnaHRfbWFwfXB4YCk7XG4gIHN2Z19tYXAuc2VsZWN0KCcjbGF5ZXJzJykuYXR0cigndHJhbnNmb3JtJywgYHNjYWxlKCR7bWFwX3NjYWxlX3ZhbHVlfSlgKTtcbiAgc3ZnX21hcC5zZWxlY3QoJy5icnVzaF9tYXAnKS5hdHRyKCd0cmFuc2Zvcm0nLCBgc2NhbGUoJHttYXBfc2NhbGVfdmFsdWV9KWApO1xuICBkMy5zZWxlY3QoJyNzdmdfbGVnZW5kJykuYXR0cigndHJhbnNmb3JtJywgYHNjYWxlKCR7bWFwX3NjYWxlX3ZhbHVlfSlgKTtcbn07XG4iXSwibmFtZXMiOlsiZGVmaW5lIiwidGhpcyIsImNvbG9yX2NvdW50cmllcyIsImNvbG9yX2Rpc2FibGVkIiwiY29sb3Jfc3VwIiwiY29sb3JfaW5mIiwiY29sb3JfaGlnaGxpZ2h0IiwiY29sb3JfZGVmYXVsdF9kaXNzaW0iLCJNQVhfVkFSSUFCTEVTIiwiUkFUSU9fV0hfTUFQIiwibWF0aF9hYnMiLCJNYXRoIiwiYWJzIiwibWF0aF9yb3VuZCIsInJvdW5kIiwibWF0aF9tYXgiLCJtYXgiLCJtYXRoX3NpbiIsInNpbiIsIm1hdGhfY29zIiwiY29zIiwibWF0aF9zcXJ0Iiwic3FydCIsIkhBTEZfUEkiLCJQSSIsInByZXBhcmVUb29sdGlwMiIsInBhcmVudCIsImJlZm9yZSIsImNsYXNzbmFtZSIsInQiLCJzZWxlY3QiLCJub2RlIiwidG9vbHRpcCIsImluc2VydCIsImF0dHIiLCJzdHlsZSIsImFwcGVuZCIsInVuYmluZFVJIiwic2VsZWN0QWxsIiwib24iLCJyZW1vdmUiLCJvbmtleXVwIiwib25rZXlkb3duIiwiY29tcCIsInRlc3RfdmFsdWUiLCJyZWZfdmFsdWUiLCJzZXJpZV9pbnZlcnNlZCIsImNvbXAyIiwidmFsMSIsInZhbDIiLCJyZWZfdmFsMSIsInJlZl92YWwyIiwieEludmVyc2VkIiwieUludmVyc2VkIiwiUmVjdCIsInRvcGxlZnQiLCJib3R0b21yaWdodCIsInhtaW4iLCJ4bWF4IiwieW1pbiIsInltYXgiLCJwdCIsIlByb3BTaXplciIsImZpeGVkX3ZhbHVlIiwiZml4ZWRfc2l6ZSIsInNtYXgiLCJzY2FsZSIsInZhbCIsImdldF92YWx1ZSIsInBvdyIsInNpemUiLCJyZW1vdmVEdXBsaWNhdGVzIiwiYXJyIiwidG1wIiwiaSIsImxlbl9hcnIiLCJsZW5ndGgiLCJpbmRleE9mIiwicHVzaCIsImdldFN2Z1BhdGhUeXBlIiwicGF0aCIsInN2Z1BhdGhUb0Nvb3JkcyIsInR5cGVfcGF0aCIsInNsaWNlIiwic3BsaXQiLCJtYXAiLCJhIiwiY29tcHV0ZVBlcmNlbnRpbGVSYW5rIiwib2JqIiwiZmllbGRfbmFtZSIsInJlc3VsdF9maWVsZF9uYW1lIiwidmFsdWVzIiwiZCIsImxlbl92YWx1ZXMiLCJnZXRQUiIsInYiLCJjb3VudCIsIml4IiwiX2dldFBSIiwic2VyaWUiLCJnZXRNZWFuIiwibmJfdmFsdWVzIiwic3VtIiwiZXVjbGlkaWFuX2Rpc3RhbmNlIiwiZmVhdHVyZTEiLCJmZWF0dXJlMiIsImdlb21ldHJ5IiwiY29vcmRpbmF0ZXMiLCJ4MSIsInkxIiwieDIiLCJ5MiIsImIiLCJzZWxlY3RGaXJzdEF2YWlsYWJsZVZhciIsIm1lbnUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJhZGQiLCJnZXRBdHRyaWJ1dGUiLCJwcmVwYXJlR2VvbUxheWVySWQiLCJsYXllciIsImlkX2ZpZWxkIiwiZmVhdHVyZXMiLCJmb3JFYWNoIiwiZnQiLCJpZCIsInByb3BlcnRpZXMiLCJnZXRSYW5kb20iLCJmYWxzZV9sZW5ndGgiLCJyYW5kb20iLCJjcmVhdGVNZW51IiwibmFtZXMiLCJ2YXJpYWJsZXMiLCJzdHVkeV96b25lcyIsInRlcnJpdG9yaWFsX21lc2giLCJ0aXRsZV9zZWN0aW9uMSIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJpbm5lckhUTUwiLCJzZWN0aW9uMSIsIm92ZXJmbG93IiwiaGVpZ2h0IiwibGVuX2kiLCJuYW1lIiwiZW50cnkiLCJhcHBlbmRDaGlsZCIsInRpdGxlX3NlY3Rpb24yIiwic2VjdGlvbjIiLCJncm91cHNfdmFyIiwiZ3JvdXAiLCJmaWx0ZXIiLCJncF9uYW1lIiwiZGl2X2dycCIsImRpc3BsYXkiLCJ2YXJfbmFtZXMiLCJqIiwibGVuX2oiLCJuYW1lX3ZhciIsImNvZGVfdmFyIiwic3ViX2VudHJ5IiwidGl0bGVfc2VjdGlvbjMiLCJzZWN0aW9uMyIsIm1heEhlaWdodCIsInpvbmUiLCJkaXNwbGF5X2xldmVsIiwidGl0bGVfc2VjdGlvbjQiLCJzZWN0aW9uNCIsInRlcnJpdF9sZXZlbCIsImdldEVsZW1lbnRCeUlkIiwiZmxvYXQiLCJtYWtlVG9wTWVudSIsInRvcF9tZW51IiwiZDMiLCJzdHlsZXMiLCJ3aWR0aF9sZWZ0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwid2lkdGgiLCJ3aWR0aF9jZW50cmFsX2NoYXJ0Iiwid2lkdGhfbWFwIiwiYXR0cnMiLCJjbGFzcyIsImh0bWwiLCJ0eXBlX2NoYXJ0IiwicG9zaXRpb24iLCJ2YWx1ZSIsInJlc3NlbWJsYW5jZSIsIm1ha2VIZWFkZXJNYXBTZWN0aW9uIiwiaGVhZGVyX21hcF9zZWN0aW9uIiwidGl0bGUiLCJjb21wbGV0dWRlX3NlY3Rpb24iLCJ0ZXh0IiwibWFrZUhlYWRlckNoYXJ0IiwiaGVhZGVyX2Jhcl9zZWN0aW9uIiwibWFyZ2luIiwiY29sdW1ucyIsIk9iamVjdCIsImtleXMiLCJhcHAiLCJjdXJyZW50X2RhdGEiLCJjb250ZW50Iiwiam9pbiIsImMiLCJlbGVtIiwic2V0QXR0cmlidXRlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiYm9keSIsImNsaWNrIiwicmVtb3ZlQ2hpbGQiLCJtb2RhbCIsInRpbmdsZSIsImJhY2tncm91bmQiLCJkZXN0cm95Iiwic2V0Q29udGVudCIsIm9wZW4iLCJoZWxwX21lc3NhZ2UiLCJjaGFydCIsImdldEhlbHBNZXNzYWdlIiwicHJlcGFyZV9kYXRhc2V0IiwiZnVsbF9kYXRhc2V0IiwiZmVhdHVyZV9uYW1lcyIsImZpbHRlckxldmVsVmFyIiwiY3VycmVudF9jb25maWciLCJudW0iLCJkZW51bSIsInJhdGlvIiwiY3VycmVudF9sZXZlbCIsImZpbHRlcl9rZXkiLCJuYW1lX2ZpZWxkIiwibXlfcmVnaW9uIiwiYWxsX3ZhcmlhYmxlcyIsImNvbmNhdCIsInRlbXAiLCJBcnJheSIsIm15X2NhdGVnb3J5IiwicHJvcHNfZmVhdHVyZSIsImZpbHRlckxldmVsR2VvbSIsIm51dHNfZmVhdHVyZXMiLCJwcmVwYXJlVmFyaWFibGVzSW5mbyIsIm1ldGFkYXRhX2luZGljYXRldXJzIiwiUmVnaW92aXpfaXRlbSIsImlkMSIsImlkMiIsIk5hbWUiLCJwYXJzZUludCIsIlllYXIiLCJVbml0IiwiVGhlbWUiLCJNZXRob2RvbG9neSIsIkRhdGFfc291cmNlIiwiTGFzdF91cGRhdGUiLCJGb3JtdWxhIiwibWV0aG9kb2xvZ3kiLCJhcHBseUZpbHRlciIsImZpbHRlcl90eXBlIiwidW5kZWZpbmVkIiwiY29sb3JzIiwiY2hhbmdlUmVnaW9uIiwiaWRfcmVnaW9uIiwibWFwX2VsZW0iLCJteV9yZWdpb25fcHJldHR5X25hbWUiLCJjb21wdXRlRGlzdE1hdCIsImdldFVuaXRzV2l0aGluIiwicHJvcGVydHkiLCJhZGRWYXJpYWJsZSIsImNvZGVfcmF0aW8iLCJ2YXJpYWJsZV9pbmZvIiwidmFyaWFibGVzX2luZm8iLCJyYXRpb19wcmV0dHlfbmFtZSIsInJhdGlvX3VuaXQiLCJ1bml0IiwicmVtb3ZlVmFyaWFibGUiLCJzcGxpY2UiLCJyZXNldFZhcmlhYmxlcyIsImNvZGVzX3JhdGlvIiwibGVuIiwiY2FsY0NvbXBsZXR1ZGVTdWJzZXQiLCJ2YXJzIiwib3V0cHV0IiwiZmluZCIsInRvdGFsX2xlbmd0aCIsInJhdGlvX25hbWUiLCJldmVyeSIsImZpbHRlcmVkX2xlbmd0aCIsImNhbGNQb3BDb21wbGV0dWRlU3Vic2V0IiwicG9wX2ZpZWxkIiwidG90YWxfcG9wIiwiaXNOYU4iLCJzdWJzZXRfcG9wIiwicG9wIiwic3ZnX21hcCIsImJib3hfc3ZnIiwiaGVpZ2h0X21hcCIsImZpbGwiLCJzdHJva2UiLCJ0YXJnZXQiLCJwcm9qZWN0aW9uIiwiZ2V0X2Jib3hfbGF5ZXJfcGF0aCIsImJib3hfbGF5ZXIiLCJJbmZpbml0eSIsImVhY2giLCJiYm94X3BhdGgiLCJib3VuZHMiLCJmaXRMYXllciIsInRyYW5zbGF0ZSIsInMiLCJtYXBfem9vbWVkIiwidHJhbnNmb3JtIiwiZXZlbnQiLCJfX3pvb20iLCJrIiwieCIsInkiLCJsYXllcnMiLCJ0cmFuc2l0aW9uIiwiZHVyYXRpb24iLCJpbnRlcnBvbGF0ZVpvb20iLCJub2RlX3N2Z19tYXAiLCJ6b29tVHJhbnNmb3JtIiwidHdlZW4iLCJpVHJhbnNsYXRlIiwiaW50ZXJwb2xhdGUiLCJpU2NhbGUiLCJ0X3ZhbHVlIiwiX3QiLCJ6b29tQ2xpY2siLCJkaXJlY3Rpb24iLCJmYWN0b3IiLCJjZW50ZXIiLCJ2aWV3IiwidGFyZ2V0X3pvb20iLCJ0cmFuc2xhdGUwIiwibCIsInByZXZlbnREZWZhdWx0IiwibWFrZU1hcExlZ2VuZCIsImxlZ2VuZF9lbGVtcyIsInRyYW5zbGF0ZVkiLCJyZWN0X3NpemUiLCJzcGFjaW5nIiwibGdkX2hlaWdodCIsIm9mZnNldCIsImdycF9sZ2QiLCJsZWdlbmRzIiwiZGF0YSIsImVudGVyIiwidHgiLCJ0eSIsImNvbG9yIiwiZWxlbXMiLCJfZ3JvdXBzIiwibGFzdF9lbGVtIiwiX19kYXRhX18iLCJnZXRMZWdlbmRFbGVtcyIsInR5cGUiLCJNYXBTZWxlY3QiLCJudXRzIiwib3RoZXJfbGF5ZXJzIiwibWFwRHJhd1JhdGlvIiwicmF0aW9Ub1dpZGUiLCJnZW9JZGVudGl0eSIsImZpdEV4dGVudCIsImdldCIsInJlZmxlY3RZIiwiZ2VvUGF0aCIsInpvb21fbWFwIiwiem9vbSIsInNjYWxlRXh0ZW50IiwidHJhbnNsYXRlRXh0ZW50IiwiY2FsbCIsImxheWVyX2xpc3QiLCJuX2xheWVyIiwibmFtZV9seXIiLCJzdHlsZV9sYXllciIsInRhcmdldF9sYXllciIsIl9wdHMiLCJwYXJlbnRFbGVtZW50IiwiYmluZFRvb2x0aXBzIiwibmV3X3NlbGVjdGlvbiIsInNlbGVjdGlvbiIsImV4aXQiLCJyZXNldENvbG9ycyIsInNlbGYiLCJsZWZ0IiwicGFnZVgiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwicGFnZVkiLCJjdXJyZW50X2lkcyIsInpvb21JZGVudGl0eSIsImJydXNoX21hcCIsIm1vdmUiLCJoYW5kbGVDbGlja01hcCIsImhhbmRsZV9icnVzaF9tYXAiLCJicnVzaCIsImV4dGVudCIsImVsZW1lbnRzRnJvbVBvaW50IiwiZSIsImJhc2VWYWwiLCJuZXdfY2xpY2tfZXZlbnQiLCJNb3VzZUV2ZW50IiwiY2xpZW50WCIsImNsaWVudFkiLCJkaXNwYXRjaEV2ZW50IiwiZGlzdF9rbSIsImRpc3QiLCJkaXN0X3RvX215X3JlZ2lvbiIsInByb3RvdHlwZSIsIm5iX2Z0IiwibXlfcmVnaW9uX2dlb20iLCJteV9yZWdpb25fY2VudHJvaWQiLCJ0dXJmIiwiY2VudHJvaWQiLCJyZXN1bHRfZGlzdCIsIm1ha2VTb3VyY2VTZWN0aW9uIiwiZm9udFNpemUiLCJpbnNlcnRCZWZvcmUiLCJwYWRkaW5nTGVmdCIsInRvcCIsIlRhYmxlUmVzdW1lU3RhdCIsInN1bW1hcnlfZmVhdHVyZXMiLCJvcHRpb25zIiwiZG9jIiwibmJfZmVhdHVyZXMiLCJjb2x1bW5fbmFtZXMiLCJuYl9jb2x1bW5zIiwiY29udGFpbmVyX2RpdiIsIm15VGFibGUiLCJoZWFkZXJzIiwidGFibGVfYm9keSIsImhlYWRlcnNfcm93IiwiY2VsbCIsInJvdyIsImNvbF9uYW1lIiwiYWRkRmVhdHVyZSIsInN1bW1hcnkiLCJpZF92YXJpYWJsZSIsInJvd3MiLCJDb21wbGV0dWRlU2VjdGlvbiIsImNvbXBsZXR1ZGVfcG9wdWxhdGlvbiIsImNvbXBsZXR1ZGVfZmVhdHVyZXMiLCJvbmNsaWNrIiwidmFsdWVfZmVhdHVyZXMiLCJ2YWx1ZV9wb3AiLCJzdmdfYmFyIiwicmlnaHQiLCJib3R0b20iLCJtYXJnaW4yIiwiaGVpZ2h0MiIsInN2Z19jb250YWluZXIiLCJuYkZ0IiwiY3VycmVudF9yYW5nZV9icnVzaCIsImN1cnJlbnRfcmFuZ2UiLCJkaXNwbGF5ZWQiLCJ1cGRhdGVEaW1lbnNpb25zIiwiZ2V0TWVhblJhbmsiLCJtZWFuX3ZhbHVlIiwicmF0aW9fdG9fdXNlIiwibWVhbl9yYW5rIiwic29ydCIsIkJhckNoYXJ0MSIsInJlZl9kYXRhIiwiYnJ1c2hlZCIsInNvdXJjZUV2ZW50IiwibG9nIiwicmFuZ2UiLCJkb21haW4iLCJ1cGRhdGUiLCJ1cGRhdGVDb250ZXh0IiwiYnJ1c2hfdG9wIiwiYnJ1c2hlZF90b3AiLCJfZm9jdXMiLCJkM19ldmVudCIsInNldFRpbWVvdXQiLCJyZW1vdmVSZWN0QnJ1c2giLCJyZXNldF9zdGF0ZV9idXR0b24iLCJ1cGRhdGVNYXBSZWdpbyIsImRldGFpbCIsImNoYXJ0RHJhd1JhdGlvIiwibmJfdmFyIiwic2NhbGVCYW5kIiwicGFkZGluZyIsInNjYWxlTGluZWFyIiwieEF4aXMiLCJheGlzQm90dG9tIiwieEF4aXMyIiwieUF4aXMiLCJheGlzTGVmdCIsImF2YWlsYWJsZV9yYXRpb3MiLCJjdXJyZW50X3JhbmtzIiwiZm9jdXMiLCJjb250ZXh0IiwiYnJ1c2hfYm90dG9tIiwiYnJ1c2hYIiwiZHgiLCJkeSIsImdfYmFyIiwiZ19icnVzaF90b3AiLCJnX2JydXNoX2JvdHRvbSIsImdyb3VwZV9saW5lX21lYW4iLCJ1cGRhdGVNaW5pQmFycyIsImNvbnRleHRfbGVmdF9oYW5kbGUiLCJjb250ZXh0X3JpZ2h0X2hhbmRsZSIsImNvbXBsZXR1ZGUiLCJrZXkiLCJzZWxlY192YXIiLCJjb2RlX3ZhcmlhYmxlIiwibmFtZV92YXJpYWJsZSIsInllYXIiLCJtYXRjaCIsInVuaXRfeWVhciIsInJlcGxhY2UiLCJjaGFuZ2VWYXJpYWJsZSIsImNoYW5nZVN0dWR5Wm9uZSIsInVwZGF0ZUNvbXBsZXR1ZGUiLCJtZW51X3NlbGVjdGlvbiIsInNlbGVjdEJlbG93TWVhbiIsInNlbGVjdEJlbG93TXlSZWdpb24iLCJzZWxlY3RBYm92ZU1lYW4iLCJzZWxlY3RBYm92ZU15UmVnaW9uIiwibWFrZVRhYmxlU3RhdCIsIm1pbiIsIl8iLCJiYXIiLCJiYW5kd2lkdGgiLCJ0b19kaXNwbGF5IiwiYXhpc194IiwibWluaV9iYXJzIiwibXlfcmFuayIsImxhc3RfbWFwX3NlbGVjdGlvbiIsInJlY3QiLCJwdHMiLCJuYl9wdHMiLCJpZHMiLCJyYW5rcyIsImMxIiwiYzIiLCJ1cGRhdGVUYWJsZVN0YXRzIiwidXBkYXRlTGVnZW5kIiwiZ3JwX21lYW4iLCJtaW5fc2VyaWUiLCJtYXhfc2VyaWUiLCJ1cGRhdGVNZWFuVmFsdWUiLCJkaXNwYXRjaCIsInRhYmxlX3N0YXRzIiwidW5iaW5kQnJ1c2hDbGljayIsImRpc3BsYXlMZWdlbmQiLCJyZW1vdmVBbGwiLCJwcmVwYXJlVGFibGVTdGF0IiwibWVkaWFuIiwiZmVhdHVyZSIsImNvbnRleHRNZW51IiwiaXRlbXMiLCJzZXRJdGVtcyIsIml0ZW0iLCJhY3Rpb24iLCJuYl9pdGVtcyIsImFkZEl0ZW0iLCJzdG9wUHJvcGFnYXRpb24iLCJET01vYmoiLCJoaWRlTWVudSIsImluaXRNZW51Iiwic2Nyb2xsVG9wIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJsaXN0IiwibmJfaXRlbSIsIlNjYXR0ZXJQbG90MiIsInVwZGF0ZUxpZ2h0IiwicmFuZ2VfeCIsImludmVydCIsInJhbmdlX3kiLCJyZXZlcnNlIiwidDEiLCJ0MiIsInZhcmlhYmxlMSIsInZhcmlhYmxlMiIsInJhbmtfdmFyaWFibGUxIiwicmFua192YXJpYWJsZTIiLCJyZWZfdmFsdWUxIiwicmVmX3ZhbHVlMiIsInVuaXQxIiwidW5pdDIiLCJwcmV0dHlfbmFtZTEiLCJwcmV0dHlfbmFtZTIiLCJyZXMiLCJuaWNlIiwidGlja3MiLCJ5QXhpczIiLCJwbG90Iiwic2NhdHRlciIsIm1ha2VHcmlkIiwibWVhbl92YXJpYWJsZTEiLCJtZWFuX3ZhcmlhYmxlMiIsIm9wYWNpdHkiLCJwcmVwYXJlVGl0bGVBeGlzIiwiY2FsbEJydXNoIiwiY2hhcnRfdHlwZSIsImJpbmRNZW51IiwidGlja1NpemUiLCJ0aWNrRm9ybWF0IiwibWVudVgiLCJDb250ZXh0TWVudSIsIm1lbnVZIiwiaXRlbXNYIiwiY2hhbmdlVmFyaWFibGVYIiwiaXRlbXNZIiwiY2hhbmdlVmFyaWFibGVZIiwiYmJveCIsInNob3dNZW51IiwiZGVmYXVsdF9jb2xvciIsImRvdHMiLCJzZXJpZV94Iiwic2VyaWVfeSIsInVwZGF0ZUF4aXNHcmlkIiwidmFsdWUxIiwidmFsdWUyIiwid2l0aF9yYW5rIiwieW9mZnNldCIsInRtcF9teV9yZWdpb24iLCJ1cGRhdGVJdGVtc0N0eE1lbnUiLCJ1cGRhdGVUYWJsZVN0YXQiLCJ2YXJfaW5mbyIsIm5ld192YXJfeCIsIm5ld192YXJfeSIsIm1lYW4xIiwibWVhbjIiLCJ2YWx1ZXMxIiwidmFsdWVzMiIsImFkZEZlYXR1cmVzIiwid3JhcCIsIl90ZXh0IiwiX3dpZHRoIiwid29yZHMiLCJsaW5lSGVpZ2h0IiwicGFyc2VGbG9hdCIsImxpbmUiLCJsaW5lTnVtYmVyIiwidHNwYW4iLCJ3b3JkIiwiZ2V0Q29tcHV0ZWRUZXh0TGVuZ3RoIiwiYXJyYXkiLCJmcm9tIiwidG8iLCJzd2FwIiwiaXgxIiwiaXgyIiwicHJlcGFyZV9kYXRhX3JhZGFyX2RlZmF1bHQiLCJ2X215X3JlZ2lvbiIsIm9qYl9teV9yZWdpb24iLCJfdiIsImF4ZXMiLCJwcmVwYXJlX2RhdGFfcmFkYXJfZnQiLCJmdF92YWx1ZXMiLCJSYWRhckNoYXJ0MyIsImNmZyIsInNjYWxlT3JkaW5hbCIsInNjaGVtZUNhdGVnb3J5MTAiLCJvcHRzX2tleSIsImludmVyc2VkQXhpcyIsIlNldCIsImciLCJ3IiwiaCIsInByZXBhcmVEYXRhIiwiZHJhd0F4aXNHcmlkIiwiZHJhd0FyZWEiLCJhbGxvd0ludmVyc2VEYXRhIiwiaW52ZXJzZV9kYXRhIiwiZmllbGQiLCJkYXRhX2xlbmd0aCIsImF4IiwiYXhpcyIsIm5fYXhpcyIsIkpTT04iLCJzdHJpbmdpZnkiLCJhbGxBeGlzIiwiRXJyb3IiLCJoYXMiLCJjb2xvcnNfaW5fdXNlIiwib25fYXhlcyIsImlkX215X3JlZ2lvbiIsImlpIiwiZGlzcGxheWVkX2lkcyIsImJsb2JXcmFwcGVyIiwicmFkYXJMaW5lIiwib3BhY2l0eUFyZWEiLCJmdF9pZCIsImNsb25lZCIsImNsb25lTm9kZSIsInN0cm9rZVdpZHRoIiwiZG90UmFkaXVzIiwiclNjYWxlIiwiYW5nbGVTbGljZSIsImJsb2JDaXJjbGVXcmFwcGVyIiwiY3giLCJjeSIsIkZvcm1hdCIsInJhbmtfdmFyaWFibGVzIiwibWF4VmFsdWUiLCJ0b3RhbCIsInJhZGl1cyIsImZvcm1hdCIsInJhZGlhbExpbmUiLCJjdXJ2ZSIsInJvdW5kU3Ryb2tlcyIsImN1cnZlQ2FyZGluYWxDbG9zZWQiLCJjdXJ2ZUxpbmVhckNsb3NlZCIsImFuZ2xlIiwibGFiZWxDbGlja2VkIiwibmV3X2l4IiwibGFiZWxDdHhNZW51IiwibGFiZWwiLCJkZWxldGUiLCJheGlzR3JpZCIsImxldmVscyIsIm9wYWNpdHlDaXJjbGVzIiwibGFiZWxGYWN0b3IiLCJ3cmFwV2lkdGgiLCJmZU1lcmdlIiwidXBkYXRlX2F4aXMiLCJ1cGRhdGVfYmxvYldyYXBwZXIiLCJjaXJjbGUiLCJ1cGRhdGVfYmxvYkNpcmNsZVdyYXBwZXIiLCJpbnZpc2libGVDaXJjbGUiLCJvbGRfbXlfcmVnaW9uIiwib3RoZXJfZmVhdHVyZXMiLCJhZGRfZWxlbWVudCIsImFsbF92YWx1ZXMiLCJ3YXJuaW5nIiwiX2QiLCJTaW1pbGFyaXR5MXBsdXMiLCJyYXRpb3MiLCJudW1zIiwiaGlnaGxpZ2h0X3NlbGVjdGlvbiIsInByb3BvcnRpb25uYWxfc3ltYm9scyIsImRyYXdfZ3JvdXAiLCJhcHBseVNlbGVjdGlvbiIsInNlbGVjdGlvbl9jbG9zZSIsInNlY3Rpb24iLCJmb3IiLCJuYiIsInJlZHVjZSIsImVsIiwicmFuayIsInJlbW92ZUxpbmVzIiwibmJfdmFyaWFibGVzIiwiaGVpZ2h0X3RvX3VzZSIsInNlbGVjdG9yX3JhdGlvX25hbWUiLCJudW1fbmFtZSIsIm15X3JlZ2lvbl92YWx1ZSIsInJhdGlvX3ZhbHVlcyIsImxheWVyX290aGVyIiwibGF5ZXJfaGlnaGxpZ2h0ZWQiLCJfbWluIiwiX21heCIsImRpc3RfYXhpcyIsIm1hcmdpbl9taW5fbWF4Iiwic2l6ZV9mdW5jIiwieFNjYWxlIiwiYnViYmxlczEiLCJ4X3ZhbHVlIiwiYnViYmxlczIiLCJtYWtlVG9vbHRpcHMiLCJfaWQiLCJpZF90b19yZW1vdmUiLCJkaXNwbGF5TGluZSIsInJhdGlvX24iLCJ1bml0X3JhdGlvIiwibnVtX24iLCJvIiwidW5pdF9udW0iLCJjb2VmIiwiZm9ybXVsYSIsImNvb3JkcyIsImRhdHVtIiwiYXNzaWduIiwiYXBwbHljaGFuZ2UiLCJjaGVja2VkIiwic2V0RGVmYXVsdENvbmZpZyIsImNvZGUiLCJ2YXJpYWJsZSIsInNldERlZmF1bHRDb25maWdNZW51IiwibGV2ZWwiLCJ1cGRhdGVNZW51U3R1ZHlab25lcyIsInVwZGF0ZUF2YWlsYWJsZVJhdGlvcyIsImRhdGFfbXlfZmVhdHVyZSIsImxpbmVzIiwibmJfbGluZXMiLCJuZXh0U2libGluZyIsIm5ld192YXIiLCJuZXdfdmFyX25hbWVzIiwidXBkYXRlQXZhaWxhYmxlQ2hhcnRzIiwidXBkYXRlTXlDYXRlZ29yeVNlY3Rpb24iLCJiaW5kVUlfY2hhcnQiLCJpbnB1dF9lbGVtIiwicmVtb3ZlQXR0cmlidXRlIiwib2xkX25iX3ZhciIsIm5ld19uYl92YXIiLCJ1cGRhdGVDaGFuZ2VSZWdpb24iLCJncm91cF92YXIiLCJ0aXRsZV9hcnJvdyIsImxldmVsX3ZhbHVlIiwidXBkYXRlTGV2ZWxSZWdpb24iLCJiaW5kQnJ1c2hDbGljayIsInByZXZpb3VzU2libGluZyIsImJpbmRUb3BCdXR0b25zIiwicmVzZXRab29tIiwiYmluZE1hcCIsImJpbmRIZWxwTWVudSIsImhlbHBfYnV0dG9uc192YXIiLCJidG5faSIsIm1ldGhvZG8iLCJzb3VyY2UiLCJsYXN0X3VwZGF0ZSIsImhlbHBzX2J1dHRvbnNfc3R1ZHlfem9uZSIsImZpbHRlcl9uYW1lIiwiaGVscHNfYnV0dG9uc190ZXJyaXRfdW5pdCIsInRlcnJpdF9sZXZlbF9uYW1lIiwibG9hZERhdGEiLCJxdWV1ZSIsImRlZmVyIiwiY3N2IiwianNvbiIsImF3YWl0QWxsIiwiZXJyb3IiLCJyZXN1bHRzIiwiZ2V0UmF0aW9Ub1dpZGUiLCJib3JkZXJzIiwiY291bnRyaWVzIiwiY291bnRyaWVzX3JlbW90ZSIsImNvYXN0cyIsImNvYXN0c19yZW1vdGUiLCJjeXBydXNfbm9uX2VzcG9uX3NwYWNlIiwiY291bnRyaWVzX3JlbW90ZV9ib3VuZGFyaWVzIiwiZnJhbWUiLCJib3hlcyIsInNldCIsImZlYXR1cmVzX21lbnUiLCJSRUdJT1ZJWiIsInN0YXJ0X3JlZ2lvbiIsInN0YXJ0X3ZhcmlhYmxlIiwiaWRfZmllbGRfZ2VvbSIsIk1hcCIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwib25yZXNpemUiLCJwcmV2aW91c19yYXRpbyIsIm5ld19yYXRpbyIsImNoYXJ0X3NjYWxlX3ZhbHVlIiwibWFwX3NjYWxlX3ZhbHVlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxFQUFFLE9BQU9BLFNBQU0sRUFBRUEsU0FBTSxDQUFDLEdBQUcsQ0FBQ0EsU0FBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEFBQXlCLGNBQWMsQ0FBQyxDQUFDLEVBQUUsQUFBYSxDQUFBLENBQUMsQ0FBQ0MsY0FBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFBLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFBLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMscUJBQXFCLENBQUMsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLDBCQUEwQixDQUFDLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLDJCQUEyQixDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFBLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLDBCQUEwQixDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFBLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFBLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsYUFBYSxHQUFHLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLG1CQUFtQixDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsbUJBQW1CLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsTUFBTSxDQUFDLG1CQUFtQixDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxlQUFlLENBQUMsV0FBVyxDQUFDLGdCQUFnQixDQUFDLGFBQWEsQ0FBQyxlQUFlLENBQUMsZ0JBQWdCLENBQUMscUJBQXFCLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLHVCQUF1QixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsR0FBRyxVQUFVLEVBQUUsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxDQUFDLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsa0NBQWtDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxjQUFj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QyxTQUFTLEdBQUcsU0FBUyxDQUFDLE1BQU0sR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDOzs7Z0JBRzdELFFBQVEsQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUM7OztnQkFHM0MsUUFBUSxDQUFDLEtBQUssR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQztnQkFDekMsUUFBUSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQztnQkFDNUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQztnQkFDNUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUMsUUFBUSxHQUFHLFNBQVMsQ0FBQyxNQUFNLEdBQUcsU0FBUyxDQUFDLElBQUksR0FBRyxTQUFTLENBQUMsTUFBTSxHQUFHLFNBQVMsQ0FBQyxZQUFZLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQzs7O2dCQUduSyxRQUFRLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQztnQkFDcEIsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztnQkFDaEQsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQzs7O2dCQUcvQyxRQUFRLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztnQkFDdkIsUUFBUSxDQUFDLFFBQVEsQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUM7Z0JBQzVELFFBQVEsQ0FBQyxRQUFRLENBQUMsR0FBRyxHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQztnQkFDL0QsUUFBUSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQyxH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
